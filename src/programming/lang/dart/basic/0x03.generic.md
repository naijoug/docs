---
title: 泛型编程
icon: hashtag

index: true

---

<!-- more -->

## 泛型函数

```dart
T firstElement<T>(List<T> list) {
  if (list.isEmpty) {
    throw ArgumentError('List is empty!');
  }
  return list[0];
}

void main() {
  var numbers = [1, 2, 3];
  print(firstElement(numbers)); // 1

  var strings = ['apple', 'banana', 'cherry'];
  print(firstElement(strings)); // apple
}
```

## 泛型类

```dart
// 声明一个泛型类 Stack<T>
class Stack<T> {
  final List<T> _items = [];

  // 推入元素
  void push(T item) {
    _items.add(item);
  }

  // 弹出元素
  T pop() {
    return _items.removeLast();
  }
}

void main() {
  // 创建一个只能存储整型的栈
  var intStack = Stack<int>();
  intStack.push(1);
  intStack.push(2);
  print(intStack.pop()); // 2

  // 创建一个只能存储字符串的堆栈
  var stringStack = Stack<String>();
  stringStack.push('Hello');
  print(stringStack.pop()); // Hello
}
```

## 泛型约束

```dart
abstract class Animal {
  void eat();
}

class Dog implements Animal {
  @override
  void eat() {
    print('Dog is eating.');
  }
}

// extends: 约束泛型类
// 动物园类，约束类型必须实现 Animal 抽象类
class Zoo<T extends Animal> {
  final T animal;
  Zoo(this.animal);
  
  void feed() {
    animal.eat();
  }
}

void main() {
  var dog = Dog();
  var zoo = Zoo<Dog>(dog);
  zoo.feed(); // Dog is eating.
}
```