---
title: å¸ƒå±€
icon: hashtag

index: true

---

<!-- more -->

## reference

- [ğŸ’¯](âœ…)[æ·±å…¥ç†è§£ Flutter å¸ƒå±€çº¦æŸ](https://flutter.cn/docs/ui/layout/constraints)

## å¸ƒå±€çº¦æŸè§„åˆ™

  - `Constraints go down. Sizes go up. Positions are set by parents.`

    * `Constraints go down.`: çº¦æŸå‘ä¸‹ä¼ é€’
      > çˆ¶çº§ `Widget` å‘å­çº§ `Widget` ä¸‹å‘çº¦æŸæ¡ä»¶ï¼Œè¿™äº›æ¡ä»¶åŒ…å«äº†å®½åº¦å’Œé«˜åº¦çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚

    * `Sizes go up.`: å¤§å°å‘ä¸ŠæŠ¥å‘Š
      > å­çº§ `Widget` ä¼šæ ¹æ®è‡ªèº«å±æ€§å’Œçˆ¶çº§ä¸‹å‘çš„çº¦æŸæ¡ä»¶ç¡®å®šè‡ªèº«çš„å¤§å°ï¼Œç„¶åå°†ç¡®å®šçš„ç»“æœå‘ä¸Šè¿”å›ç»™çˆ¶çº§ `Widget`ã€‚

    * `Positions are set by parents.`: çˆ¶çº§è®¾ç½®ä½ç½®
      > çˆ¶çº§ `Widget` åœ¨ç¡®å®šäº†å­çº§ `Widget` çš„å¤§å°åï¼Œä¼šå†³å®šå­çº§ `Widget` çš„ä½ç½®ã€‚çˆ¶çº§ `Widget` ä¼šæ ¹æ®è‡ªèº«çš„å¸ƒå±€ç­–ç•¥å’Œå¸ƒå±€è¡¨ç°å†³å®šå­çº§ `Widget` çš„æ”¾ç½®ä½ç½®ã€‚

  - `Tight` vs `loose`

    * `Tight`: ä¸¥æ ¼çº¦æŸã€‚é™åˆ¶äº† `Widget` çš„æœ€å¤§å®½åº¦å’Œæœ€å¤§é«˜åº¦ï¼Œ`Widget` çš„å¤§å°åªèƒ½åœ¨ä¸€å®šçš„èŒƒå›´å†…å˜åŠ¨ã€‚
      > å¯¹äºæŸäº›éœ€è¦ç²¾ç¡®æ§åˆ¶å¤§å°çš„ `Widget`ï¼ˆä¾‹å¦‚ï¼ŒæŒ‰é’®æˆ–è¾“å…¥æ¡†ï¼‰ï¼Œä¸¥æ ¼çº¦æŸå¾€å¾€æ›´ä¸ºåˆé€‚ã€‚

    * `Loose`: å®½æ¾çº¦æŸã€‚ä¸º `Widget` æä¾›äº†æ›´å¤§çš„å°ºå¯¸è°ƒæ•´ç©ºé—´ï¼Œåªé™åˆ¶äº† `Widget` çš„æœ€å°å®½åº¦å’Œæœ€å°é«˜åº¦ï¼Œå…è®¸ `Widget` è‡ªç”±åœ°å¢å¤§å…¶å°ºå¯¸ã€‚
      > è¿™åœ¨éœ€è¦ `Widget` å°½å¯èƒ½åœ°å ç”¨æ›´å¤šç©ºé—´çš„åœºåˆä¸‹æ›´ä¸ºå¸¸ç”¨ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ª `Widget` å¡«å……å…¶çˆ¶çº§ `Widget` çš„å‰©ä½™ç©ºé—´æ—¶ã€‚

------

## æ¸²æŸ“å¯¹è±¡ç»„ä»¶

### Widget
  > æŠ½è±¡ç±»

### RenderObjectWidget
  > æŠ½è±¡ç±»ï¼Œç»§æ‰¿äº `Widget`ã€‚

### LeafRenderObjectWidget
  > æŠ½è±¡äº†ï¼Œç»§æ‰¿äº `RenderObjectWidget`ï¼Œç”¨äºå¶å­ç»„ä»¶ã€‚

### SingleChildRenderObjectWidget
  > æŠ½è±¡ç±»ï¼Œç»§æ‰¿äº `RenderObjectWidget`ï¼Œç”¨äºæ¸²æŸ“å•ä¸ªå­ç»„ä»¶ã€‚

### MultiChildRenderObjectWidget
  > æŠ½è±¡ç±»ï¼Œç»§æ‰¿äº `RenderObjectWidget`ï¼Œç”¨äºæ¸²æŸ“å¤šä¸ªå­ç»„ä»¶ã€‚

------

## å¸ƒå±€ç»„ä»¶

### CustomSingleChildLayout

```dart

```

### CustomMultiChildLayout

```dart

```

------

## å¼¹æ€§å¸ƒå±€
  > `Flexbox` å¸ƒå±€ï¼Œæ ¹æ®çˆ¶å®¹å™¨çš„å˜åŒ–è‡ªåŠ¨è°ƒæ•´è‡ªå·±å®½é«˜çš„å¸ƒå±€æ–¹å¼ã€‚

### Flex - â€œå¼¹æ€§â€
  > `MultiChildRenderObjectWidget` å®ç°ç±»

- direction : ä¸»è½´æ–¹å‘

```dart
// ç­‰åŒäº Row
Flex(
  direction: Axis.horizontal, // æ¨ªå‘
  children: [...], 
),
// ç­‰åŒäº Column
Flex(
  direction: Axis.vertical, // ç«–å‘
  children: [...], 
),
```

### Row - â€œè¡Œâ€
  > ç»§æ‰¿äº `Flex`ï¼ŒX è½´ - æ°´å¹³å¸ƒå±€ã€‚

```dart
Row(
  children: [...],
),
```

### Column - â€œåˆ—â€
  > ç»§æ‰¿äº `Flex`ï¼ŒY è½´ - å‚ç›´å¸ƒå±€ã€‚

```dart
Column(
  children: [...],
),
```

### Wrap - â€œæ¢è¡Œâ€
  > æµå¼å¸ƒå±€ï¼Œå…ˆ `Row` å† `Column`ï¼Œä»å·¦å¾€å³ï¼Œä»ä¸Šå¾€ä¸‹ï¼Œçš„é¡ºåºä¾æ¬¡å¸ƒå±€ã€‚

```dart
Wrap(
  children: [...],
),
```

### Flexible - â€œæœ‰å¼¹æ€§çš„â€
  > æ§åˆ¶å­ç»„ä»¶æŒ‰ç…§å¼¹æ€§è§„åˆ™å¸ƒå±€

  - flex : å¼¹æ€§æƒé‡ (å¤šä¸ªå¼¹æ€§ç»„ä»¶æŒ‰ç…§æƒé‡æ¯”ä¾‹åˆ†é…å®½åº¦)
  - fit : é€‚é…è§„åˆ™ (FlexFit)

  > FlexFit

  - tight : æ”¶ç´§(ä¼šå æ»¡å¸ƒå±€ç©ºé—´)
  - loose : å®½æ¾(ä¸ä¼šå æ»¡å¸ƒå±€ç©ºé—´)

```dart
// æŒ‰ç…§ 1:2:3 çš„æ¯”ä¾‹åˆ’åˆ†ç©ºé—´
Row(
  chilrend: [
    Flexible(flex: 1, child: ...),
    Flexible(flex: 2, child: ...),
    Flexible(flex: 3, child: ...),
  ]
),
```

### Expaneded - â€œæ‰©å±•â€
  > ç»§æ‰¿äº `Flexible`ï¼Œæ‰©å±•å¡«æ»¡å¯ç”¨åŒºåŸŸï¼Œç­‰æ•ˆäº `tight` æ¨¡å¼çš„ `Flexible`ã€‚ 

```dart
// æŒ‰ç…§ 1:2:3 çš„æ¯”ä¾‹åˆ’åˆ†ç©ºé—´
Row(
  chilrend: [
    Expaneded(flex: 1, child: ...),
    Expaneded(flex: 2, child: ...),
    Expaneded(flex: 3, child: ...),
  ]
),
```

### Spacer - â€œé—´éš”â€
  > ç”¨äºåœ¨å¼¹æ€§å¸ƒå±€ä¸­æ·»åŠ é—´éš”

```dart
Flex(
  children:[
    Text('one'),
    Spacer(),
    Text()
  ]
)
```

> æœ¬è´¨ : `Expanded` + `SizedBox` ç»„åˆå®ç°

```dart
@override
Widget build(BuildContext context) {
  return Expanded(
    flex: flex,
    child: const SizedBox.shrink(),
  );
}
```

------

## å±‚å å¸ƒå±€

### Stack - â€œæ ˆâ€
  > `MultiChildRenderObjectWidget` å®ç°ç±»ï¼ŒZ è½´ - å±‚å å¸ƒå±€ã€‚

```dart

```

### IndexedStack - â€œç´¢å¼•æ ˆâ€
  > å†…éƒ¨å®ç°ç±» `_RawIndexedStack` ç»§æ‰¿äº `Stack`ï¼Œæ˜¾ç¤ºæ ˆå†…æŒ‡å®šç´¢å¼•ç»„ä»¶ã€‚

```dart
IndexedStack(
  index: 1, // æ˜¾ç¤ºæ ˆå†…ç´¢å¼•ä¸º 1 çš„ç»„ä»¶
  children: [
    Center(child: Text('stack 0')),
    Center(child: Text('stack 1')),
    Center(child: Text('stack 2')),
  ],
),
```

### Positioned - â€œç»å¯¹å®šä½â€
  > ä½ç½®ç»„ä»¶ï¼Œç”¨äºæ§åˆ¶å­ç»„ä»¶åœ¨æ ˆä¸­çš„ä½ç½®

- topã€bottomã€leftã€right : å®šä½ç»„ä»¶çš„ä½ç½®
- widthã€height : æ§åˆ¶å­ç»„ä»¶çš„å°ºå¯¸

```dart
Stack(
  children: [
    Positioned( // å®šä½åˆ°å³ä¸‹è§’
      right: 20,
      bottom: 20,
      child: ...,
    ),
  ],
),
```

------

## åŠ¨æ€å¸ƒå±€

### Flow - â€œæµåŠ¨â€

- `delegate`: ä»£ç† (`FlowDelegate`)ï¼Œé€šè¿‡ä»£ç†æ§åˆ¶å¸ƒå±€

> `FlowDelegate` : æµåŠ¨ä»£ç†ï¼Œé€šè¿‡ç»§æ‰¿è¯¥ç±»å®ç°è‡ªå®šä¹‰å¸ƒå±€

```dart

```

