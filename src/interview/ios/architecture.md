---
title: 架构设计
icon: hashtag

index: true
order: 11

---

<!-- more -->

------

## 架构设计

### `AppDelegate` 如何瘦身？

### 从 0 开始做一个项目，你是如何架构思考的？

### _> 设计一个时长统计模块

### 设计一个日志记录模块

### 设计一个网络模块？

::: details 💡

  设计一个网络模块，应该从如下几个方面设计。

  - 功能设计: 分析目前的应用需求、技术栈、预期目标等进行全面的分析，定义网络库的功能（如，数据请求、上传、下载、缓存、安全策略、错误处理等）。

  - 接口设计: 设计易于使用并清晰明了的API。例如设计一个主类，用于处理HTTP请求，此类应包含GET，POST，PUT，DELETE等HTTP方法。并且应该要定义清晰的请求和响应类。
    
  - 线程处理：对于网络请求，一般使用异步队列，以避免阻塞主线程。可以使用 `DispatchQueue` 来进行相关处理。

  - 数据序列化：请求数据的序列化和反序列化。可以使用 `Codable` 来实现数据模型的序列化和反序列化。
    
  - 错误处理：网络请求中会有各种错误可能发生，需要设计合理的错误处理机制，使得错误能被准确捕获并传递给调用者。

  - 安全策略：对于需要保密的数据进行加密处理。如用户凭证，应该使用相应的散列或加密算法进行安全处理。

  - 缓存策略：对于一些频繁请求但不常变动的数据，可以采用合理的缓存策略。可以显著提升应用性能以及减少用户的流量消耗。

  - 测试用例：编写完善的单元测试和集成测试，保证网络库的稳定性和可靠性。

:::

### 设计一个缓存模块？`LRUCache` 算法怎么实现？

### 内存缓存策略有哪些？`NSCache` 使用什么缓存策略？

### 无痕埋点如何实现？你认为理想的无痕埋点应该具备哪些特点？

### 手动埋点、自动化埋点、可视化埋点？

### 持续集成方案

------

## 组件化

### ❓组件化设计思路？

::: details 💡

  组件化：有时也称为“模块化”。将一个大的业务功能，按照不同的功能模块进行拆分。

  拆分原则：类似 `SOLID` 原则。
  * 单一职责原则 : 拆分的功能模块应该尽量做到功能单一。
  * 接口隔离原则 : 功能模块尽量做到对外暴露接口的最小化。

  分层原则：网上有一个借用经典四象限法则来划分(以 **业务相关**、**`UI` 相关** 作为两个轴线，来进行组件化分层)
  * 业务功能层 : 业务有关 & `UI` 有关。用户看到的主要功能页面。
  * 业务逻辑层 : 业务有关 & `UI` 无关。在用户使用业务功能时，背后的处理逻辑。
  * `UI` 层 : 业务无关 & `UI` 有关。通用的 `UI` 页面，不关联具体的业务逻辑。
  * 基础层 : 业务无关 & `UI` 无关。通用的基础功能。

  单向依赖原则：组件之间的依赖关系，应该做到上层依赖下层，下层不要依赖上层。

:::

### ❓下层组件需要调用上层组件怎样处理？

::: details 💡

  方案一：依赖注入方式。下层组件定义好钩子函数，注册时，将上层组件注入下层组件定义好的钩子函数。
  
  方案二：间接访问。通过底层的路由组件，将上层组件注册到路由表中，这样下层组件就可以通过路由间接访问到上层组件。

:::

### 你是如何组件化解耦的？

### `CTMediator`、`MGJRouter` 路由优缺点对比？


## 设计模式

### `iOS` 中的的单例实现？

### 说说单例模式优缺点？苹果设计的类对象是不是单例模式？

### `iOS` 中常用设计模式实践有哪些？

### `M、V、C` 相互通讯规则你知道的有哪些？

### `MVC`、`MVP`、`MVVM`、`Coordinator`

### 单向数据流 (`Redux`、`ReSwift`、`RxFeedback`)
