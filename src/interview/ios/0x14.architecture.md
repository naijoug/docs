---
title: æ¶æ„è®¾è®¡
icon: hashtag

index: true

---

<!-- more -->

------

## æ¶æ„è®¾è®¡

### â“`AppDelegate` å¦‚ä½•ç˜¦èº«

::: details ğŸ’¡

`AppDelegate`æ˜¯iOSåº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹å’Œä¸­å¤®åè°ƒè€…ï¼Œå› æ­¤é€šå¸¸æœ‰è®¸å¤šä»£ç éƒ½ä¼šé›†ä¸­åœ¨æ­¤ã€‚æŒ‰ç…§æœ€åˆçš„è®¾è®¡ï¼Œå®ƒå¤„ç†ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€CoreDataè®¾ç½®ã€æ¨é€é€šçŸ¥ç­‰ã€‚ç„¶è€Œï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œ`AppDelegate`å¯èƒ½ä¼šç§¯ç´¯å¤§é‡çš„ä»£ç ï¼Œå¯¼è‡´å…¶éš¾ä»¥ç†è§£å’Œç»´æŠ¤ã€‚è¿™å°±éœ€è¦å¼€å§‹å¯¹å…¶è¿›è¡Œç˜¦èº«ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç˜¦èº«çš„æ–¹å¼ï¼š

1. ä½¿ç”¨æœåŠ¡ç±»
å¯ä»¥å°†`AppDelegate`ä¸­çš„ä¸€äº›ä»£ç å‰¥ç¦»å‡ºæ¥ï¼Œå»ºç«‹ä¸ºå•ç‹¬çš„æœåŠ¡ç±»ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥å°†å¤„ç†æ¨é€é€šçŸ¥çš„ä»£ç ç§»è‡³ä¸€ä¸ªåä¸º`PushNotificationService`çš„ç±»ä¸­ï¼Œè¿™æ ·ï¼Œ`AppDelegate`åªéœ€è¦ç»´æŠ¤ä¸€ä¸ª`PushNotificationService`çš„å®ä¾‹ï¼Œé€šè¿‡è°ƒç”¨å¯¹åº”æ–¹æ³•è¿›è¡Œæ“ä½œã€‚

2. ä½¿ç”¨ç»„åˆæ–¹å¼
å¦‚æœå¯èƒ½ï¼Œä½¿ç”¨ç»„åˆæ–¹å¼è€Œä¸æ˜¯ç»§æ‰¿ï¼Œå°†å¯¹è±¡çš„ä¸€äº›åŠŸèƒ½æå–ä¸ºå•ç‹¬çš„ç»„ä»¶ï¼Œé¿å…åœ¨AppDelegateä¸­æ·»åŠ è¿‡å¤šçš„ä»£ç ã€‚

3. å¯¹å‡½æ•°è¿›è¡Œé‡æ„
è§‚å¯Ÿæ˜¯å¦æœ‰é‡å¤çš„ä»£ç ï¼Œå¦‚æœæœ‰ï¼Œå°è¯•æå–è¿™äº›ä»£ç ä¸ºæ–°çš„å‡½æ•°ã€‚å°è¯•å°†å¤æ‚å‡½æ•°æ‹†åˆ†ä¸ºå‡ ä¸ªç®€å•å‡½æ•°ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—ä»£ç æ›´åŠ æ¸…æ™°ï¼Œä¹Ÿæœ‰åˆ©äºç†è§£å’Œç»´æŠ¤ã€‚

4. ä½¿ç”¨Coordinator
Coordinatoræ˜¯ä¸€ä¸ªè®¾è®¡æ¨¡å¼ï¼Œå®ƒå¯ä»¥ç”¨æ¥é‡æ„`AppDelegate`çš„ä¸€éƒ¨åˆ†ä»£ç ï¼Œç‰¹åˆ«æ˜¯å…³äºå¯¼èˆªé€»è¾‘çš„ä»£ç ã€‚Coordinatorä¼šå¤„ç†ç¨‹åºçš„å¯åŠ¨ã€æ­£åœ¨è¿è¡Œå’Œè¿›å…¥åå°ç­‰äº‹ä»¶ï¼Œå®ƒä¸`AppDelegate`ä¸€èµ·å·¥ä½œï¼Œä½†æ˜¯ç‹¬ç«‹äºè§†å›¾æ§åˆ¶å™¨å’Œå¯¼èˆªæ§åˆ¶å™¨ã€‚

ä½¿ç”¨ä»¥ä¸Šæ–¹æ³•ï¼Œä½ å¯ä»¥è®©`AppDelegate`ä¿æŒçŸ­å°ç²¾æ‚ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ã€‚å‡½æ•°å’Œå¯¹è±¡çš„ç›¸å…³æ€§ï¼ˆèŒè´£ï¼‰ä¹Ÿä¼šæ›´æ¸…æ™°ã€‚

:::

### â“ä» 0 å¼€å§‹åšä¸€ä¸ªé¡¹ç›®ï¼Œä½ æ˜¯å¦‚ä½•æ¶æ„æ€è€ƒçš„

::: details ğŸ’¡

æ¶æ„ä¸€ä¸ªiOSé¡¹ç›®å¹¶ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹æƒ…ï¼Œå®ƒéœ€è¦è€ƒè™‘å¾ˆå¤šå› ç´ ï¼Œå¦‚é¡¹ç›®çš„éœ€æ±‚ã€å›¢é˜Ÿçš„æŠ€æœ¯èƒŒæ™¯ã€é¡¹ç›®çš„æ—¶é•¿å’Œé¢„æœŸç­‰ã€‚ä»¥ä¸‹æ˜¯æˆ‘æ¶æ„æ€è€ƒçš„å…·ä½“æ­¥éª¤ï¼š

1. ç†è§£éœ€æ±‚ï¼šé¦–å…ˆæˆ‘ä»¬è¦å®Œå…¨ç†è§£é¡¹ç›®çš„éœ€æ±‚ï¼ŒåŒ…æ‹¬ç”¨æˆ·çš„éœ€æ±‚å’ŒæŠ€æœ¯éœ€æ±‚ã€‚ç¡®è®¤é¡¹ç›®çš„ç›®æ ‡ï¼Œåœ¨å¤šå°‘æ—¶é—´å†…éœ€è¦å®Œæˆå“ªäº›åŠŸèƒ½ï¼Œä»¥åŠé¢„æœŸçš„é•¿æœŸç›®æ ‡ã€‚

2. å®šä¹‰æ¶æ„ï¼šåœ¨æ˜ç¡®éœ€æ±‚çš„åŸºç¡€ä¸Šï¼Œå¼€å§‹é€‰æ‹©æˆ–å®šä¹‰é¡¹ç›®çš„æ¶æ„ã€‚å¯ä»¥è€ƒè™‘MVCã€MVVMã€MVPã€VIPERã€RIBsç­‰ã€‚æ¯ç§æ¶æ„æ¨¡å¼æœ‰å…¶ä¼˜ç¼ºç‚¹ï¼Œéœ€è¦æ ¹æ®é¡¹ç›®éœ€æ±‚å’Œå›¢é˜Ÿç†Ÿæ‚‰åº¦è¿›è¡Œé€‰æ‹©ã€‚

3. è®¾å®šæŠ€æœ¯æ ˆï¼šç¡®å®šé¡¹ç›®çš„æŠ€æœ¯æ ˆï¼Œå¦‚ä½¿ç”¨Objective-Cè¿˜æ˜¯Swiftè¿›è¡Œå¼€å‘ã€ä½¿ç”¨RxSwiftè¿˜æ˜¯Combineè¿›è¡Œå“åº”å¼ç¼–ç¨‹ã€ä½¿ç”¨å“ªç§ç¬¬ä¸‰æ–¹åº“ç­‰ã€‚

4. è®¾è®¡æ•°æ®æµï¼šè®¾è®¡åº”ç”¨çš„æ•°æ®æµæ˜¯éå¸¸é‡è¦çš„ä¸€æ­¥ï¼Œå°¤å…¶æ˜¯å¤šäººå¼€å‘çš„é¡¹ç›®ã€‚ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œæ•°æ®æµåº”è¯¥æ˜¯å•å‘çš„ï¼Œå¯é¢„æµ‹çš„ã€‚

5. å®šä¹‰ç›®å½•ç»“æ„ï¼šç¡®å®šä»£ç çš„æ–‡ä»¶å’Œç›®å½•ç»“æ„ï¼Œä½¿ä¹‹æ¸…æ™°æ˜“è¯»ï¼Œä¾¿äºåä½œã€‚UIViewControllerã€UIViewã€Modelã€ViewModelåº”è¯¥å…·æœ‰æ˜ç¡®çš„ç›®å½•åˆ’åˆ†ã€‚

6. è®¾å®šç¼–ç è§„èŒƒï¼šä¸ºå›¢é˜Ÿè®¾å®šä¸€è‡´çš„ç¼–ç è§„èŒƒå’Œæœ€ä½³å®è·µï¼Œå¦‚å‘½åè§„åˆ™ã€ç¼©è¿›æ ·å¼ã€æ³¨é‡Šè§„åˆ™ç­‰ï¼Œä»¥å‡å°‘ä»£ç å®¡æŸ¥çš„éš¾åº¦å’Œæ”¹è¿›ä»£ç è´¨é‡ã€‚

7. é¢„ç•™æ‰©å±•ç‚¹ï¼šé¢„ç•™ä¸€äº›æ‰©å±•ç‚¹ï¼Œä½¿å¾—ä¹‹åå¯ä»¥å®¹æ˜“æ·»åŠ æ–°åŠŸèƒ½æˆ–è€…æ”¹å˜ç°æœ‰çš„å®ç°ã€‚

8. æµ‹è¯•è®¡åˆ’ï¼šä¸ºæ¯ä¸ªæ¨¡å—ç¼–å†™å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼Œç¡®ä¿è½¯ä»¶çš„æ­£ç¡®æ€§å’Œå¯é æ€§ã€‚

9. è‡ªåŠ¨åŒ–å’ŒæŒç»­é›†æˆï¼šæ­å»ºè‡ªåŠ¨åŒ–æµ‹è¯•ã€æŒç»­é›†æˆå’ŒæŒç»­éƒ¨ç½²æµç¨‹ï¼Œä½¿å¾—å¼€å‘æµç¨‹æ›´ä¸ºä¾¿æ·é«˜æ•ˆã€‚

ä»¥ä¸Šè¿™äº›éƒ½æ˜¯åˆæ­¥çš„é«˜å±‚æ€è€ƒï¼Œå®é™…çš„æ¶æ„è¿‡ç¨‹å¯èƒ½è¿˜éœ€è¦è¿­ä»£å’Œä¼˜åŒ–ã€‚éœ€è¦åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå†å»è°ƒæ•´ç»†èŠ‚ã€‚

:::


### â“å¦‚ä½•ç¼–å†™å•å…ƒæµ‹è¯•(ä¾‹å¦‚å®Œæˆäº†ç½‘ç»œæ¨¡å—ï¼Œå¦‚ä½•æµ‹è¯•è¯¥ç½‘ç»œæ¨¡å—ï¼Œæµ‹è¯•ç”¨ä¾‹åº”è¯¥å¦‚ä½•è¦†ç›–)

::: details ğŸ’¡

ç¼–å†™å•å…ƒæµ‹è¯•çš„å…³é”®æ˜¯è¦å»ºç«‹ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒï¼Œåªæµ‹è¯•é‚£ä¸€ä¸ªæ¨¡å—æˆ–è€…ä¸€æ®µä»£ç ï¼Œç¡®ä¿å®ƒçš„è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚

è¿™æ˜¯ä¸€ç§é€æ­¥æ–¹æ³•ï¼Œç”¨äºç¼–å†™å¯èƒ½æ¶µç›–ä½ æåˆ°çš„ç½‘ç»œæ¨¡å—æµ‹è¯•çš„å•å…ƒæµ‹è¯•ã€‚

é¦–å…ˆï¼Œä½ åº”è¯¥äº†è§£ä½ çš„æµ‹è¯•ç¯å¢ƒã€‚å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªæ ‡å‡†çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼ˆå¦‚Pythonçš„unittestï¼ŒJavaScriptçš„Jestæˆ–JAVAçš„JUnitï¼‰ï¼Œé‚£å°±éœ€è¦æŒ‰ç…§è¯¥æ¡†æ¶çš„æ–¹æ³•æ¥ç¼–å†™ä½ çš„æµ‹è¯•ã€‚

ç„¶åï¼Œä¸ºä½ è¦æµ‹è¯•çš„ç½‘ç»œæ¨¡å—ç¼–å†™å„ç§å¯èƒ½æƒ…å†µä¸‹çš„æµ‹è¯•ç”¨ä¾‹ã€‚ä¸‹é¢çš„ä¸€äº›æƒ…å†µå¯èƒ½å€¼å¾—è€ƒè™‘ï¼š

1. æ­£å¸¸æƒ…å†µä¸‹çš„æµ‹è¯•ï¼š
   - æ‰€æœ‰å‚æ•°éƒ½è¢«æ­£ç¡®è®¾ç½®ã€‚
   - æœåŠ¡å™¨è¿”å›200çŠ¶æ€ç ï¼Œè¯·æ±‚çš„æ•°æ®èƒ½å¤Ÿæ­£ç¡®è§£æã€‚

2. é”™è¯¯æƒ…å†µä¸‹çš„æµ‹è¯•ï¼š
   - ä¸€ä¸ªæˆ–å¤šä¸ªå¿…è¦çš„å‚æ•°æœªè¢«è®¾ç½®æˆ–è®¾ç½®é”™è¯¯ã€‚
   - æœåŠ¡å™¨è¿”å›äº†é”™è¯¯çš„çŠ¶æ€ç ã€‚
   - è¿”å›çš„æ•°æ®æ ¼å¼é”™è¯¯ï¼Œæ— æ³•æ­£ç¡®åœ°è§£æã€‚

3. è¾¹ç¼˜æƒ…å†µä¸‹çš„æµ‹è¯•ï¼š
   - å¯¹äºé‚£äº›å¯ä»¥æ¥å—å¤šç§ç±»å‹çš„å‚æ•°ï¼Œè¦å°è¯•æ‰€æœ‰ç±»å‹çš„å€¼ï¼Œå¦‚å­—ç¬¦ä¸²ï¼Œæ•´æ•°ï¼Œç©ºå€¼ç­‰ã€‚
   - è¯·æ±‚è¶…æ—¶æˆ–è€…ç½‘ç»œæ–­å¼€çš„æƒ…å†µã€‚
   
åœ¨å•å…ƒæµ‹è¯•ä¸­ï¼Œä½ å¯èƒ½éœ€è¦æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚çš„è¿”å›ï¼Œè¿™æ ·ä½ å°±å¯ä»¥æ§åˆ¶è¿”å›çš„çŠ¶æ€ç å’Œæ•°æ®ï¼Œä»¥ä¾¿åœ¨æ²¡æœ‰å®é™…ç½‘ç»œè¿æ¥çš„æƒ…å†µä¸‹æµ‹è¯•ä½ çš„ä»£ç ã€‚åœ¨Pythonä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨unittest.mockæ¥å®ç°è¿™ä¸€ç‚¹ï¼Œè€Œåœ¨JavaScriptä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨jest.fn()ã€‚
   
åœ¨ä½¿ç”¨å•å…ƒæµ‹è¯•æ—¶ï¼Œä½ å¸Œæœ›å°½å¯èƒ½å¤šåœ°è¿›è¡Œæµ‹è¯•ï¼Œä½¿æµ‹è¯•è¦†ç›–æ‰€æœ‰å¯èƒ½çš„æƒ…å†µã€‚ä½†æ˜¯ï¼Œå¯èƒ½æœ‰äº›åœ°æ–¹ä½ æ— æ³•æµ‹è¯•ï¼Œæˆ–è€…æµ‹è¯•èµ·æ¥éå¸¸å›°éš¾ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ç¼–ç¨‹äº›é›†æˆæµ‹è¯•æˆ–è€…ç³»ç»Ÿæµ‹è¯•æ¥è¡¥å……ä½ çš„å•å…ƒæµ‹è¯•ã€‚

èŠ±åœ¨å†™æµ‹è¯•ä¸Šçš„æ—¶é—´ç»å¯¹æ˜¯å€¼å¾—çš„ã€‚è™½ç„¶ç¼–å†™æµ‹è¯•ä¼šéœ€è¦ä¸€äº›é¢å¤–çš„æ—¶é—´ï¼Œä½†æ˜¯å®ƒå¯ä»¥è®©ä½ ç«‹å³å‘ç°ä»£ç çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯åœ¨åæœŸæ‰å‘ç°ï¼Œè¿™ä¸ä»…å¯ä»¥æé«˜ä»£ç çš„è´¨é‡ï¼Œè¿˜å¯ä»¥èŠ‚çœå¤§é‡çš„æ—¶é—´ã€‚

:::

### â“å†…å­˜ç¼“å­˜ç­–ç•¥æœ‰å“ªäº›ï¼Œ`NSCache` ä½¿ç”¨ä»€ä¹ˆç¼“å­˜ç­–ç•¥

::: details ğŸ’¡

åœ¨iOSå¼€å‘ä¸­ï¼Œå¸¸è§çš„å†…å­˜ç¼“å­˜ç­–ç•¥æœ‰ä»¥ä¸‹å‡ ç§ï¼š

1. LRUï¼ˆLeast Recently Usedï¼‰æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼šä¸€æ—¦ç¼“å­˜æ»¡äº†ï¼Œæ­¤æ—¶éœ€è¦æ·˜æ±°æœ€ä¹…æ²¡è¢«ä½¿ç”¨çš„æ•°æ®ã€‚

2. FIFOï¼ˆFirst In First Outï¼‰å…ˆè¿›å…ˆå‡ºï¼šä¸€æ—¦ç¼“å­˜æ»¡äº†ï¼Œæ­¤æ—¶éœ€è¦æ·˜æ±°æœ€æ—©è¿›å…¥ç¼“å­˜çš„æ•°æ®ã€‚

3. LFUï¼ˆLeast Frequently Usedï¼‰æœ€ä¸ç»å¸¸ä½¿ç”¨ï¼šä¸€æ—¦ç¼“å­˜æ»¡äº†ï¼Œæ­¤æ—¶éœ€è¦æ·˜æ±°ä½¿ç”¨é¢‘ç‡æœ€å°‘çš„æ•°æ®ã€‚
   
4. Random Replacementï¼ˆRRï¼‰éšæœºæ›¿æ¢ï¼šä¸€æ—¦ç¼“å­˜æ»¡äº†ï¼Œæ­¤æ—¶ä¼šéšæœºæ·˜æ±°ä¸€ä¸ªæ•°æ®ã€‚

å¯¹äº`NSCache`ï¼Œå…¶ç¼“å­˜ç­–ç•¥é‡‡ç”¨çš„æ˜¯LRUã€‚`NSCache`æ˜¯ä¸€ä¸ªå®¹é‡é™åˆ¶çš„é›†åˆï¼Œç”¨æ¥å­˜å‚¨é”®å€¼å¯¹ï¼Œå¹¶ä¸”å½“å†…å­˜ç´§å¼ çš„æ—¶å€™è‡ªåŠ¨å›æ”¶ã€‚å…¶è®¾è®¡ä¸»è¦æ˜¯ä¸ºäº†é¿å…ç¨‹åºä¸ºäº†èŠ‚çœå†…å­˜è€Œå¿…é¡»é‡æ–°è®¡ç®—æˆ–é‡æ–°åŠ è½½çš„æ•°æ®ã€‚

ç‰¹ç‚¹ï¼š
- NSCacheçš„å®ç°æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä¸å¿…åŠ é”å°±å¯ä»¥ä½¿ç”¨å®ƒã€‚
- NSCacheä¼šè‡ªåŠ¨æ ¹æ®ç³»ç»Ÿå†…å­˜æƒ…å†µæ¥ç¼©å‡ç¼“å­˜ï¼Œå½“ç³»ç»Ÿå†…å­˜ç´§å¼ æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç§»é™¤éƒ¨åˆ†ç¼“å­˜æ•°æ®ï¼Œä»¥é‡Šæ”¾å†…å­˜ã€‚
- NSCacheæœ‰ä¸€ä¸ªç‰¹æ€§ï¼Œæ²¡èƒ½è®¾ç½®ä¸€ä¸ªcostå‚æ•°æ¥æ ‡è¯†æŸä¸ªç¼“å­˜çš„æˆæœ¬ï¼Œæ¯”å¦‚å¯ä»¥ä»£è¡¨ä½“ç§¯ï¼Œæ¶ˆè€—çš„å†…å­˜ï¼ŒIOï¼Œé€šå¸¸çš„ä½¿ç”¨åœºæ™¯æ˜¯å›¾ç‰‡çš„ç¼“å­˜ã€‚
- NSCacheä¸­å­˜å‚¨çš„æ•°æ®éƒ½æ˜¯å¼ºå¼•ç”¨ï¼Œä½†æ˜¯ä¸ä¼šé€ æˆå¾ªç¯å¼•ç”¨ã€‚å³å½“ç¼“å­˜æŸä¸ªå¯¹è±¡åï¼Œç¨‹åºä¼šä¿ç•™æ­¤å¯¹è±¡ï¼Œå¹¶ä¸”ä¸ä¼šå°†æ­¤å¯¹è±¡é‡Šæ”¾ã€‚

æ³¨æ„ï¼Œè™½ç„¶ç³»ç»Ÿåœ¨å†…å­˜ç´§å¼ æ—¶ä¼šè‡ªåŠ¨æ¸…ç†NSCacheä¸­çš„å¯¹è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬ä»éœ€è¦è®¾ç½®countLimitå’ŒtotalCostLimitæ¥æ§åˆ¶ç¼“å­˜çš„æ•°é‡å’Œæ€»æˆæœ¬ã€‚

:::

### â“æ— ç—•åŸ‹ç‚¹å¦‚ä½•å®ç°ï¼Œä½ è®¤ä¸ºç†æƒ³çš„æ— ç—•åŸ‹ç‚¹åº”è¯¥å…·å¤‡å“ªäº›ç‰¹ç‚¹

::: details ğŸ’¡

æ— ç—•åŸ‹ç‚¹ï¼Œåˆç§°ä¸ºè‡ªåŠ¨åŸ‹ç‚¹ï¼Œå®ƒé€šè¿‡åŠ¨æ€çš„æ–¹å¼ï¼Œè¿›è¡Œç”¨æˆ·è¡Œä¸ºå’Œäº¤äº’äº‹ä»¶çš„æ•°æ®æ”¶é›†ã€‚åŸºæœ¬æ€è·¯æ˜¯é€šè¿‡Hookäº‹ä»¶æˆ–æ¶ˆæ¯æœºåˆ¶ï¼Œæ¯”å¦‚iOSä¸­çš„method swizzlingã€Androidä¸­çš„AOPï¼ŒåŠ¨æ€åœ°æ•è·åˆ°ç”¨æˆ·è¡Œä¸ºäº‹ä»¶ï¼Œç„¶åè®°å½•ä¸‹æ¥ã€‚

æ— ç—•åŸ‹ç‚¹çš„å®ç°è¦ç‚¹ï¼š

1. åˆç†åˆ©ç”¨ç³»ç»Ÿæä¾›çš„runtimeæœºåˆ¶ã€‚ä¾‹å¦‚åœ¨iOSä¸­ï¼Œå¯ä»¥ä½¿ç”¨Objective-Cçš„åŠ¨æ€æ€§è´¨ï¼Œä½¿ç”¨Method Swizzlingæ”¹å˜æ–¹æ³•çš„å®ç°ï¼Œæˆ–åˆ©ç”¨KVOè¿›è¡Œç›‘å¬ï¼›åœ¨Androidä¸­ï¼Œåˆ©ç”¨å­—èŠ‚ç æŠ€æœ¯ï¼Œå¦‚AspectJè¿›è¡ŒAOPç¼–ç¨‹ã€‚

2. åˆ©ç”¨åå°„æŠ€æœ¯æˆ–è€…åŠ¨æ€ä»£ç†è¿›è¡Œæ•°æ®æ”¶é›†ã€‚å¯ä»¥ç›´æ¥æ”¹å˜æˆ–è€…æ‹¦æˆªå‡½æ•°è°ƒç”¨ï¼Œä»è€Œè¿›è¡ŒåŸ‹ç‚¹ã€‚

3. åˆ©ç”¨ç³»ç»Ÿåº•å±‚çš„æ¶ˆæ¯æœºåˆ¶è¿›è¡Œäº‹ä»¶æ”¶é›†ã€‚ä¾‹å¦‚åœ¨iOSä¸­ï¼Œåˆ©ç”¨Responder Chainè¿›è¡Œäº‹ä»¶ä¼ é€’ï¼›åœ¨Androidä¸­ï¼Œåˆ©ç”¨EventBusæˆ–è€…ç³»ç»Ÿè‡ªå®šä¹‰çš„å¹¿æ’­è¿›è¡Œäº‹ä»¶ä¼ é€’ã€‚

ç†æƒ³çš„æ— ç—•åŸ‹ç‚¹åº”è¯¥å…·å¤‡çš„ç‰¹ç‚¹ï¼š

1. ç²¾ç¡®æ•è·ï¼šèƒ½å‡†ç¡®æ•è·åˆ°ç”¨æˆ·æ‰€æœ‰è¡Œä¸ºå’Œäº¤äº’äº‹ä»¶ï¼Œä¸é—æ¼ï¼Œä¸é‡å¤ã€‚

2. é«˜æ€§èƒ½ï¼Œä½æ¶ˆè€—ï¼šå°½é‡å°‘çš„å½±å“APPçš„æ€§èƒ½ï¼Œä¸ä¼šå› ä¸ºåŸ‹ç‚¹é€»è¾‘è€Œå¢åŠ APPçš„CPUã€å†…å­˜æ¶ˆè€—ï¼Œæˆ–è€…å¯¼è‡´APPå´©æºƒã€‚

3. æ˜“æ‰©å±•ï¼šå¯ä»¥æ ¹æ®ä¸åŒçš„éœ€æ±‚ï¼Œæ–¹ä¾¿åœ°å¢åŠ æˆ–è€…å‡å°‘åŸ‹ç‚¹äº‹ä»¶ã€‚

4. å¥å£®æ€§ï¼šå³ä½¿åœ¨æ¶åŠ£çš„ç½‘ç»œç¯å¢ƒä¸‹ï¼Œä¹Ÿèƒ½ä¿è¯æ•°æ®çš„å‡†ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚

5. åº”ç”¨é€æ˜ï¼šå¯¹åº”ç”¨å±‚å®Œå…¨é€æ˜ï¼Œä¸æ”¹å˜ä»»ä½•ä¸šåŠ¡é€»è¾‘ã€‚

6. æ•°æ®å®‰å…¨ï¼šä¿è¯æ”¶é›†çš„æ•°æ®åœ¨ä¼ è¾“å’Œå­˜å‚¨è¿‡ç¨‹ä¸­çš„å®‰å…¨ã€‚

æ— ç—•åŸ‹ç‚¹çš„æœ€å¤§å¥½å¤„å°±æ˜¯é™ä½äº†å¯¹ä¸šåŠ¡ä»£ç çš„ä¾µå…¥æ€§ï¼Œä½¿ç¨‹åºå‘˜å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å®ç°ï¼Œè€Œä¸ç”¨åœ¨æ¯ä¸€ä¸ªéœ€è¦è¿½è¸ªçš„ç‚¹ä¸Šæ’å…¥åŸ‹ç‚¹ä»£ç ï¼Œæ—¢æé«˜äº†å¼€å‘æ•ˆç‡ï¼Œåˆå‡å°‘äº†å‡ºé”™æ¦‚ç‡ï¼Œéå¸¸é€‚åˆå¤§è§„æ¨¡å¹¶ä¸”ä¸šåŠ¡é¢‘ç¹å˜åŒ–çš„é¡¹ç›®ã€‚

:::

### â“æ‰‹åŠ¨åŸ‹ç‚¹ã€è‡ªåŠ¨åŒ–åŸ‹ç‚¹ã€å¯è§†åŒ–åŸ‹ç‚¹

::: details ğŸ’¡

åŸ‹ç‚¹æ˜¯æ•°æ®åˆ†æä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œä¸»è¦ç”¨äºæ”¶é›†ç”¨æˆ·åœ¨äº§å“ä¸­çš„è¡Œä¸ºæ•°æ®ã€‚æ ¹æ®å®ç°æ–¹å¼çš„ä¸åŒï¼ŒåŸ‹ç‚¹åˆ†ä¸ºæ‰‹åŠ¨åŸ‹ç‚¹ã€è‡ªåŠ¨åŒ–åŸ‹ç‚¹å’Œå¯è§†åŒ–åŸ‹ç‚¹ã€‚

1. æ‰‹åŠ¨åŸ‹ç‚¹ï¼šå°±æ˜¯å¼€å‘è€…åœ¨éœ€è¦ç»Ÿè®¡çš„åœ°æ–¹æ‰‹åŠ¨æ’å…¥ç»Ÿè®¡ä»£ç ã€‚è¿™ç§æ–¹å¼èƒ½å¤Ÿç²¾ç¡®æ§åˆ¶è¦ç»Ÿè®¡çš„æ•°æ®ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥è·å–åˆ°ä¸°å¯Œçš„æ•°æ®ä¿¡æ¯ã€‚ä½†è¿™ç§æ–¹å¼çš„ç¼ºç‚¹æ˜¯å·¥ä½œé‡è¾ƒå¤§ï¼Œä¸€æ—¦ä¸šåŠ¡æœ‰å˜æ›´ï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹å¤§é‡ä»£ç ã€‚

2. è‡ªåŠ¨åŸ‹ç‚¹ï¼šè‡ªåŠ¨åŸ‹ç‚¹ä¸€èˆ¬æ˜¯é€šè¿‡é’©å–ç›¸å…³çš„ç³»ç»Ÿæ–¹æ³•æ¥å®ç°çš„ã€‚ä¾‹å¦‚æ‰‹æœºåº”ç”¨ä¸­ï¼Œå¯ä»¥é€šè¿‡é’©å–ç”¨æˆ·ç‚¹å‡»äº‹ä»¶ï¼Œè‡ªåŠ¨çš„è®°å½•ç”¨æˆ·çš„è¡Œä¸ºã€‚è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯å·¥ä½œé‡å°ï¼Œä¸€æ¬¡è®¾ç½®å¥½å°±å¯ä»¥å…¨å±€ç”Ÿæ•ˆã€‚ä½†ç¼ºç‚¹æ˜¯æ— æ³•è·å–åˆ°å…·ä½“çš„ä¸šåŠ¡æ•°æ®ï¼Œåªèƒ½ç»Ÿè®¡åˆ°ç”¨æˆ·çš„è¡Œä¸ºã€‚

3. å¯è§†åŒ–åŸ‹ç‚¹ï¼šå¯è§†åŒ–åŸ‹ç‚¹æ˜¯ä¸€ç§æ–°çš„åŸ‹ç‚¹æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡å¯è§†åŒ–çš„æ“ä½œç•Œé¢ï¼Œè¿›è¡ŒåŸ‹ç‚¹çš„è®¾ç½®å’Œé…ç½®ï¼Œæ— éœ€ç¼–å†™ä»£ç ã€‚è¿™ç§æ–¹å¼æœ‰åˆ©äºéå¼€å‘äººå‘˜è¿›è¡Œæ•°æ®ç»Ÿè®¡ï¼Œæé«˜äº†å·¥ä½œæ•ˆç‡ã€‚æ˜“äºæ“ä½œä¸”æ— éœ€ä¿®æ”¹ä»£ç ã€‚ä½†æ˜¯å¯èƒ½å­˜åœ¨ç¨³å®šæ€§é—®é¢˜å’Œå¯¹å¤æ‚æºæ“ä½œæ— æ³•è¯†åˆ«çš„æƒ…å†µã€‚

é€‰æ‹©å“ªç§æ–¹å¼è¿›è¡ŒåŸ‹ç‚¹ï¼Œéœ€è¦æ ¹æ®é¡¹ç›®çš„å®é™…éœ€æ±‚å’Œå›¢é˜Ÿçš„å…·ä½“æƒ…å†µæ¥å®šã€‚

:::

### â“è¯´è¯´ä½ å¸¸ç”¨çš„å‡ ä¸ªé‡æ„çš„æŠ€å·§ï¼Œä½ è§‰å¾—é‡æ„é€‚åˆä»€ä¹ˆæ—¶å€™æ¥åš

::: details ğŸ’¡

é‡æ„æ˜¯ç³»ç»Ÿæ€§æ”¹å˜ä»£ç ç»“æ„çš„è¿‡ç¨‹ï¼Œæ—¨åœ¨æ”¹å–„ä»£ç çš„å¯è¯»æ€§ï¼Œç®€åŒ–ä»£ç è®¾è®¡ï¼Œæé«˜æ•ˆç‡ï¼Œå¹¶ä¸”è¦åœ¨ä¸æ”¹å˜è½¯ä»¶çš„å¤–åœ¨è¡Œä¸ºçš„æƒ…å†ä¸‹è¿›è¡Œã€‚

å¸¸ç”¨çš„å‡ ä¸ªé‡æ„çš„æŠ€å·§åŒ…æ‹¬ï¼š

1. æç‚¼æ–¹æ³•ï¼ˆExtract Methodï¼‰ï¼šå¦‚æœçœ‹åˆ°æœ‰ä¸€å—ä»£ç å¯ä»¥è¢«å•ç‹¬å°è£…èµ·æ¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼Œå¹¶å°†è¿™æ®µä»£ç çš„é€»è¾‘æ”¾åˆ°æ–°çš„æ–¹æ³•é‡Œã€‚
   
2. åˆå¹¶é‡å¤çš„ä»£ç ï¼šè¿™æ˜¯å‡å°‘ä»£ç å¤åˆ¶çš„ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œå½“çœ‹åˆ°å¤šæ®µç›¸ä¼¼çš„ä»£ç æ—¶ï¼Œå°è¯•å°†å®ƒä»¬åˆå¹¶åˆ°ä¸€ä¸ªå…¬å…±çš„æ–¹æ³•æˆ–ç±»ä¸­ã€‚
   
3. é‡å‘½åï¼ˆRenameï¼‰ï¼šé‡å‘½åæ˜¯ä¸€ä¸ªæå…¶å¸¸ç”¨çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œå¦‚æœä¸€ä¸ªå˜é‡æˆ–æ–¹æ³•çš„åå­—ä¸å¤Ÿæ¸…æ™°ï¼Œå¯ä»¥é‡æ–°å‘½åå®ƒä»¥é€éœ²å®ƒçš„çœŸå®åŠŸèƒ½ã€‚
   
4. åˆ†è§£æ¡ä»¶è¡¨è¾¾å¼ï¼šå½“ä¸€ä¸ªå¤æ‚çš„é€»è¾‘æ¡ä»¶åœ¨ä¸€ä¸ªå‡½æ•°ä¸­è¢«å¤šæ¬¡ä½¿ç”¨æ—¶ï¼Œå°†å®ƒæå–åˆ°ä¸€ä¸ªç‹¬ç«‹çš„æ–¹æ³•ä¸­ï¼Œä¼šä½¿ä»£ç å˜å¾—æ›´æ˜“è¯»ã€‚
   
5. æ›¿æ¢ä¸´æ—¶å˜é‡ï¼ˆReplace Temp with Queryï¼‰ï¼šå–ä»£å¯¹ä¸€ä¸ªä¸´æ—¶å˜é‡çš„å¤šæ¬¡å¼•ç”¨ä»¥ä¸€ä¸ªé’ˆå¯¹å…¶è®¡ç®—çš„å‡½æ•°è°ƒç”¨ã€‚
   
6. ä½¿ç”¨å¯¹è±¡ç»„åˆä»£æ›¿ç±»ç»§æ‰¿ï¼šé¢å‘å¯¹è±¡çš„è­¦è¯­ï¼šå°½é‡ä½¿ç”¨ç»„åˆ/èšåˆï¼Œå°‘ç”¨ç»§æ‰¿ã€‚

ä»€ä¹ˆæ—¶å€™åšé‡æ„ï¼š

1. æ–°åŠŸèƒ½å¼€å‘éœ€è¦è°ƒæ•´ç°æœ‰ç»“æ„ï¼šåœ¨æ·»åŠ æ–°åŠŸèƒ½ä¹‹å‰ï¼Œå…ˆé‡æ„é‚£äº›è®©æ·»åŠ æ–°åŠŸèƒ½å˜å¾—å›°éš¾çš„ä»£ç ï¼Œå°†ä»£ç ä¿®æ•´åˆ°å®¹æ˜“æ·»åŠ æ–°åŠŸèƒ½çš„çŠ¶æ€ã€‚

2. ä»£ç é˜…è¯»æ—¶å‘ç°ä»£ç è´¨é‡é—®é¢˜ï¼šåœ¨ä»£ç é˜…è¯»æ—¶å‘ç°ä»£ç ä¸æ˜“è¯»æˆ–ä»£ç é‡å¤ç­‰é—®é¢˜æ—¶ï¼Œä¾¿å¯ä»¥å¯¹å…¶é‡æ„ã€‚

3. ä¿®å¤ Bug æ—¶ï¼šåœ¨ä¿®å¤ Bug æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ä¿®æ”¹ä»£ç ï¼Œè¿™ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€æ¬¡æ€è€ƒå¦‚ä½•æå‡ä»£ç è´¨é‡ã€æ˜¯å¦æœ‰æ›´å¥½è®¾è®¡çš„æœºä¼šã€‚

ä»¥ä¸Šä¸‰ç§æƒ…å†µï¼Œéƒ½å¯ä»¥å°†é‡æ„å®‰æ’åœ¨ã€Œäº‹æƒ…æœªå‘ç”Ÿå‰ã€ï¼Œä½¿é‡æ„å¸®åŠ©æˆ‘ä»¬æ›´å®¹æ˜“åœ°å®Œæˆå·¥ä½œã€‚åŒæ—¶ï¼Œè¿™æ ·çš„é‡æ„ï¼Œæˆ‘ä»¬å¾€å¾€å¯ä»¥å¾ˆç¡®å®šå…¶ä»·å€¼ï¼Œå› ä¸ºç»å¸¸èƒ½ç«‹å³çœ‹åˆ°æ•ˆæœã€‚

æ€»çš„æ¥è¯´ï¼Œé‡æ„åº”è¯¥æ˜¯æŒç»­ä¸æ–­åœ°è¿›è¡Œï¼Œè€Œä¸æ˜¯ç´§æ€¥æƒ…å†µä¸‹çš„ä¸€æ¬¡å¤§è¡ŒåŠ¨ã€‚ä½¿ä»£ç ä¿æŒè‰¯å¥½çš„ç»“æ„ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ç»´æŒæ­£å¸¸çš„å¼€å‘é€Ÿåº¦ï¼Œé˜²æ­¢æŠ€æœ¯å€ºåŠ¡çš„ç´¯ç§¯ã€‚ä¸è¦å®³æ€•ä¿®æ”¹ä»£ç ï¼Œä»£ç æ˜¯ç”¨æ¥è¢«æ”¹çš„ï¼Œåªè¦ä½ æœ‰äº†å¥½çš„å•å…ƒæµ‹è¯•ï¼Œæ”¹ä¸€ç‚¹ï¼Œè·‘ä¸€ä¸‹å•å…ƒæµ‹è¯•ï¼ŒæŒç»­åé¦ˆã€æŒç»­æ”¹è¿›ï¼Œä½ ä¼šå‘ç°é‡æ„æ˜¯ä¸€ä»¶éå¸¸æ„‰å¿«çš„äº‹æƒ…ã€‚

:::

------

## ç»„ä»¶åŒ–

### â“ç»„ä»¶åŒ–è®¾è®¡æ€è·¯

::: details ğŸ’¡

  ç»„ä»¶åŒ–ï¼šæœ‰æ—¶ä¹Ÿç§°ä¸ºâ€œæ¨¡å—åŒ–â€ã€‚å°†ä¸€ä¸ªå¤§çš„ä¸šåŠ¡åŠŸèƒ½ï¼ŒæŒ‰ç…§ä¸åŒçš„åŠŸèƒ½æ¨¡å—è¿›è¡Œæ‹†åˆ†ã€‚

  æ‹†åˆ†åŸåˆ™ï¼šç±»ä¼¼ `SOLID` åŸåˆ™ã€‚
  * å•ä¸€èŒè´£åŸåˆ™ : æ‹†åˆ†çš„åŠŸèƒ½æ¨¡å—åº”è¯¥å°½é‡åšåˆ°åŠŸèƒ½å•ä¸€ã€‚
  * æ¥å£éš”ç¦»åŸåˆ™ : åŠŸèƒ½æ¨¡å—å°½é‡åšåˆ°å¯¹å¤–æš´éœ²æ¥å£çš„æœ€å°åŒ–ã€‚

  åˆ†å±‚åŸåˆ™ï¼šç½‘ä¸Šæœ‰ä¸€ä¸ªå€Ÿç”¨ç»å…¸å››è±¡é™æ³•åˆ™æ¥åˆ’åˆ†(ä»¥ **ä¸šåŠ¡ç›¸å…³**ã€**`UI` ç›¸å…³** ä½œä¸ºä¸¤ä¸ªè½´çº¿ï¼Œæ¥è¿›è¡Œç»„ä»¶åŒ–åˆ†å±‚)
  * ä¸šåŠ¡åŠŸèƒ½å±‚ : ä¸šåŠ¡æœ‰å…³ & `UI` æœ‰å…³ã€‚ç”¨æˆ·çœ‹åˆ°çš„ä¸»è¦åŠŸèƒ½é¡µé¢ã€‚
  * ä¸šåŠ¡é€»è¾‘å±‚ : ä¸šåŠ¡æœ‰å…³ & `UI` æ— å…³ã€‚åœ¨ç”¨æˆ·ä½¿ç”¨ä¸šåŠ¡åŠŸèƒ½æ—¶ï¼ŒèƒŒåçš„å¤„ç†é€»è¾‘ã€‚
  * `UI` å±‚ : ä¸šåŠ¡æ— å…³ & `UI` æœ‰å…³ã€‚é€šç”¨çš„ `UI` é¡µé¢ï¼Œä¸å…³è”å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ã€‚
  * åŸºç¡€å±‚ : ä¸šåŠ¡æ— å…³ & `UI` æ— å…³ã€‚é€šç”¨çš„åŸºç¡€åŠŸèƒ½ã€‚

  å•å‘ä¾èµ–åŸåˆ™ï¼šç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œåº”è¯¥åšåˆ°ä¸Šå±‚ä¾èµ–ä¸‹å±‚ï¼Œä¸‹å±‚ä¸è¦ä¾èµ–ä¸Šå±‚ã€‚

:::

### â“ä¸‹å±‚ç»„ä»¶éœ€è¦è°ƒç”¨ä¸Šå±‚ç»„ä»¶æ€æ ·å¤„ç†

::: details ğŸ’¡

  æ–¹æ¡ˆä¸€ï¼šä¾èµ–æ³¨å…¥æ–¹å¼ã€‚ä¸‹å±‚ç»„ä»¶å®šä¹‰å¥½é’©å­å‡½æ•°ï¼Œæ³¨å†Œæ—¶ï¼Œå°†ä¸Šå±‚ç»„ä»¶æ³¨å…¥ä¸‹å±‚ç»„ä»¶å®šä¹‰å¥½çš„é’©å­å‡½æ•°ã€‚
  
  æ–¹æ¡ˆäºŒï¼šé—´æ¥è®¿é—®ã€‚é€šè¿‡åº•å±‚çš„è·¯ç”±ç»„ä»¶ï¼Œå°†ä¸Šå±‚ç»„ä»¶æ³¨å†Œåˆ°è·¯ç”±è¡¨ä¸­ï¼Œè¿™æ ·ä¸‹å±‚ç»„ä»¶å°±å¯ä»¥é€šè¿‡è·¯ç”±é—´æ¥è®¿é—®åˆ°ä¸Šå±‚ç»„ä»¶ã€‚

:::

### â“ç»„ä»¶ä¹‹é—´å¦‚ä½•è§£è€¦

::: details ğŸ’¡

è‰¯å¥½çš„ä»£ç è®¾è®¡åº”è¯¥å°½å¯èƒ½åœ°å‡å°‘å„éƒ¨åˆ†é—´çš„è€¦åˆæ€§ï¼Œä»¥ä¾¿åœ¨ä¿®æ”¹æˆ–å¢åŠ æ–°åŠŸèƒ½æ—¶å¢å¼ºä»£ç çš„çµæ´»æ€§ã€‚è§£è€¦çš„ç›®çš„æ˜¯ä½¿ç³»ç»Ÿå„éƒ¨åˆ†æ¨¡å—åŒ–ï¼Œä½¿ä¹‹èƒ½å¤Ÿæ›´åŠ ç‹¬ç«‹åœ°å¼€å‘ã€ä¿®æ”¹ã€æ›¿æ¢ã€æµ‹è¯•å’Œå¤ç”¨ã€‚

ä»¥ä¸‹æ˜¯å‡ ç§å¸¸ç”¨çš„è§£è€¦æ–¹æ³•ï¼š

1. é‡‡ç”¨é¢å‘æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é¢å‘å®ç°ç¼–ç¨‹ã€‚æ¨¡å—ä¹‹é—´åªé€šè¿‡æ¥å£è¿›è¡Œäº¤äº’ï¼Œåªä¾èµ–æ¥å£ï¼Œè€Œä¸ä¾èµ–å…·ä½“çš„å®ç°ç±»ï¼Œè¿™æ ·å°±å¯ä»¥é™ä½è€¦åˆæ€§ã€‚

2. ä½¿ç”¨ä¾èµ–æ³¨å…¥ã€‚ä¸åœ¨æ¨¡å—å†…éƒ¨åˆ›å»ºæ‰€ä¾èµ–çš„å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡å¤–éƒ¨æ–¹å¼æ³¨å…¥ã€‚è¿™æ ·å°±é¿å…äº†æ¨¡å—å’Œä¾èµ–å¯¹è±¡ä¹‹é—´çš„ç´§å¯†è€¦åˆå…³ç³»ã€‚

3. å¦‚æœç»„ä»¶éœ€è¦äº¤äº’ï¼Œå¯ä»¥ä½¿ç”¨æ¶ˆæ¯æ€»çº¿æˆ–è€…äº‹ä»¶é©±åŠ¨çš„æ–¹å¼è¿›è¡Œè§£è€¦ã€‚ä¾‹å¦‚ï¼Œåˆ©ç”¨Observeræ¨¡å¼æˆ–è€…Event Busï¼Œè®©è®¢é˜…è€…å’Œå‘å¸ƒè€…è§£è€¦ã€‚

4. åˆ©ç”¨ä¸­é—´å±‚æˆ–è€… `Facade` æ¨¡å¼æä¾›ç»Ÿä¸€çš„æ¥å£ã€‚æç«¯æƒ…å†µä¸‹ï¼Œå¦‚æœè§£è€¦å›°éš¾ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸€ä¸ªâ€œèƒ¶æ°´â€æ¨¡å—ä¸“é—¨è´Ÿè´£åè°ƒã€‚

5. å‡å°‘å…¨å±€å˜é‡çš„ä½¿ç”¨ï¼Œå…¨å±€å˜é‡ä¼šè®©å„ä¸ªæ¨¡å—äº§ç”Ÿè€¦åˆã€‚

6. åœ¨è®¾è®¡æ—¶ï¼Œåˆ©ç”¨è®¾è®¡æ¨¡å¼å’ŒåŸåˆ™ï¼Œå¦‚å•ä¸€èŒè´£åŸåˆ™ï¼Œå¼€é—­åŸåˆ™ï¼Œé‡Œæ°æ›¿æ¢åŸåˆ™ç­‰ï¼Œä»¥å‡å°‘ä¸å¿…è¦çš„è€¦åˆã€‚

7. MVCï¼ŒMVVMç­‰è®¾è®¡æ¨¡å¼ï¼Œåˆ†ç¦»è§†å›¾å’Œæ•°æ®ï¼Œå‡å°‘å®ƒä»¬ä¹‹é—´çš„ç›´æ¥å…³ç³»ã€‚

8. æ¨¡å—èŒè´£å°½å¯èƒ½å•ä¸€ï¼Œåªåšå¥½è‡ªå·±çš„äº‹æƒ…ï¼Œä¸æ¶‰åŠåˆ°å…¶å®ƒæ¨¡å—çš„ä¸šåŠ¡ã€‚

9. ä»£ç å®¡æŸ¥ï¼Œå®šæœŸè¿›è¡Œä»£ç å®¡æŸ¥ï¼Œé¿å…ä¸åˆç†çš„è®¾è®¡å’Œå®ç°ã€‚

æœ€åï¼Œç»„ä»¶è§£è€¦å¹¶ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå°¤å…¶æ˜¯åœ¨è½¯ä»¶æ€§èƒ½ã€æ•ˆç‡è¦æ±‚æé«˜çš„åœºæ™¯ä¸‹ï¼Œåˆç†çš„è€¦åˆæˆ–è®¸èƒ½å¸¦æ¥æ›´å¥½çš„æ•ˆç‡ã€‚æ‰€ä»¥åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¦æ ¹æ®å…·ä½“æƒ…å†µï¼Œçµæ´»å¤„ç†ï¼Œæ‰¾åˆ°è€¦åˆä¸è§£è€¦ä¹‹é—´çš„æœ€ä½³å¹³è¡¡ã€‚

:::

### â“`CTMediator`ã€`MGJRouter` è·¯ç”±ä¼˜ç¼ºç‚¹å¯¹æ¯”

::: details ğŸ’¡

`CTMediator` å’Œ `MGJRouter` éƒ½æ˜¯éå¸¸æµè¡Œçš„ iOS è·¯ç”±åº“ï¼Œåˆ†åˆ«ç”±å¡å¸ï¼ˆcasatwyï¼‰å’Œè˜‘è‡è¡—å›¢é˜Ÿå¼€å‘ã€‚å®ƒä»¬éƒ½å¯ä»¥å®ç°ç»„ä»¶æˆ–è€…æ¨¡å—ä¹‹é—´çš„é€šä¿¡å’Œè§£è€¦ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”ï¼š

`CTMediator`ï¼š

ä¼˜ç‚¹ï¼š

1. é‡‡ç”¨ Target-Action æ¨¡å¼è¿›è¡Œè§£è€¦ï¼Œä½¿å„ä¸ªç»„ä»¶ä¹‹é—´æ— éœ€ç›´æ¥å¼•ç”¨ï¼Œåªéœ€è¦çŸ¥é“ Target å’Œ Action å³å¯ã€‚

2. é‡‡ç”¨ runtime åŠ¨æ€è°ƒç”¨ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®éœ€è¦è‡ªç”±æ·»åŠ æ–°çš„ Target å’Œ Actionã€‚

3. æä¾›äº†ä¸€ç§éå¸¸çµæ´»çš„æ–¹å¼è¿›è¡Œç»„ä»¶ä¹‹é—´çš„æ•°æ®ä¼ é€’å’Œè°ƒç”¨ã€‚

ç¼ºç‚¹ï¼š

1. æ‰€æœ‰çš„ Target å’Œ Action éƒ½éœ€è¦é€šè¿‡å­—ç¬¦ä¸²æ¥è°ƒç”¨ï¼Œå­—ç¬¦ä¸²çš„ç®¡ç†å’Œç»´æŠ¤å·¥ä½œé‡è¾ƒå¤§ï¼Œä¸”ç¼–è¯‘å™¨æ— æ³•ç»™å‡ºé”™è¯¯æç¤ºã€‚

2.ä¸å­˜åœ¨ä¸€ä¸ªç»Ÿä¸€çš„ URL è§„åˆ™ï¼Œä¸åˆ©äºé€šè¿‡ URL è¿›è¡Œé¡µé¢è·³è½¬ã€‚éœ€è¦é¢å¤–å®ç°ä¸€å¥—æ˜ å°„è§„åˆ™ã€‚

`MGJRouter`ï¼š

ä¼˜ç‚¹ï¼š
   
1. é‡‡ç”¨ URL-Handler çš„æ–¹å¼è¿›è¡Œç»„ä»¶è§£è€¦ï¼Œå¯ä»¥é€šè¿‡æ³¨å†Œ URL çš„æ–¹å¼æ¥å®ç°é¡µé¢çš„è·³è½¬å’Œæ•°æ®ä¼ é€’ã€‚

2. æ”¯æŒäº† URL Schemeï¼Œæ–¹ä¾¿ APP ä¹‹é—´è°ƒç”¨æˆ–è€…å®Œæˆä¸€äº›ç‰¹å®šåŠŸèƒ½ã€‚

3. æ¥å£è®¾è®¡æ›´åŠ åˆç†ï¼Œè°ƒç”¨èµ·æ¥ä¹Ÿååˆ†æ–¹ä¾¿ï¼Œè·¯ç”±å™¨è·³è½¬é¡µé¢ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ã€‚

ç¼ºç‚¹ï¼š

1. å¯¹äºå¤æ‚é¡µé¢çš„ä¼ å€¼æ¯”è¾ƒéº»çƒ¦ï¼Œåªèƒ½é€šè¿‡ URL å‚æ•°è¿›è¡Œç®€å•çš„ä¼ å€¼ï¼Œä¸èƒ½ç›´æ¥ä¼ é€’å¤æ‚å¯¹è±¡ã€‚

2. åŠ¨æ€æ€§è¾ƒå·®ï¼Œåªèƒ½åœ¨ç¼–è¯‘æ—¶ç¡®å®š URL è·¯ç”±å…³ç³»ã€‚

æ€»ç»“ï¼šè¿™ä¸¤ä¸ªæ¡†æ¶å„æœ‰åƒç§‹ï¼Œå¦‚æœä½ ä¸»è¦è¿›è¡Œçš„æ˜¯é¡µé¢é—´çš„ç®€å•è·¯ç”±å’Œè·³è½¬ï¼Œæˆ–è€…éœ€è¦è¿›è¡Œåº”ç”¨é—´äº¤äº’ï¼Œ`MGJRouter` æ›´åŠ åˆé€‚ã€‚ä½†å¦‚æœä½ å¸Œæœ›æœ‰æ›´å¥½çš„çµæ´»æ€§å’Œè§£è€¦æ•ˆæœï¼Œæˆ–è€…éœ€è¦è¿›è¡Œå¤æ‚çš„å¯¹è±¡ä¼ é€’ï¼Œ`CTMediator` æ›´ä¸ºåˆé€‚ã€‚ä½ éœ€è¦æ ¹æ®è‡ªå·±çš„å®é™…éœ€æ±‚å’Œé¡¹ç›®ç‰¹æ€§æ¥é€‰æ‹©åˆé€‚çš„è·¯ç”±æ¡†æ¶ã€‚

:::

### â“ä¸ºä»€ä¹ˆ `CTMediator` æ–¹æ¡ˆä¼˜äºå…¶å®ƒè·¯ç”±çš„æ–¹æ¡ˆ

::: details ğŸ’¡

`CTMediator`æ–¹æ¡ˆè¢«è®¤ä¸ºæ¯”å…¶ä»–è·¯ç”±æ–¹æ¡ˆæ›´ä¼˜ç§€ï¼Œè¿™ä¸»è¦åŸºäºä»¥ä¸‹å‡ ç‚¹åŸå› ï¼š

1. æ˜“äºè§£è€¦ï¼šé‡‡ç”¨äº†ç›®æ ‡-åŠ¨ä½œï¼ˆTarget-Actionï¼‰æ¨¡å¼ï¼Œä¸ºç»„ä»¶ä¹‹é—´æä¾›äº†é€šä¿¡æ¥å£ï¼Œå„ç»„ä»¶ä¹‹é—´ä¸éœ€è¦äº’ç›¸å¼•ç”¨ï¼Œåªéœ€è¦çŸ¥é“å¯¹æ–¹çš„ `Target` å’Œ `Action`ã€‚è¿™ç§æ¨¡å¼æœ‰åˆ©äºæé«˜ä»£ç çš„ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ã€‚

2. çµæ´»æ€§ï¼šé€šè¿‡ Runtime å®ç°åŠ¨æ€è°ƒç”¨ï¼Œèƒ½æ–¹ä¾¿åœ°æ·»åŠ æ–°çš„åŠŸèƒ½å’ŒæœåŠ¡ã€‚

3. ç»„ä»¶åŒ–æ”¯æŒï¼š`CTMediator`çš„ä¸€ä¸ªé‡è¦ç‰¹è‰²å°±æ˜¯æ”¯æŒç»„ä»¶åŒ–å¼€å‘ï¼Œå®ƒçš„è®¾è®¡åŸåˆ™å°±æ˜¯"ä¾èµ–è¯·æ±‚è€Œéä¾èµ–æ¥å£"ï¼Œé€šè¿‡ä¸­é—´äººè§’è‰²æä¾›é€šä¿¡é€šé“ï¼Œå°½å¯èƒ½å‡å°‘æ¨¡å—é—´çš„è€¦åˆæ€§ï¼Œä½¿å¾—å„ä¸ªæ¨¡å—éƒ½å¯ä»¥ç‹¬ç«‹å¼€å‘å’Œæ›´æ–°ã€‚

4. æœ¬åœ°å’Œè¿œç¨‹ä¸€è‡´æ€§ï¼šå¯¹äºæœ¬åœ°ç»„ä»¶å’Œè¿œç¨‹æœåŠ¡ï¼Œ`CTMediator`é‡‡ç”¨äº†ç»Ÿä¸€çš„æ¥å£è¿›è¡Œè°ƒç”¨ï¼Œä½¿å¾—å¼€å‘è€…ä¸éœ€è¦å…³å¿ƒè°ƒç”¨çš„å…·ä½“å®ç°ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ã€‚

5. å‚æ•°ä¼ é€’æ–¹ä¾¿ï¼š`CTMediator` æ–¹æ¡ˆå…è®¸å¼€å‘è€…çµæ´»åœ°ä¼ é€’å„ç§ç±»å‹çš„å‚æ•°è€Œæ— éœ€è¿›è¡Œç±»å‹è½¬åŒ–ã€‚

æ€»çš„æ¥è¯´ï¼Œ`CTMediator` æ–¹æ¡ˆä»¥å…¶é«˜åº¦çš„å°è£…æ€§å’Œè§£è€¦èƒ½åŠ›ã€ä¼˜ç§€çš„ç»„ä»¶åŒ–æ”¯æŒä»¥åŠçµæ´»æ€§ï¼Œè¢«è§†ä¸ºä¼˜äºå…¶ä»–è·¯ç”±æ–¹æ¡ˆã€‚

:::

### â“åŸºäº `CTMediator` çš„ç»„ä»¶åŒ–æ–¹æ¡ˆï¼Œæœ‰å“ªäº›æ ¸å¿ƒç»„æˆï¼Ÿ

::: details ğŸ’¡

åŸºäº `CTMediator` çš„ç»„ä»¶åŒ–æ–¹æ¡ˆï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼š

1. `CTMediator`ï¼šä½œä¸ºä¸­ä»‹è€…åœ¨å„ä¸ªæ¨¡å—æˆ–ç»„ä»¶ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚ä¸»è¦çš„æ–¹å¼æ˜¯æ ¹æ®æä¾›çš„ Target å­—ç¬¦ä¸²è·å¾—ç›®æ ‡å¯¹è±¡ï¼Œç„¶åæ ¹æ® Action å­—ç¬¦ä¸²è·å¾—ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ï¼Œæœ€åè°ƒç”¨è¯¥æ–¹æ³•æ¥å®Œæˆå„ä¸ªæ¨¡å—æˆ–ç»„ä»¶ä¹‹é—´çš„äº¤äº’ã€‚

2. `Target`ï¼šç»§æ‰¿è‡ª NSObject çš„ç±»ï¼Œç”¨äºå¤„ç†éœ€è¦æ‰§è¡Œçš„å…·ä½“ä¸šåŠ¡é€»è¾‘ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ¯ä¸ªæ¨¡å—æˆ–ç»„ä»¶éƒ½ä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„ Target ç±»ã€‚

3. `Action`ï¼š`Target` ç±»ä¸­çš„æ–¹æ³•ï¼Œè´Ÿè´£æ‰§è¡Œå…·ä½“çš„æ“ä½œã€‚æ¯ä¸ªæ“ä½œéƒ½ä¼šå¯¹åº”ä¸€ä¸ª Actionã€‚

4. `Category`ï¼š`CTMediator` çš„åˆ†ç±»ï¼Œç”¨äºæä¾›ä¸€ä¸ªæ›´ä¾¿äºè°ƒç”¨çš„æ¥å£ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ¯ä¸€ä¸ªæ¨¡å—æˆ–ç»„ä»¶éƒ½ä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„ Categoryï¼Œè¿™ä¸ª Category ä¼šæä¾›ä¸€äº›æ–¹æ³•ï¼Œé€šè¿‡è¿™äº›æ–¹æ³•å¯ä»¥æ›´æ–¹ä¾¿åœ°è°ƒç”¨è¯¥æ¨¡å—æˆ–ç»„ä»¶æ‰€å¯¹åº”çš„ Target-Actionã€‚

5. `URLRouter`ï¼šæä¾›äº†ä¸€ä¸ª URL åˆ° Target-Action çš„æ˜ å°„ï¼Œä½¿å¾—é€šè¿‡ URL èƒ½å¤Ÿæ–¹ä¾¿åœ°è°ƒç”¨ Target-Actionã€‚ä¸»è¦ç”¨äºå¤„ç†å¤–éƒ¨è°ƒç”¨ã€è·³è½¬ç­‰æƒ…å†µã€‚

6. `Params`: ä¼ é€’ç»™ `Target` çš„ä¸€ç»„å‚æ•°ï¼Œæ¯”å¦‚ç”¨æˆ·æ•°æ®æˆ–è€…å…¶ä»–é¡¹ç›®çº§åˆ«çš„ä¸€äº›é…ç½®ä¿¡æ¯ç­‰ã€‚

è¿™æ ·çš„æ¶æ„è®¾è®¡ï¼Œå®ç°äº†å„ä¸ªç»„ä»¶æˆ–æ¨¡å—ä¹‹é—´çš„è§£è€¦ï¼Œä½¿å¾—å„ä¸ªç»„ä»¶æˆ–æ¨¡å—å¯ä»¥ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•ï¼Œæé«˜äº†æ•´ä¸ªé¡¹ç›®çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚

:::

------

## è®¾è®¡æ¨¡å¼

### â“`iOS` ä¸­çš„çš„å•ä¾‹å®ç°

::: details ğŸ’¡

åœ¨ iOS ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ª shareInstance æ–¹æ³•æ¥å®ç°å•ä¾‹ç±»ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆæ£€æŸ¥æ˜¯å¦å­˜åœ¨å®ä¾‹ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæˆ‘ä»¬å°±åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚

ä»¥ä¸‹æ˜¯ä¸€ä¸ªåˆ›å»ºå•ä¾‹çš„ä¾‹å­ï¼š

Objective-Cï¼š

```objectivec
+ (instancetype)sharedInstance {
    static dispatch_once_t onceToken;
    static YourClass *sharedInstance = nil;
    
    dispatch_once(&onceToken, ^{
        sharedInstance = [[YourClass alloc] init];
    });
    
    return sharedInstance;
}
```

è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°äº† dispatch_once æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ç¡®ä¿å…¶å†…çš„ä»£ç å—åœ¨æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸä¸­åªè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å•ä¾‹å®ä¾‹çš„å”¯ä¸€æ€§ã€‚

Swiftï¼š

```swift
class Singleton {
    static let sharedInstance = Singleton()
    private init() {} // ç§æœ‰åŒ–æ„é€ æ–¹æ³•ï¼Œé˜²æ­¢å…¶ä»–åœ°æ–¹äº§ç”Ÿå®ä¾‹
}
```

è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªé™æ€å˜é‡ sharedInstanceï¼Œå®ƒæ˜¯ä¸€ä¸ªæˆ‘ä»¬çš„å•ä¾‹ç±»çš„å®ä¾‹ï¼Œå¹¶ä¸”æˆ‘ä»¬æŠŠ init æ–¹æ³•è®¾ä¸ºç§æœ‰ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯é™¤äº†è¿™ä¸ª Singleton ç±»ï¼Œä»»ä½•å…¶ä»–çš„ä»£ç éƒ½ä¸èƒ½åˆ›å»º Singleton çš„å®ä¾‹ï¼Œä¿è¯äº†å•ä¾‹çš„å”¯ä¸€æ€§ã€‚

åœ¨ä½¿ç”¨å•ä¾‹æ¨¡å¼æ—¶ï¼Œéœ€è¦æ³¨æ„ï¼Œè™½ç„¶å•ä¾‹æ¨¡å¼å¾ˆæ–¹ä¾¿ï¼Œä½†ä¹Ÿè¦åˆç†ä½¿ç”¨ã€‚å¦‚æœè¿‡åº¦ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Œå®¹æ˜“è®©å„ä¸ªç±»ä¹‹é—´çš„å…³ç³»å˜å¾—éå¸¸å¤æ‚ï¼Œä¹Ÿå°±å¢åŠ äº†å„ä¸ªç±»ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæ›´å®¹æ˜“äº§ç”Ÿçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨æ—¶è¦æƒè¡¡å…¶åˆ©å¼Šã€‚

:::

### â“è¯´è¯´å•ä¾‹æ¨¡å¼ä¼˜ç¼ºç‚¹

::: details ğŸ’¡

å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€çš„è®¿é—®ç‚¹ã€‚

å•ä¾‹æ¨¡å¼çš„ä¼˜ç‚¹ï¼š

1. å…¨å±€è®¿é—®ç‚¹ï¼šå•ä¾‹æ¨¡å¼æä¾›äº†ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åœ¨ä»£ç çš„ä»»ä½•ä½ç½®è®¿é—®è¿™ä¸ªå®ä¾‹ã€‚

2. èµ„æºèŠ‚çœï¼šç”±äºåªåˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œæ‰€ä»¥å¯ä»¥èŠ‚çœæ¯”è¾ƒå¤šçš„ç³»ç»Ÿèµ„æºã€‚

3. ä¿è¯æ•°æ®åŒæ­¥ï¼šå½“æˆ‘ä»¬å¸Œæœ›å…¨å±€åªæœ‰ä¸€ä¸ªè®¿é—®ç‚¹ä¸”å…¨å±€åªèƒ½è®¿é—®è¿™ä¸ªå®ä¾‹æ—¶ï¼Œå¯ä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚

å•ä¾‹æ¨¡å¼çš„ç¼ºç‚¹ï¼š

1. ä¸åˆ©äºç³»ç»Ÿæ‰©å±•ï¼šç”±äºå•ä¾‹æ¨¡å¼å¯¹èµ„æºçš„æ§åˆ¶è¿‡ä¸¥æ ¼ï¼Œå¯èƒ½åœ¨æŸäº›æƒ…å†µä¸‹é˜»ç¢ç³»ç»Ÿçš„æ‰©å±•å’Œä¼˜åŒ–ã€‚

2. è¿èƒŒå•ä¸€èŒè´£åŸåˆ™ï¼šå•ä¾‹æ¨¡å¼çš„ç±»æ—¢è¦è´Ÿè´£ä¸šåŠ¡éœ€æ±‚ï¼Œåˆè¦è´Ÿè´£ä¿è¯æ˜¯å•ä¸€çš„å®ä¾‹ï¼Œè¿™è¿åäº†å•ä¸€èŒè´£åŸåˆ™ã€‚

3. æµ‹è¯•å›°éš¾ï¼šç”±äºå•ä¾‹æ¨¡å¼çš„å®ä¾‹æ˜¯å…¨å±€çš„ï¼Œå¯èƒ½ä¼šåœ¨å…¶ä»–æµ‹è¯•æ—¶å¼•å…¥ä¸å¯æ§çš„çŠ¶æ€ï¼Œå¯¼è‡´æµ‹è¯•å›°éš¾ã€‚

åœ¨è‹¹æœæä¾›çš„ä¸€äº›ç±»ä¸­ï¼Œå¦‚ UIApplicationï¼ŒNSData ç­‰æ˜¾ç„¶æ˜¯å•ä¾‹æ¨¡å¼ï¼Œæä¾›äº†å…¨å±€çš„è®¿é—®ç‚¹ã€‚ä½†å¹¶éæ‰€æœ‰ç±»éƒ½æ˜¯å•ä¾‹æ¨¡å¼ï¼Œæ¯”å¦‚ UIViewControllerï¼ŒUITableViewç­‰ç±»å¹¶ä¸æ˜¯å•ä¾‹æ¨¡å¼ï¼Œå®ƒä»¬çš„å®ä¾‹å¯ä»¥é€šè¿‡æ–¹æ³•æˆ–è€…æ„é€ å™¨è‡ªç”±åœ°æ¥åˆ›å»ºã€‚ä»¥ä¸Šæ˜¯åŸºäºå•ä¾‹æ¨¡å¼çš„åˆ†æï¼Œå…·ä½“ä½¿ç”¨å“ªç§æ¨¡å¼éœ€è¦æ ¹æ®é¡¹ç›®å…·ä½“éœ€æ±‚æ¥å†³å®šã€‚

:::

### â“è‹¹æœè®¾è®¡çš„ç±»å¯¹è±¡`[MyClass class]`æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼

::: details ğŸ’¡

åœ¨ Objective-C ä¸­ï¼Œ`[MyClass class]` è¿”å›çš„æ˜¯ MyClass çš„ç±»å¯¹è±¡ï¼Œè¿™ä¸ªç±»å¯¹è±¡åœ¨ç¨‹åºè¿è¡ŒæœŸé—´æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥å¯ä»¥è¢«çœ‹ä½œæ˜¯å•ä¾‹æ¨¡å¼ã€‚

åœ¨ä¸€ä¸ªè¿è¡Œä¸­çš„ Objective-C ç¨‹åºä¸­ï¼Œæ¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªç±»å¯¹è±¡ã€‚è€Œè¿™ä¸ªç±»å¯¹è±¡åŒ…å«äº†ç±»çš„å…ƒæ•°æ®ï¼Œæ¯”å¦‚å®ä¾‹å˜é‡çš„å¸ƒå±€ã€å®šä¹‰çš„æ–¹æ³•ï¼Œè¿˜æœ‰å®ƒçš„çˆ¶ç±»ç­‰ç­‰ä¿¡æ¯ã€‚

ç„¶è€Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¿™å¹¶ä¸æ˜¯å•ä¾‹æ¨¡å¼çš„å…¸å‹åº”ç”¨ã€‚å•ä¾‹æ¨¡å¼çš„ä¸»è¦ç”¨é€”æ˜¯ç¡®ä¿æŸä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œç”¨äºé‚£äº›å…¨åº”ç”¨éœ€è¦ç»Ÿä¸€è®¿é—®çš„åœºæ™¯ã€‚è¿™äº›ç±»çš„ä¾‹å­é€šå¸¸åŒ…æ‹¬é…ç½®ç®¡ç†ç±»ã€ç½‘ç»œè¯·æ±‚ç±»ç­‰ã€‚

`[MyClass class]` æ˜¯ Objective-C çš„å†…ç½®æœºåˆ¶ï¼Œæ˜¯ä¸ºäº†æ”¯æŒ Objective-C åŠ¨æ€ç‰¹æ€§ç‰¹åˆ«è®¾è®¡çš„ã€‚æ‰€ä»¥è™½ç„¶å®ƒæ˜¯å”¯ä¸€çš„ï¼Œä½†å®ƒä¸æ˜¯å•ä¾‹æ¨¡å¼çš„åº”ç”¨å®ä¾‹ã€‚

:::

### â“`iOS` ä¸ºä»€ä¹ˆæ²¡æœ‰ç±»ä¼¼äº `Java` å’Œ `C` ä¹‹ç±»çš„ â€œBuilderâ€ çš„æ„é€ æ¨¡å¼

::: details ğŸ’¡

åœ¨ Objective-C å’Œ Swift ä¸­ï¼Œæœ‰å¾ˆå¤šç”¨æ¥åˆ›å»ºå’Œé…ç½®å¯¹è±¡çš„æ–¹å¼å¯ä»¥å–ä»£ "Builder" æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨å¸¦åˆå§‹å‚æ•°çš„æ„é€ å™¨ã€é“¾å¼è°ƒç”¨å’Œå‘½åå‚æ•°æ¥å®ç°ç±»ä¼¼äº "Builder" æ¨¡å¼çš„åŠŸèƒ½ã€‚ 

ä»¥ä¸‹æ˜¯åœ¨ Swift ä¸­å®ç°ç±»ä¼¼ "Builder" æ¨¡å¼çš„å®ä¾‹ï¼š

```swift
struct User {
    var name: String
    var age: Int
    var address: String?
}

// ä½¿ç”¨æ„é€ å™¨åˆ›å»º User å¯¹è±¡
let user1 = User(name: "Tom", age: 20, address: "New York")

// ä½¿ç”¨å±æ€§èµ‹å€¼çš„æ–¹å¼æ¥åˆ›å»ºå’Œé…ç½®å¯¹è±¡
var user2 = User(name: "", age: 0, address: nil)
user2.name = "John"
user2.age = 30
```

å³ä½¿ Objective-C å’Œ Swift æ²¡æœ‰ç±»ä¼¼ Java çš„ Builder æ¨¡å¼ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ª Builder ç±»æ¥å¸®åŠ©ä½ åˆ›å»ºå’Œé…ç½®å¯¹è±¡ã€‚

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª â€œPersonâ€ ç±»ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª "PersonBuilder" ç±»æ¥å¸®åŠ©æˆ‘ä»¬åˆ›å»º Person å¯¹è±¡ã€‚è¿™ä¸ª "PersonBuilder" ç±»ä¼šæœ‰å’Œ Person å¯¹è±¡ç›¸åŒçš„ä¸€ç»„å±æ€§ï¼ŒåŒæ—¶æœ‰ä¸€ä¸ªæ–¹æ³•ç”¨æ¥è¿”å›ä¸€ä¸ªæ–°çš„ Person å¯¹è±¡ã€‚

ä¾‹å¦‚ï¼š

```swift
class Person {
    let name: String
    let age: Int
    //...
}

class PersonBuilder {
    var name: String = ""
    var age: Int = 0
    //...
    
    func build() -> Person {
        return Person(name: name, age: age)
    }
}

```

åŒæ—¶ï¼ŒSwift çš„æŸäº›ç‰¹æ€§ï¼Œå¦‚ å¯é€‰ç±»å‹ å’Œ é»˜è®¤å‚æ•°ï¼Œä¹Ÿä½¿å¾—ä¸€äº› Builder æ¨¡å¼çš„éœ€è¦å˜å¾—ä¸å¤ªæ˜æ˜¾ï¼Œå› ä¸ºä½ å¯ä»¥åˆ›å»ºéƒ¨åˆ†å®ä¾‹å˜é‡æœªèµ‹å€¼çš„å¯¹è±¡ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ init å‡½æ•°ä¸­ä¸ºä¸€äº›å‚æ•°è®¾ç½®é»˜è®¤å€¼ã€‚

æœ€åï¼Œ ç®€å•å·¥å‚ã€æŠ½è±¡å·¥å‚æˆ–åè®®éƒ½å¯ä»¥åœ¨æŸç§ç¨‹åº¦ä¸Šå®ç°ç±»ä¼¼ Builder æ¨¡å¼çš„æ•ˆæœã€‚

:::

### â“`iOS` ä¸­å¸¸ç”¨è®¾è®¡æ¨¡å¼å®è·µæœ‰å“ªäº›

::: details ğŸ’¡

åœ¨iOSå¼€å‘ä¸­ï¼Œå¹¿æ³›ä½¿ç”¨äº†å¾ˆå¤šè®¾è®¡æ¨¡å¼ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„è®¾è®¡æ¨¡å¼ï¼š

1. Model-View-Controllerï¼ˆMVCï¼‰
MVCæ˜¯ä¸€ä¸ªä¼ ç»Ÿçš„iOSæ¶æ„æ¨¡å¼ï¼Œç”¨äºå°†ç”¨æˆ·ç•Œé¢ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ã€‚æ¨¡å‹è¡¨ç¤ºæ•°æ®å’Œä¸šåŠ¡é€»è¾‘ï¼Œè§†å›¾è¡¨ç¤ºç”¨æˆ·ç•Œé¢ï¼Œè€Œæ§åˆ¶å™¨åˆ™åè°ƒæ¨¡å‹å’Œè§†å›¾ã€‚

2. Delegation
å§”æ‰˜æ˜¯ä¸€ä¸ªç®€å•çš„è¡Œä¸ºæŠ½è±¡æ¨¡å¼ï¼Œå…è®¸ä¸€ä¸ªå¯¹è±¡å°†æŸäº›å†³ç­–æƒå’Œè¡Œä¸ºæ”¾åœ¨å…¶å®ƒå¯¹è±¡ä¸Šã€‚åœ¨iOSä¸­ï¼Œè¿™ä¸ªæ¨¡å¼è¢«å¹¿æ³›åº”ç”¨äºUIKitä¸­ã€‚

3. Singleton
å•ä¾‹æ¨¡å¼ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹åœ¨ä»»ä½•æ—¶å€™éƒ½æ˜¯å¯è®¿é—®çš„ï¼Œè¿™åœ¨iOSå¼€å‘ä¸­é€‚ç”¨äºé‚£äº›æä¾›å…¨å±€è®¿é—®ç‚¹æˆ–é‡ç”¨æŸä¸ªèµ„æºçš„åœºæ™¯ï¼Œæ¯”å¦‚UIApplicationï¼ŒUserDefaultsç­‰ã€‚

4. Observer
è§‚å¯Ÿè€…æ¨¡å¼åœ¨ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥æ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡ã€‚åœ¨iOSå¼€å‘ä¸­ï¼Œè¿™ä¸ªæ¨¡å¼ç»å¸¸ä»¥NotificationCenteræˆ–KVOï¼ˆKey-Value Observingï¼‰çš„å½¢å¼å‡ºç°ã€‚

5. Builder
åˆ›å»ºè€…æ¨¡å¼ç”¨äºä»¥æ­¥éª¤æ–¹å¼åˆ›å»ºå¤æ‚å¯¹è±¡ã€‚å®ƒå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„åˆ›å»ºæ­¥éª¤å°è£…åˆ°ä¸€ä¸ªå•ä¸€çš„å¯¹è±¡ä¸­ï¼Œè¿™æ ·åªéœ€è¦æä¾›å¿…è¦çš„ä¿¡æ¯ï¼Œè€Œæ— éœ€äº†è§£å†…éƒ¨å®ç°ç»†èŠ‚ã€‚

6. Prototype
åŸå‹æ¨¡å¼é€šè¿‡å¤åˆ¶æˆ–å…‹éš†å·²å­˜åœ¨çš„å®ä¾‹æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚åœ¨iOSå¼€å‘ä¸­ï¼Œè¿™å¸¸å¸¸ç”¨äºå¤åˆ¶`UIView`å­ç±»çš„å®ä¾‹ï¼Œæ¯”å¦‚UILabelã€UIButtonç­‰ã€‚

7. Factory Method
å·¥å‚æ–¹æ³•æ¨¡å¼å®šä¹‰äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œå°†å¯¹è±¡çš„å®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»ã€‚åœ¨iOSæ¡†æ¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨éœ€è¦äº§ç”Ÿä¸€ç³»åˆ—ç›¸å…³çš„å¯¹è±¡æ—¶ï¼Œç»å¸¸ä¼šä½¿ç”¨è¿™ç§æ¨¡å¼ï¼Œæ¯”å¦‚UIAlertControllerçš„åˆ›å»ºã€‚

è¿™äº›åªæ˜¯iOSå¼€å‘ä¸­ä½¿ç”¨çš„ä¸€äº›è®¾è®¡æ¨¡å¼ã€‚ä½¿ç”¨è¿™äº›æ¨¡å¼ï¼Œå¼€å‘è€…å¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œå¯æµ‹è¯•æ€§å¹¶é¿å…ä»£ç é‡å¤ã€‚

:::

### â“`MVC`ã€`MVP`ã€`MVVM`ã€`Coordinator`

::: details ğŸ’¡

`MVC`ã€`MVP`ã€`MVVM` ä»¥åŠ `Coordinator` éƒ½æ˜¯å¼€å‘æ¨¡å¼çš„åå­—ï¼Œå…·ä½“åŒ…å«ä»¥ä¸‹å«ä¹‰ï¼š

1. `MVC (Model-View-Controller)`ï¼š MVC æ˜¯ä¸€ç§å°†ä¸šåŠ¡é€»è¾‘ã€æ•°æ®ä»¥åŠç•Œé¢æ˜¾ç¤ºåˆ†ç¦»çš„è®¾è®¡æ¨¡å¼ã€‚åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šModel (æ¨¡å‹) è´Ÿè´£å¤„ç†æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ï¼› View (è§†å›¾) è´Ÿè´£æ˜¾ç¤ºæ•°æ®ï¼Œå³ç”¨æˆ·ç•Œé¢ï¼› Controller (æ§åˆ¶å™¨) æ˜¯ Model å’Œ View çš„æ¡¥æ¢ï¼Œè´Ÿè´£æ›´æ–° View ä»¥åŠå¤„ç†ç”¨æˆ·äº‹ä»¶ã€‚

2. `MVP (Model-View-Presenter)`ï¼š MVP æ¨¡å¼æ˜¯å¯¹ MVC çš„ä¸€ç§æ”¹è¿›ã€‚åœ¨ MVP ä¸­ï¼ŒPresenter å–ä»£äº† Controller çš„éƒ¨åˆ†èŒè´£ï¼ŒView ä¸ Model ä¸å†ç›´æ¥é€šä¿¡ï¼Œæ‰€æœ‰çš„é€šä¿¡éƒ½é€šè¿‡ Presenter æ¥è¿›è¡Œã€‚è¿™æ ·æ›´å¥½çš„åˆ†ç¦»äº† View å’Œ Modelã€‚

3. `MVVM (Model-View-ViewModel)`ï¼š MVVM æ˜¯ä¸€ç§æ”¹è‰¯å‹çš„ MVP è®¾è®¡æ¨¡å¼ï¼Œå®ƒå¼•å…¥äº† ViewModelï¼ŒViewModel ä¸»è¦è´Ÿè´£ View ä¸­çš„çŠ¶æ€ä»¥åŠå¤„ç†ä¸€éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘ï¼Œå¹¶ä¸” ViewModel ä¸åŒ…å«å¯¹ View çš„å¼•ç”¨ï¼Œæ‰€ä»¥åœ¨ MVVM ä¸­ï¼ŒViewï¼ŒViewModel å’Œ Model æ˜¯å®Œå…¨è§£è€¦çš„ã€‚

4. `Coordinator`ï¼šCoordinator æ˜¯ä¸€ç§è¡Œä¸ºå’Œå¯¼èˆªæµç¨‹ç®¡ç†çš„æ¨¡å¼ï¼Œä¸»è¦ç›®çš„æ˜¯å°†è¿™äº›ä» MVCã€MVP æˆ– MVVM ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œä½¿å…¶èŒè´£æ›´åŠ æ¸…æ™°ã€‚Coordinator å¯ä»¥ç®¡ç†åº”ç”¨çš„å¯¼èˆªæµç¨‹ï¼Œæ§åˆ¶å…¶å®ƒ MVCã€MVP æˆ– MVVM æ¨¡å—ï¼Œåè°ƒè¿™äº›æ¨¡å—é—´çš„å·¥ä½œã€‚

ä»¥ä¸Šæ¯ç§æ¶æ„éƒ½æœ‰å„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œå¹¶ä¸å­˜åœ¨å“ªç§ç»å¯¹å¥½æˆ–è€…ç»å¯¹é€‚ç”¨çš„ï¼Œéœ€è¦ä¾æ®é¡¹ç›®éœ€æ±‚æ¥é€‰æ‹©ä½¿ç”¨å“ªç§æ¨¡å¼ã€‚

:::

### â“`MVC` ä»‹ç»ä¸€ä¸‹ï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ

::: details ğŸ’¡

MVCï¼ˆModel-View-Controllerï¼‰æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œä¸»è¦ç”¨æ¥ç»„ç»‡ä»£ç ç»“æ„ï¼Œå°†åº”ç”¨ç¨‹åºåˆ†ä¸ºä¸‰ä¸ªä¸»è¦éƒ¨åˆ†ï¼š


1. æ¨¡å‹ï¼ˆModelï¼‰ï¼šç”¨äºå­˜å‚¨å’Œç®¡ç†åº”ç”¨ç¨‹åºçš„æ•°æ®ã€‚å®ƒåœ¨æ•°æ®åº“ä¸­è¯»å–æˆ–å†™å…¥æ•°æ®ï¼Œå¹¶åœ¨éœ€è¦æ—¶æ›´æ–°å…¶çŠ¶æ€ã€‚æ¨¡å‹å¹¶ä¸ç›´æ¥ä¸æ§åˆ¶å™¨æˆ–è§†å›¾äº¤äº’ã€‚

2. è§†å›¾ï¼ˆViewï¼‰ï¼šç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢å’Œå±•ç¤ºæ•°æ®ã€‚è§†å›¾ä¸çŸ¥é“æ¨¡å‹çš„å­˜åœ¨ï¼Œè§†å›¾å¹¶ä¸ç›´æ¥ä¸æ¨¡å‹é€šä¿¡ã€‚è§†å›¾åªæ˜¯æ ¹æ®æ§åˆ¶å™¨æä¾›çš„æ•°æ®ç”Ÿæˆè¾“å‡ºã€‚

3. æ§åˆ¶å™¨ï¼ˆControllerï¼‰ï¼šä¸­ä»‹è€…ï¼Œè´Ÿè´£å¤„ç†æ¨¡å‹å’Œè§†å›¾ä¹‹é—´çš„æ‰€æœ‰é€šä¿¡ã€‚æ§åˆ¶å™¨æ¥æ”¶æ¥è‡ªè§†å›¾çš„ç”¨æˆ·è¾“å…¥ï¼Œå¹¶æ ¹æ®è¾“å…¥æŒ‡ç¤ºæ¨¡å‹è¿›è¡Œæ›´æ”¹ï¼Œç„¶åæ ¹æ®æ¨¡å‹çš„çŠ¶æ€æ›´æ–°è§†å›¾ã€‚

è™½ç„¶ MVC æ¨¡å¼çš„ä¼˜ç‚¹å¾ˆå¤šï¼Œä¾‹å¦‚ç»“æ„æ˜ç¡®ï¼Œå±‚æ¬¡åˆ†ç¦»ç­‰ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­ä¹Ÿå¯èƒ½å­˜åœ¨ä¸€äº›é—®é¢˜ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„é—®é¢˜å’Œé™åˆ¶ï¼š

1. Massive View Controllerï¼šåœ¨ iOS å¼€å‘ä¸­ï¼ŒView Controller é€šå¸¸æˆä¸ºå¤§è€Œå¤æ‚çš„ç±»ï¼Œè´Ÿè´£äº†è®¸å¤šèŒè´£ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ã€æ•°æ®å¤„ç†ã€UI æ›´æ–°ç­‰ã€‚è¿™å¸¸å¸¸è¿åäº†å•ä¸€èŒè´£åŸåˆ™ï¼ˆSingle Responsibility Principleï¼‰ï¼Œä½¿å¾— View Controller éš¾ä»¥ç»´æŠ¤å’Œæµ‹è¯•ã€‚

2. è§†å›¾å’Œæ¨¡å‹å¯èƒ½è¿‡äºä¾èµ–æ§åˆ¶å™¨ï¼šåœ¨ MVC ä¸­ï¼Œå°½ç®¡æ¨¡å‹å’Œè§†å›¾ä¹‹é—´çš„é€šä¿¡å¿…é¡»é€šè¿‡æ§åˆ¶å™¨è¿›è¡Œï¼Œä½†æœ‰æ—¶å€™æ§åˆ¶å™¨ä¼šè´Ÿæ‹…å¤ªå¤šçš„è´£ä»»ï¼Œæ¯”å¦‚åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæ¨¡å‹å’Œè§†å›¾ä¹‹é—´è‹¥èƒ½è¿›è¡Œç›´æ¥é€šä¿¡ï¼Œå¯èƒ½ä¼šæ›´åŠ ç›´æ¥å’Œé«˜æ•ˆã€‚

3. ä¸ºä¿æŒè§†å›¾å’Œæ¨¡å‹çš„éš”ç¦»ï¼Œå¯èƒ½éœ€è¦è¿½åŠ é¢å¤–çš„ä»£ç ï¼šä¸ºäº†ä¿æŒè§†å›¾å’Œæ¨¡å‹å½¼æ­¤ç‹¬ç«‹ï¼Œæœ‰æ—¶å€™éœ€è¦ç¼–å†™é¢å¤–çš„ä»£ç æ¥æ›´æ–°å’ŒåŒæ­¥æ•°æ®ï¼Œè¿™å¯èƒ½æˆä¸ºä¸€ä¸ªè´Ÿæ‹…ã€‚

4. æµ‹è¯•å›°éš¾ï¼šç”±äºæ§åˆ¶å™¨ä¸­åŒ…å«äº†å¤§é‡çš„ä¸šåŠ¡é€»è¾‘ï¼Œå› æ­¤å•å…ƒæµ‹è¯•å¯èƒ½å˜å¾—æ¯”è¾ƒå›°éš¾ã€‚

:::

### â“`MVC` ç›¸äº’é€šè®¯è§„åˆ™éƒ½æœ‰å“ªäº›

::: details ğŸ’¡

![iOS-MVC](media/iOS-MVC.png)

åœ¨iOSä¸­ï¼ŒMVC(Model-View-Controller)çš„ç»„ä»¶é—´æ˜¯æœ‰è§„å®šçš„é€šä¿¡æ–¹å¼çš„ï¼š

1. æ§åˆ¶å™¨(Controller)ä¸æ¨¡å‹(Model)ï¼šæ§åˆ¶å™¨å¯ä»¥ç›´æ¥ä¸æ¨¡å‹è¿›è¡Œé€šä¿¡ï¼Œä¾‹å¦‚XMLæˆ–JSONè§£æï¼Œæ•°æ®åº“CRUDæ“ä½œç­‰ï¼Œå°†è·å–çš„æ•°æ®è½¬åŒ–ä¸ºæ¨¡å‹ï¼Œæˆ–è€…å°†æ¨¡å‹æŒä¹…åŒ–ä¸ºæ•°æ®ã€‚

2. æ§åˆ¶å™¨(Controller)ä¸è§†å›¾(View)ï¼šæ§åˆ¶å™¨ä¹Ÿå¯ä»¥ä¸è§†å›¾è¿›è¡Œç›´æ¥é€šä¿¡ã€‚ä¾‹å¦‚ï¼Œæ§åˆ¶å™¨å¯ä»¥è®¾ç½®è§†å›¾çš„æ˜¾ç¤ºï¼Œå¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œä»¥åŠæ›´æ–°è§†å›¾ä¸Šçš„æ•°æ®ã€‚

3. è§†å›¾(View)å’Œæ¨¡å‹(Model)ï¼šåœ¨ä¼ ç»Ÿçš„MVCæ¡†æ¶ä¸­ï¼Œä¸€èˆ¬ä¸å»ºè®®è§†å›¾å’Œæ¨¡å‹ç›´æ¥é€šä¿¡ã€‚æ‰€æœ‰çš„é€šä¿¡éƒ½åº”è¯¥é€šè¿‡æ§åˆ¶å™¨æ¥è¿›è¡Œã€‚ä½†åœ¨iOSä¸­ï¼Œæœ‰äº›æƒ…å†µä¸‹ï¼Œè‹¹æœæä¾›çš„ä¸€äº›UIKitç»„ä»¶ï¼ˆæ¯”å¦‚UITableViewå’ŒUICollectionViewï¼‰ä¼šç”±äºæ€§èƒ½å’Œæ•ˆç‡çš„éœ€è¦ï¼Œéœ€è¦å…è®¸è§†å›¾å’Œæ¨¡å‹è¿›è¡Œç›´æ¥äº¤äº’ã€‚è¿™ç§äº¤äº’ä¹Ÿæ˜¯åœ¨æ§åˆ¶å™¨çš„ç®¡ç†ä¸‹è¿›è¡Œçš„ã€‚

ç„¶åï¼Œä¸ºäº†å¤„ç†è§†å›¾å’Œæ¨¡å‹çš„äº¤äº’ï¼Œé€šå¸¸ä¼šå€ŸåŠ©äºä¸€äº›è®¾è®¡æ¨¡å¼ï¼Œä¾‹å¦‚ï¼š

- Delegateï¼ˆå§”æ‰˜ï¼‰ï¼šè¿™æ˜¯iOSä¸­æœ€å¸¸ç”¨çš„ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œä¾‹å¦‚UITableViewå’ŒUICollectionViewçš„delegateå’Œdatasourceå°±æ˜¯è¿™ç§æ–¹å¼ã€‚
- Notificationï¼ˆé€šçŸ¥ï¼‰ï¼šä½¿ç”¨NSNotificationCenterè¿›è¡Œå¯¹è±¡ä¹‹é—´çš„é€šä¿¡ï¼Œå®ƒå…è®¸ä¸€ä¸ªå¯¹è±¡å¹¿æ’­äº‹ä»¶ï¼Œè€Œå…¶å®ƒå¯¹è±¡å¯ä»¥é€‰æ‹©æ¥æ”¶è¿™ä¸ªäº‹ä»¶ã€‚
- KVOï¼ˆKey Value Observingï¼‰ï¼šä¸€ä¸ªå¯¹è±¡å¯ä»¥è§‚å¯Ÿå¦ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§ï¼Œå½“è¿™ä¸ªå±æ€§çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè§‚å¯Ÿè€…å¯¹è±¡ä¼šå¾—åˆ°é€šçŸ¥ã€‚
- Blockï¼ˆé—­åŒ…ï¼‰ï¼šè¿™ä¹Ÿæ˜¯iOSä¸­å¸¸ç”¨çš„é€šä¿¡æ–¹å¼ï¼Œä¸€ä¸ªå¯¹è±¡å¯ä»¥æŠŠä¸€æ®µä»£ç ï¼ˆå³é—­åŒ…ï¼‰ä¼ é€’ç»™å¦ä¸€ä¸ªå¯¹è±¡æ‰§è¡Œã€‚

ä»¥ä¸Šå°±æ˜¯iOSä¸­MVCåŠå…¶é€šä¿¡è§„åˆ™çš„ä¸€äº›ä¸»è¦å†…å®¹ã€‚

:::

### â“`Model` ä¼šæŒæœ‰ `View` å—

::: details ğŸ’¡

Modelï¼ˆæ¨¡å‹ï¼‰ä¸åº”æŒæœ‰Viewï¼ˆè§†å›¾ï¼‰ã€‚è¿™æ˜¯MVCï¼ˆModel-View-Controllerï¼‰æ¶æ„æ¨¡å¼çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä¸­Modelã€Viewå’ŒControlleræœ‰æ˜ç¡®çš„è§’è‰²å®šä¹‰å¹¶ä¸”ç›¸äº’åˆ†ç¦»ã€‚

åœ¨MVCæ¶æ„ä¸­ï¼š

- Modelï¼ˆæ¨¡å‹ï¼‰è´Ÿè´£ç®¡ç†åº”ç”¨ç¨‹åºçš„æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ã€‚å®ƒåœ¨æ•°æ®åº“ä¸­è¯»å–æˆ–å†™å…¥æ•°æ®ï¼Œå¹¶åœ¨éœ€è¦æ—¶æ›´æ–°å…¶çŠ¶æ€ã€‚æ¨¡å‹å¹¶ä¸ç›´æ¥ä¸æ§åˆ¶å™¨æˆ–è§†å›¾äº¤äº’ã€‚

- Viewï¼ˆè§†å›¾ï¼‰è´Ÿè´£æ˜¾ç¤ºç”¨æˆ·ç•Œé¢å’Œæ•°æ®ã€‚è§†å›¾ä¸çŸ¥é“æ¨¡å‹çš„å­˜åœ¨ï¼Œåªæ˜¯æ ¹æ®æ§åˆ¶å™¨æä¾›çš„æ•°æ®ç”Ÿæˆè¾“å‡ºã€‚

- Controllerï¼ˆæ§åˆ¶å™¨ï¼‰å¤„ç†æ¨¡å‹å’Œè§†å›¾ä¹‹é—´çš„æ‰€æœ‰äº¤äº’å’Œé€šä¿¡ã€‚æ§åˆ¶å™¨æ¥æ”¶æ¥è‡ªè§†å›¾çš„ç”¨æˆ·è¾“å…¥ï¼Œå¹¶æ ¹æ®è¾“å…¥æŒ‡ç¤ºæ¨¡å‹è¿›è¡Œæ›´æ”¹ï¼Œç„¶åæ ¹æ®æ¨¡å‹çš„çŠ¶æ€æ›´æ–°è§†å›¾ã€‚

å› æ­¤ï¼ŒModelï¼ˆæ¨¡å‹ï¼‰ä¸èƒ½æŒæœ‰Viewï¼ˆè§†å›¾ï¼‰ã€‚è¿™ç§åˆ†ç¦»ä½¿å¾—Modelå’ŒViewå¯ä»¥å„è‡ªç‹¬ç«‹åœ°æ”¹å˜å’Œå¤ç”¨ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå…¶å®ƒç»„ä»¶çš„å®ç°ï¼Œä½¿å¾—ä»£ç æ›´åŠ æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ã€‚

:::

### â“`MVVM` å¦‚ä½•å®ç°ç»‘å®š

::: details ğŸ’¡

MVVM ä½¿ç”¨æ•°æ®ç»‘å®šæ¥å®ç°ViewModelå’ŒViewä¹‹é—´çš„äº¤äº’ã€‚æ•°æ®ç»‘å®šå¯ä»¥é™ä½ä¹¦å†™æ ·æ¿ä»£ç çš„éœ€è¦ï¼Œå½“ViewModelçš„çŠ¶æ€æ”¹å˜æ—¶ï¼ŒViewå¯ä»¥è‡ªåŠ¨æ›´æ–°ï¼Œåä¹‹äº¦ç„¶ã€‚

æ•°æ®ç»‘å®šçš„å®ç°æ–¹å¼æ ¹æ®å…·ä½“çš„è¯­è¨€å’Œå·¥å…·è€Œä¸åŒï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„æ–¹æ³•ï¼š

1. Key-Value Observing(KVO)ï¼šåœ¨Objective-Cä¸­ï¼Œå¯ä»¥ä½¿ç”¨KVOæ¥è§‚å¯ŸViewModelä¸­å±æ€§çš„å˜åŒ–ï¼Œå½“å±æ€§å˜åŒ–æ—¶ï¼Œæ›´æ–°å¯¹åº”çš„UIã€‚

2. Delegateï¼šé€šè¿‡å®šä¹‰åè®®å’Œä»£ç†ï¼ŒViewModelå¯ä»¥æŠŠçŠ¶æ€å˜åŒ–é€šçŸ¥ç»™Viewã€‚

3. é€šçŸ¥å’Œäº‹ä»¶ï¼šå½“ViewModelçš„çŠ¶æ€æ”¹å˜æ—¶ï¼Œå®ƒå¯ä»¥å‘é€ä¸€ä¸ªé€šçŸ¥æˆ–è€…è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼ŒViewå¯ä»¥ç›‘å¬è¿™äº›é€šçŸ¥æˆ–äº‹ä»¶ï¼Œç„¶åä½œå‡ºå“åº”ã€‚

4. Reactive Programmingï¼šæ¯”å¦‚ä½¿ç”¨ReactiveCocoa(åœ¨Objective-Cä¸­)æˆ–è€…RxSwift(åœ¨Swiftä¸­)ï¼Œè¿™äº›åº“æä¾›äº†ä¸€ç§å“åº”å¼ç¼–ç¨‹çš„æ–¹å¼ï¼Œä½ å¯ä»¥æ–¹ä¾¿çš„åˆ›å»ºæ•°æ®æµå¹¶å“åº”å€¼çš„å˜åŒ–ã€‚

5. Data Bindingæ¡†æ¶ï¼šåœ¨ä¸€äº›å¹³å°ä¸Šï¼Œå¦‚Windowsæˆ–Androidï¼Œæ¡†æ¶å±‚æä¾›äº†æ•°æ®ç»‘å®šçš„æ”¯æŒã€‚ä½ åªéœ€è¦åœ¨å¸ƒå±€æ–‡ä»¶ä¸­å£°æ˜ç»‘å®šå…³ç³»ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨åœ¨ViewModelå’ŒViewä¹‹é—´åŒæ­¥æ•°æ®ã€‚

ä»¥ä¸Šå°±æ˜¯ä¸€äº›å¸¸è§çš„å®ç°MVVMä¸­æ•°æ®ç»‘å®šçš„æ–¹æ³•ï¼Œé€‰æ‹©å“ªç§æ–¹æ³•ä¸»è¦å–å†³äºä½ ä½¿ç”¨çš„è¯­è¨€ã€å¹³å°å’Œæ¡†æ¶ã€‚

:::

### â“å•å‘æ•°æ®æµ (`Redux`ã€`ReSwift`ã€`RxFeedback`)

::: details ğŸ’¡

å•å‘æ•°æ®æµæ˜¯æŒ‡æ•°æ®åœ¨åº”ç”¨ä¸­æµåŠ¨çš„æ–¹å¼ï¼Œå…¶ä¸­æ•°æ®åªèƒ½æŒ‰ç…§é¢„å®šçš„è·¯å¾„æµåŠ¨ï¼Œä¸ä¼šå‡ºç°æ•°æ®æµæ··ä¹±çš„æƒ…å†µã€‚åœ¨ä½¿ç”¨ `Redux`ã€`ReSwift`ã€`RxFeedback` è¿™æ ·çš„æ¡†æ¶æ—¶ï¼Œä¸€èˆ¬éƒ½ä¼šéµå¾ªå•å‘æ•°æ®æµçš„åŸåˆ™ã€‚

Redux æ˜¯ JavaScript ç¯å¢ƒä¸‹çš„ä¸€ä¸ªçŠ¶æ€ç®¡ç†åº“ï¼Œæ‰€æœ‰çš„çŠ¶æ€æ›´æ–°éƒ½éµå¾ªå•å‘æ•°æ®æµï¼Œæµç¨‹ä¸ºï¼š`Action` -> `Reducer` -> `Store` -> `View` -> `Action`ã€‚

ReSwift æ˜¯ Redux åœ¨ Swift ç¯å¢ƒä¸­çš„ç§»æ¤ç‰ˆæœ¬ï¼Œå…¶å¤„ç†æµç¨‹åŒæ ·æ˜¯å•å‘çš„ï¼š`Action` -> `Reducer` -> `Store` -> `View` -> `Action`ã€‚

RxFeedback æ˜¯åŸºäº RxSwift çš„ä¸€ä¸ªæ— çŠ¶æ€æ¡†æ¶ï¼Œå®ƒä½¿ç”¨ç³»ç»Ÿå¾ªç¯ï¼ˆSystem Loopï¼‰çš„æ¦‚å¿µæ¥æè¿°å•å‘æ•°æ®æµï¼Œå¤„ç†æµç¨‹ä¸ºï¼š`System` -> `Mutation` -> `State` -> `View` -> `Event` -> `System`ã€‚

ç®€å•æ¥è¯´ï¼Œå•å‘æ•°æ®æµçš„æ¨¡å‹ç»å¸¸ä¼šè¢«ç”¨äºè§£å†³çŠ¶æ€ç®¡ç†çš„é—®é¢˜ï¼Œå®ƒèƒ½å¤Ÿè®©æ•°æ®æµçš„èµ°å‘å˜å¾—æ›´æ¸…æ™°ï¼Œæœ‰åˆ©äºè°ƒè¯•å’Œç»´æŠ¤ã€‚

:::

------

## æŒç»­é›†æˆ

### â“ä½¿ç”¨è¿‡ä»€ä¹ˆæŒç»­é›†æˆæ–¹å¼

::: details ğŸ’¡

  > æŒç»­é›†æˆï¼ˆContinuous Integration, CIï¼‰æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘å®è·µï¼Œå…¶ä¸­å¼€å‘è€…å°†ä»–ä»¬çš„æ›´æ”¹ç»å¸¸ï¼ˆæ¯å¤©ç”šè‡³æ˜¯é¢‘ç¹ï¼‰é›†æˆåˆ°ä¸»åˆ†æ”¯ä¸­ã€‚æ¯æ¬¡é›†æˆéƒ½ä¼šé€šè¿‡ç¼–è¯‘ã€åˆ›å»ºæ„å»ºå’Œè‡ªåŠ¨åŒ–æµ‹è¯•æ¥éªŒè¯ä»£ç çš„æ­£ç¡®æ€§ã€‚ä¸€äº›ç›®å‰å¸¸è§çš„æŒç»­é›†æˆæ–¹å¼åŠå·¥å…·åŒ…æ‹¬ï¼š

1. `Jenkins`ï¼š Jenkins æ˜¯ä¸€ä¸ªå¼€æºçš„ã€åŸºäº Java çš„æŒç»­é›†æˆå·¥å…·ã€‚å®ƒéå¸¸çµæ´»ï¼Œæœ‰è®¸å¤šæ’ä»¶å¯ç”¨ï¼Œå¯ä»¥ç”¨äºæ„å»ºé¡¹ç›®ï¼Œæ‰§è¡Œæµ‹è¯•ï¼Œå¹¶ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šã€‚

2. `Travis CI`ï¼š Travis CI æ˜¯ä¸€ä¸ªåœ¨çº¿çš„ã€åˆ†å¸ƒå¼çš„æŒç»­é›†æˆæœåŠ¡ï¼Œç”¨äºæ„å»ºå’Œæµ‹è¯•åœ¨ GitHub å’Œ Bitbucket ä¸Šæ‰˜ç®¡çš„é¡¹ç›®ã€‚

3. `CircleCI`ï¼š CircleCI æ˜¯ä¸€ä¸ªä¸ºè½¯ä»¶å›¢é˜Ÿæä¾›æŒç»­é›†æˆå’Œäº¤ä»˜çš„æœåŠ¡ã€‚å®ƒæ”¯æŒåŒ…æ‹¬ androidã€ios åœ¨å†…çš„å¤šç§è¯­è¨€è¿›è¡Œæ„å»ºå’Œæµ‹è¯•ã€‚

4. `GitLab CI/CD`ï¼š GitLab è‡ªå¸¦ CI/CD åŠŸèƒ½ï¼Œä½ å¯ä»¥åœ¨ä»“åº“ä¸­æ·»åŠ  `.gitlab-ci.yml` æ–‡ä»¶ï¼Œå®šä¹‰å‡ºä¸€ç»„ç”¨äº CI/CD çš„é…ç½®å’Œä»»åŠ¡ã€‚

5. `Fastlane`ï¼š Fastlane æ˜¯ä¸€æ¬¾ä¸º iOS å’Œ Android åº”ç”¨è®¾è®¡çš„æŒç»­é›†æˆå·¥å…·ï¼Œä¸»è¦ç”¨äºè‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ã€‚

6. `Xcode Server`ï¼š Xcode Server æ˜¯ Apple æä¾›çš„ä¸€æ¬¾æŒç»­é›†æˆæ–¹æ¡ˆï¼Œå¯ä»¥è¿›è¡Œæ„å»ºã€åˆ†æã€æµ‹è¯•å’Œå½’æ¡£ã€‚

ä»¥ä¸Šå°±æ˜¯ä¸€äº›ä¸»æµçš„æŒç»­é›†æˆæ–¹å¼å’Œå·¥å…·ï¼Œæœ‰çš„æ¯”è¾ƒç®€å•æ˜“ä¸Šæ‰‹ï¼Œæœ‰çš„åˆ™æä¾›äº†ä¸°å¯Œçš„é…ç½®å’Œæ’ä»¶å¸®åŠ©æˆ‘ä»¬è¿›è¡Œä¸ªæ€§åŒ–çš„è°ƒæ•´ã€‚

:::

### â“`Jenkins` æ€ä¹ˆå¤‡ä»½æ¢å¤

::: details ğŸ’¡

Jenkins çš„å¤‡ä»½å’Œæ¢å¤ä¸»è¦éœ€è¦è€ƒè™‘çš„æ˜¯ Jenkins çš„ä¸»ç›®å½•ï¼Œä¸»ç›®å½•å­˜å‚¨äº†æ„å»ºçš„å·¥ä½œç›®å½•ï¼Œç”¨æˆ·è´¦å·é…ç½®ï¼Œæ’ä»¶è®¾ç½®ï¼Œç³»ç»Ÿé…ç½®ç­‰ä¿¡æ¯ã€‚

ä»¥ä¸‹æ˜¯ä½¿ç”¨ Linux ç³»ç»Ÿä¸ºä¾‹ï¼Œè¿›è¡Œ Jenkins å¤‡ä»½å’Œæ¢å¤çš„æ­¥éª¤ï¼š

å¤‡ä»½ï¼š
1. é¦–å…ˆï¼Œè¿›å…¥ Jenkins çš„ä¸»ç›®å½•ï¼Œä¸€èˆ¬é»˜è®¤åœ°å€ä¸º "/var/lib/jenkins/"ï¼š

```bash
cd /var/lib/jenkins
```
2. ç„¶åï¼Œåˆ›å»ºä¸€ä¸ª Jenkins çš„å¤‡ä»½æ–‡ä»¶ï¼š

```bash
sudo tar cvzf jenkins-backup.tar.gz *
```
è¿™ä¼šå°† Jenkins ä¸»ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œåä¸º "jenkins-backup.tar.gz"ã€‚ä½ å¯ä»¥å°†æ­¤æ–‡ä»¶å­˜å‚¨åœ¨å®‰å…¨çš„åœ°æ–¹ä»¥å¤‡åç”¨ã€‚

æ¢å¤ï¼š
1. é¦–å…ˆï¼Œå°†ä½ çš„å¤‡ä»½æ–‡ä»¶å¤åˆ¶åˆ° Jenkins çš„ä¸»ç›®å½•ã€‚

```bash
sudo cp /path/to/your/backup/jenkins-backup.tar.gz /var/lib/jenkins
```
2. ç„¶åï¼Œè¿›å…¥ Jenkins çš„ä¸»ç›®å½•ï¼Œè§£å‹å¤‡ä»½æ–‡ä»¶ï¼š

```bash
cd /var/lib/jenkins

sudo tar xvzf jenkins-backup.tar.gz
```
ä»¥ä¸Šå‘½ä»¤å°†ä¼šè§£å‹å¤‡ä»½æ–‡ä»¶å¹¶æ¢å¤å—æŸçš„ Jenkinsã€‚

3. æœ€åï¼Œç¡®ä¿æ‰€æœ‰æ–‡ä»¶çš„æƒé™è®¾ç½®æ­£ç¡®ï¼Œç„¶åé‡å¯ Jenkinsï¼š

```bash
sudo chown -R jenkins:jenkins /var/lib/jenkins

sudo service jenkins restart
```
ä»¥ä¸Šè¿™äº›æ˜¯åŸºç¡€çš„å¤‡ä»½æ¢å¤æ­¥éª¤ï¼Œå®é™…æ“ä½œä¸­å¯èƒ½éœ€è¦æ ¹æ®å…·ä½“çš„æƒ…å†µè¿›è¡Œè°ƒæ•´ï¼Œä¾‹å¦‚ä½ çš„ Jenkins çš„ä¸»ç›®å½•å¯èƒ½ä¸åœ¨ "/var/lib/jenkins"ã€‚

:::

### â“`Jenkins` ä½¿ç”¨è¿‡å“ªäº›æ’ä»¶

::: details ğŸ’¡

åœ¨ Jenkins ä¸­ï¼Œæœ‰å„ç§å„æ ·çš„æ’ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ‰©å±•å’Œè‡ªå®šä¹‰ Jenkins çš„åŠŸèƒ½ã€‚è¿™äº›æ’ä»¶å¯ä»¥ç”¨äºæ„å»ºå·¥å…·ã€æºä»£ç ç®¡ç†ã€ç”¨æˆ·ç•Œé¢æ”¹è¿›ã€é€šçŸ¥ã€åˆ†æå’Œè®¸å¤šå…¶ä»–ä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ Jenkins æ’ä»¶ï¼š

1. Git Plugin: è¿™ä¸ªæ’ä»¶å…è®¸ Jenkins é€šè¿‡ Git ä½œä¸ºæºä»£ç ç®¡ç†å·¥å…·è¿›è¡Œé¡¹ç›®æ„å»ºã€‚

2. GitHub Plugin: è¿™ä¸ªæ’ä»¶ä¸º Jenkins æä¾›äº†ä¸€ç§ä¸ Github äº¤äº’çš„æ–¹å¼ï¼Œæ¯”å¦‚å¯ä»¥è§¦å‘ Jenkins åš CI/CDã€‚

3. Pipeline: è¿™æ˜¯ Jenkins ä¸­æœ€ä¸»è¦çš„æ’ä»¶ä¹‹ä¸€ã€‚å®ƒå¸¦æ¥äº† Jenkins Pipelineï¼ˆä¹Ÿå«åš Jenkinsfileï¼‰è¿™ç§æ–¹å¼ï¼Œå…è®¸æˆ‘ä»¬ä»¥ä»£ç å½¢å¼å®šä¹‰å’Œç®¡ç† Jenkins ä¸­çš„æ„å»ºæµç¨‹ã€‚

4. Maven Integration plugin: è¿™ä¸ªæ’ä»¶è®© Jenkins æ”¯æŒ Maven æ„å»ºä»»åŠ¡ã€‚

5. Blue Ocean: è¿™ä¸ªæ’ä»¶æ˜¯ Jenkins çš„ä¸€ç§æ–°çš„ç”¨æˆ·ç•Œé¢ï¼Œå®ƒè®© Pipeline çš„åˆ›å»ºå’Œç›‘è§†æ›´åŠ ç›´è§‚å’Œç”¨æˆ·å‹å¥½ã€‚

6. Email Extension Plugin: è¿™ä¸ªæ’ä»¶å¯ä»¥å¸®åŠ© Jenkins åœ¨æ„å»ºç»“æœå‡ºç°åå‘é€é‚®ä»¶é€šçŸ¥ã€‚

7. Junit Plugin: è¿™ä¸ªæ’ä»¶å¯ä»¥è®© Jenkins æ”¯æŒ JUnit æµ‹è¯•æŠ¥å‘Šã€‚

8. Build Monitor Plugin: è¿™ä¸ªæ’ä»¶æä¾›äº†ä¸€ç§è§†è§‰æ˜¾ç¤ºæ¥å±•ç¤ºæ„å»ºçš„çŠ¶æ€ã€‚

ä»¥ä¸Šåªæ˜¯ä¸€äº›å¸¸è§çš„ Jenkins æ’ä»¶ï¼Œå®é™…ä¸Š Jenkins ç¤¾åŒºæä¾›äº†ä¸Šåƒç§å„å¼å„æ ·çš„æ’ä»¶ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€è¦é€‰æ‹©ä½¿ç”¨ã€‚

:::

------

## æ¨¡å—è®¾è®¡

### â“è®¾è®¡å®ç°ä¸€ä¸ªæ—¶é•¿ç»Ÿè®¡æ¨¡å—

::: details ğŸ’¡

> è®¾è®¡

è®¾è®¡ä¸€ä¸ªæ—¶é•¿ç»Ÿè®¡æ¨¡å—å¯ä»¥æ¶‰åŠä¸åŒçš„éœ€æ±‚ï¼Œä½†åŸºæœ¬éƒ½åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤:

1. å®šä¹‰éœ€æ±‚ï¼šé¦–å…ˆæˆ‘ä»¬éœ€è¦æ˜ç¡®æ—¶é—´ç»Ÿè®¡æ¨¡å—éœ€è¦ç»Ÿè®¡çš„å…·ä½“å†…å®¹ã€‚å¯èƒ½æ˜¯appä½¿ç”¨æ—¶é•¿ã€æŸä¸ªåŠŸèƒ½æˆ–è€…é¡µé¢çš„åœç•™æ—¶é•¿ï¼Œæˆ–è€…æŸä¸ªè¿‡ç¨‹çš„è¿è¡Œæ—¶é•¿ã€‚

2. æ•°æ®æ”¶é›†ï¼šè®¾è®¡åˆé€‚çš„æ–¹æ³•å»æ”¶é›†è¿™äº›æ—¶é—´æ•°æ®ã€‚å¦‚å¼€å§‹/ç»“æŸæ—¶é—´çš„è®°å½•ï¼Œå¯èƒ½éœ€è¦ç›¸åº”çš„è§¦å‘æ¡ä»¶(æ¯”å¦‚appå¯åŠ¨/å…³é—­ï¼Œè¿›å…¥/ç¦»å¼€é¡µé¢ï¼Œå¼€å§‹/ç»“æŸæŸä¸ªè¿‡ç¨‹ç­‰)ã€‚

3. æ•°æ®å­˜å‚¨ï¼šå®šä¹‰åˆé€‚çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨è¿™äº›æ•°æ®ï¼Œå¯èƒ½ç»“åˆæ—¥æœŸè¿›è¡Œå­˜å‚¨ï¼Œä¸ºåç»­çš„æ•°æ®åˆ†æåšå‡†å¤‡ã€‚å¯ä»¥ä½¿ç”¨æ•°æ®åº“æˆ–è€…æ–‡ä»¶å½¢å¼å­˜å‚¨ã€‚

4. æ•°æ®å¤„ç†åŠåˆ†æï¼šå¯¹æ”¶é›†åˆ°çš„æ—¶é•¿æ•°æ®è¿›è¡Œå¤„ç†åŠåˆ†æã€‚è¿™å¯èƒ½æ¶‰åŠåˆ°ç®—æ³•çš„è®¾è®¡ï¼Œåœ¨å†…å­˜é™åˆ¶åŠè®¡ç®—æ€§èƒ½å…è®¸çš„æƒ…å†µä¸‹ï¼Œé«˜æ•ˆåœ°è¿›è¡Œæ•°æ®è®¡ç®—ï¼Œå¹¶åœ¨éœ€è¦çš„æ—¶å€™æä¾›ç»Ÿè®¡æ•°æ®ã€‚

5. æ•°æ®å‘ˆç°ï¼šè®¾è®¡åˆé€‚çš„æ–¹å¼æ¥å‘ˆç°è¿™äº›æ—¶é—´ç»Ÿè®¡çš„ç»“æœã€‚å¯èƒ½æ˜¯ç®€å•çš„åˆ—è¡¨å½¢å¼ï¼Œæˆ–è€…å’Œå†å²æ•°æ®å¯¹æ¯”çš„å›¾è¡¨å½¢å¼ã€‚

å‡è®¾æˆ‘ä»¬è¦è®¾è®¡ä¸€ä¸ªappçš„ä½¿ç”¨æ—¶é•¿ç»Ÿè®¡æ¨¡å—ï¼Œå¯èƒ½çš„å®ç°æ€è·¯å¦‚ä¸‹ï¼š

1. åœ¨appå¯åŠ¨çš„æ—¶å€™ï¼Œè®°å½•å¯åŠ¨çš„æ—¶é—´ç‚¹ã€‚

2. åœ¨appè¿›å…¥åå°æˆ–è€…å…³é—­æ—¶ï¼Œè®°å½•è¿™ä¸ªæ—¶é—´ç‚¹ã€‚

3. é€šè¿‡ç»“æŸæ—¶é—´å‡å»å¼€å§‹æ—¶é—´å¾—åˆ°è¿™æ¬¡ä½¿ç”¨çš„æ—¶é•¿ã€‚

4. å°†è¿™æ¬¡ä½¿ç”¨çš„æ—¶é•¿å­˜å…¥æ•°æ®åº“æˆ–è€…æ–‡ä»¶ã€‚å¯èƒ½éœ€è¦å°†è¿™æ¬¡çš„ä½¿ç”¨æ—¶é—´ã€ä½¿ç”¨æ—¥æœŸç­‰ä¿¡æ¯ä¸€èµ·å­˜å‚¨ã€‚

5. è®¾è®¡ä¸€ä¸ªå‡½æ•°æˆ–è€…æ¥å£ï¼Œèƒ½å¤Ÿè¯»å–å­˜å‚¨çš„ç»Ÿè®¡æ•°æ®ï¼Œè¿›è¡ŒåŠ å·¥å¤„ç†(å¦‚æ’åºï¼Œæ±‚å¹³å‡å€¼ç­‰)ï¼Œå¹¶è¾“å‡ºæˆç”¨æˆ·å¯ä»¥ç†è§£çš„å½¢å¼ã€‚

ä»¥ä¸Šåªæ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå®é™…åº”ç”¨ä¸­å¯èƒ½ä¼šæ ¹æ®éœ€æ±‚çš„ä¸åŒæœ‰æ›´å¤æ‚çš„è®¾è®¡ã€‚

å‡è®¾æˆ‘ä»¬è¦è®¾è®¡çš„æ˜¯ä¸€ä¸ªé’ˆå¯¹APPä½¿ç”¨æ—¶é•¿çš„ç»Ÿè®¡æ¨¡å—ï¼Œè®¾è®¡æ€è·¯å¦‚ä¸‹ï¼š

> å®ç°

1. å®šä¹‰æ•°æ®ç»“æ„ï¼šå®šä¹‰ä¸€ä¸ªç»“æ„ä½“æˆ–ç±»æ¥å­˜å‚¨ç»Ÿè®¡çš„æ•°æ®ï¼Œä¾‹å¦‚å¼€å§‹ä½¿ç”¨çš„æ—¶é—´ã€ç»“æŸä½¿ç”¨çš„æ—¶é—´ï¼Œè¿™äº›åº”è¯¥ä½œä¸ºæ•°æ®çš„ä¸€éƒ¨åˆ†ã€‚

```swift
struct UsageInfo {
    let startTime: Date
    var endTime: Date?
}
```

2. è®°å½•å¼€å§‹æ—¶é—´ï¼šå½“APPå¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é€‚å½“çš„ä½ç½®(å¯èƒ½æ˜¯åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•applicationDidBecomeActive)æ„é€ ä¸€ä¸ªUsageInfoï¼Œè®°å½•ä¸‹å½“å‰çš„å¼€å§‹æ—¶é—´ã€‚

```swift
var currentUsage: UsageInfo = UsageInfo(startTime: Date(), endTime: nil)
```

3. è®°å½•ç»“æŸæ—¶é—´ï¼šå½“APPç»“æŸè¿è¡Œæ—¶ï¼ˆå¯èƒ½æ˜¯åº”ç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•applicationWillResignActiveï¼‰ï¼Œéœ€è¦è®°ä¸‹ç»“æŸæ—¶é—´ã€‚

```swift
currentUsage.endTime = Date()
```

4. è®¡ç®—ä½¿ç”¨æ—¶é—´ï¼šæœ‰äº†å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°é€šè¿‡å‡æ³•è®¡ç®—å‡ºæ€»è®¡ä½¿ç”¨æ—¶é—´ã€‚

```swift
if let end = currentUsage.endTime {
    let duration = end.timeIntervalSince(currentUsage.startTime)
    //ä¿å­˜æˆ–ä½¿ç”¨duration
}
```

5. å­˜å‚¨æ•°æ®ï¼šä½ å¯èƒ½éœ€è¦æŸç§æ–¹å¼æ¥å­˜å‚¨è¿™äº›ç»Ÿè®¡æ•°æ®ï¼Œä¾‹å¦‚ä½¿ç”¨UserDefaultsã€æ–‡ä»¶æˆ–æ˜¯æ•°æ®åº“ç­‰ï¼Œä»¥ä¾›åç»­åˆ†ææˆ–æ˜¾ç¤ºã€‚

6. æ•°æ®å±•ç¤ºï¼šæœ€åï¼Œä½ å¯èƒ½éœ€è¦æä¾›ä¸€ä¸ªæ–¹æ³•æˆ–æ¥å£ä»å­˜å‚¨æ•°æ®çš„åœ°æ–¹å–å‡ºæ•°æ®ï¼Œå¹¶ä»¥åˆé€‚çš„æ–¹å¼è¿›è¡Œå±•ç¤ºï¼Œå¯èƒ½æ˜¯åˆ—è¡¨ï¼Œå›¾è¡¨æˆ–å…¶ä»–å½¢å¼ã€‚

ä»¥ä¸Šæ˜¯ä¸€ä¸ªç®€å•çš„è®¾è®¡ï¼Œå®é™…å®ç°æ—¶ä½ å¯èƒ½éœ€è¦è€ƒè™‘æ›´å¤šçš„å› ç´ ï¼Œä¾‹å¦‚æ—¶åŒºé—®é¢˜ã€APPå´©æºƒå¯¼è‡´æ— æ³•è®°å½•ç»“æŸæ—¶é—´æ—¶å¦‚ä½•å¤„ç†ã€æ•°æ®çš„å®‰å…¨æ€§ç­‰ç­‰ã€‚

:::

### â“è®¾è®¡å®ç°ä¸€ä¸ªæ—¥å¿—è®°å½•æ¨¡å—

::: details ğŸ’¡

è®¾è®¡å’Œå®ç°ä¸€ä¸ªæ—¥å¿—è®°å½•æ¨¡å—ï¼Œä½ éœ€è¦è€ƒè™‘åˆ°ä»¥ä¸‹çš„æ­¥éª¤ï¼š

1. å®šä¹‰æ—¥å¿—çº§åˆ«ï¼šå®šä¹‰ä¸åŒçš„æ—¥å¿—çº§åˆ«ï¼Œæ¯”å¦‚ Errorã€Warningã€Infoã€Debugã€Verbose ç­‰ï¼Œä»¥ä¾¿æˆ‘ä»¬èƒ½å¤Ÿæ ¹æ®éœ€è¦è®°å½•å’ŒæŸ¥çœ‹ä¸åŒçº§åˆ«çš„æ—¥å¿—ã€‚

2. è®¾è®¡æ—¥å¿—æ¥å£ï¼šè®¾è®¡ä¸€ä¸ªç»Ÿä¸€çš„æ—¥å¿—è®°å½•æ¥å£ï¼Œè®©æ‰€æœ‰çš„æ—¥å¿—éƒ½é€šè¿‡è¿™ä¸ªæ¥å£è¿›è¡Œè®°å½•ã€‚ä¾‹å¦‚ï¼š
```swift
func log(level: LogLevel, message: String, file: String, function: String, line: Int)
```

3. æ—¥å¿—æ ¼å¼ï¼šå®šä¹‰æ¯æ¡æ—¥å¿—ä¿¡æ¯çš„æ ¼å¼ã€‚ä¸€æ¡å®Œæ•´çš„æ—¥å¿—ä¿¡æ¯åº”åŒ…å«ä½†ä¸é™äºï¼šæ—¶é—´æˆ³ã€æ—¥å¿—çº§åˆ«ã€æ–‡ä»¶åã€å‡½æ•°åã€è¡Œæ•°ä»¥åŠå®é™…çš„æ—¥å¿—ä¿¡æ¯ã€‚

4. æ—¥å¿—å­˜å‚¨ï¼šæ—¥å¿—å¯ä»¥è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨åˆ°æœ¬åœ°æ–‡ä»¶æˆ–è€…ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚å¦‚æœå­˜å‚¨åˆ°æœ¬åœ°æ–‡ä»¶ï¼Œéœ€è¦åšå¥½æ—¥å¿—æ–‡ä»¶çš„ç®¡ç†ï¼Œæ¯”å¦‚æ—¥å¿—æ–‡ä»¶çš„ç”Ÿæˆå’Œåˆ é™¤ç­–ç•¥ã€‚

5. æ—¥å¿—è¿‡æ»¤ï¼šæä¾›æ—¥å¿—è¿‡æ»¤çš„åŠŸèƒ½ï¼Œå¯ä»¥æ ¹æ®æ—¥å¿—çº§åˆ«è¿‡æ»¤å‡ºæˆ‘ä»¬æƒ³è¦æŸ¥çœ‹çš„æ—¥å¿—ã€‚

6. å¤šç¯å¢ƒæ”¯æŒï¼šè€ƒè™‘åˆ°é¡¹ç›®å¤šä¸ªç¯å¢ƒä¸‹(æ¯”å¦‚å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒ)çš„æ—¥å¿—è®°å½•éœ€æ±‚ä¸ä¸€æ ·ï¼Œéœ€è¦è®¾è®¡æˆå¯é…ç½®çš„å½¢å¼ã€‚

ä¾‹å¦‚ï¼Œä¸€ä¸ªç®€å•çš„æ—¥å¿—è®°å½•æ¨¡å—çš„å®ç°å¯èƒ½å¦‚ä¸‹(ä»¥ Swift è¯­è¨€ä¸ºä¾‹)ï¼š

```swift
enum LogLevel {
    case Error
    case Warning
    case Info
    case Debug
    case Verbose
}

class Logger {
    static func log(level: LogLevel, message: String, file: String = #file, function: String = #function, line: Int = #line) {
        print("[\(level)] \((file as NSString).lastPathComponent)[\(line)], \(function): \(message)")
    }
}

// ä½¿ç”¨
Logger.log(level: .Info, message: "This is an info log.")
```

ä»¥ä¸Šå®ç°åªæ˜¯ä¸€ä¸ªå¾ˆåŸºç¡€çš„ç‰ˆæœ¬ï¼Œåªå°†æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œå¹¶æœªåŒ…å«æ—¥å¿—å­˜å‚¨å’Œæ—¥å¿—è¿‡æ»¤ç­‰åŠŸèƒ½ã€‚åœ¨å®é™…åº”ç”¨ä¸­éœ€è¦æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œè®¾è®¡å’Œå®ç°ã€‚

:::

### â“è®¾è®¡å®ç°ä¸€ä¸ªç½‘ç»œè¯·æ±‚æ¨¡å—

::: details ğŸ’¡

> è®¾è®¡

  è®¾è®¡ä¸€ä¸ªç½‘ç»œæ¨¡å—ï¼Œåº”è¯¥ä»å¦‚ä¸‹å‡ ä¸ªæ–¹é¢è®¾è®¡ã€‚

  - åŠŸèƒ½è®¾è®¡: åˆ†æç›®å‰çš„åº”ç”¨éœ€æ±‚ã€æŠ€æœ¯æ ˆã€é¢„æœŸç›®æ ‡ç­‰è¿›è¡Œå…¨é¢çš„åˆ†æï¼Œå®šä¹‰ç½‘ç»œåº“çš„åŠŸèƒ½ï¼ˆå¦‚ï¼Œæ•°æ®è¯·æ±‚ã€ä¸Šä¼ ã€ä¸‹è½½ã€ç¼“å­˜ã€å®‰å…¨ç­–ç•¥ã€é”™è¯¯å¤„ç†ç­‰ï¼‰ã€‚

  - æ¥å£è®¾è®¡: è®¾è®¡æ˜“äºä½¿ç”¨å¹¶æ¸…æ™°æ˜äº†çš„APIã€‚ä¾‹å¦‚è®¾è®¡ä¸€ä¸ªä¸»ç±»ï¼Œç”¨äºå¤„ç†HTTPè¯·æ±‚ï¼Œæ­¤ç±»åº”åŒ…å«GETï¼ŒPOSTï¼ŒPUTï¼ŒDELETEç­‰HTTPæ–¹æ³•ã€‚å¹¶ä¸”åº”è¯¥è¦å®šä¹‰æ¸…æ™°çš„è¯·æ±‚å’Œå“åº”ç±»ã€‚
    
  - çº¿ç¨‹å¤„ç†ï¼šå¯¹äºç½‘ç»œè¯·æ±‚ï¼Œä¸€èˆ¬ä½¿ç”¨å¼‚æ­¥é˜Ÿåˆ—ï¼Œä»¥é¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚å¯ä»¥ä½¿ç”¨ `DispatchQueue` æ¥è¿›è¡Œç›¸å…³å¤„ç†ã€‚

  - æ•°æ®åºåˆ—åŒ–ï¼šè¯·æ±‚æ•°æ®çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚å¯ä»¥ä½¿ç”¨ `Codable` æ¥å®ç°æ•°æ®æ¨¡å‹çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚
    
  - é”™è¯¯å¤„ç†ï¼šç½‘ç»œè¯·æ±‚ä¸­ä¼šæœ‰å„ç§é”™è¯¯å¯èƒ½å‘ç”Ÿï¼Œéœ€è¦è®¾è®¡åˆç†çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œä½¿å¾—é”™è¯¯èƒ½è¢«å‡†ç¡®æ•è·å¹¶ä¼ é€’ç»™è°ƒç”¨è€…ã€‚

  - å®‰å…¨ç­–ç•¥ï¼šå¯¹äºéœ€è¦ä¿å¯†çš„æ•°æ®è¿›è¡ŒåŠ å¯†å¤„ç†ã€‚å¦‚ç”¨æˆ·å‡­è¯ï¼Œåº”è¯¥ä½¿ç”¨ç›¸åº”çš„æ•£åˆ—æˆ–åŠ å¯†ç®—æ³•è¿›è¡Œå®‰å…¨å¤„ç†ã€‚

  - ç¼“å­˜ç­–ç•¥ï¼šå¯¹äºä¸€äº›é¢‘ç¹è¯·æ±‚ä½†ä¸å¸¸å˜åŠ¨çš„æ•°æ®ï¼Œå¯ä»¥é‡‡ç”¨åˆç†çš„ç¼“å­˜ç­–ç•¥ã€‚å¯ä»¥æ˜¾è‘—æå‡åº”ç”¨æ€§èƒ½ä»¥åŠå‡å°‘ç”¨æˆ·çš„æµé‡æ¶ˆè€—ã€‚

  - æµ‹è¯•ç”¨ä¾‹ï¼šç¼–å†™å®Œå–„çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼Œä¿è¯ç½‘ç»œåº“çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚

> å®ç°

ç½‘ç»œè¯·æ±‚æ¨¡å—æ˜¯å‡ ä¹æ‰€æœ‰æ‰‹æœºåº”ç”¨å’Œç½‘é¡µåº”ç”¨çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ã€‚ä¸ºäº†è¾¾åˆ°æ˜“ç”¨æ€§ã€å¯æ‰©å±•æ€§å’Œæ¨¡å—åŒ–ç­‰ç›®æ ‡ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘ä»¥ä¸‹æ­¥éª¤è¿›è¡Œç½‘ç»œè¯·æ±‚æ¨¡å—çš„è®¾è®¡å’Œå®ç°ï¼š

1. å®šä¹‰ç½‘ç»œè¯·æ±‚çš„åŸºæœ¬ç»„ä»¶ï¼šè¿™åŒ…æ‹¬è¯·æ±‚æ–¹æ³•(GETï¼ŒPOSTï¼ŒPUTï¼ŒDELETEç­‰)ã€è¯·æ±‚URLã€è¯·æ±‚å¤´ã€è¯·æ±‚å‚æ•°ã€è¶…æ—¶æ—¶é—´ç­‰ã€‚

```swift
struct Request {
    let method: HttpMethod
    let url: String
    let headers: [String: String]?
    let params: [String: Any]?
    let timeout: Double
}
```

2. æŠ½è±¡ç½‘ç»œè¯·æ±‚æ“ä½œï¼šæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªç½‘ç»œè¯·æ±‚æ“ä½œç±»æˆ–ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå‘é€ç½‘ç»œè¯·æ±‚ï¼Œè§£æå“åº”å’Œå¤„ç†é”™è¯¯ã€‚

```swift
class NetworkManager {
    static func send(request: Request, completion: @escaping (Result<Data, Error>) -> Void) {
        // å‘é€ç½‘ç»œè¯·æ±‚ï¼Œå¤„ç†å“åº”å’Œé”™è¯¯
    }
}
```

3. æä¾›å…¬å…±æ¥å£ï¼šç±»æˆ–è€…å‡½æ•°é€šè¿‡å…¬å…±æ¥å£æä¾›æœåŠ¡ï¼Œæ¥å£åº”è¯¥æä¾›è¶³å¤Ÿçš„çµæ´»æ€§æ¥åº”å¯¹ä¸åŒç±»å‹çš„ç½‘ç»œè¯·æ±‚ã€‚

```swift
extension NetworkManager {
    static func get(url: String, params: [String: Any]?, completion: @escaping (Result<Data, Error>) -> Void) {
        let request = Request(method: .GET, url: url, headers: nil, params: params, timeout: 30.0)
        send(request: request, completion: completion)
    }
}
```

4. é”™è¯¯å¤„ç†ï¼šç½‘ç»œè¯·æ±‚è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°å„ç§é”™è¯¯ï¼Œæˆ‘ä»¬éœ€è¦é¢„è§å¹¶å¤„ç†è¿™äº›é”™è¯¯ï¼Œæ¯”å¦‚æ— ç½‘ç»œè¿æ¥ã€æœåŠ¡å™¨æ— å“åº”ç­‰ã€‚

5. å“åº”è§£æï¼šç½‘ç»œè¯·æ±‚çš„æˆåŠŸå“åº”é€šå¸¸åŒ…æ‹¬ä¸€äº›å…ƒæ•°æ®å’Œå®é™…çš„å“åº”å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦è§£æè¿™äº›å†…å®¹å¹¶ä»¥åˆé€‚çš„æ–¹å¼æä¾›ç»™å…¶ä»–éƒ¨åˆ†çš„ä»£ç ã€‚

è¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„ç½‘ç»œè¯·æ±‚æ¨¡å—çš„è®¾è®¡ã€‚åœ¨å®ç°çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½è¿˜éœ€è¦å¤„ç†å„ç§å¤æ‚æƒ…å†µï¼Œæ¯”å¦‚å¹¶å‘è¯·æ±‚ã€è¯·æ±‚çš„ä¼˜å…ˆçº§ã€ç¼“å­˜ç­–ç•¥ã€èº«ä»½éªŒè¯ç­‰ç­‰ï¼Œæ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œè®¾è®¡ã€‚

:::

### â“è®¾è®¡å®ç°ä¸€ä¸ªæ•°æ®ç¼“å­˜æ¨¡å—

::: details ğŸ’¡

è®¾è®¡ä¸€ä¸ªæ•°æ®ç¼“å­˜æ¨¡å—ï¼Œè€ƒè™‘åˆ°ä»¥ä¸‹çš„æ­¥éª¤å’Œæ–¹é¢ï¼š

1. å®šä¹‰ä¸€ä¸ªç¼“å­˜é”®-å€¼å¯¹çš„æ•°æ®ç»“æ„ï¼šå¯ä»¥ä½¿ç”¨é›†åˆï¼Œä¸”å¿…é¡»å¯ä»¥æ ¹æ®é”®è½»æ¾æŸ¥æ‰¾åˆ°å€¼ã€‚

```swift
    var cache: NSCache<NSString, AnyObject> = NSCache<NSString, AnyObject>()
```

2. å®šä¹‰ä¸€ä¸ªæ–¹æ³•æ¥æ·»åŠ æ•°æ®åˆ°ç¼“å­˜ï¼šè¿™ä¸ªæ–¹æ³•åº”æ¥å—ä¸€ä¸ªé”®å’Œä¸€ä¸ªå€¼ï¼Œå¹¶æŠŠå€¼å…³è”åˆ°é”®ã€‚ç„¶åï¼ŒæŠŠè¿™ä¸ªé”®-å€¼å¯¹æ·»åŠ åˆ°ç¼“å­˜ã€‚

```swift
    func set(key: NSString, value: AnyObject) {
        cache.setObject(value, forKey: key)
    }
```

3. å®šä¹‰ä¸€ä¸ªæ–¹æ³•ä»ç¼“å­˜è·å–æ•°æ®ï¼šè¿™ä¸ªæ–¹æ³•åº”æ¥å—ä¸€ä¸ªé”®ï¼Œå¹¶è¿”å›ä¸è¯¥é”®å…³è”çš„å€¼ã€‚

```swift
    func get(key: NSString) -> AnyObject? {
        return cache.object(forKey: key)
    }
```

4. å®šä¹‰ä¸€ä¸ªæ–¹æ³•æ¥æ¸…é™¤ç¼“å­˜ï¼šè¿™ä¸ªæ–¹æ³•åº”æ¸…é™¤ç¼“å­˜ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚

```swift
    func clear() {
        cache.removeAllObjects()
    }
```

5. ä¸ºç¼“å­˜å®šä¹‰ä¸€ä¸ªå¤§å°é™åˆ¶ï¼šè¿™å°†é˜²æ­¢ç¼“å­˜æ— é™åˆ¶åœ°å¢å¤§ï¼Œå¹¶ç¡®ä¿åœ¨è¾¾åˆ°é™åˆ¶æ—¶æ¸…é™¤ä¸€äº›æ—§çš„ç¼“å­˜æ•°æ®ã€‚

```swift
    var cache: NSCache<NSString, AnyObject> = {
        let cache = NSCache<NSString, AnyObject>()
        cache.countLimit = 200 // é™åˆ¶200ä¸ªå¯¹è±¡
        return cache
    }()
```

6. å¤±æ•ˆç­–ç•¥ï¼šæ ¹æ®ä½¿ç”¨æƒ…å†µï¼Œåˆ¶å®šç¼“å­˜å¤±æ•ˆç­–ç•¥ï¼Œæ¯”å¦‚æœ€é•¿ç¼“å­˜æ—¶é—´ã€LRU(Least Recently Used)æœ€è¿‘æœ€å°‘ä½¿ç”¨æ·˜æ±°ç­–ç•¥ç­‰

ä»¥ä¸Šå¯¹äºä¸€ä¸ªåŸºç¡€çš„æ•°æ®ç¼“å­˜æ¨¡å—çš„è®¾è®¡ï¼Œå¯¹äºæ›´å¤æ‚çš„ä½¿ç”¨åœºæ™¯ï¼Œæ¯”å¦‚ç½‘ç»œç¼“å­˜ã€å›¾ç‰‡ç¼“å­˜ç­‰ï¼Œè®¾è®¡ä¼šæ›´ä¸ºå¤æ‚ï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µå®šåˆ¶ã€‚

> å®ç°

ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºç¡€çš„Swiftçš„æ•°æ®ç¼“å­˜æ¨¡å—çš„è®¾è®¡ï¼š

é¦–å…ˆï¼Œå¼•å…¥Foundationæ¡†æ¶

```swift
import Foundation
```

æ¥ç€ï¼Œå®šä¹‰ä¸€ä¸ª DataCacheManager ç±»ï¼ŒåŒ…æ‹¬ç¼“å­˜è®¾ç½®ï¼Œè·å–ï¼Œæ¸…é™¤æ•°æ®ç­‰æ“ä½œï¼š

```swift
class DataCacheManager {
    // åˆå§‹åŒ–ä¸€ä¸ªNSCacheå¯¹è±¡
    private let cache = NSCache<NSString, AnyObject>()
    
    // å•ä¾‹æ¨¡å¼ï¼Œå…¨å±€è®¿é—®ç‚¹
    static let shared = DataCacheManager()
    
    // æ·»åŠ æ•°æ®åˆ°ç¼“å­˜ä¸­
    func setData(_ data: AnyObject, for key: NSString) {
        cache.setObject(data, forKey: key)
    }
    
    // è·å–ç¼“å­˜æ•°æ®
    func getData(for key: NSString) -> AnyObject? {
        return cache.object(forKey: key)
    }
    
    // æ¸…é™¤æ‰€æœ‰ç¼“å­˜æ•°æ®
    func removeAllData() {
        cache.removeAllObjects()
    }
    
    // æ¸…é™¤æŸä¸€ç¼“å­˜æ•°æ®
    func removeData(for key: NSString) {
        cache.removeObject(forKey: key)
    }
}
```

è¿™ä¸ªDataCacheManagerç±»æä¾›äº†æ•°æ®ç¼“å­˜çš„åŸºæœ¬æ“ä½œï¼ŒåŒ…æ‹¬è®¾ç½®ï¼ˆæ·»åŠ ï¼‰ã€è·å–ã€æ¸…é™¤æ‰€æœ‰ä»¥åŠæ¸…é™¤æŒ‡å®šçš„ç¼“å­˜æ•°æ®ã€‚å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ æ›´å¤šå¤§çš„æ¥å£ï¼Œæ¯”å¦‚ç¼“å­˜è¿‡æœŸæ—¶é—´ã€ç¼“å­˜å¤§å°é™åˆ¶ç­‰ã€‚

:::

### â“è®¾è®¡å®ç°ä¸€ä¸ªæ•°æ®å­˜å‚¨æ¨¡å—

::: details ğŸ’¡

è¿™é‡Œæˆ‘ä»¬å®ç°ä¸€ä¸ªåŸºæœ¬çš„æ•°æ®å­˜å‚¨æ¨¡å—ï¼Œä½¿ç”¨çš„æ˜¯Appleè‡ªå¸¦çš„UserDefaultã€‚

å¦‚æœæœ‰æ›´å¤æ‚çš„å­˜å‚¨éœ€æ±‚ï¼Œå¦‚å…³ç³»å‹æ•°æ®å­˜å‚¨å¯ä»¥è€ƒè™‘Core Dataï¼Œè€Œå¯¹é€Ÿåº¦æœ‰è¦æ±‚çš„è¯å¯ä»¥è€ƒè™‘ç›´æ¥æ“ä½œSQLiteã€‚

```swift
import Foundation

let defaults = UserDefaults.standard

class DataStorage {

    static let shared = DataStorage()

    //1.Save data
    func saveData(value: Any, key: String) {
        defaults.set(value, forKey: key)
        defaults.synchronize()
    }

    //2.Get data
    func getData(key: String) -> Any? {
        if let data = defaults.value(forKey: key) {
            return data
        }
        return nil
    }

    //3.Remove data
    func removeData(key: String) {
        defaults.removeObject(forKey: key)
        defaults.synchronize()
    }

}
```

ä½¿ç”¨ç¤ºä¾‹ï¼š

```swift
DataStorage.shared.saveData(value: "Hello, World", key: "greeting")
print(DataStorage.shared.getData(key: "greeting") ?? "No Data")
DataStorage.shared.removeData(key: "greeting")
print(DataStorage.shared.getData(key: "greeting") ?? "No Data")
```

è¿™ä¸ªæ¨¡å—ä¹Ÿå¾ˆåŸºç¡€ï¼Œä»…ä¾›å‚è€ƒï¼Œå®é™…ä¸šåŠ¡ä¸Šå¯èƒ½æ¶‰åŠåˆ°æ›´ä¸ºå¤æ‚çš„æ•°æ®ç±»å‹å’Œæ›´ä¸ºç²¾ç»†åŒ–çš„å­˜å‚¨éœ€æ±‚ã€‚æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„å·¥å…·å’Œè®¾è®¡ã€‚

:::