---
title: network - â€œç½‘ç»œâ€
icon: hashtag

index: true

---

<!-- more -->

## reference

- [](âœ…)[2023-08-22 POST ä¸ºä»€ä¹ˆä¼šå‘é€ä¸¤æ¬¡è¯·æ±‚ï¼Ÿ](https://juejin.cn/post/7269952188927017015)
- [2019-11-13 ä¸ºä»€ä¹ˆ DNS ä½¿ç”¨ UDP åè®®](https://draveness.me/whys-the-design-dns-udp-tcp)
- [2019-10-28 ä¸ºä»€ä¹ˆ TCP å»ºç«‹è¿æ¥éœ€è¦ä¸‰æ¬¡æ¡æ‰‹](https://draveness.me/whys-the-design-tcp-three-way-handshake)
- []()[2015-03-07 GET å’Œ POST åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ](https://www.zhihu.com/question/28586791)

------

## æ¦‚å¿µçŸ¥è¯†

### ç½‘ç»œæ¨¡å‹

#### â“`OSI` ä¸ƒå±‚æ¨¡å‹

::: details ğŸ’¡

> `OSI`(`Open Systems Interconnection` - å¼€æ”¾ç³»ç»Ÿäº’è¿) æ¨¡å‹ï¼Œæ˜¯æè¿°å’Œç†è§£å¤æ‚ç½‘ç»œç³»ç»Ÿäº¤äº’å’Œé€šä¿¡æœºåˆ¶çš„é‡è¦å·¥å…·ã€‚è¯¥æ¨¡å‹å°†ç½‘ç»œé€šä¿¡åˆ†è§£ä¸ºä¸ƒå±‚ï¼Œæ¯ä¸ªå±‚æ¬¡å®Œæˆç‰¹å®šçš„åŠŸèƒ½ï¼Œæä¾›ä¸‹ä¸€å±‚æ‰€éœ€çš„æ¥å£å’ŒæœåŠ¡ã€‚

è‡ªé¡¶å‘ä¸‹ï¼š

  - åº”ç”¨å±‚ï¼šè´Ÿè´£ä¸è½¯ä»¶åº”ç”¨ç¨‹åºï¼ˆä¾‹å¦‚ `Web` æµè§ˆå™¨ã€ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ç­‰ï¼‰äº¤äº’ï¼Œä»¥ç¡®ä¿å‘é€å’Œæ¥æ”¶æœ‰æ•ˆçš„æ•°æ®ã€‚
  
  - è¡¨ç¤ºå±‚ï¼šè´Ÿè´£å®šä¹‰æ•°æ®æ ¼å¼å’ŒåŠ å¯†ã€‚
  
  - ä¼šè¯å±‚ï¼šè´Ÿè´£åœ¨æ•°æ®å°è£…çš„ç«¯ç‚¹ä¹‹é—´å»ºç«‹ã€ç®¡ç†å’Œç»ˆæ­¢è¿æ¥ã€‚
  
  - ä¼ è¾“å±‚ï¼šè´Ÿè´£æä¾›ç«¯åˆ°ç«¯çš„å¯é ä¼ è¾“ã€‚ä¸»è¦åè®®æœ‰ `TCP` å’Œ `UDP`ã€‚
  
  - ç½‘ç»œå±‚ï¼šè´Ÿè´£å†³å®šæ•°æ®çš„è·¯å¾„å’Œè½¬å‘ï¼ŒåŒ…æ‹¬ `IP` åœ°å€å¤„ç†å’Œè·¯ç”±ã€‚
  
  - æ•°æ®é“¾è·¯å±‚ï¼šè´Ÿè´£åœ¨æ•°æ®ç½‘ç»œä¸­ä¼ è¾“æ•°æ®åŒ…ï¼ŒåŒ…æ‹¬é”™è¯¯æ£€æµ‹å’Œä¿®æ­£ã€‚
  
  - ç‰©ç†å±‚ï¼šè´Ÿè´£ä¼ è¾“æ¯”ç‰¹æµï¼ˆæ•°æ®çš„äºŒè¿›åˆ¶å½¢å¼ï¼‰ï¼ŒåŒ…æ‹¬å¦‚ä½•é€šè¿‡é€šä¿¡åª’ä»‹ï¼ˆå¦‚ç”µç¼†ã€å…‰çº¤ç­‰ï¼‰è¿›è¡Œç‰©ç†è¿æ¥ï¼Œå¦‚ä½•è¯†åˆ«è®¾å¤‡ç­‰ã€‚

æ³¨æ„ï¼š`OSI` æ¨¡å‹å¹¶ä¸æ˜¯ä»»ä½•ä¸€ä¸ªå®é™…çš„ç½‘ç»œåè®®æ—ï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªå‚è€ƒæ¨¡å‹ï¼Œå¸®åŠ©äººä»¬æè¿°å’Œç†è§£ä¸åŒç½‘ç»œåè®®çš„åŠŸèƒ½å’Œå¦‚ä½•ååŒå·¥ä½œã€‚

:::

#### â“`TCP/IP` äº”å±‚æ¨¡å‹

::: details ğŸ’¡

è‡ªé¡¶å‘ä¸‹ï¼š

  - åº”ç”¨å±‚ : `DNS`ã€`HTTP`ã€`HTTPS`ã€`RPC`ã€`P2P` (`DHCP`ã€`RTMP`ã€`GTP`)
    > åº”ç”¨å±‚åŒ…æ‹¬è®¸å¤šåè®®ï¼Œå¦‚ `HTTP` åè®®ï¼Œ`FTP` åè®®ï¼Œ`DNS` åè®®ï¼Œå®ƒè´Ÿè´£å¦‚ä½•å¤„ç†ç‰¹å®šç±»å‹çš„ç½‘ç»œè¿æ¥ï¼Œå³åº”ç”¨ç¨‹åºå’Œç½‘ç»œä¹‹é—´çš„é€šä¿¡åè®®ã€‚
    
    `OSI` ä¸ƒå±‚æ¨¡å‹ä¸­ï¼Œå°†åº”ç”¨å±‚ç»†åˆ†ä¸º(åº”ç”¨å±‚ã€è¡¨ç¤ºå±‚ã€ä¼šè¯å±‚)
    
      * åº”ç”¨å±‚ï¼šè´Ÿè´£ä¸è½¯ä»¶åº”ç”¨ç¨‹åºäº¤äº’ï¼Œä»¥ç¡®ä¿å‘é€å’Œæ¥æ”¶æœ‰æ•ˆçš„æ•°æ®ã€‚
      * è¡¨ç¤ºå±‚ï¼šè´Ÿè´£å®šä¹‰æ•°æ®æ ¼å¼å’ŒåŠ å¯†ã€‚
      * ä¼šè¯å±‚ï¼šè´Ÿè´£åœ¨æ•°æ®å°è£…çš„ç«¯ç‚¹ä¹‹é—´å»ºç«‹ã€ç®¡ç†å’Œç»ˆæ­¢è¿æ¥ã€‚

  - ä¼ è¾“å±‚ : `TCP`ã€`UDP`ã€`QUIC`
    > ä¼ è¾“å±‚è´Ÿè´£å°†æ•°æ®è¿›è¡Œåˆ†æ®µï¼Œå¹¶ä¿è¯è¿™äº›åˆ†æ®µæ­£ç¡®æ— è¯¯çš„åˆ°è¾¾ç›®çš„åœ°ï¼Œå†åœ¨ç›®çš„åœ°å°†è¿™äº›åˆ†æ®µé‡æ–°ç»„åˆã€‚`TCP` å’Œ `UDP` åè®®å°±åœ¨è¿™ä¸€å±‚ã€‚
    
  - ç½‘ç»œå±‚ : (`IP` å±‚) `IP` (`ICMP`ã€`OSPF`ã€`BGP`ã€`IPSec`ã€`GRE`)
    > ç½‘ç»œå±‚æ§åˆ¶å­ç½‘çš„æ“ä½œï¼Œå¤„ç†å°†æ•°æ®åŒ…ä»æºä¼ é€åˆ°ç›®çš„åœ°çš„ä»»åŠ¡ï¼Œè¿™åŒ…æ‹¬åœ¨å¤æ‚çš„ç½‘ç»œä¸­å¤„ç†è·¯ç”±å’Œå…¨å±€åœ°å€ã€‚

  - é“¾è·¯å±‚ : (`MAC` å±‚) `ARP`ã€`VLAN`ã€`STP`
    > æ•°æ®é“¾è·¯å±‚åœ¨ç‰©ç†å±‚ä¹‹ä¸Šï¼Œå®ƒè´Ÿè´£å¦‚ä½•åœ¨ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œå¤„ç†ç”±ç‰©ç†å±‚çš„ç¡¬ä»¶é”™è¯¯äº§ç”Ÿçš„é—®é¢˜ï¼Œä¾‹å¦‚æ•°æ®é”™è¯¯ï¼Œæ•°æ®ä¸¢å¤±ç­‰ã€‚

  - ç‰©ç†å±‚ : 
    > æä¾›äº†ç½‘ç»œé€šä¿¡æ‰€éœ€çš„ç¡¬ä»¶æ¥å£ï¼Œè´Ÿè´£æŠŠå¸§æ•°æ®è½¬æ¢ä¸ºé€‚åˆç‰©ç†ä»‹è´¨çš„å½¢å¼ï¼Œå³ç”¨æ¥ä¼ è¾“æ¯”ç‰¹æµã€‚ä¸åŒçš„ä»‹è´¨å’Œå…·ä½“çš„è®¾å¤‡æœ‰è®¸å¤šåè®®ï¼Œä¾‹å¦‚ `Ethernet`ã€`Wi-Fi`ã€`Bluetooth` ç­‰ã€‚

:::

#### â“`TCP/IP` æ¨¡å‹ vs `OSI` æ¨¡å‹

::: details ğŸ’¡

 `TCP/IP` æ¨¡å‹å’Œ `OSI` æ¨¡å‹éƒ½æ˜¯ç½‘ç»œé€šä¿¡æ¨¡å‹ï¼Œéƒ½æœ‰å¯¹ç½‘ç»œé€šä¿¡è¿›è¡Œåˆ†å±‚çš„æ€æƒ³ï¼Œä½†æ˜¯ä¸¤è€…çš„å±‚æ•°ä»¥åŠæ¯ä¸€å±‚æ‰¿æ‹…çš„è´£ä»»æœ‰æ‰€ä¸åŒã€‚

  - `TCP/IP` æ¨¡å‹æ˜¯ä¸€ä¸ªäº”å±‚ç»“æ„ï¼ˆç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚ã€åº”ç”¨å±‚ï¼‰ï¼›`OSI` æ¨¡å‹åˆ™æ˜¯ä¸€ä¸ªä¸ƒå±‚ç»“æ„ï¼ˆç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚ã€ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚ã€åº”ç”¨å±‚ï¼‰

  - `TCP/IP` æ¨¡å‹æ˜¯åœ¨ `OSI` æ¨¡å‹åŸºç¡€ä¸Šç®€åŒ–è€Œæ¥çš„ã€‚åœ¨ `TCP/IP` æ¨¡å‹ä¸­ï¼Œ`OSI` æ¨¡å‹ä¸­çš„ (ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚å’Œåº”ç”¨å±‚) ç»Ÿä¸€å½’ä¸ºäº†åº”ç”¨å±‚ï¼Œå› æ­¤ `TCP/IP` æ¨¡å‹çš„åº”ç”¨å±‚æ¯”è¾ƒå¤æ‚ã€‚
    
  - ä¸¤è€…åœ¨å±‚æ¬¡åˆ’åˆ†ä¸Šçš„å“²å­¦ä¸åŒã€‚`OSI` æ¨¡å‹å€¾å‘äºè¯¦å°½åœ°å°†ç½‘ç»œé€šä¿¡è¿‡ç¨‹ä¸­çš„æ‰€æœ‰å¯èƒ½çš„ç¯èŠ‚è¿›è¡Œåˆ†å±‚ï¼›è€Œ `TCP/IP` æ¨¡å‹æ›´å€¾å‘äºä»å®ç”¨çš„è§’åº¦ï¼ŒåŸºäºå®é™…çš„ç½‘ç»œç¡¬ä»¶å’Œç½‘ç»œåè®®è¿›è¡Œåˆ†å±‚ã€‚
  
:::

### â“ä¸ºä»€ä¹ˆèƒ½é€šè¿‡ä¸€ä¸ª `URL` å°±èƒ½è¯·æ±‚åˆ°å¯¹åº”çš„èµ„æº

::: details ğŸ’¡

> `URL`ï¼ˆ`Uniform Resource Locator` - ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰ï¼Œå®ƒç»™å‡ºäº†ç½‘ç»œä¸ŠæŸä¸€èµ„æºçš„ç»å¯¹ä½ç½®ï¼Œå…¶ç»“æ„åŒ…å«äº†è¯·æ±‚èµ„æºæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå› æ­¤èƒ½å¤Ÿé€šè¿‡ `URL` å‘æœåŠ¡å™¨è¯·æ±‚å¹¶è·å–èµ„æºã€‚

`URL`çš„åŸºæœ¬ç»“æ„ï¼š`protocol://hostname:port/path?query#fragment`

  - `Protocol`ï¼ˆåè®®ï¼‰ï¼šæŒ‡å®šäº†å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨éœ€è¦éµå¾ªçš„é€šä¿¡è§„åˆ™ã€‚
    > ä¾‹å¦‚ `HTTP`ã€`HTTPS`ã€`FTP` ç­‰ã€‚

  - `Hostname`ï¼ˆä¸»æœºåï¼‰ï¼šæ ‡è¯†äº†ç½‘ç»œä¸Šæœºå™¨çš„ä½ç½®ã€‚æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯é€šè¿‡ç½‘ç»œè¿æ¥è¿›è¡Œé€šä¿¡ï¼Œä¸»æœºåä½œä¸ºæœåŠ¡å™¨çš„æ ‡è¯†ï¼Œå¯ä»¥è®©å®¢æˆ·ç«¯æ‰¾åˆ°æ­£ç¡®çš„æœåŠ¡å™¨ã€‚
    > ä¾‹å¦‚ `www.google.com`

  - `Port`ï¼ˆç«¯å£å·ï¼‰ï¼šæŒ‡å®šäº†æœåŠ¡å™¨ä¸Šçš„ç‰¹å®šæœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡åœ¨æœåŠ¡å™¨ä¸Šéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ç«¯å£å·ã€‚

  - `Path`ï¼ˆè·¯å¾„ï¼‰ï¼šæŒ‡å®šäº†æœåŠ¡å™¨ä¸Šçš„ç‰¹å®šèµ„æºã€‚å®ƒé€šå¸¸åŒ…å«äº†ç›¸å…³æ–‡ä»¶æˆ–è€…é¡µé¢çš„ç›®å½•ç»“æ„ä¿¡æ¯ã€‚

  - `Query`ï¼ˆæŸ¥è¯¢ï¼‰ï¼šè¿™éƒ¨åˆ†ä»¥ `?` å¼€å¤´ï¼Œç”¨äºä¼ é€’é¢å¤–çš„å‚æ•°ã€‚åœ¨è®¿é—®åŠ¨æ€ç½‘é¡µçš„æ—¶å€™ï¼ŒæŸ¥è¯¢å­—ç¬¦ä¸²é€šå¸¸ç”¨äºæŒ‡å®šæŸ¥è¯¢å‚æ•°ã€‚
    
  - `Fragment`ï¼ˆç‰‡æ®µï¼‰ï¼šè¿™éƒ¨åˆ†ä»¥ `#` å¼€å¤´ï¼Œåªåœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­èµ·ä½œç”¨ï¼Œç”¨äºå®šä½ç‰¹å®šçš„é¡µé¢å…ƒç´ ã€‚

ç»“è®ºï¼šé€šè¿‡ä»¥ä¸Šå…ƒç´ ç»„æˆçš„ `URL` å¯ä»¥ç²¾ç¡®åœ°å®šä½åˆ°ç½‘ç»œä¸Šçš„èµ„æºï¼Œå› æ­¤å¯ä»¥é€šè¿‡ä¸€ä¸ª `URL` å°±èƒ½è¯·æ±‚åˆ°å¯¹åº”çš„èµ„æºã€‚

:::

### â“`MTU` äº†è§£å—

::: details ğŸ’¡

  > `MTU`(Max Transfer Unit)ï¼šæœ€å¤§ä¼ è¾“å•å…ƒï¼ŒæŒ‡çš„æ˜¯ç½‘ç»œä¸­ä¸€ç§åè®®å¯ä»¥åœ¨ä¸è¿›è¡Œåˆ†ç‰‡çš„æƒ…å†µä¸‹å‘é€çš„æœ€å¤§æ•°æ®åŒ…å¤§å°ã€‚

  åœ¨ç½‘ç»œä¸­ï¼Œæ•°æ®åŒ…çš„å¤§å°ä¸èƒ½è¶…è¿‡ `MTU` å¤§å°ï¼Œå¦åˆ™åœ¨å‘é€è¿‡ç¨‹ä¸­æ•°æ®åŒ…ä¼šè¢«åˆ†ç‰‡ã€‚`MTU` å¤§å°çš„è®¾ç½®å–å†³äºå‘é€è¿™äº›æ•°æ®åŒ…çš„ç‰©ç†åª’ä»‹æˆ–è€…ç½‘ç»œåè®®ã€‚
  
  > ä¾‹å¦‚ï¼Œåœ¨ä»¥å¤ªç½‘ä¸­ï¼Œ`MTU` çš„å¤§å°é€šå¸¸è®¾ç½®ä¸º `1500` å­—èŠ‚ã€‚

  å½“æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­ä¼ è¾“æ—¶ï¼Œå¯èƒ½ä¼šç»è¿‡ä¸åŒçš„ç½‘ç»œè®¾å¤‡ï¼Œè¿™äº›è®¾å¤‡å¯èƒ½æœ‰å„è‡ªçš„ `MTU` å¤§å°ã€‚ä¸ºäº†é¿å…æ•°æ®åŒ…è¢«åˆ†ç‰‡ï¼Œæˆ–è€…å‡å°‘æ•°æ®åŒ…çš„åˆ†ç‰‡æ¬¡æ•°ï¼Œè·¯ç”±å™¨å’Œå…¶ä»–ç½‘ç»œè®¾å¤‡å¯èƒ½é‡‡ç”¨æœ€å° `MTU`ï¼ˆæ‰€æœ‰è®¾å¤‡ä¸­ `MTU` æœ€å°çš„å€¼ï¼‰è¿›è¡Œå‘é€ã€‚

  - è¿‡å¤§çš„ `MTU`ï¼šä¼šå¯¼è‡´æ•°æ®åŒ…åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¿‡äºåºå¤§ï¼Œå¢å¤§ç½‘ç»œè´Ÿæ‹…å’Œå»¶è¿Ÿã€‚
  - è¿‡å°çš„ `MTU`ï¼šä¼šä½¿å¾—æ•°æ®åŒ…è¿‡å°ï¼Œåˆ†ç‰‡è¿‡å¤šï¼Œå½±å“ç½‘ç»œæ•ˆç‡ã€‚

  > ä¾‹å¦‚ï¼š`POST` è¯·æ±‚å¢åŠ  `Content-Length` å‚æ•°åï¼Œæ•°æ®ä¼ è¾“è¿‡å¤§æ—¶å¯èƒ½å¯¼è‡´ `Broken pipe` æŠ¥é”™ï¼Œè°ƒæ•´ `MTU` å€¼å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 

:::

### â“å…¨åŒå·¥å’ŒåŠåŒå·¥æ¨¡å¼æ˜¯ä»€ä¹ˆ

::: details ğŸ’¡

â€œåŒå·¥â€ï¼šæ•°æ®ä¼ è¾“çš„ä¸¤ä¸ªæ–¹å‘çš„å·¥ä½œçŠ¶æ€ã€‚

  - å…¨åŒå·¥ï¼ˆ`Full-Duplex`ï¼‰æ¨¡å¼ï¼šé€šä¿¡ç³»ç»Ÿä¸­çš„ä¸¤ä¸ªè®¾å¤‡å¯ä»¥åŒæ—¶è¿›è¡Œå‘é€å’Œæ¥æ”¶æ“ä½œã€‚ä¸¤ä¸ªæ–¹å‘æ˜¯ç‹¬ç«‹çš„ï¼Œå¯ä»¥åŒæ—¶è¿›è¡Œã€‚
    > ä¾‹å¦‚ï¼šç”µè¯ï¼Œæˆ‘ä»¬å¯ä»¥åŒæ—¶å¬å¯¹æ–¹è¯´è¯ï¼ŒåŒæ—¶è·Ÿå¯¹æ–¹è¯´è¯ï¼Œè¿™å°±æ˜¯å…¨åŒå·¥çš„ä¾‹å­ã€‚

  - åŠåŒå·¥ï¼ˆ`Half-Duplex`ï¼‰æ¨¡å¼ï¼šé€šä¿¡ç³»ç»Ÿä¸­çš„è®¾å¤‡ä¸èƒ½åŒæ—¶å‘é€å’Œæ¥æ”¶æ•°æ®ã€‚ä¸¤ä¸ªæ–¹å‘æ˜¯äº’æ–¥çš„ï¼Œä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªæ–¹å‘åœ¨è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚
    > ä¾‹å¦‚ï¼Œå¯¹è®²æœºï¼Œå°±æ˜¯ä¸€ç§åŠåŒå·¥è®¾å¤‡ï¼Œå½“ä¸€ä¸ªäººæŒ‰ä¸‹æŒ‰é’®è¯´è¯æ—¶ï¼Œå…¶ä»–äººåªèƒ½å¬ï¼Œä¸èƒ½åŒæ—¶è¯´è¯ã€‚

:::

### Cookie

#### â“`Cookie` vs `Session`

::: details ğŸ’¡

> `Cookie` å’Œ `Session`éƒ½ç”¨äºè·Ÿè¸ªç”¨æˆ·çš„çŠ¶æ€ã€‚

åŒºåˆ«ï¼š

  - **å­˜å‚¨ä½ç½®**ï¼š
    * `Cookie`  ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ã€‚
    * `Session` ä¿å­˜åœ¨æœåŠ¡ç«¯ã€‚

  - **ç”Ÿå‘½å‘¨æœŸ**ï¼š
    * `Cookie`  çš„ç”Ÿå‘½å‘¨æœŸï¼šç”±åˆ›å»ºæ—¶è®¾å®šçš„è¿‡æœŸæ—¶é—´å†³å®šï¼Œå¯ä»¥æŒä¹…åŒ–å­˜å‚¨ï¼Œå³ä½¿å…³é—­æµè§ˆå™¨æˆ–è€…å…³æœºï¼Œåªè¦è¿˜æœªåˆ°è¾¾è¿‡æœŸæ—¶é—´å°±èƒ½ç»§ç»­ä½¿ç”¨ã€‚
    * `Session` çš„ç”Ÿå‘½å‘¨æœŸï¼šä»¥æœåŠ¡å™¨ä¸ºå‡†ï¼Œå½“æµè§ˆå™¨å…³é—­ï¼Œæˆ–è€…` Session` è¶…æ—¶ï¼ˆæ ¹æ®æœåŠ¡å™¨è®¾ç½®ï¼‰ï¼Œ`Session` å°±ä¼šå¤±æ•ˆã€‚

  - **å®‰å…¨æ€§**ï¼š
    * `Cookie`  å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œè¾ƒå®¹æ˜“è¢«æ¶æ„ç”¨æˆ·åˆ†æå’Œç¯¡æ”¹ï¼Œæ‰€ä»¥æ•æ„Ÿä¿¡æ¯é€šå¸¸ä¸å­˜å‚¨åœ¨ `Cookie` ä¸­ã€‚
    * `Session` å­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼Œç›¸å¯¹æ¥è¯´ä¿å¯†æ€§æ›´å¥½ã€‚

  - **å®¹é‡**ï¼š
    * `Cookie`  å¯¹å¤§å°æœ‰é™åˆ¶ï¼Œæ¯ä¸ªç«™ç‚¹çš„ `Cookie` æ€»é‡å¤§è‡´åœ¨ `4KB` å·¦å³ã€‚
    * `Session` æ²¡æœ‰å¤§å°çš„é™åˆ¶ï¼Œå¯ä»¥å­˜å‚¨å¤§é‡æ•°æ®ã€‚

  - **å¯¹æœåŠ¡å™¨å‹åŠ›**ï¼š
    * `Cookie`  æ˜¯ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œå¯¹æœåŠ¡å™¨å‹åŠ›è¾ƒå°ã€‚
    * `Session` æ˜¯å­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼Œå¦‚æœå¹¶å‘è®¿é—®ç”¨æˆ·å¾ˆå¤šï¼ŒæœåŠ¡å™¨çš„å‹åŠ›å°±ä¼šå˜å¤§ã€‚

  - **åº”ç”¨åœºæ™¯**ï¼š
    * `Cookie`  ç»å¸¸ç”¨äºä¿å­˜ç”¨æˆ·ä¸€äº›åå¥½è®¾ç½®ï¼Œç”¨æˆ·åç­‰éæ•æ„Ÿä¿¡æ¯ã€‚
    * `Session` ç»å¸¸ç”¨äºéœ€è¦è®°å½•çš„æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€‚

å®é™…åº”ç”¨ï¼šå¾€å¾€ä¼šç»“åˆä¸¤è€…ä½¿ç”¨ã€‚
  
  > ä¾‹å¦‚ï¼ŒæœåŠ¡å™¨åˆ›å»ºä¸€ä¸ª `Session` å‘é€ç»™å®¢æˆ·ç«¯(æµè§ˆå™¨)ï¼Œç„¶åå®¢æˆ·ç«¯å°† `Session` çš„å”¯ä¸€æ ‡è¯†ç¬¦å­˜å‚¨åœ¨ `Cookie` ä¸­ï¼Œè¿™æ ·æ—¢åˆ©ç”¨äº† `Cookie` æ–¹ä¾¿çš„å®¢æˆ·ç«¯å­˜å‚¨ï¼Œä¹Ÿé¿å…äº†åœ¨ `Cookie` ä¸­å­˜å‚¨æ•æ„Ÿä¿¡æ¯çš„é£é™©ã€‚

:::

#### â“`Cookies` ç»å¸¸ç”¨åœ¨å“ªäº›åœ°æ–¹ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä¿®æ”¹ `Cookies` å—

::: details ğŸ’¡

ä½¿ç”¨åœºæ™¯ï¼š

  - ä¼šè¯ç®¡ç†ï¼šå¦‚ç™»å½•ã€è´­ç‰©è½¦ã€æ¸¸æˆåˆ†æ•°ï¼Œæˆ–è€…ä»»ä½•å…¶ä»–åœ¨æœåŠ¡å™¨ä¸Šå­˜å‚¨çš„ä¸´æ—¶ä¿¡æ¯ã€‚

  - ä¸ªæ€§åŒ–è®¾ç½®ï¼šå¦‚ç”¨æˆ·åå¥½è®¾ç½®ã€ä¸»é¢˜ç­‰ã€‚

  - è·Ÿè¸ªå’Œåˆ†æç”¨æˆ·è¡Œä¸ºï¼šè®°å½•å’Œåˆ†æç”¨æˆ·å¯¹ç½‘ç«™çš„è®¿é—®å’Œä½¿ç”¨æƒ…å†µï¼Œç”¨äºç½‘ç«™ä¼˜åŒ–ã€å¹¿å‘ŠæŠ•æ”¾ç­‰ã€‚


`Chrome` æµè§ˆå™¨ä¸­ä¿®æ”¹ `Cookies` çš„æ–¹æ³•ï¼š

  - æ‰“å¼€å¼€å‘è€…å·¥å…· `DevTools`

  - åˆ‡æ¢åˆ° `Application` æ ‡ç­¾é¡µ

  - åœ¨å·¦è¾¹èœå•æ ä¸­çš„ `Storage` ä¸‹é¢æ‰¾åˆ° `Cookies` ç‚¹å‡»åä¼šæ˜¾ç¤ºå½“å‰ç½‘é¡µæ‰€æœ‰çš„ `Cookies`ã€‚

  - æ­¤æ—¶å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ `Cookies`ã€‚ç›´æ¥åŒå‡»æƒ³è¦ä¿®æ”¹çš„ `Cookie` çš„ `Value` éƒ¨åˆ†ï¼Œå°±å¯ä»¥å¼€å§‹ä¿®æ”¹äº†ã€‚

:::

#### â“ä¸€ä¸ª `URL` çš„åŸŸæ˜¯ä»€ä¹ˆï¼Œ`cookie` å¯ä»¥å®ç°è·¨åŸŸè®¿é—®å—

::: details ğŸ’¡

URLçš„åŸŸæŒ‡çš„æ˜¯URLä¸­çš„ä¸»æœºéƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œåœ¨URL "http://www.example.com:8000/path/to/myfile.html?key1=value1&key2=value2#Somediv" ä¸­ï¼Œ"www.example.com" å°±æ˜¯URLçš„åŸŸã€‚

è‡³äºCookieæ˜¯å¦å¯ä»¥å®ç°è·¨åŸŸè®¿é—®ï¼Œç­”æ¡ˆæ˜¯ä¸èƒ½ã€‚è¿™æ˜¯ç”±åŒæºç­–ç•¥æ‰€è§„å®šçš„ï¼Œä¹Ÿæ˜¯ä¸ºäº†ä¿æŠ¤ç”¨æˆ·éšç§å’Œç½‘ç»œå®‰å…¨ã€‚

åŒæºç­–ç•¥è¦æ±‚ä¸€ä¸ªç½‘é¡µä¸Šè¿è¡Œçš„è„šæœ¬åªèƒ½è®¿é—®å’Œæ“ä½œåŒæºé¡µé¢çš„Cookieã€‚"åŒæº"æ˜¯æŒ‡"åè®® + åŸŸå + ç«¯å£"ä¸‰è€…ç›¸åŒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸¤ä¸ªURLï¼Œåªæœ‰è¿™ä¸‰è€…ç›¸åŒï¼Œæ‰èƒ½å…±äº«Cookieã€‚

æ¯”å¦‚ï¼Œ"http://www.example.com" å’Œ "https://www.example.com" æˆ– "http://static.example.com" æˆ– "http://www.example.com:8001"ï¼Œè¿™äº›éƒ½æ˜¯éåŒæºçš„ï¼Œä¸èƒ½å…±äº«Cookieã€‚

ä¸è¿‡ï¼Œè™½ç„¶ä¸èƒ½ç›´æ¥å®ç°è·¨åŸŸå…±äº«Cookieï¼Œä½†æ˜¯æœ‰ä¸€äº›æŠ€æœ¯å’Œæ–¹æ³•å¯ä»¥å®ç°ç±»ä¼¼çš„æ•ˆæœï¼Œå¦‚JSONPã€CORSï¼ˆè·¨æºèµ„æºå…±äº«ï¼‰ã€document.domainç­‰ï¼Œåœ¨è¿™äº›æŠ€æœ¯çš„å¸®åŠ©ä¸‹ï¼Œå¯ä»¥å®‰å…¨åœ°è·¨åŸŸä¼ é€’æ•°æ®å’ŒCookieï¼Œä½†æ˜¯è¿™å°±æ¶‰åŠåˆ°æ›´å¤æ‚çš„ç½‘ç»œé€šä¿¡å’Œç¼–ç¨‹æŠ€æœ¯äº†ã€‚

:::

### â“æµé‡æ§åˆ¶å’Œæ‹¥å¡é¿å…çš„åŒºåˆ«

::: details ğŸ’¡

  - **æµé‡æ§åˆ¶**ï¼šç‚¹å¯¹ç‚¹ï¼ˆä»ä¸€å°ä¸»æœºåˆ°å¦ä¸€å°ä¸»æœºï¼‰çš„é€šä¿¡æœºåˆ¶ã€‚å¸¸åœ¨ç½‘ç»œçš„ä¼ è¾“å±‚ï¼ˆå¦‚ `TCP` åè®®ï¼‰è¿›è¡Œã€‚
    > ä¸»è¦ç›®çš„ï¼šé˜²æ­¢å‘é€æ–¹å‘é€è¿‡å¤šçš„æ•°æ®ç»™æ¥æ”¶æ–¹ï¼Œä»¥å…æ¥æ”¶æ–¹æ— æ³•å¤„ç†è¿™ä¹ˆå¤šæ•°æ®ã€‚å…¶ä¸­ï¼Œæ¥æ”¶æ–¹å°†æ ¹æ®å…¶å¤„ç†èƒ½åŠ›ï¼Œåé¦ˆç»™å‘é€æ–¹ä¸€ä¸ªâ€œæ¥æ”¶çª—å£â€å¤§å°ï¼Œå‘Šè¯‰å‘é€æ–¹å®ƒåº”è¯¥å‘é€å¤šå°‘æ•°æ®ã€‚å‘é€æ–¹æ ¹æ®è¿™ä¸ªåé¦ˆæ¥è°ƒæ•´å‘é€é€Ÿç‡ã€‚

  - **æ‹¥å¡æ§åˆ¶**ï¼šæ˜¯å…¨å±€æ€§çš„ï¼ŒåŒ…æ‹¬äº†æ‰€æœ‰ä¸»æœºå’Œæ‰€æœ‰çš„ç½‘ç»œé“¾è·¯ã€‚åœ¨ç½‘ç»œå±‚ï¼Œæ¶‰åŠæ•´ä¸ªç½‘ç»œçš„è¿è¡ŒçŠ¶æ€ã€‚
    > ä¸»è¦ç›®çš„ï¼šé˜²æ­¢è¿‡å¤šçš„æ•°æ®åœ¨ç½‘ç»œä¸­ä¼ è¾“ï¼Œä»¥å…å¯¼è‡´ç½‘ç»œæ‹¥å¡å’Œæ€§èƒ½ä¸‹é™ã€‚å…¶ä¸­ï¼Œç½‘ç»œçš„é€šä¿¡èŠ‚ç‚¹ï¼ˆå¦‚è·¯ç”±å™¨æˆ–äº¤æ¢æœºï¼‰æˆ–å‘é€æ–¹å°†æ ¹æ®ç½‘ç»œçš„æ‹¥å¡æƒ…å†µï¼Œè°ƒæ•´æ•°æ®çš„å‘é€é€Ÿç‡ã€‚

æ€»ç»“ï¼šæµé‡æ§åˆ¶æ›´å…³æ³¨å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¹‹é—´çš„å¹³è¡¡ï¼Œè€Œæ‹¥å¡æ§åˆ¶åˆ™å…³æ³¨æ•´ä¸ªç½‘ç»œçš„å¥åº·è¿è¡ŒçŠ¶æ€ã€‚

:::

### â“äº†è§£è¿‡ç«¯å£æ˜ å°„å—ï¼Œè¯´ä¸€ä¸‹ç«¯å£æ˜ å°„çš„æ–¹æ³•ã€‚

::: details ğŸ’¡

> ç«¯å£æ˜ å°„ï¼Œåˆç§°ç«¯å£è½¬å‘ï¼Œæ˜¯é˜²ç«å¢™çš„ä¸€ç§è®¾ç½®ï¼Œå®ƒæŠŠé˜²ç«å¢™ä¸Šçš„ä¸€ä¸ªç«¯å£æ˜ å°„åˆ°ç§æœ‰ç½‘ç»œçš„ç‰¹å®šä¸»æœºä¸Šç‰¹å®šçš„ä¸€ä¸ªç«¯å£ï¼Œé€šè¿‡ç«¯å£æ˜ å°„ï¼Œå¯ä»¥è®©å¤–ç•Œé€šè¿‡é˜²ç«å¢™è®¿é—®å†…éƒ¨ç½‘ç»œä¸­çš„ä¸»æœºã€‚

ç«¯å£æ˜ å°„çš„é…ç½®æ–¹æ³•ï¼š

  - é™æ€ç«¯å£æ˜ å°„ï¼šå°†å†…éƒ¨ä¸»æœºå›ºå®šç«¯å£çš„ç½‘ç»œæœåŠ¡æ˜ å°„åˆ°é˜²ç«å¢™çš„æŒ‡å®šç«¯å£ä¸Šã€‚
    > ä¾‹å¦‚ï¼Œå°†å†…éƒ¨ä¸»æœºçš„ `HTTP` æœåŠ¡ï¼ˆ`TCP` 80 ç«¯å£ï¼‰æ˜ å°„åˆ°é˜²ç«å¢™çš„ 8080 ç«¯å£ã€‚å½“å¤–éƒ¨ç½‘ç»œç”¨æˆ·è®¿é—®é˜²ç«å¢™çš„ 8080 ç«¯å£æ—¶ï¼Œé˜²ç«å¢™è‡ªåŠ¨å°†å¤–éƒ¨ç½‘ç»œç”¨æˆ·çš„è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ä¸»æœºçš„ 80 ç«¯å£ã€‚
    
  - åŠ¨æ€ç«¯å£æ˜ å°„ï¼šåœ¨éœ€è¦çš„æ—¶å€™æä¾›ä¸€ç§åŠ¨æ€çš„ç«¯å£æ˜ å°„æœåŠ¡ï¼Œå¤–éƒ¨ç½‘ç»œç”¨æˆ·å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™åŠ¨æ€çš„è®¿é—®å†…éƒ¨ç½‘ç»œä¸»æœºçš„ç½‘ç»œæœåŠ¡ã€‚
    > ä¾‹å¦‚ï¼Œå½“å†…éƒ¨ç½‘ç»œä¸»æœºçš„ `FTP` æœåŠ¡è¢«å¤–éƒ¨ç”¨æˆ·è¯·æ±‚æ—¶ï¼Œé˜²ç«å¢™ä¼šåŠ¨æ€çš„åˆ›å»ºä¸€ä¸ªç«¯å£æ˜ å°„ï¼Œå°†å¤–éƒ¨ç”¨æˆ·çš„è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ä¸»æœºçš„ `FTP` æœåŠ¡ã€‚

:::

------

## UDP

### â“`UDP`

::: details ğŸ’¡

> `UDP` (`User Datagram Protocol`)ï¼šç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼Œæ˜¯ä¸€ç§æ— è¿æ¥çš„ç½‘ç»œé€šä¿¡åè®®ï¼Œä½äº `OSI` æ¨¡å‹çš„ä¼ è¾“å±‚ã€‚ä¸ `TCP` åè®®ä¸åŒï¼Œ`UDP` ä¸æä¾›æ•°æ®æ­£ç¡®æ€§ä¿è¯å’Œé¡ºåºä¿è¯ï¼Œä¹Ÿä¸è¿›è¡Œæµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ã€‚

ä¸»è¦ç‰¹æ€§ï¼š

  - æ— è¿æ¥ï¼š`UDP` å‘é€æ•°æ®å‰æ— éœ€å»ºç«‹è¿æ¥ï¼Œæ¯ä¸ªæ•°æ®æŠ¥éƒ½ç‹¬ç«‹å¤„ç†ï¼Œå› æ­¤å¯ä»¥æ”¯æŒåŒæ—¶å‘å¤šä¸ªæ¥æ”¶è€…å‘é€æ•°æ®ã€‚
  - å°‘é‡å¼€é”€ï¼š`UDP` ä¸éœ€è¦è¿›è¡Œå¤æ‚çš„é”™è¯¯æ£€æŸ¥å’Œæ¢å¤æœºåˆ¶ï¼Œå¤´éƒ¨å¼€é”€åªæœ‰ 8 å­—èŠ‚ï¼Œæ¯” `TCP` æ›´ç®€å•ä¹Ÿæ›´å¿«ã€‚
  - ä¸å¯é æ€§ï¼š`UDP` ä¸ä¿è¯æ•°æ®çš„åˆ°è¾¾å’Œé¡ºåºï¼Œæ•°æ®å¯èƒ½ä¼šä¸¢å¤±æˆ–è€…ä¹±åºã€‚
  - æ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡ã€‚

åº”ç”¨ï¼šæ¯”å¦‚å®æ—¶åº”ç”¨ï¼ˆå¦‚ `VoIP` å’Œåœ¨çº¿æ¸¸æˆï¼‰ï¼Œå¹¿æ’­å’Œå¤šæ’­åº”ç”¨ï¼Œä»¥åŠéœ€è¦å¿«é€Ÿä¼ è¾“ä¸”ä¸å¤ªå…³å¿ƒä¸¢åŒ…çš„åº”ç”¨ï¼ˆå¦‚ `DNS` å’Œ `DHCP`ï¼‰ã€‚

:::

### â“`TCP` vs `UDP`
  
::: details ğŸ’¡
  
`TCP` ç‰¹ç‚¹
  
  - å¯é æ€§ : é€šè¿‡ç¡®è®¤åº”ç­”ã€è¶…æ—¶é‡ä¼ ç­‰æœºåˆ¶ä¿è¯æ•°æ®çš„å¯é ä¼ è¾“ã€‚
  - æœ‰åºæ€§ : é€šè¿‡æ•°æ®åºå·æ¥ä¿è¯æ•°æ®æœ‰åºï¼Œä¼ è¾“å®Œæˆåé€šè¿‡æ’åºæ¥ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ã€‚
  - åŒå…¨å·¥ : é€šä¿¡åŒæ–¹(æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯)éƒ½å…·å¤‡å‘é€å’Œæ¥å—æ•°æ®çš„èƒ½åŠ›ã€‚(ä¸‰æ¬¡æ¡æ‰‹æ¥ä¿è¯)
  
`UDP` ç‰¹ç‚¹

  - ä¸å¯é  : é€šä¿¡é€šä¿¡åŒæ–¹ä¸éœ€è¦å»ºç«‹è¿æ¥ï¼Œä¸èƒ½ä¿è¯æ•°æ®å‡†ç¡®é€è¾¾ã€‚
  - æ— åºæ€§ : æ¯æ¬¡å‘é€çš„æ•°æ®åŒ…ç›¸äº’ç‹¬ç«‹ï¼Œæ²¡æœ‰ç‰¹å®šçš„é¡ºåºã€‚
  - é€Ÿåº¦å¿« : ç”±äºæ•°æ®åŒ…ç»“æ„ç®€å•ï¼Œä¿è¯çš„ `UDP` ä¼ è¾“é€Ÿåº¦ä¼˜äº `TCP`
  
  ä¸€äº›æ¸¸æˆã€ç›´æ’­å’Œéœ€è¦ä½å»¶è¿Ÿå®æ—¶æ€§è¦æ±‚è¾ƒé«˜çš„åº”ç”¨ï¼Œä¼šä½¿ç”¨ `UDP`ã€‚

ä¸¤è€…åŒºåˆ«ï¼š

  - è¿æ¥æ–¹å¼ï¼š
    * `TCP` æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„åè®®ï¼Œåœ¨æ­£å¼æ”¶å‘æ•°æ®ä¹‹å‰ï¼Œå¿…é¡»å’Œå¯¹æ–¹å»ºç«‹å¯é çš„è¿æ¥ã€‚
        > ä¸€ä¸ªTCPè¿æ¥å¿…é¡»è¦ç»è¿‡ä¸‰æ¬¡â€œå¯¹è¯â€æ‰èƒ½å»ºç«‹èµ·æ¥ã€‚æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼ˆ`three-way handshake`ï¼‰å°±æ˜¯æŒ‡å»ºç«‹ä¸€ä¸ªTCPè¿æ¥ï¼Œè¿™ç§æœºåˆ¶ä¿è¯äº†ä¸¤ç«¯ç³»ç»Ÿåœ¨é€šä¿¡å¼€å§‹ä¹‹å‰å°±å·²çŸ¥äº†å¯¹æ–¹çš„å­˜åœ¨ã€‚
    * `UDP` åˆ™æ˜¯é¢å‘éè¿æ¥çš„åè®®ï¼Œå®ƒä¸ä¸å¯¹ç«¯å»ºç«‹è¿æ¥ï¼Œè€Œæ˜¯ç›´æ¥å°±å‘é€æ•°æ®åŒ…ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œ`UDP` æ•°æ®åŒ…çš„åˆ°è¾¾å’Œé¡ºåºä¹Ÿä¸èƒ½è¢«ä¿è¯ã€‚

  - å¯é æ€§å’Œé€Ÿåº¦ï¼š
    * `TCP` æä¾›äº†å…¨é¢çš„é”™è¯¯æ£€æŸ¥å’Œç¡®è®¤æœºåˆ¶ï¼Œå¹¶ä¸”æœ‰é‡å‘æœºåˆ¶ï¼Œæ‰€ä»¥å®ƒèƒ½æä¾›å¯é çš„æ•°æ®ä¼ è¾“ï¼Œé€‚åˆå¯¹å¯é æ€§è¦æ±‚å¾ˆé«˜çš„åœºæ™¯ï¼Œå¦‚æ–‡ä»¶ä¼ è¾“ã€‚
    * `UDP` åˆ™ä¸æä¾›å¿…è¦çš„æ£€æŸ¥ï¼Œä¹Ÿä¸ä¿è¯æ•°æ®çš„é¡ºåº, å› æ­¤å®ƒçš„æ€§èƒ½æ›´é«˜ï¼Œä¼ è¾“é€Ÿåº¦æ›´å¿«ï¼Œé€‚ç”¨äºå¯¹å®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼Œå¦‚è§†é¢‘é€šè¯ï¼Œç›´æ’­ç­‰ã€‚

  - æ•°æ®äº¤äº’æ–¹å¼ï¼š
    * `TCP` æ˜¯åŒå‘é€šä¿¡çš„ï¼Œå³ A ä¸»æœºåˆ° B ä¸»æœºå’Œ B ä¸»æœºåˆ° A ä¸»æœºçš„äº¤äº’éƒ½å¯ä»¥ã€‚
    * `UDP` åˆ™ä¸»è¦ç”¨äºå•å‘å‘é€æ•°æ®ï¼Œå¦‚å£°æ˜æ€§ï¼ˆdatagramï¼‰æœåŠ¡ã€‚

  - æµæ§åˆ¶ï¼š
    * `TCP` æä¾›äº†æµé‡æ§åˆ¶çš„æœºåˆ¶ï¼Œæ—¢æœ‰å‘é€ç«¯æ§åˆ¶å‘é€é€Ÿç‡ä½¿æ¥æ”¶ç«¯æ¥å¾—åŠæ¥æ”¶ï¼Œåˆæœ‰æ¥æ”¶ç«¯é€šè¿‡æ»‘åŠ¨çª—å£æ§åˆ¶æ¥æ”¶é€Ÿç‡ï¼Œé˜²æ­¢æ¥æ”¶ç«¯å¤„ç†ä¸è¿‡æ¥ã€‚
    * `UDP` åˆ™æ²¡æœ‰æä¾›æµé‡æ§åˆ¶çš„æœºåˆ¶ï¼Œæ•°æ®å‘é€ä¹‹åä¹Ÿæ— æ³•è·å¾—å‘é€æ˜¯å¦æˆåŠŸçš„åé¦ˆã€‚

æ€»ç»“ï¼šå¦‚æœéœ€è¦å¯é æ€§å’Œæ•°æ®å®Œæ•´æ€§ï¼Œåº”è¯¥ç”¨ `TCP`ï¼›å¦‚æœéœ€è¦é€Ÿåº¦ï¼Œé‚£ä¹ˆåº”è¯¥ç”¨ `UDP`ã€‚

:::

### â“æœ‰äººè®¤ä¸º `TCP` ä¸€å®šæ¯” `UDP` æ›´å¿«ï¼Œä½ è§‰å¾—å‘¢

::: details ğŸ’¡

ä¸å¯¹ï¼Œä¸€èˆ¬æƒ…å†µæ¥è¯´ï¼Œ`TCP` æ¯” `UDP` æ›´æ…¢ã€‚

  - `TCP`ï¼ˆ`Transmission Control Protocol`ï¼‰æ˜¯ä¸€ç§é¢å‘è¿æ¥ã€å¯é çš„ä¼ è¾“åè®®ï¼Œå®ƒæä¾›äº†æ•°æ®å®Œæ•´æ€§å’Œé¡ºåºä¿è¯ï¼Œé€‚åˆäºå¯¹æ•°æ®ä¼ è¾“å‡†ç¡®æ€§è¦æ±‚é«˜çš„åœºæ™¯ã€‚ä½†æ˜¯ï¼Œ`TCP` ä¸ºäº†ç¡®ä¿è¿™ç§å¯é æ€§ï¼Œå¼•å…¥äº†ç¡®è®¤ï¼ˆ`ACK`ï¼‰ã€é‡ä¼ ç­‰æœºåˆ¶ï¼Œè¿™äº›å¤„ç†ä¼šæ¶ˆè€—ä¸€å®šçš„æ—¶é—´ï¼Œå¯¹æ€§èƒ½æœ‰æ‰€å½±å“ã€‚

  - `UDP`ï¼ˆ`User Datagram Protocol`ï¼‰æ˜¯ä¸€ç§æ— è¿æ¥ã€ä¸å¯é çš„ä¼ è¾“åè®®ï¼Œå®ƒä¸ä¿è¯æ•°æ®çš„åˆ°è¾¾å’Œé¡ºåºã€‚å› æ­¤ï¼Œ`UDP` ç›¸æ¯” `TCP` æœ‰è¾ƒå°çš„åè®®å¼€é”€ï¼Œå¯¹äºé‚£äº›è¦æ±‚å®æ—¶æ€§ï¼Œå¯ä»¥å®¹å¿ä¸¢åŒ…ï¼Œä½†å¯¹ä¼ è¾“å»¶è¿Ÿå’Œæ•ˆç‡è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ï¼ˆå¦‚æµåª’ä½“ä¼ è¾“ã€åœ¨çº¿æ¸¸æˆï¼‰æ¥è¯´ï¼Œ`UDP` å¯èƒ½ä¼šæ¯” `TCP` æ›´å¿«ã€‚

:::

### â“`UDP` é™¤äº†ä¸ç”¨æ¡æ‰‹ï¼Œè¿˜æœ‰ä»€ä¹ˆä¼˜ç‚¹

::: details ğŸ’¡

  - é€Ÿåº¦å¿«ï¼šç”±äº `UDP` æ˜¯æ— è¿æ¥çš„ï¼Œæ²¡æœ‰åƒ `TCP` é‚£æ ·çš„æ¡æ‰‹ã€ç¡®è®¤å’Œç»ˆæ­¢è¿æ¥ç­‰è¿‡ç¨‹ï¼Œæ‰€ä»¥é€šä¿¡é€Ÿåº¦è¾ƒå¿«ã€‚

  - èµ„æºå ç”¨å°ï¼š`UDP` æ²¡æœ‰å¤æ‚çš„ç®¡ç†æœºåˆ¶ï¼Œå› æ­¤ç½‘ç»œè®¾å¤‡éœ€è¦çš„å¤„ç†é€»è¾‘å°‘ï¼Œå ç”¨çš„ç³»ç»Ÿèµ„æºä¹Ÿè¾ƒå°‘ã€‚

  - å®æ—¶æ€§é«˜ï¼š`UDP` é€‚åˆå®æ—¶åº”ç”¨ï¼Œåœ¨è¯­éŸ³ã€è§†é¢‘ã€æ¸¸æˆä¼ è¾“ç­‰å¯¹å®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯æœ‰ä¼˜åŠ¿ã€‚

  - çµæ´»æ€§é«˜ï¼š`UDP` çš„æ•°æ®ä¼ è¾“æ–¹å¼æ¯”è¾ƒçµæ´»ï¼Œå¯ä»¥æ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ã€å¤šå¯¹å¤šçš„é€šè®¯æ¨¡å¼ã€‚

  - æ§åˆ¶æƒåœ¨ç”¨æˆ·æ‰‹ä¸­ï¼š`UDP` åè®®æŠŠç½‘ç»œç¨‹åºæ‰€éœ€çš„æ§åˆ¶æƒäº¤ç»™åº”ç”¨ç¨‹åºè‡ªå·±å»å¤„ç†ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥è‡ªå®šä¹‰ä¸€äº›ç®—æ³•è¿›è¡Œæµé‡æ§åˆ¶æˆ–é”™è¯¯å¤„ç†ã€‚

:::

------

## TCP

### â“`TCP`

::: details ğŸ’¡

> `TCP` (`Transmission Control Protocol`)ï¼šä¼ è¾“æ§åˆ¶åè®®ï¼Œæ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„é€šä¿¡åè®®ï¼Œä½äº `OSI` æ¨¡å‹çš„ä¼ è¾“å±‚ã€‚åœ¨ `Internet` åè®®å®¶æ—ï¼ˆ`TCP/IP` åè®®å®¶æ—ï¼‰ä¸­ï¼Œ`TCP` ä¸ç½‘ç»œå±‚çš„ `IP` åè®®å…±åŒæ„æˆäº† `Internet` çš„æ ¸å¿ƒã€‚

ä¸»è¦ç‰¹æ€§ï¼š

  - ä¸‰æ¬¡æ¡æ‰‹ï¼šå»ºç«‹è¿æ¥ï¼Œç»è¿‡ â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼Œç¡®ä¿åŒæ–¹éƒ½å‡†å¤‡å¥½è¿›è¡Œæ•°æ®äº¤æ¢ã€‚
  - ä½¿ç”¨åºåˆ—å·å’Œç¡®è®¤åº”ç­”ï¼š`TCP` ä¸ºæ¯ä¸ªå­—èŠ‚èµ‹äºˆä¸€ä¸ªåºåˆ—å·ï¼Œå¹¶æœŸæœ›æ”¶åˆ°æ¥æ”¶ç«¯çš„ç¡®è®¤åº”ç­”ã€‚å¦‚æœå‘é€ç«¯æ²¡æœ‰æ”¶åˆ°ç¡®è®¤åº”ç­”ï¼Œå°±ä¼šé‡å‘æ•°æ®ã€‚
  - çª—å£å¤§å°å’Œæ»‘åŠ¨çª—å£æœºåˆ¶ï¼šä¸ºäº†æ§åˆ¶æ•°æ®çš„æµé‡å’Œé¿å…ç½‘ç»œæ‹¥å¡ï¼Œ`TCP` ä½¿ç”¨äº†çª—å£å¤§å°å’Œæ»‘åŠ¨çª—å£çš„æœºåˆ¶ã€‚
  - æµé‡æ§åˆ¶ï¼šé€šè¿‡é€‚æ—¶è°ƒæ•´çª—å£å¤§å°ï¼Œ`TCP` èƒ½å¤Ÿæ ¹æ®æ¥æ”¶ç«¯çš„å¤„ç†èƒ½åŠ›ï¼Œæ¥æ§åˆ¶å‘é€ç«¯çš„å‘é€é€Ÿç‡ã€‚
  - æ£€é”™å’Œé‡ä¼ ï¼š`TCP` é€šè¿‡æ£€éªŒå’Œå’Œå®šæ—¶å™¨ç­‰æœºåˆ¶æ¥å®ç°æ•°æ®çš„æ— å·®é”™ä¼ è¾“ï¼Œå¦‚æœå‡ºç°é”™è¯¯æˆ–è€…ä¸¢åŒ…ï¼Œ`TCP` ä¼šè‡ªåŠ¨è¿›è¡Œé‡ä¼ ã€‚
  - å››æ¬¡æŒ¥æ‰‹ï¼šæ–­å¼€è¿æ¥ï¼Œ`TCP` ä¼šé€šè¿‡ â€œå››æ¬¡æŒ¥æ‰‹â€ æ¥å®‰å…¨åœ°å…³é—­è¿æ¥ã€‚

åº”ç”¨ï¼šéœ€è¦é«˜å¯é æ€§çš„ç½‘ç»œé€šä¿¡ï¼Œæ¯”å¦‚ `Web` æµè§ˆã€é‚®ä»¶ä¼ è¾“ã€æ–‡ä»¶ä¼ è¾“ç­‰ã€‚

:::

### å»ºç«‹è¿æ¥

#### â“ä¸‰æ¬¡æ¡æ‰‹

::: details ğŸ’¡

`TCP` ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ï¼šå»ºç«‹è¿æ¥çš„è¿‡ç¨‹ã€‚
   
  - ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ `SYN` åŒ…ï¼ˆåºåˆ—å· `seq` ä¸º `X`ï¼‰åˆ°æœåŠ¡å™¨ï¼Œå¹¶è¿›å…¥ `SYN_SEND` çŠ¶æ€ã€‚

  - ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ° `SYN` åŒ…ï¼Œå¿…é¡»ç¡®è®¤å®¢æˆ·çš„ `SYN`(`ACK` = `X+1`)ï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿå‘é€ä¸€ä¸ª `SYN` åŒ…ï¼ˆåºåˆ—å· `seq` ä¸º `Y`ï¼‰ï¼Œå³ `SYN + ACK `åŒ…ï¼ŒæœåŠ¡å™¨æ­¤æ—¶è¿›å…¥ `SYN_RECV` çŠ¶æ€ã€‚

  - ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ `SYN + ACK` åŒ…ï¼Œå‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ… `ACK`(`ACK`= `Y+1`)ï¼Œæ­¤åŒ…å‘é€å®Œæ¯•ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›å…¥ `ESTABLISHED` çŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ã€‚

:::

#### â“ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹

::: details ğŸ’¡

  -  ç¡®ä¿åŒæ–¹éƒ½å‡†å¤‡å¥½è¿›è¡Œé€šä¿¡ï¼šåœ¨ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½ä¼šå‘é€å¹¶ç¡®è®¤æ¥æ”¶åˆ°äº†å¯¹æ–¹çš„æ¶ˆæ¯ã€‚è¿™ç¡®ä¿äº†ä¸¤è¾¹éƒ½æœ‰èƒ½åŠ›æ”¶å‘ä¿¡æ¯ï¼Œå³ä¸¤è¾¹çš„å‘é€å’Œæ¥æ”¶åŠŸèƒ½éƒ½æ­£å¸¸ã€‚

  - é˜²æ­¢å·²ç»å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µçªç„¶åˆä¼ åˆ°äº†æœåŠ¡ç«¯ï¼Œç”±äºæœåŠ¡ç«¯è¯¯è®¤ä¸ºå®¢æˆ·ç«¯åˆå‘å‡ºä¸€æ¬¡è¿æ¥è¯·æ±‚ï¼Œäºæ˜¯å°±å‘å®¢æˆ·ç«¯å‘é€ç¡®è®¤æŠ¥æ–‡æ®µï¼ŒåŒæ„è¿æ¥ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰ä¸‰æ¬¡æ¡æ‰‹ï¼Œåˆ™ä¼šå»ºç«‹ä¸€ä¸ªæ— ç”¨çš„è¿æ¥ï¼Œæµªè´¹æœåŠ¡å™¨èµ„æºã€‚

  - ç¡®å®šåºåˆ—å·ï¼šä¸‰æ¬¡æ¡æ‰‹è¿˜å¯ä»¥å¸®åŠ©é€šä¿¡çš„åŒæ–¹ç¡®å®šæ•°æ®åŒ…çš„åºåˆ—å·ã€‚åœ¨TCPé€šä¿¡ä¸­ï¼Œæ¯ä¸ªæ•°æ®åŒ…éƒ½æœ‰ä¸€ä¸ªåºåˆ—å·ï¼Œæ¥æ”¶æ–¹æ ¹æ®åºåˆ—å·æ¥é‡æ–°ç»„ç»‡æ•°æ®åŒ…ã€‚é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹ï¼ŒåŒæ–¹éƒ½èƒ½çŸ¥é“å¯¹æ–¹æœŸå¾…æ¥æ”¶çš„åˆå§‹åºåˆ—å·ã€‚

æ€»ç»“ï¼š`TCP` åè®®é€‰æ‹©ä½¿ç”¨äº†ä¸‰æ¬¡æ¡æ‰‹è¿™ç§æ–¹å¼æ¥å»ºç«‹è¿æ¥ï¼Œä»¥ç¡®ä¿æ•°æ®çš„æ­£ç¡®ã€å¯é ä¼ è¾“ã€‚

:::

#### â“ä¸‰æ¬¡æ¡æ‰‹ï¼Œç¬¬ä¸‰æ¬¡ä¸¢å¤±ä¼šæ€ä¹ˆæ ·

::: details ğŸ’¡

ç¬¬ä¸‰æ¬¡æ¡æ‰‹å®¢æˆ·ç«¯å‘é€çš„ `ACK` åŒ…åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±ï¼š

  - æœåŠ¡å™¨ä¸€ç›´å¤„äº `SYN_RECV` çŠ¶æ€ä¸‹ï¼ŒåŒæ—¶ç­‰å¾…å®¢æˆ·ç«¯å†æ¬¡å‘é€ `ACK` åŒ…ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨åœ¨ 75 ç§’åä¼šå…³é—­ç­‰å¾…è¿æ¥ã€‚

  - å®¢æˆ·ç«¯çš„ `ACK` ä¸¢å¤±ï¼Œä½†æ˜¯è¿æ¥å·²ç»å»ºç«‹ï¼Œåœ¨ `ESTABLISHED` çŠ¶æ€ã€‚æ¥ä¸‹æ¥å¦‚æœå®¢æˆ·ç«¯å¼€å§‹å‘é€æ•°æ®ï¼ŒæœåŠ¡å™¨å°±çŸ¥é“è¿æ¥å·²ç»å»ºç«‹äº†ã€‚

  - å¦‚æœæœåŠ¡å™¨åœ¨ç­‰å¾… `ACK` çš„è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿçš„è¿æ¥é˜Ÿåˆ—å·²ç»æ»¡äº†ï¼Œé‚£ä¹ˆæ–°çš„ `SYN` åŒ…å°†æ— æ³•å¾—åˆ°å“åº”ï¼Œè¿™ä¼šå¯¼è‡´å®¢æˆ·ç«¯æ— æ³•å»ºç«‹æ–°çš„è¿æ¥ã€‚

ç»“è®ºï¼šå¦‚æœç¬¬ä¸‰æ¬¡æ¡æ‰‹çš„ `ACK` åŒ…ä¸¢å¤±ï¼Œå¯¹äºå·²ç»å»ºç«‹å¥½çš„ `TCP` è¿æ¥å½±å“å¹¶ä¸å¤§ï¼Œä½†å¯èƒ½ä¼šå½±å“æ–°çš„è¿æ¥å»ºç«‹ã€‚

:::

#### â“ä¸‰æ¬¡æ¡æ‰‹ï¼Œå¯ä»¥æºå¸¦æ•°æ®å—

::: details ğŸ’¡

  `TCP` ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸»è¦æ˜¯ä¸ºäº†å»ºç«‹è¿æ¥ï¼ŒåŒæ—¶ç¡®å®šæ•°æ®åŒ…çš„åºåˆ—å·ï¼Œä»è€Œä¿è¯æ•°æ®ä¼ è¾“çš„æ­£ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚åœ¨ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ä¸­ï¼Œç†è®ºä¸Šè¯´ç¬¬ä¸‰æ¬¡æ¡æ‰‹æ—¶ï¼Œå¯ä»¥æºå¸¦æ•°æ®å¹¶å°†æ•°æ®ä¼ ç»™æ¥æ”¶æ–¹ã€‚å› ä¸ºæ­¤æ—¶å·²ç»å»ºç«‹äº†è¿æ¥ï¼Œè€Œä¸”æ¡æ‰‹çš„ `ACK` å’Œæ•°æ®éƒ¨åˆ†åœ¨ `TCP` çš„è®¾è®¡é‡Œé¢å¹¶ä¸æ˜¯å¼ºç›¸å…³çš„ã€‚

  æ˜¯å¦æºå¸¦æ•°æ®ã€ä½•æ—¶æºå¸¦æ•°æ®ï¼Œè¿™ä¸ªå–å†³äºç½‘ç»œåè®®æ ˆçš„è®¾è®¡ï¼Œä¹Ÿè·Ÿä¸Šå±‚åº”ç”¨æœ‰å…³ã€‚åœ¨å¾ˆå¤šå®é™…çš„ç½‘ç»œåè®®æ ˆå®ç°ä¸­ï¼Œå¹¶ä¸åœ¨ä¸‰æ¬¡æ¡æ‰‹æ—¶æºå¸¦æ•°æ®ï¼Œä¸»è¦æ˜¯å› ä¸ºéœ€è¦ç­‰å¾…æ¡æ‰‹æˆåŠŸåï¼Œæ‰èƒ½ç¡®è®¤åŒæ–¹å…·å¤‡äº†æ¥æ”¶æ•°æ®å’Œå¤„ç†æ•°æ®çš„èƒ½åŠ›ã€‚æ‰€ä»¥é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸‰æ¬¡æ¡æ‰‹ä¸åŒ…æ‹¬æ•°æ®çš„å‘é€ã€‚

ç»“è®ºï¼šä»æ˜¯å¦å¯è¡Œçš„è§’åº¦çœ‹ï¼Œä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­æ˜¯å¯ä»¥æºå¸¦æ•°æ®çš„ã€‚ä½†åœ¨å®é™…æ“ä½œä¸­ï¼Œä¸€èˆ¬å¹¶ä¸è¿™ä¹ˆåšã€‚

:::

### æ–­å¼€è¿æ¥

#### â“å››æ¬¡æŒ¥æ‰‹

::: details ğŸ’¡

`TCP` å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹ï¼šç»“æŸè¿æ¥çš„è¿‡ç¨‹ã€‚

  - ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šå½“æŸä¸€ç«¯å®Œæˆæ•°æ®å‘é€åï¼ˆå‡è®¾æ˜¯å®¢æˆ·ç«¯ï¼‰ï¼Œä¼šå‘å¦ä¸€ç«¯ï¼ˆæœåŠ¡å™¨ï¼‰å‘é€ `FIN` åŒ…ï¼Œè¯·æ±‚å…³é—­è¿æ¥ã€‚
  
  - ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ° `FIN` åŒ…åï¼Œå¹¶ä¸æ˜¯ç«‹å³å…³é—­è¿æ¥ï¼Œè€Œæ˜¯å…ˆå‘å®¢æˆ·ç«¯å›å¤ç¡®è®¤åŒ… `ACK`ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯ â€œä½ çš„è¯·æ±‚æˆ‘æ”¶åˆ°äº†â€ã€‚ç„¶è€Œï¼Œæ­¤åˆ»æœåŠ¡å™¨å¯èƒ½è¿˜æœ‰æ•°æ®è¦å‘é€ï¼Œæ‰€ä»¥å¹¶ä¸ç›´æ¥å‘é€ `FIN` åŒ…ã€‚

  - ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šç­‰æœåŠ¡å™¨æ‰€æœ‰æ•°æ®éƒ½å‘é€å®Œäº†ä»¥åï¼Œå†å‘å®¢æˆ·ç«¯å‘é€ `FIN` åŒ…ï¼Œè¯·æ±‚å…³é—­è¿æ¥ã€‚

  - ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šæœ€åå®¢æˆ·ç«¯æ”¶åˆ° `FIN` åŒ…åï¼Œä¹Ÿä¸æ˜¯ç«‹å³å…³é—­è¿æ¥ï¼Œè€Œæ˜¯å…ˆå›å¤ä¸€ä¸ª `ACK` ç»™æœåŠ¡å™¨ï¼Œç„¶åç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ˆç­‰å¾…`2MSL`ï¼Œä¹Ÿå°±æ˜¯æŠ¥æ–‡æœ€å¤§ç”Ÿå­˜æ—¶é—´çš„ä¸¤å€æ—¶é—´ï¼Œçº¦1-4åˆ†é’Ÿï¼‰å†å…³é—­è¿æ¥ã€‚

:::

#### â“ä¸ºä»€ä¹ˆè¦å››æ¬¡æŒ¥æ‰‹

::: details ğŸ’¡

  å› ä¸º `TCP` è¿æ¥æ˜¯å…¨åŒå·¥çš„ï¼Œå³æ•°æ®å¯ä»¥åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šç‹¬ç«‹åœ°è¿›è¡Œä¼ è¾“ã€‚è¿™æ„å‘³ç€æ¯ä¸ªæ–¹å‘éƒ½éœ€è¦å•ç‹¬å…³é—­ï¼Œè¿™æ ·çš„è®¾è®¡ä½¿å¾— `TCP` è¿æ¥çš„å…³é—­æ›´ä¸ºå¯é ã€‚

  - æ¯ä¸ªæ–¹å‘çš„å…³é—­éƒ½éœ€è¦å‘é€ä¸€ä¸ª `FIN` åŒ…å’Œä¸€ä¸ª `ACK` åŒ…ã€‚
    * å‘é€ `FIN` åŒ…è¡¨ç¤ºæˆ‘å·²ç»æ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼Œå¹¶è¯·æ±‚å…³é—­è¿æ¥ã€‚
    * å‘é€ `ACK` åŒ…åˆ™æ˜¯ç¡®è®¤æ¥æ”¶åˆ°å¯¹æ–¹çš„ `FIN` åŒ…ã€‚

  - ä¸€ä¸ªæ–¹å‘çš„è¿æ¥å…³é—­å°±éœ€è¦ä¸¤æ¬¡æŒ¥æ‰‹ï¼Œè€Œä¸€ä¸ª `TCP` è¿æ¥ç”±äºæ˜¯å…¨åŒå·¥çš„ï¼ˆåŒæ–¹éƒ½å¯ä»¥å‘é€æ•°æ®ï¼‰ï¼Œæ‰€ä»¥ä¸¤ä¸ªæ–¹å‘éƒ½éœ€è¦å…³é—­ï¼Œå› æ­¤æ€»çš„æ¥è¯´éœ€è¦å››æ¬¡æŒ¥æ‰‹ã€‚

  - ä¸ºäº†ä¿è¯èƒ½å¤Ÿè®©æœªå®Œå…¨ä¼ è¾“çš„æ•°æ®èƒ½å¤Ÿè¢«æ¥æ”¶ï¼Œæ¥æ”¶åˆ° `FIN` åŒ…çš„ä¸€æ–¹ä¼šè¿›å…¥åˆ°ä¸€ä¸ªå«åš `TIME-WAIT` çš„çŠ¶æ€ï¼Œåœ¨è¿™ä¸ªçŠ¶æ€ä¸­ï¼Œå®ƒä¼šç­‰å¾…ä¸€æ®µæ—¶é—´ä»¥ç¡®ä¿å¯¹æ–¹æ¥æ”¶åˆ°äº† `ACK` åŒ…ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ‰æ—¶å€™ä¼šçœ‹åˆ°ä¸€äº›è¿˜å¤„äº `TIME-WAIT` çŠ¶æ€çš„ `TCP` è¿æ¥ï¼Œé‚£æ˜¯å› ä¸ºå®ƒä»¬åœ¨ç­‰å¾…æœ€ç»ˆçš„ç¡®è®¤ã€‚

  - èƒ½å¤„ç†åŒæ–¹åŒæ—¶å‘èµ·å…³é—­è¿æ¥è¯·æ±‚çš„æƒ…å†µã€‚

:::

#### â“`TCP` åŒæ–¹åŒæ—¶å‘èµ·å…³é—­è¿æ¥è¯·æ±‚çš„æƒ…å†µï¼Œæ˜¯å¦‚ä½•å¤„ç†çš„

::: details ğŸ’¡

  å››æ¬¡æŒ¥æ‰‹æ˜¯ `TCP` åè®®ç”¨æ¥ç»“æŸè¿æ¥çš„è¿‡ç¨‹ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œä¸€èˆ¬æ˜¯ç”±å…¶ä¸­ä¸€æ–¹ï¼ˆæ¯”å¦‚å®¢æˆ·ç«¯ï¼‰å…ˆå‘èµ·å…³é—­è¿æ¥è¯·æ±‚ã€‚ç„¶è€Œï¼Œ`TCP` è¿æ¥çš„æ¯ä¸€æ–¹éƒ½èƒ½ç‹¬ç«‹åœ°å…³é—­å®ƒä»¬çš„å‘é€é€šé“ï¼Œæ‰€ä»¥åŒæ–¹éƒ½å¯ä»¥å‘é€ `FIN` æŠ¥æ–‡æ¥è¯·æ±‚å…³é—­è¿æ¥ã€‚

åŒæ—¶å‘èµ·å…³é—­è¯·æ±‚å¤„ç†æµç¨‹ï¼š

  - ä¸»æœº A å‘é€ä¸€ä¸ª `FIN`ï¼Œå¹¶è¿›å…¥ `FIN-WAIT-1` çŠ¶æ€ã€‚
  - ä¸»æœº B åœ¨æ”¶åˆ°è¿™ä¸ª `FIN` åï¼Œè¿”å›ä¸€ä¸ª `ACK`ï¼Œå¹¶è®© A è¿›å…¥ `FIN-WAIT-2` çŠ¶æ€ã€‚
  - å‡ ä¹åŒæ—¶ï¼Œä¸»æœº B ä¹Ÿå‘é€ä¸€ä¸ª `FIN`ï¼Œå¹¶è¿›å…¥ `LAST-ACK` çŠ¶æ€ã€‚
  - ä¸»æœº A æ”¶åˆ° B çš„ `FIN` åï¼Œè¿”å›ä¸€ä¸ª `ACK`ï¼Œå¹¶è¿›å…¥ `TIME-WAIT` çŠ¶æ€ï¼ŒåŒæ—¶ B æ”¶åˆ°è¿™ä¸ª `ACK` åå…³é—­è¿æ¥ã€‚
  - å¯¹äº A åç»­çš„è¡Œä¸ºï¼Œä¼šæ ¹æ®å…·ä½“å®ç°ï¼Œå¯èƒ½ä¼šç»§ç»­ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œæˆ–è€…ç›´æ¥å…³é—­è¿æ¥ã€‚

:::

#### â“`CLOSE-WAIT` å’Œ `TIME-WAIT` æœ‰ä»€ä¹ˆåŒºåˆ«

::: details ğŸ’¡

> è¿™ä¸¤ä¸ªçŠ¶æ€æ—¶æ˜¯åœ¨ `TCP` åè®®çš„å››æ¬¡æ¡æ‰‹æ–­å¼€è¿æ¥çš„è¿‡ç¨‹ä¸­ã€‚

  - `CLOSE_WAIT`: è¿™ä¸ªçŠ¶æ€çš„æ„æ€æ˜¯ç­‰å¾…æœ¬åœ°åº”ç”¨ç¨‹åºå…³é—­è¿æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹æ–¹å‘é€äº†ä¸€ä¸ª `FIN` æŠ¥æ–‡ï¼Œç­‰å¾…ä½ å…³é—­è¿æ¥ã€‚è¿™ä¸ªçŠ¶æ€çš„æŒç»­æ—¶é—´å–å†³äºåº”ç”¨ç¨‹åºä½•æ—¶å…³é—­è¿æ¥ã€‚

  - `TIME_WAIT`: è¿™æ˜¯ `TCP` è¿æ¥æ–­å¼€åçš„æœ€ç»ˆçŠ¶æ€ã€‚è¿™ä¸ªçŠ¶æ€è¡¨ç¤ºï¼Œæœ¬åœ°æœºå™¨å·²å…³é—­äº†è¿æ¥ï¼Œä¹Ÿå‘é€äº†å¯¹æ–¹éœ€è¦çš„æœ€åçš„ `ACK` æŠ¥æ–‡ã€‚ç„¶åæœ¬åœ°æœºå™¨ä¼šç­‰å¾…ä¸€æ®µæ—¶é—´å†é‡Šæ”¾é€šä¿¡èµ„æºã€‚è¿™ä¸ªç­‰å¾…çš„æ—¶é—´å°±æ˜¯ `TIME_WAIT` çš„æ—¶é—´ã€‚

åŒºåˆ«ï¼š

  - `CLOSE_WAIT` çŠ¶æ€ä¸‹ï¼Œæˆ‘ä»¬å°šæœªå‘é€ `FIN` æŠ¥æ–‡å…³é—­è¿æ¥ï¼Œæ„å‘³ç€åº”ç”¨ç¨‹åºéœ€è¦å…³é—­è¿æ¥ï¼Œåº”ç”¨ç¨‹åºä¸€æ—¦å…³é—­è¿æ¥ï¼Œå‘é€ `FIN` æŠ¥æ–‡åï¼Œæˆ‘ä»¬å°±è¿›å…¥ `LAST_ACK` çŠ¶æ€ã€‚

  - `TIME_WAIT` çŠ¶æ€ä¸‹ï¼Œæˆ‘ä»¬å·²ç»å…³é—­äº†è¿æ¥ï¼Œè¡¨æ˜å·²å‘é€ `FIN` æŠ¥æ–‡ï¼Œå¹¶æ”¶åˆ°äº†å¯¹åº”çš„ `ACK`ã€‚æ­¤æ—¶å¦‚æœ `TCP` è¿æ¥å¤„åœ¨è¿™ä¸ªçŠ¶æ€ï¼Œä¼šç»§ç»­ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ˆä¸¤ä¸ªæœ€é•¿æŠ¥æ–‡å¯¿å‘½çš„æ—¶é—´ï¼Œ2 MSLï¼‰ä»¥ç¡®ä¿è¿œç«¯æ”¶åˆ°å…³é—­è¿æ¥çš„é€šçŸ¥ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿ `ACK` æŠ¥æ–‡èƒ½å¤Ÿæ­£ç¡®é€è¾¾ã€‚è¿™æ ·æ‰èƒ½ä¿è¯æ•´ä¸ªå››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹çš„å®Œæ•´æ€§ã€‚
    
æ³¨æ„ï¼šè¿‡å¤šçš„ `CLOSE_WAIT` çŠ¶æ€å¯èƒ½æ„å‘³ç€å­˜åœ¨é—®é¢˜ï¼Œå®ƒå¯èƒ½è¡¨ç¤ºåº”ç”¨ç¨‹åºæ²¡æœ‰æ­£ç¡®å…³é—­è¿æ¥ã€‚è€Œè¿‡å¤šçš„ `TIME_WAIT` çŠ¶æ€å¯èƒ½ä¼šæ¶ˆè€—è¿‡å¤šçš„æœåŠ¡å™¨èµ„æºï¼Œä½†è¿™ä¸ä¸€å®šè¡¨ç¤ºå­˜åœ¨é—®é¢˜ï¼Œå®ƒå¯èƒ½ä»…ä»…è¡¨ç¤ºæœåŠ¡å™¨æ­£åœ¨å¤„ç†å¤§é‡çš„çŸ­è¿æ¥ã€‚

:::

### è¿è¡Œæœºåˆ¶

#### â“`TCP` çš„ `Keep-Alive` æœºåˆ¶

::: details ğŸ’¡

  > `Keep-Alive`: é¡¾åæ€ä¹‰æ˜¯å¦è¿˜æ´»ç€ï¼Œæ˜¯ä¸€ç§å¿ƒè·³æ£€æµ‹æœºåˆ¶ã€‚ç”¨äºåˆ¤æ–­è¿æ¥æ–¹æ˜¯å¦è¿˜å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œä»¥ä¾¿æ–­å¼€å·²ç»å¤±æ´»è¿æ¥é‡Šæ”¾èµ„æºã€‚å‘é€æ¢æµ‹åŒ…åï¼Œå¦‚æœå¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œæ¥æ”¶æ–¹ä¼šå‘é€ç¡®è®¤ä¿¡å·ï¼›å¦‚æœå¤„äºå¤±æ´»çŠ¶æ€ï¼Œåˆ™ä¼šå†è¿ç»­å†å‘é€å‡ æ¬¡æ¢æµ‹åŒ…å¦‚æœå‡æ— å“åº”åˆ™è¯æ˜å¯¹æ–¹å·²æ–­å¼€è¿æ¥ï¼Œå¯ä»¥é‡Šæ”¾èµ„æºã€‚
  
æ³¨æ„ï¼š

  - `Keep-Alive` æœºåˆ¶çš„æ—¶é•¿ä¸€èˆ¬é»˜è®¤ä¸º **2 å°æ—¶**ã€‚æ‰€ä»¥ï¼Œä¸èƒ½ä½¿ç”¨ä½¿ç”¨è¯¥æœºåˆ¶æ¥ç¡®è®¤å®æ—¶æ€§è¾ƒé«˜çš„ä¿æ´»æ¢æµ‹ã€‚

  - `Keep-Alive` å¹¶ä¸æ˜¯é»˜è®¤å¼€å¯çš„ã€‚åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æœä¸¤ç«¯çš„ `TCP` éƒ½æ­£å¸¸å·¥ä½œï¼Œæ˜¯ä¸éœ€è¦ä½¿ç”¨åˆ° `Keep-Alive` æœºåˆ¶çš„ã€‚åªæœ‰åœ¨ç½‘ç»œä¸ç¨³å®šï¼Œæˆ–è€…æ˜¯éœ€è¦ç»´æŒé•¿è¿æ¥çš„åº”ç”¨ä¸­ï¼Œæ¯”å¦‚æ•°æ®åº“è¿æ¥ï¼Œ`Keep-Alive` æ‰ä¼šæ˜¾å¾—æ¯”è¾ƒæœ‰ç”¨ã€‚

:::

#### â“`TCP` é•¿è¿æ¥å’ŒçŸ­è¿æ¥çš„åŒºåˆ«

::: details ğŸ’¡

> `TCP` é•¿è¿æ¥å’ŒçŸ­è¿æ¥çš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨è¿æ¥æŒç»­çš„æ—¶é—´å’Œèµ„æºå ç”¨ä¸Šã€‚

  - é•¿è¿æ¥ï¼šåœ¨å»ºç«‹è¿æ¥åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¼šä¸€ç›´ä¿æŒè¿™ä¸ªè¿æ¥ï¼Œåœ¨æ•°æ®ä¼ è¾“å®Œæ¯•åå¹¶ä¸ä¼šä¸»åŠ¨å…³é—­è¿æ¥ã€‚åç»­å¦‚æœè¿˜æœ‰è¯·æ±‚éœ€è¦å¤„ç†ï¼Œå°±ç›´æ¥ä½¿ç”¨è¿™ä¸ªå·²ç»å»ºç«‹å¥½çš„è¿æ¥ã€‚
    > é•¿è¿æ¥é€‚åˆäºé“¾æ¥çŠ¶æ€é¢‘ç¹ã€æ•°æ®äº¤äº’é‡å¤§ä¸”è¿ç»­çš„æƒ…å†µï¼Œå¯ä»¥å‡å°‘é¢‘ç¹çš„è¿æ¥å»ºç«‹å’Œæ–­å¼€æ‰€å¸¦æ¥çš„å¼€é”€ã€‚åœ¨ `HTTP 1.0` åè®®ä¸­ï¼Œé€šè¿‡è®¾ç½® `Connection:keep-alive` æ¥ä½¿ç”¨é•¿è¿æ¥ï¼Œä¹‹åçš„ç‰ˆæœ¬é»˜è®¤ä½¿ç”¨é•¿è¿æ¥ã€‚
    > åœ¨ä¸€äº›å¹¶å‘è¿æ¥æ•°éœ€è¦å¾ˆé«˜çš„åœºæ™¯ä¸‹ï¼ˆä¾‹å¦‚`IM`ã€æ¸¸æˆæœåŠ¡å™¨ç­‰ï¼‰ï¼Œä¸€èˆ¬ä¼šå€¾å‘äºä½¿ç”¨é•¿è¿æ¥ã€‚

  - çŸ­è¿æ¥ï¼šçŸ­è¿æ¥åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¤„ç†å®Œä¸€æ¬¡è¯·æ±‚åï¼Œå°±ä¼šç«‹å³æ–­å¼€è¿æ¥ã€‚å†æ¬¡è¯·æ±‚æ—¶éœ€è¦é‡æ–°å»ºç«‹è¿æ¥ã€‚çŸ­è¿æ¥å¯¹äºæœåŠ¡å™¨çš„èµ„æºå ç”¨ç›¸å¯¹è¾ƒå°ï¼Œä½†æ˜¯å¯¹äºæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦ç»å†å»ºç«‹è¿æ¥ã€æ–­å¼€è¿æ¥çš„è¿‡ç¨‹ï¼Œå¯¼è‡´å¤„ç†é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ã€‚
    > åœ¨ä¸€äº›å¹¶å‘è¿æ¥æ•°ç›¸å¯¹è¾ƒä½ï¼Œä½†æ˜¯è¿æ¥éå¸¸é¢‘ç¹çš„åœºæ™¯ä¸‹ï¼ˆä¾‹å¦‚ `RESTful API` æœåŠ¡ç­‰ï¼‰ï¼Œä¸€èˆ¬ä¼šå€¾å‘äºä½¿ç”¨çŸ­è¿æ¥ã€‚

:::

#### â“`TCP` ä¸­é•¿è¿æ¥å’ŒçŸ­è¿æ¥çš„å®é™…åº”ç”¨æœ‰å“ªäº›

::: details ğŸ’¡

TCPé•¿è¿æ¥å’ŒçŸ­è¿æ¥å„è‡ªæœ‰å…¶å®é™…åº”ç”¨åœºæ™¯ï¼Œä»¥ä¸‹æœ‰ä¸€äº›å¸¸è§çš„ä¾‹å­ï¼š

  - é•¿è¿æ¥ï¼š
    * èŠå¤©æœåŠ¡å™¨ã€æ¸¸æˆæœåŠ¡å™¨ï¼šè¿™äº›åœºæ™¯ä¸‹å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éœ€è¦é¢‘ç¹äº¤äº’ï¼Œä¸”äº¤äº’æ—¶é—´ä¸å›ºå®šï¼Œä¹Ÿä¸èƒ½æœ‰å»¶æ—¶ã€‚ä½¿ç”¨é•¿è¿æ¥å¯ä»¥å‡å°å¼€é”€ï¼Œæé«˜æ•ˆç‡ã€‚
    * æ•°æ®åº“è¿æ¥ï¼šå¤§å¤šæ•°æ•°æ®åº“åœ¨æ“ä½œæ—¶ä¹Ÿä¼šé‡‡ç”¨é•¿è¿æ¥ï¼Œä»¥ç¡®ä¿å¿«é€Ÿé«˜æ•ˆåœ°è¿›è¡Œæ•°æ®è¯»å†™ã€‚
    * `HTTP/1.1` åŠä»¥ä¸‹ç‰ˆæœ¬çš„ç½‘ç»œä¼ è¾“æ ‡å‡†ä¸­ï¼Œé»˜è®¤å°±æ˜¯ç”¨çš„é•¿è¿æ¥æ–¹å¼ã€‚`HTTP/1.0` é€šè¿‡ `header`ä¸­çš„ `Connection: keep-alive` è®¾ç½®ä¸ºé•¿è¿æ¥ã€‚
    * `WebSocket`ï¼šåˆ›å»ºä¸€ä¸ªé•¿è¿æ¥ï¼Œå®ç°å®æ—¶çš„åŒå‘é€šä¿¡ã€‚
    
  - çŸ­è¿æ¥ï¼š
    * `HTTP/1.0` çš„ç½‘ç»œè¯·æ±‚é»˜è®¤å°±æ˜¯çŸ­è¿æ¥ï¼Œå› ä¸ºä¸€èˆ¬çš„ `HTTP` è¯·æ±‚/å“åº”æ¨¡å‹éƒ½æ˜¯ä¸€æ¬¡è¯·æ±‚å¯¹åº”ä¸€æ¬¡å“åº”ï¼Œä¸éœ€è¦ä¿æŒè¿æ¥ã€‚
    * é‚®ä»¶ `SMTP` ä¼ è¾“ï¼š`SMTP` ç”¨æ¥å‘é€é‚®ä»¶ï¼Œä¸å¯èƒ½ä¸€ç›´å‘é€é‚®ä»¶ï¼Œæ‰€ä»¥é‡‡ç”¨çŸ­è¿æ¥çš„æ¨¡å¼ã€‚
    * æ—¥å¸¸è®¿é—®ç½‘é¡µï¼šæµè§ˆå™¨é€šå¸¸åœ¨ä¸‹è½½å®Œç½‘é¡µä¹‹åå°±æ–­å¼€è¿æ¥ï¼Œä»¥é‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚æ¯æ¬¡å†è®¿é—®éµå¾ª `HTTP/1.0` åè®®çš„ç½‘é¡µéƒ½ä¼šé‡æ–°å»ºç«‹ä¸€æ¬¡æ–°çš„è¿æ¥ã€‚
    
:::

#### â“ä»€ä¹ˆæƒ…å†µä¸‹å‘é€æ–¹çš„æ»‘åŠ¨çª—å£ä¼šåç§»

::: details ğŸ’¡

  > `TCP` å‘é€æ–¹çš„æ»‘åŠ¨çª—å£ : ç”¨æ¥æ§åˆ¶ç½‘ç»œé€šä¿¡æµé‡å’Œç¡®ä¿ä¿¡æ¯å¯é ä¼ è¾“çš„ä¸€ç§æœºåˆ¶ã€‚é˜²æ­¢ç½‘ç»œæ‹¥å¡ï¼Œç¡®ä¿åœ¨æœ‰é™çš„ç½‘ç»œå¸¦å®½ä¸­ï¼Œæ•°æ®èƒ½å¤Ÿè¢«é«˜æ•ˆã€æœ‰åºã€å¯é åœ°ä¼ è¾“ã€‚

æ»‘åŠ¨çª—å£åç§»çš„ä¸¤ç§æƒ…å†µï¼š

  - å½“æ¥æ”¶åˆ°ç¡®è®¤(`ACK`)æ¶ˆæ¯æ—¶
    > å½“å‘é€æ–¹æ¥æ”¶åˆ°æ¥æ”¶æ–¹å‘é€çš„ç¡®è®¤æ¶ˆæ¯(`ACK`)ï¼Œè¯´æ˜å‘é€æ–¹å‘é€çš„æ•°æ®å·²ç»è¢«æ¥æ”¶æ–¹æ­£ç¡®æ¥æ”¶ï¼Œæ­¤æ—¶å‘é€æ–¹çš„æ»‘åŠ¨çª—å£çš„å·¦è¾¹ç•Œä¼šæŒ‰ç…§æ”¶åˆ°çš„ç¡®è®¤ä¿¡æ¯è¿›è¡Œç§»åŠ¨ã€‚ç›¸åº”åœ°ï¼Œæ»‘åŠ¨çª—å£çš„å³è¾¹ç•Œä¹Ÿä¼šç§»åŠ¨ï¼Œä½¿çª—å£å¤§å°ä¿æŒä¸å˜ã€‚è¿™æ ·å¯ä»¥æ§åˆ¶å‘é€æ–¹ç»§ç»­å‘é€æœªè¢«ç¡®è®¤çš„æ•°æ®ï¼Œæˆ–è€…å‘é€æ–°çš„æ•°æ®ã€‚

  - å½“çª—å£å†…æ•°æ®å…¨éƒ¨è¢«ç¡®è®¤æ—¶
    > å¦‚æœæ»‘åŠ¨çª—å£ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½å·²ç»è¢«æ¥æ”¶æ–¹ç¡®è®¤æ¥æ”¶ï¼Œé‚£ä¹ˆæ»‘åŠ¨çª—å£ä¼šå¾€å³ç§»åŠ¨ï¼Œæ¥ä¸ºæ–°çš„æ•°æ®è…¾å‡ºç©ºé—´ã€‚

ğŸŒ° æ¯”å¦‚å‘é€æ–¹å‘é€äº† `1ã€2ã€3ã€4` è¿™ 4 ä¸ªåŒ…ï¼Œé‚£ä¹ˆåˆå§‹çš„çª—å£ä¾¿æ˜¯ `[1, 4]`ï¼Œå½“æ¥æ”¶æ–¹æ”¶åˆ° `1ã€2` ä¸¤ä¸ªåŒ…åï¼Œå¹¶å‘å‘é€æ–¹å‘é€äº† `ACK` ç¡®è®¤æŠ¥æ–‡ï¼Œé‚£ä¹ˆå‘é€æ–¹çš„æ»‘åŠ¨çª—å£å°±ä¼šåç§»ï¼Œå˜æˆ `[3, 6]`ã€‚åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œçª—å£çš„å¤§å°(4 ä¸ªåŒ…çš„å¤§å°)ä¿æŒä¸å˜ï¼Œåªæ˜¯éšç€æ•°æ®ä¼ è¾“çš„è¿›è¡Œï¼Œçª—å£åœ¨æ•°æ®æµä¸Šæ»‘åŠ¨ã€‚

:::

#### â“è§£é‡Šä¸‹ `TCP` çš„æ…¢å¯åŠ¨ç‰¹æ€§

::: details ğŸ’¡

> `TCP` çš„æ…¢å¯åŠ¨æ˜¯ä¸€ç§é˜²æ­¢ç½‘ç»œæ‹¥å¡çš„æœºåˆ¶ã€‚

å·¥ä½œåŸç†ï¼šå½“ä¸€ä¸ª `TCP` è¿æ¥åˆšå¼€å§‹çš„æ—¶å€™ï¼Œå‘èµ·æ–¹ä¸ä¼šç«‹å³ä»¥æœ€å¤§é€Ÿåº¦å‘é€æ•°æ®ï¼Œè€Œæ˜¯ä¼šé¦–å…ˆä»¥è¾ƒæ…¢çš„é€Ÿåº¦å‘é€ï¼Œç„¶åé€æ¸æé«˜å‘é€é€Ÿåº¦ï¼Œç›´åˆ°æ‰¾åˆ°ç½‘ç»œçš„æœ€å¤§è´Ÿè½½èƒ½åŠ›ã€‚

  æ…¢å¯åŠ¨çš„åå­—å¯èƒ½ä¼šè®©äººè¯¯è§£ï¼Œå®é™…ä¸Šå®ƒä¸æ˜¯çœŸçš„ â€œæ…¢â€ï¼Œè€Œæ˜¯ä¸€ä¸ªåŠ é€Ÿè¿‡ç¨‹ã€‚`TCP` è¿æ¥å¼€å§‹æ—¶çš„å‘é€çª—å£ä¸æ˜¯éå¸¸å¤§ï¼Œæ„å‘³ç€ä¸€æ¬¡èƒ½å‘é€çš„æ•°æ®é‡è¾ƒå°ï¼Œè¿™å°±æ˜¯ â€œæ…¢â€ å¯åŠ¨çš„å«ä¹‰ã€‚æ¯å½“æ”¶åˆ°ä¸€ä¸ªç¡®è®¤ï¼ˆ`ACK`ï¼‰æŠ¥æ–‡ï¼Œå‘é€çª—å£å°±å¢å¤§ä¸€ç‚¹ï¼Œè¿™æ ·ä¸‹ä¸€æ¬¡å°±å¯ä»¥å‘é€æ›´å¤šçš„æ•°æ®ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸æ–­é‡å¤ï¼Œå‘é€çª—å£çš„å¤§å°ä»¥æŒ‡æ•°çº§åˆ«å¢é•¿ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼ è¾“é€Ÿåº¦ä¼šè¿…é€Ÿæå‡ã€‚

  ä¸ºäº†é˜²æ­¢ç½‘ç»œæ‹¥å¡ï¼Œå½“è¾¾åˆ°ä¸€ä¸ªé˜ˆå€¼ï¼ˆ`ssthresh`ï¼Œ`slow start threshold`ï¼‰åï¼Œ`TCP` å°†ä¸å†æŒ‡æ•°çº§åˆ«å¢é•¿ï¼Œè€Œæ˜¯è½¬ä¸ºçº¿æ€§å¢é•¿ï¼Œè¿™å°±æ˜¯è¿›å…¥ â€œæ‹¥å¡é¿å…â€ é˜¶æ®µã€‚å¦‚æœå‡ºç°äº†ç½‘ç»œæ‹¥å¡çš„ä¿¡å·ï¼ˆä¾‹å¦‚ä¸¢åŒ…ï¼Œè¶…æ—¶ç­‰ï¼‰ï¼Œ`TCP` ä¼šé™ä½ä¼ è¾“é€Ÿåº¦ï¼Œé‡æ–°å›åˆ°æ…¢å¯åŠ¨é˜¶æ®µã€‚

æ€»ç»“ï¼š`TCP` çš„æ…¢å¯åŠ¨ç‰¹æ€§æ˜¯ä¸€ç§é€šè¿‡åŠ¨æ€è°ƒæ•´ä¼ è¾“é€Ÿåº¦æ¥é€‚åº”ç½‘ç»œçŠ¶å†µï¼Œé˜²æ­¢ç½‘ç»œæ‹¥å¡çš„æœ‰æ•ˆæœºåˆ¶ã€‚

:::

#### â“è®²ä¸€ä¸‹ `TCP` çš„å››ç§æ‹¥å¡æ§åˆ¶ç®—æ³•

::: details ğŸ’¡

  - æ…¢å¯åŠ¨ç®—æ³•ï¼ˆ`Slow Start`ï¼‰:
    > æ…¢å¯åŠ¨ç®—æ³•ä½¿ç”¨äº†ä¸€ä¸ª â€œæ‹¥å¡çª—å£â€ ä¸”åˆå§‹å€¼ä¸ºä¸€ä¸ªæŠ¥æ–‡æ®µã€‚æ¯å½“ç¡®è®¤æ•°ç›®åˆ°è¾¾ï¼Œæ‹¥å¡çª—å£å°±å¢åŠ ä¸€ï¼Œå³æ¯ç»è¿‡ä¸€ä¸ªå¾€è¿”æ—¶é—´ `RTT`ï¼Œæ‹¥å¡çª—å£å°±åŠ å€ã€‚è¿™æ ·å°±å®ç°äº†åœ¨ç½‘ç»œå¹¶æœªå‡ºç°æ‹¥å¡çš„æƒ…å†µä¸‹ï¼Œæ•°æ®æŠ¥çš„ä¼ é€é€Ÿç‡é€æ¸åŠ å¿«ã€‚ä½†æ˜¯å½“æ‹¥å¡çª—å£å¤§åˆ°ä¸€å®šç¨‹åº¦åï¼Œå°±æœ‰å¯èƒ½å¯¼è‡´ç½‘ç»œæ‹¥å¡ã€‚

  - æ‹¥å¡é¿å…ç®—æ³•ï¼ˆ`Congestion Avoidance`ï¼‰:
    > æ‹¥å¡é¿å…ç®—æ³•ä¸»è¦æ˜¯ä¸ºäº†é¢„é˜²å› æ…¢å¼€å§‹ç®—æ³•åŠ é€Ÿè¿‡å¿«å¯¼è‡´ç½‘ç»œæ‹¥å¡ï¼Œæ‰€ä»¥åœ¨æ‹¥å¡çª—å£åˆ°è¾¾é˜ˆå€¼åï¼Œæ”¹ç”¨æ‹¥å¡é¿å…ç®—æ³•ï¼Œè®©æ‹¥å¡çª—å£æ¯ç»è¿‡ä¸€ä¸ª `RTT` åªå¢åŠ ä¸€ï¼Œä¹Ÿå°±æ˜¯ä»¥çº¿æ€§çš„é€Ÿåº¦å¢é•¿ï¼Œè¿™æ ·å¢é•¿é€Ÿç‡å°±æ”¾æ…¢äº†ï¼Œé¿å…äº†æ…¢å¼€å§‹ç®—æ³•è¿‡å¿«çš„å¢é•¿å¯¼è‡´çš„æ‹¥å¡ã€‚
    
  - å¿«é‡ä¼ ç®—æ³•ï¼ˆ`Fast Retransmit`ï¼‰:
    > å¿«é‡ä¼ ç®—æ³•åœ¨æ¥æ”¶æ–¹æ”¶åˆ°ä¸€ä¸ªå¤±åºçš„æŠ¥æ–‡æ®µåï¼Œå°±ä¼šç«‹å³å‘å‡ºé‡å¤ç¡®è®¤ï¼Œè€Œä¸æ˜¯ç­‰åˆ°è‡ªå·±éœ€è¦å‘é€æ•°æ®æ—¶æ‰æå¸¦ç¡®è®¤ã€‚åœ¨å‘é€æ–¹ï¼Œåªè¦è¿ç»­æ”¶åˆ°ä¸‰ä¸ªé‡å¤ç¡®è®¤ï¼Œå°±ç«‹å³é‡ä¼ æ²¡æœ‰è¢«ç¡®è®¤çš„æŠ¥æ–‡æ®µï¼Œè€Œä¸å¿…ç­‰å¾…è®¾ç½®çš„é‡ä¼ è®¡æ—¶å™¨åˆ°æœŸã€‚è¿™æ ·å¯ä»¥å°½æ—©åœ°çŸ¥é“æœ‰æŠ¥æ–‡æ®µæ²¡æœ‰åˆ°è¾¾æ¥æ”¶æ–¹ï¼Œè¿›è€Œå°½æ—©åœ°è¿›è¡Œé‡ä¼ ã€‚

  - å¿«æ¢å¤ç®—æ³•ï¼ˆ`Fast Recovery`ï¼‰:
    > å¿«æ¢å¤ç®—æ³•æ˜¯åœ¨å¿«é‡ä¼ ç®—æ³•ä¹‹åæå‡ºçš„ï¼Œä¸»è¦ç”¨äºå¿«é€Ÿæ¢å¤ä¸¢å¤±æŠ¥æ–‡æ®µåçš„ä¼ è¾“ã€‚å½“å‘é€æ–¹è¿ç»­æ”¶åˆ°ä¸‰ä¸ªé‡å¤ç¡®è®¤ï¼ˆæ„å‘³ç€æœ‰æŠ¥æ–‡æ®µä¸¢å¤±ï¼‰åï¼Œä¸ç«‹å³æ‰§è¡Œæ…¢å¯åŠ¨ç®—æ³•ï¼Œè€Œæ˜¯æŠŠé˜ˆå€¼è®¾ä¸ºå½“å‰æ‹¥å¡çª—å£çš„ä¸€åŠï¼Œç„¶åæ‰§è¡Œæ‹¥å¡é¿å…ç®—æ³•ã€‚è¿™æ ·é¿å…äº†æ…¢å¯åŠ¨ç®—æ³•ä½¿çª—å£å¤§å°å›åˆ°æœ€åˆçŠ¶æ€ï¼Œè€Œæ˜¯è®©å…¶åœ¨ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å€¼å¼€å§‹ï¼Œè¿™æ ·å°±åŠ å¿«äº†æ¢å¤é€Ÿåº¦ã€‚

æ³¨æ„ï¼šè¿™å››ç§ç®—æ³•ï¼ŒååŒå·¥ä½œï¼Œå…±åŒç®¡ç†å’Œæ§åˆ¶äº† `TCP` æ•°æ®çš„ä¼ è¾“ï¼Œä½¿å…¶åœ¨å……åˆ†åˆ©ç”¨ç½‘ç»œèµ„æºçš„å‰æä¸‹ï¼Œå°½å¯èƒ½çš„é¿å…ç½‘ç»œæ‹¥å¡ï¼Œä¿è¯äº†ä¼ è¾“çš„æ•ˆç‡å’Œå¯é æ€§ã€‚

:::


#### â“åœ¨é«˜å®½å¸¦ã€é«˜ä¸¢åŒ…çš„æƒ…å†µä¸‹ï¼Œæ€ä¹ˆä¿è¯ `TCP` çš„æ€§èƒ½

::: details ğŸ’¡

  - å¢å¤§ `TCP` çª—å£å¤§å°ï¼š`TCP` çª—å£æ§åˆ¶äº†å‘é€æ–¹ä¸€æ¬¡å¯ä»¥å‘é€å¤šå°‘æ•°æ®ï¼Œæ‰€ä»¥é€šè¿‡æ‰©å¤§ `TCP` çª—å£ï¼Œå¯ä»¥æé«˜ `TCP` çš„ååé‡ã€‚
    > æ³¨æ„ï¼šè¿‡å¤§çš„ `TCP` çª—å£å¯èƒ½ä¼šå¯¼è‡´ç½‘ç»œæ‹¥å¡ï¼Œå› æ­¤éœ€è¦è°¨æ…ä½¿ç”¨è¿™ç§ç­–ç•¥ã€‚

  - ä½¿ç”¨å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤ï¼šå½“å‘é€æ–¹å¤šæ¬¡è¿ç»­æ”¶åˆ°å¯¹åŒä¸€åŒ…çš„é‡å¤ `ACK` æ—¶ï¼Œå¯èƒ½ä»£è¡¨æ¥æ”¶æ–¹é‚£è¾¹å‡ºç°äº†ä¹±åºæˆ–è€…ä¸¢åŒ…ã€‚äºæ˜¯å‘é€æ–¹å¯ä»¥ä¸ç”¨ç­‰åˆ°è¶…æ—¶å°±å¼€å§‹é‡ä¼ ï¼Œè¿™å°±æ˜¯å¿«é€Ÿé‡ä¼ ã€‚å¿«é€Ÿé‡ä¼ åï¼Œå‘é€æ–¹ä¸å†ä½¿ç”¨æ…¢å¯åŠ¨ï¼Œè€Œæ˜¯ç›´æ¥è¿›å…¥æ‹¥å¡é¿å…ï¼Œè¿™å°±æ˜¯å¿«é€Ÿæ¢å¤ã€‚

  - ä½¿ç”¨æ‹¥å¡æ§åˆ¶ç®—æ³•ï¼šæ¯”å¦‚ `TCP NewReno`ã€`TCP Vegas`ã€`TCP BBR` ç­‰ï¼Œå¯ä»¥åœ¨ä¸¢åŒ…è¾ƒé«˜çš„æƒ…å†µä¸‹ï¼Œä»ç„¶ä¿æŒè¾ƒå¥½çš„ç½‘ç»œååæ€§èƒ½ã€‚

  - å¯ç”¨ `SACK`(`Selective Acknowledgements`) é€‰é¡¹ï¼š`SACK` å…è®¸æ¥æ”¶æ–¹å‘Šè¯‰å‘é€æ–¹ï¼Œå“ªäº›ç‰¹å®šçš„æ•°æ®åŒ…å·²ç»è¢«æ¥æ”¶ã€‚è¿™æ ·ï¼Œå½“æ•°æ®åŒ…ä¸¢å¤±æ—¶ï¼Œå‘é€æ–¹åªéœ€è¦é‡å‘é‚£äº›æœªè¢«ç¡®è®¤çš„æ•°æ®åŒ…ï¼Œè€Œä¸æ˜¯æ‰€æœ‰çš„æ•°æ®åŒ…ã€‚

  - ä½¿ç”¨å‰å‘çº é”™ï¼ˆ`FEC`ï¼‰æŠ€æœ¯ï¼š`FEC` æŠ€æœ¯å¯ä»¥åœ¨å‘é€æ•°æ®çš„æ—¶å€™é¢å¤–å‘é€ä¸€äº›å†—ä½™æ•°æ®ï¼Œè¿™æ ·å³ä½¿åœ¨ä¸¢åŒ…è¾ƒé«˜çš„æƒ…å†µä¸‹ï¼Œæ¥æ”¶æ–¹ä¹Ÿæœ‰å¯èƒ½ä»å·²æ¥æ”¶çš„æ•°æ®åŒ…ä¸­æ¢å¤å‡ºä¸¢å¤±çš„æ•°æ®ã€‚

  - ä½¿ç”¨å¤šè·¯å¾„`TCP` (`MPTCP`)ï¼š`MPTCP` å¯ä»¥åœ¨æœ‰å¤šæ¡è·¯å¾„å¯ç”¨çš„æƒ…å†µä¸‹ï¼ŒåŒæ—¶åœ¨å¤šæ¡è·¯å¾„ä¸Šå‘é€æ•°æ®ã€‚è¿™æ ·å³ä½¿ä¸€éƒ¨åˆ†æ•°æ®åŒ…ä¸¢å¤±ï¼Œå…¶ä»–è·¯å¾„ä¸Šçš„æ•°æ®åŒ…ä»ç„¶å¯ä»¥è¾¾åˆ°ç›®çš„åœ°ï¼Œä»è€Œæé«˜ `TCP` çš„ååæ€§èƒ½ã€‚
    
:::

------

## QUIC

### â“`QUIC` æ˜¯ä»€ä¹ˆ

::: details ğŸ’¡

> `QUIC`(`Quick UDP Internet Connections`) æ˜¯ç”± `Google` æå‡ºçš„ä¸€ä¸ªè¿è¾“å±‚çš„ç½‘ç»œåè®®ï¼Œå®ƒæ˜¯åŸºäº `UDP`ï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰è¿›è¡Œå®ç°çš„ã€‚

  åœ¨è®¾è®¡ `QUIC` æ—¶ï¼Œ`Google` çš„ç›®æ ‡æ˜¯å‡è½» `TCP`ï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰å¸¦æ¥çš„å»¶è¿Ÿï¼Œç‰¹åˆ«æ˜¯åœ¨ç§»åŠ¨å’Œæ— çº¿ç½‘ç»œä¸­ã€‚å› æ­¤ï¼Œ`QUIC` åè®®åœ¨ `UDP` åè®®çš„åŸºç¡€ä¸Šå®ç°äº†ç±»ä¼¼ `TCP` çš„å¯é ä¼ è¾“ã€æ‹¥å¡æ§åˆ¶ã€æµæ§åˆ¶ç­‰æœºåˆ¶ï¼ŒåŒæ—¶è¿˜åŠ å…¥äº†å¦‚å¿«é€Ÿæ¡æ‰‹ï¼ˆ`0-RTT` æ¡æ‰‹ï¼‰ã€å‰å‘çº é”™ï¼ˆ`FEC`ï¼‰ã€å¤šè·¯å¤ç”¨ç­‰ä¼˜åŒ–ã€‚

ä¸»è¦ç‰¹ç‚¹ï¼š

  - è¿æ¥å»ºç«‹æ—¶å»¶è¿Ÿå°ï¼š`UDP` æ²¡æœ‰è¿æ¥çš„æ¦‚å¿µï¼Œå› æ­¤åœ¨æ•°æ®ä¼ è¾“ä¹‹å‰ï¼Œä¸éœ€è¦åƒ `TCP` é‚£æ ·è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ã€‚è€Œ `QUIC` ç”¨ `0-RTT` æˆ– `1-RTT` å®Œæˆæ¡æ‰‹ï¼Œæ˜¾è‘—å‡å°‘äº†è¿æ¥å»ºç«‹çš„å»¶æ—¶ã€‚

  - å†…ç½® `TLS`ï¼š`QUIC` åè®®æœ¬èº«å°±åŒ…å«äº† `TLS` åè®®ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰çš„ `QUIC` è¿æ¥éƒ½æ˜¯åŠ å¯†çš„ã€‚è¿™ä¸ä»…ä¿æŠ¤äº†æ•°æ®çš„å®‰å…¨ï¼Œè€Œä¸”å› ä¸ºå‡å°‘äº†è¯·æ±‚/å“åº”çš„å¾€è¿”æ¬¡æ•°ï¼Œä¹Ÿå¯ä»¥æé«˜æ€§èƒ½ã€‚
    
  - å¤šè·¯å¤ç”¨ä¸å¤´éƒ¨å‹ç¼©ï¼š`QUIC` æ”¯æŒå¤šè·¯å¤ç”¨ï¼Œå³åœ¨ä¸€ä¸ª `QUIC` è¿æ¥ä¸­å¯ä»¥å¹¶è¡Œå‘é€å¤šä¸ªç‹¬ç«‹çš„æ•°æ®æµã€‚æ­¤å¤–ï¼Œ`QUIC` è¿˜æ”¯æŒåè®®å¤´éƒ¨çš„å‹ç¼©ï¼Œè¿™å¯ä»¥å‡å°‘åè®®çš„å¼€é”€ã€‚

  - å‰å‘çº é”™å’Œæ‹¥å¡æ§åˆ¶ï¼šå‰å‘çº é”™å¯ä»¥å¸®åŠ©æ¢å¤ä¸¢å¤±çš„æ•°æ®åŒ…ï¼Œå‡å°‘äº†å› é‡ä¼ å¼•èµ·çš„å»¶è¿Ÿã€‚`QUIC` åè®®è¿˜å®ç°äº†ä¸€å¥—ç±»ä¼¼ `TCP` çš„æ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼Œä»¥ä¿æŒç½‘ç»œçš„ç¨³å®šæ€§ã€‚

  - è¿æ¥è¿ç§»ï¼šç”±äº `QUIC` åè®®çš„è¿æ¥ä¸å†ä¾èµ–äº `IP` åœ°å€ï¼Œå› æ­¤å½“ç”¨æˆ·çš„ç½‘ç»œç¯å¢ƒæ”¹å˜ï¼ˆä¾‹å¦‚ï¼Œä» `WiFi` åˆ‡æ¢åˆ° `4G`ï¼‰æ—¶ï¼Œ`QUIC` è¿æ¥å¯ä»¥ä¸ä¸­æ–­åœ°è¿›è¡Œè¿ç§»ã€‚
    
:::

### â“`QUIC` çš„åº•å±‚å®ç°

::: details ğŸ’¡

`QUIC`(`Quick UDP Internet Connections`)æ˜¯ä¸€ç§æ–°çš„è¿è¾“å±‚åè®®ï¼Œç›®å‰ä¸»è¦ç”± `Google` è¿›è¡Œç»´æŠ¤å’Œå‘å±•ã€‚`QUIC` å¹¶éä½¿ç”¨ `TCP/IP` ä½œä¸ºåº•å±‚ä¾èµ–ï¼Œè€Œæ˜¯é‡æ–°è®¾è®¡å¹¶å®ç°åœ¨ `UDP` åè®®ä¸Šã€‚

åº•å±‚å®ç°ï¼š

  - åŸºç¡€åè®®ï¼š`QUIC` åè®®ä½¿ç”¨äº† `UDP` ä½œä¸ºå…¶åº•å±‚ä¼ è¾“åè®®ã€‚è¿™æ˜¯å› ä¸º `UDP` åè®®ç®€å•ä¸”ä¸ä¼šäº§ç”Ÿå¤´é˜»å¡é—®é¢˜ï¼Œæ¯”å¦‚ `TCP` åè®®ä¸­çš„é˜Ÿå¤´é˜»å¡é—®é¢˜ã€‚

  - é¢å‘è¿æ¥ï¼šå°½ç®¡åŸºäº `UDP`ï¼Œ`QUIC` ä»ç„¶æ˜¯é¢å‘è¿æ¥çš„ã€‚å®ƒä½¿ç”¨ç‰¹æ®Šçš„è¿æ¥ `ID` è¿›è¡Œæ ‡è¯†ï¼Œè¿™ä½¿å¾—åœ¨ç½‘ç»œç¯å¢ƒæ”¹å˜æ—¶ï¼Œæ¯”å¦‚ `IP` åœ°å€å˜åŒ–ï¼Œ`QUIC` è¿æ¥å¯ä»¥åœ¨ä¸åŒçš„ç½‘ç»œè·¯å¾„ä¸‹ç»§ç»­ã€‚
    
  - åŠ å¯†ä¸å®‰å…¨ï¼š`QUIC` åè®®å¤©ç”Ÿå°±æœ‰åŠ å¯†æœºåˆ¶ï¼Œä½¿ç”¨äº†åŸºäº `TLS`(`Transport Layer Security`) çš„æœºåˆ¶ã€‚æ‰€æœ‰ `QUIC` è¿æ¥éƒ½æ˜¯å…¨åŠ å¯†çš„ï¼Œè¿™ä½¿å¾— `QUIC` åœ¨ä¿éšœæ•°æ®å®‰å…¨æ€§æ–¹é¢æœ‰å¾ˆå¥½çš„è¡¨ç°ã€‚
    
  - æµå’Œå¤šè·¯å¤ç”¨ï¼šåœ¨ä¸€ä¸ª `QUIC` è¿æ¥ä¸­ï¼Œå¯ä»¥æœ‰å¤šä¸ªå¹¶å‘çš„æµï¼ŒåŒæ—¶è¿›è¡Œæ•°æ®çš„å‘é€å’Œæ¥æ”¶ï¼Œæœ‰ç‚¹ç±»ä¼¼ `HTTP/2` çš„å¤šè·¯å¾„å¤ç”¨æœºåˆ¶ã€‚

  - å¿«é€Ÿæ¡æ‰‹ï¼š`QUIC` ä½¿ç”¨ `0-RTT`(`Round-Trip Time`) æˆ–è€… `1-RTT` çš„æ¡æ‰‹æ–¹å¼ã€‚æ–°è¿æ¥çš„å»ºç«‹åªéœ€è¦ `1-RTT`ï¼Œå¯¹äºå·²ç»å»ºç«‹è¿‡çš„è¿æ¥ï¼Œå†æ¬¡æ¡æ‰‹åªéœ€è¦ `0-RTT`ï¼Œå¤§å¤§å‡å°‘äº†æ¡æ‰‹çš„å»¶æ—¶ã€‚

  - æ‹¥å¡æ§åˆ¶ï¼š`QUIC` åœ¨ä¿ç•™äº† `TCP` ä¸­ `Reno` å’Œ `Cubic` ç­‰æ‹¥å¡æ§åˆ¶ç®—æ³•çš„åŸºç¡€ä¸Šï¼Œåˆå¢åŠ äº†è‡ªå·±çš„ `BBR` æ‹¥å¡æ§åˆ¶ç®—æ³•ã€‚
    
  - å¿«é€Ÿæ¢å¤ä¸å‰å‘å†—ä½™æ ¡éªŒï¼š`QUIC` åè®®åœ¨è®¾è®¡ä¸Šå°½å¯èƒ½çš„å‡å°‘ä¸¢åŒ…å¯¹æ€§èƒ½çš„å½±å“ï¼Œé€šè¿‡å¿«é€Ÿé‡ä¼ ä¸å‰å‘å†—ä½™æ ¡éªŒï¼ˆ`FEC`ï¼‰ç­‰æ–¹å¼ï¼Œå°½å¯èƒ½å¿«é€Ÿæ¢å¤ä¸¢å¤±çš„æ•°æ®ã€‚

:::

### â“`0-RTT` æ¡æ‰‹è¿‡ç¨‹

::: details ğŸ’¡

> `0-RTT`(`Zero Round Trip Time`) æ˜¯ä¸€ä¸ªç½‘ç»œé€šä¿¡çš„æ¦‚å¿µï¼Œç”¨äºæè¿°åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹è¿æ¥æ—¶æ— éœ€ç­‰å¾…ä¸€æ¬¡å¾€è¿”é€šä¿¡çš„è¿‡ç¨‹ã€‚è¿™ç§æ¡æ‰‹æ–¹å¼åœ¨ä¸€äº›ç°ä»£çš„åè®®ä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼Œå¦‚`TLS 1.3` å’Œ `QUIC`ã€‚

> `QUIC` åœ¨ `TLS 1.3` çš„åŸºç¡€ä¹‹ä¸Šå®ç°äº† `0-RTT` æ¡æ‰‹ï¼Œå®ƒå‡å®šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æœ€è¿‘æœ‰è¿‡ä¸€æ¬¡æˆåŠŸçš„ TLS æ¡æ‰‹ï¼Œç„¶åä¿å­˜äº†å¯¹åº”çš„ä¼šè¯ç§˜é’¥ã€‚

`0-RTT` æ¡æ‰‹æµç¨‹å¦‚ä¸‹ï¼š

  - åœ¨ç¬¬ä¸€æ¬¡è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç»è¿‡ä¸€æ¬¡å®Œå…¨çš„ `TLS` æ¡æ‰‹ï¼Œåˆ›å»ºå‡ºä¸€ä¸ª `secure context`ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ä¼šè¯ã€‚åŒ…æ‹¬ä¸€ä¸ª `master secret` å’Œå…¶ä»–æ´¾ç”Ÿå‚æ•°ã€‚

  - æ¡æ‰‹å®Œæˆåï¼ŒæœåŠ¡å™¨ä¼šç”Ÿæˆä¸€ä¸ª `NewSessionTicket` ä¿¡æ¯ï¼Œè¿™ä¸ªç¥¨æ®ï¼ˆ`ticket`ï¼‰åŒ…å«äº†æœåŠ¡å™¨ç”¨äºæ¢å¤ `secure context` çš„æ‰€æœ‰å¿…è¦ä¿¡æ¯ï¼ˆä¾‹å¦‚ `master secret`ï¼‰, ç„¶åç»™å®¢æˆ·ç«¯ã€‚åŒæ—¶æœåŠ¡å™¨ä¼šä¿å­˜è¿™ä¸ª `ticket` ä»¥å¤‡åç”¨ã€‚
    
  - å½“å®¢æˆ·ç«¯ä¸‹ä¸€æ¬¡å†æ¬¡å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œå®ƒå°±å¯ä»¥å‘é€ä¹‹å‰æœåŠ¡å™¨å‘é€ç»™å®ƒçš„ `session ticket`ï¼Œä»¥ä¾¿æœåŠ¡å™¨å¯ä»¥ä»è¿™ä¸ª `ticket` ä¸­æ¢å¤å‡ºå½“æ—¶çš„ `secure context`ã€‚

  - å®¢æˆ·ç«¯åœ¨å‘é€ `session ticket` çš„åŒæ—¶ï¼Œå› ä¸ºå®ƒå·²ç»æœ‰äº†åŸæ¥ä¼šè¯çš„æ‰€æœ‰ç§˜é’¥ï¼Œæ‰€ä»¥å®ƒå·²ç»å¯ä»¥åŠ å¯†æ•°æ®ç„¶åè¿›è¡Œä¼ è¾“äº†ã€‚

  - æœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚åï¼Œä» `session ticket` ä¸­æ¢å¤å‡º `secure context`ï¼Œç„¶åä½¿ç”¨ä¼šè¯å‚æ•°ä¸­ç›¸åº”çš„ç§˜é’¥è§£å¯†å®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„æ•°æ®ã€‚è¿™æ ·ï¼Œå°±å®Œæˆäº† `0-RTT` çš„æ¡æ‰‹è¿‡ç¨‹ï¼Œæ•°æ®åœ¨å»ºç«‹è¿æ¥çš„åŒæ—¶å°±å·²ç»ä¼ è¾“å®Œæˆã€‚

æ³¨ï¼š`0-RTT` çš„æ¡æ‰‹è¿‡ç¨‹å­˜åœ¨é‡æ”¾æ”»å‡»çš„é£é™©ï¼Œå› ä¸ºæ”»å‡»è€…å¯èƒ½ä¼šæ•è·å¹¶é‡æ”¾ä¹‹å‰çš„ `0-RTT` æ•°æ®ï¼Œåªéœ€è¦æ³¨æ„è¿™ä¸ªé£é™©ï¼Œå°±å¯ä»¥è®¾è®¡å‡ºé¿å…é‡æ”¾æ”»å‡»çš„æœºåˆ¶ï¼Œä¾‹å¦‚é™åˆ¶ `0-RTT` æ•°æ®åªèƒ½ç”¨äºéæ•æ„Ÿæ“ä½œï¼Œæˆ–è€…åªæ¥å—ä¸€æ®µæ—¶é—´å†…çš„ `0-RTT` æ•°æ®ã€‚

:::

### â“`FEC` æ˜¯ä»€ä¹ˆ

::: details ğŸ’¡

> `FEC`(`Forward Error Correction`): å‰å‘çº é”™ã€‚è¿™æ˜¯ä¸€ç§åœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ç”¨äºçº æ­£é”™è¯¯çš„æŠ€æœ¯ã€‚é€šè¿‡åœ¨æ•°æ®å‘é€ç«¯å¢åŠ å†—ä½™ä¿¡æ¯ï¼Œä½¿æ¥æ”¶ç«¯åœ¨æ¥æ”¶åˆ°æ•°æ®æ—¶å¯ä»¥æ£€æµ‹å¹¶çº æ­£ä¸€ä¸ªæˆ–å‡ ä¸ªé”™è¯¯ï¼Œè€Œæ— éœ€é‡æ–°è¯·æ±‚å‘é€æ•°æ®ã€‚

  å‰å‘çº é”™å¯ä»¥åº”ç”¨åœ¨æ— çº¿é€šä¿¡ã€å¹¿æ’­é€šä¿¡ã€ç½‘ç»œé€šä¿¡å’Œå­˜å‚¨è®¾å¤‡ç­‰å¤šç§å®é™…åº”ç”¨ä¸­ï¼Œä»¥æé«˜æ•°æ®çš„å‡†ç¡®æ€§å’Œä¿¡é“çš„åˆ©ç”¨ç‡ã€‚

  åœ¨ `QUIC` åè®®ä¸­ `FEC` æŠ€æœ¯è¢«ç”¨æ¥é™ä½ä¸¢åŒ…ç‡ï¼Œå‡å°‘æ•°æ®çš„é‡ä¼ ï¼Œä»è€Œæé«˜é€šä¿¡æ•ˆç‡ã€‚ç”±äºæ•°æ®ä¼ è¾“æ—¶ä¼šæ·»åŠ å†—ä½™æ•°æ®ï¼Œå³ä½¿åœ¨ç½‘ç»œç¯å¢ƒè¾ƒå·®çš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½ä¿è¯æ•°æ®çš„æ­£ç¡®ä¼ è¾“ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚

  ğŸŒ° å‡è®¾æœ‰å››ä¸ªæ•°æ®åŒ…Aã€Bã€Cå’ŒDï¼Œå¯ä»¥åœ¨è¿™å››ä¸ªæ•°æ®åŒ…åé¢æ·»åŠ ä¸€ä¸ª `FEC` åŒ…ï¼Œè¿™ä¸ª `FEC` åŒ…æ˜¯é€šè¿‡ä¸€å®šç®—æ³•è®¡ç®—å¾—åˆ°çš„ï¼ŒåŒ…æ‹¬äº†Aã€Bã€Cã€Då››ä¸ªæ•°æ®åŒ…çš„å†—ä½™ä¿¡æ¯ã€‚å½“æ¥æ”¶ç«¯æ¥æ”¶åˆ°è¿™äº”ä¸ªåŒ…åï¼Œå¦‚æœå…¶ä¸­çš„ä¸€ä¸ªæ•°æ®åŒ…ï¼ˆæ¯”å¦‚Bï¼‰ä¸¢å¤±äº†ï¼Œé‚£ä¹ˆå®ƒä»ç„¶å¯ä»¥é€šè¿‡å‰©ä¸‹çš„ä¸‰ä¸ªæ•°æ®åŒ…ï¼ˆAã€Cã€Dï¼‰å’Œ `FEC` åŒ…æ¥æ¢å¤å‡ºä¸¢å¤±çš„æ•°æ®åŒ…Bã€‚

:::

------

## IP

### â“`IPv4` å’Œ `IPv6` çš„åŒºåˆ«

::: details ğŸ’¡

> `IPv4` å’Œ `IPv6`éƒ½æ˜¯ç”¨äºç½‘ç»œé€šä¿¡çš„äº’è”ç½‘åè®®ã€‚

ä¸»è¦åŒºåˆ«ï¼š

  - åœ°å€é•¿åº¦ï¼š
    * `IPv4` çš„åœ°å€æ˜¯ 32 ä½çš„ï¼Œæœ€å¤šå¯ä»¥æ”¯æŒçº¦ 42 äº¿ä¸ªç‹¬ç«‹åœ°å€ã€‚
    * `IPv6` çš„åœ°å€æ˜¯ 128 ä½çš„ï¼Œå¯ä»¥æ”¯æŒéå¸¸å¤šçš„ç‹¬ç«‹åœ°å€ï¼Œè¿œè¿œå¤§äºåœ°çƒä¸Šçš„ç½‘ç»œè®¾å¤‡æ•°é‡ã€‚

  - åœ°å€è¡¨ç¤ºï¼š
    * `IPv4` ä½¿ç”¨å››æ®µç”±ç‚¹åˆ†éš”çš„åè¿›åˆ¶æ•°è¡¨ç¤ºåœ°å€ã€‚
        > ä¾‹å¦‚`192.168.1.1`ã€‚
    * `IPv6` åˆ™ä½¿ç”¨å…«ç»„ç”±å†’å·åˆ†éš”çš„å››ä½åå…­è¿›åˆ¶æ•°è¡¨ç¤ºåœ°å€ã€‚
        > ä¾‹å¦‚ `2001:0db8:85a3:0000:0000:8a2e:0370:7334`

  - å¤´ä¿¡æ¯ï¼š`IPv6` çš„å¤´ä¿¡æ¯æ¯” `IPv4` æ›´åŠ ç®€å•ï¼Œå›ºå®šä¸º 40 å­—èŠ‚ã€‚è¿™ç§è®¾è®¡ä½¿å¾—è·¯ç”±å™¨è¿›è¡Œæ•°æ®åŒ…è·¯ç”±æ—¶çš„å¤„ç†é€Ÿåº¦æ›´å¿«ã€‚

  -  å®‰å…¨æ€§ï¼š`IPv6` åœ¨è®¾è®¡æ—¶å°±è€ƒè™‘åˆ°äº†å®‰å…¨é—®é¢˜ï¼Œæ”¯æŒ `IPsec` ç­‰å®‰å…¨åè®®ï¼Œè€Œ `IPv4` åˆ™éœ€è¦é¢å¤–æ·»åŠ è¿™äº›æ”¯æŒã€‚

  -  æœåŠ¡è´¨é‡ï¼ˆ`QoS`ï¼‰ï¼š`IPv6` åŸç”Ÿæ”¯æŒå¯¹æ•°æ®åŒ…çš„ä¼˜å…ˆçº§è¿›è¡Œç¼–ç ï¼Œä»è€Œæä¾›æ›´å¥½çš„æœåŠ¡è´¨é‡ï¼Œ`IPv4` åˆ™éœ€è¦é¢å¤–å¤„ç†ã€‚

è‡³äºIPv6ä¹‹æ‰€ä»¥è¯ç”Ÿï¼Œä¸»è¦æ˜¯ç”±äºIPv4åœ°å€çš„è€—å°½ã€‚éšç€äº’è”ç½‘çš„å¿«é€Ÿå‘å±•å’Œç‰©è”ç½‘è®¾å¤‡çš„å¤§é‡å¢åŠ ï¼Œéœ€è¦äº’è”ç½‘åœ°å€çš„è®¾å¤‡æ•°é‡æ­£åœ¨å¿«é€Ÿå¢åŠ ï¼ŒIPv4çš„åœ°å€ç©ºé—´å·²ç»æ— æ³•æ»¡è¶³éœ€æ±‚ã€‚æ­¤å¤–ï¼ŒIPv6ç›¸æ¯”IPv4è¿˜æœ‰å¾ˆå¤šå…¶ä»–ä¼˜åŠ¿ï¼Œä¾‹å¦‚è‡ªåŠ¨é…ç½®ã€åœ¨è®¾è®¡ä¸Šçš„å®‰å…¨æ€§æ”¹è¿›ç­‰ã€‚

:::

### â“`IPv6` çš„è¯ç”Ÿçš„åŸå› 

::: details ğŸ’¡

> `IPv6` çš„è¯ç”Ÿä¸»è¦æ˜¯ç”±äº `IPv4` çš„åœ°å€ç©ºé—´ä¸è¶³ã€‚


  - `IPv4` ä½¿ç”¨ 32 ä½åœ°å€ï¼Œç†è®ºä¸Šå¯æä¾›çº¦ 42.9äº¿ ä¸ªå…¨çƒå”¯ä¸€çš„ `IP` åœ°å€ã€‚ç„¶è€Œç”±äºåœ°å€åˆ†é…çš„ä¸å‡åŒ€å’Œä¸€äº›å†å²åŸå› ï¼Œå®é™…å¯ç”¨çš„ `IPv4` åœ°å€æ•°é‡è¦å°‘å¾—å¤šã€‚éšç€äº’è”ç½‘çš„è¿…é€Ÿå‘å±•ï¼Œå°¤å…¶æ˜¯æ™ºèƒ½æ‰‹æœºã€å¹³æ¿ç”µè„‘ã€ç‰©è”ç½‘è®¾å¤‡ç­‰çš„å¤§é‡æ¶Œç°ï¼Œ`IPv4` åœ°å€å¿«é€Ÿè€—å°½ã€‚

  - `IPv6` ä½¿ç”¨ 128 ä½é•¿åº¦çš„åœ°å€ï¼Œç†è®ºä¸Šå¯ä»¥æä¾›å¤§çº¦ 340äº¿äº¿äº¿äº¿ ä¸ª `IP` åœ°å€ï¼Œè¿™å¯¹äºä»»ä½•ç°åœ¨å’Œæœªæ¥çš„è®¾å¤‡æ•°é‡æ¥è¯´éƒ½æ˜¯ç»°ç»°æœ‰ä½™çš„ã€‚æ­¤å¤–ï¼Œ`IPv6` è¿˜å¼•å…¥äº†å¾ˆå¤š `IPv4` ä¸­æ²¡æœ‰çš„æ–°ç‰¹æ€§ï¼Œå¦‚æœ¬åœ°é“¾æ¥åœ°å€ã€é€šè¿‡é‚»å±…å‘ç°åè®®ä¸ºè·¯ç”±å™¨æä¾›çš„è‡ªåŠ¨é…ç½®ï¼Œä»¥åŠæ”¹è¿›çš„æ”¯æŒ `QoS` çš„èƒ½åŠ›å’Œå¯¹ `IPsec` çš„ç›´æ¥æ”¯æŒç­‰ã€‚

æ€»ç»“ï¼š`IPv6` çš„è¯ç”Ÿä¸»è¦æ˜¯ä¸ºäº†è§£å†³ `IPv4` åœ°å€è€—å°½çš„é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿå¼•å…¥äº†ä¸€äº›æ–°çš„ç‰¹æ€§å’Œæ”¹è¿›ï¼Œä»¥é€‚åº”æœªæ¥äº’è”ç½‘çš„å‘å±•éœ€æ±‚ã€‚

:::

### â“`IP` å¤´éƒ¨éƒ½æœ‰å•¥å†…å®¹

::: details ğŸ’¡

  - ç‰ˆæœ¬ï¼ˆVersionï¼‰ï¼šå 4ä½ï¼Œä»£è¡¨IPåè®®çš„ç‰ˆæœ¬ï¼Œç›®å‰ä¸»è¦ä¸ºIPV4æˆ–è€…IPv6ã€‚

  - å¤´éƒ¨é•¿åº¦ï¼ˆIHLï¼ŒInternet Header Lengthï¼‰ï¼šå 4ä½ï¼Œè¡¨ç¤ºIPå¤´éƒ¨é•¿åº¦ï¼Œå› ä¸ºæœ‰äº›IPå¤´éƒ¨å¸¦æœ‰é€‰é¡¹ï¼Œæ‰€ä»¥é•¿åº¦å¹¶éå›ºå®šã€‚

  - åŒºåˆ†æœåŠ¡ï¼ˆDSCPï¼ŒDifferentiated Services Code Pointï¼‰ä¸æ˜¾å¼æ‹¥å¡é€šçŸ¥ï¼ˆECNï¼ŒExplicit Congestion Notificationï¼‰ï¼šå 8ä½ï¼Œå‰6ä½æ˜¯åŒºåˆ†æœåŠ¡ï¼Œå2ä½æ˜¯æ˜¾å¼æ‹¥å¡é€šçŸ¥ã€‚

  - æ€»é•¿åº¦ï¼ˆTotal Lengthï¼‰ï¼šå 16ä½ï¼Œä»£è¡¨æ•´ä¸ªIPæ•°æ®æŠ¥çš„é•¿åº¦ï¼ŒåŒ…æ‹¬å¤´éƒ¨å’Œæ•°æ®éƒ¨åˆ†ã€‚

  - æ ‡è¯†ï¼ˆIdentificationï¼‰ï¼šå 16ä½ï¼Œç”¨äºæ ‡è¯†å±äºåŒä¸€ä¸ªIPæ•°æ®æŠ¥çš„å„ç‰‡ï¼ˆfragmentï¼‰ã€‚

  - æ ‡å¿—ï¼ˆFlagsï¼‰ä¸ç‰‡åç§»ï¼ˆFragment Offsetï¼‰ï¼šå 3ä½å’Œ13ä½ï¼Œç”¨äºå®ç°IPæ•°æ®æŠ¥çš„åˆ†ç‰‡å’Œé‡ç»„ã€‚

  - ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼ŒTime to Liveï¼‰ï¼šå 8ä½ï¼Œé™å®šIPæ•°æ®æŠ¥çš„å¯¿å‘½ã€‚

  - åè®®ï¼ˆProtocolï¼‰ï¼šå 8ä½ï¼Œè¡¨ç¤ºæºå¸¦çš„æ•°æ®æ‰€ä½¿ç”¨çš„åè®®ï¼Œå¦‚TCPï¼ŒUDPç­‰ã€‚

  - é¦–éƒ¨æ ¡éªŒå’Œï¼ˆHeader Checksumï¼‰ï¼šå 16ä½ï¼Œç”¨äºæ£€æŸ¥IPæ•°æ®æŠ¥åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºé”™ã€‚

  - æºIPåœ°å€å’Œç›®æ ‡IPåœ°å€ï¼šå„å 32ä½ï¼Œåˆ†åˆ«è¡¨ç¤ºå‘é€ç«¯å’Œæ¥æ”¶ç«¯çš„IPåœ°å€ã€‚

  - é€‰é¡¹ï¼ˆOptionsï¼‰ï¼šé•¿åº¦å¯å˜ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨ã€‚

:::

### â“é™¤äº†å¥½è®°ä»¥å¤–ï¼Œä¸ºä»€ä¹ˆè¦ç”¨åŸŸåè®¿é—®æœåŠ¡å™¨ï¼Œç›´æ¥ç”¨ `IP` ä¸è¡Œå—

::: details ğŸ’¡

  - **æ˜“äºè®°å¿†**ï¼šåŸŸåæ˜¯ç”±å­—ç¬¦å’Œæ•°å­—ç»„æˆçš„ï¼Œé€šå¸¸ä¸ç½‘ç«™æˆ–å…¬å¸çš„åç§°ç›¸å…³ï¼Œæ›´æ˜“äºäººç±»è®°å¿†ã€‚è€Œ `IP` åœ°å€åˆ™æ˜¯ç”±å››ç»„æ•°å­—ç»„æˆï¼Œä¸æ˜“äºè®°å¿†ã€‚

  - **æ˜“äºç»´æŠ¤**ï¼šå¦‚æœä¸€ä¸ªç½‘ç«™æ›´æ¢äº†æœåŠ¡å™¨ï¼Œ`IP` åœ°å€å°±ä¼šå‘ç”Ÿæ”¹å˜ã€‚å¦‚æœç›´æ¥ä½¿ç”¨ `IP` åœ°å€è®¿é—®ï¼Œé‚£ä¹ˆç”¨æˆ·å°±éœ€è¦çŸ¥é“æ–°çš„ `IP` åœ°å€æ‰èƒ½è®¿é—®è¯¥ç½‘ç«™ã€‚å¦‚æœä½¿ç”¨åŸŸåï¼Œåªè¦å°†åŸŸåçš„è§£æåœ°å€æ›´æ–°ä¸ºæ–°çš„ `IP` åœ°å€ï¼Œå¯¹ç”¨æˆ·æ¥è¯´æ˜¯æ— æ„ŸçŸ¥çš„ã€‚

  - **æ”¯æŒè´Ÿè½½å‡è¡¡**ï¼šé€šè¿‡åŸŸåï¼Œå¯ä»¥å°†è®¿é—®è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚
    > æ¯”å¦‚ï¼Œä¸€ä¸ªå¤§å‹ç½‘ç«™å¯èƒ½æœ‰æˆåƒä¸Šä¸‡çš„æœåŠ¡å™¨ï¼Œå¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªåŸŸåï¼ŒèƒŒåç”± `DNS` æœåŠ¡å™¨å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„ `IP` åœ°å€ï¼Œä»¥å®ç°è´Ÿè½½å‡è¡¡ã€‚

  - **ç»“æ„ä¿å¯†**ï¼šç›´æ¥æš´éœ² `IP` åœ°å€å¯èƒ½ä¼šæ³„éœ²ä¸€äº›ç½‘ç»œç»“æ„ä¿¡æ¯ï¼Œè€Œä½¿ç”¨åŸŸåå¯ä»¥æ›´å¥½åœ°éšè—è¿™äº›ä¿¡æ¯ã€‚

  - **æ”¯æŒè™šæ‹Ÿä¸»æœº**ï¼šåŒä¸€ `IP` åœ°å€ä¸Šå¯ä»¥è¿è¡Œå¤šä¸ªç½‘ç«™ï¼Œé€šè¿‡åŸŸåå¯ä»¥åŒºåˆ†å’Œè®¿é—®è¿™äº›ç½‘ç«™ã€‚å¦‚æœåªæœ‰ `IP` åœ°å€ï¼Œå°±æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚
  
:::

### â“åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸æ˜¯ `IPv6` åœ°å€

::: details ğŸ’¡

> `IPv6` åœ°å€æ˜¯ä¸€ä¸ªç”± 128 ä½æ•°å€¼ç»„æˆçš„åœ°å€ï¼Œé€šå¸¸è¡¨ç¤ºä¸º 8 ä¸ª 16 è¿›åˆ¶çš„æ•°ï¼Œæ¯ä¸ªæ•°ç”±å››ä¸ªåå…­è¿›åˆ¶ä½è¡¨ç¤ºï¼Œå¹¶ç”¨å†’å· ":" åˆ†éš”ã€‚

```python
# ä½¿ç”¨ ipaddress æ¨¡å—ä¸­çš„ is_ipv6_address å‡½æ•°æ¥åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸º IPv6 åœ°å€
import ipaddress

def is_ipv6_address(address):
    try:
        ipaddress.IPv6Address(address)
        return True
    except ipaddress.AddressValueError:
        return False

print(is_ipv6_address('2001:0db8:85a3:0000:0000:8a2e:0370:7334'))   # è¾“å‡ºï¼šTrue
print(is_ipv6_address('2001:db8:85a3:0:0:8a2e:370:7334'))           # è¾“å‡ºï¼šTrue
print(is_ipv6_address('2001:db8:85a3::8a2e:370:7334'))              # è¾“å‡ºï¼šTrue
print(is_ipv6_address('This is not an IP address'))                 # è¾“å‡ºï¼šFalse
```

:::

### â“`ping` ä½¿ç”¨ä»€ä¹ˆåè®®

::: details ğŸ’¡

> `ping` æ˜¯ä¸€ç§ç”¨æ¥æ£€æµ‹ç½‘ç»œè¿æ¥è´¨é‡(æ˜¯å¦è¿é€šï¼Œç½‘ç»œå»¶è¿Ÿ)çš„å·¥å…·ï¼ŒåŸºäº `ICMP` (`Internet Control Message Protocol`) äº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ã€‚

å·¥ä½œåŸç†ï¼šå‘é€ä¸€ç§ç‰¹æ®Šçš„ä»¥ `ECHO_REQUEST` è¢«æ ‡è®°çš„æ•°æ®åŒ…åˆ°æŒ‡å®šçš„ç½‘ç»œåœ°å€ï¼Œç„¶åç­‰å¾…æ¥æ”¶å›é¦ˆã€‚å¦‚æœç½‘ç»œè¿æ¥æ­£å¸¸ï¼Œé‚£ä¹ˆå®ƒå°†æ¥æ”¶åˆ°ä¸€ç§è¢«æ ‡è®°ä¸º `ECHO_REPLY` çš„æ•°æ®åŒ…ã€‚

:::

------

## Socket

### â“`Socket` äº†è§£å—

::: details ğŸ’¡

> `Socket`(å¥—æ¥å­—)æ˜¯è®¡ç®—æœºç½‘ç»œæ•°æ®ç»“æ„ï¼Œå®ƒæ˜¯ç½‘ç»œé€šä¿¡ä¸­æ•°æ®å‘é€å’Œæ¥æ”¶çš„åŸºæœ¬æ“ä½œå•å…ƒï¼Œå¯ä»¥ç†è§£ä¸ºç½‘ç»œé€šä¿¡çš„ç«¯å£ã€‚

  `Socket` åŸæœ¬æ˜¯ `Unix/Linux` ç³»ç»Ÿä¸‹çš„ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œåœ¨ `Windows` ç¯å¢ƒä¹Ÿæœ‰ç›¸å¯¹åº”çš„å®ç°ã€‚å®ƒæä¾›äº†åœ¨ç½‘ç»œä¸­è¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡çš„æ–¹å¼ã€‚ä¸€ä¸ª `Socket` ç”±ä¸€ä¸ª `IP` åœ°å€å’Œä¸€ä¸ªç«¯å£å· `Port` å”¯ä¸€ç¡®å®šï¼Œå½¢å¼å¦‚ï¼š`IP:Port`ã€‚

  ä¸€ä¸ªç½‘ç»œè¿æ¥çš„å»ºç«‹éœ€è¦æœ‰ä¸€å¯¹ `Socket`ï¼Œåˆ†åˆ«ä½äºé€šä¿¡çš„ä¸¤ç«¯ï¼Œä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ã€‚åœ¨ç½‘ç»œåº”ç”¨ä¸­ï¼ŒæœåŠ¡å™¨ç«¯ä¸€èˆ¬é‡‡ç”¨å›ºå®šçš„ `IP` åœ°å€å’Œç«¯å£å·ã€‚å®¢æˆ·ç«¯åˆ™ç”±ç³»ç»Ÿéšæœºåˆ†é…ç«¯å£å·ï¼Œè€Œ `IP` åœ°å€å°±æ˜¯æœºå™¨çš„ `IP`ã€‚

`Socket` é€šä¿¡è¿‡ç¨‹ï¼šæœåŠ¡å™¨ç›‘å¬ï¼Œå®¢æˆ·ç«¯è¯·æ±‚ï¼Œè¿æ¥ç¡®è®¤ã€‚

  - æœåŠ¡å™¨ç›‘å¬ï¼šæœåŠ¡å™¨ç«¯çš„ `Socket` ç»‘å®šåœ¨ä¸€ä¸ªç‰¹å®šç«¯å£ï¼Œç›‘å¬æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚

  - å®¢æˆ·ç«¯è¯·æ±‚ï¼šå®¢æˆ·ç«¯çš„ `Socket` æå‡ºè¿æ¥è¯·æ±‚ï¼Œè¦æ±‚ä¸æœåŠ¡å™¨ç«¯çš„ `Socket` å»ºç«‹è¿æ¥ã€‚

  - è¿æ¥ç¡®è®¤ï¼šæœåŠ¡å™¨ç«¯çš„ `Socket` æ¥å—æ¥è‡ªå®¢æˆ·ç«¯ `Socket` çš„è¯·æ±‚ï¼Œå»ºç«‹è¿æ¥ã€‚
  
:::

### â“å¯¹äºæœåŠ¡å™¨æ¥è¯´ï¼Œ`Socket` é€šä¿¡æœ‰å“ªäº›å…·ä½“çš„æ­¥éª¤

::: details ğŸ’¡

æœåŠ¡å™¨ç«¯çš„Socketé€šä¿¡ä¸€èˆ¬å…·æœ‰ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š

1. åˆ›å»ºå¥—æ¥å­—Socketï¼šé¦–å…ˆï¼ŒæœåŠ¡å™¨éœ€è¦åˆ›å»ºä¸€ä¸ªsocketï¼Œè¿™æ˜¯æ‰€æœ‰ç½‘ç»œé€šä¿¡çš„åŸºç¡€ã€‚

2. ç»‘å®šå¥—æ¥å­—åˆ°å…·ä½“çš„IPåœ°å€å’Œç«¯å£å·ï¼šåœ¨åˆ›å»ºå¥—æ¥å­—åï¼ŒæœåŠ¡å™¨éœ€è¦å°†å¥—æ¥å­—ä¸ç‰¹å®šçš„IPåœ°å€å’Œç«¯å£å·ç»‘å®šèµ·æ¥ï¼Œä»¥ä¾¿å®¢æˆ·ç«¯èƒ½å¤Ÿè¿æ¥åˆ°æ­£ç¡®çš„æœåŠ¡å™¨ã€‚è¿™ä¸ªè¿‡ç¨‹åˆç§°ä¸ºç›‘å¬(listen)ç‰¹å®šçš„ç«¯å£ã€‚

3. å¼€å§‹ç›‘å¬è¿æ¥è¯·æ±‚ï¼šä¸€æ—¦å¥—æ¥å­—è¢«ç»‘å®šåˆ°äº†æ­£ç¡®çš„IPåœ°å€å’Œç«¯å£å·ï¼ŒæœåŠ¡å™¨å°±å¯ä»¥å¼€å§‹ç›‘å¬è¿™ä¸ªç«¯å£çš„è¿æ¥è¯·æ±‚äº†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯é˜»å¡æ€§çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯å°è¯•è¿æ¥ï¼ŒæœåŠ¡å™¨ä¼šåœåœ¨è¿™ä¸€æ­¥ä¸å†å‘ä¸‹æ‰§è¡Œã€‚

4. æ¥å—å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼šå½“æœ‰å®¢æˆ·ç«¯å°è¯•è¿æ¥æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªconnectè¯·æ±‚ã€‚åœ¨è¿™ä¸ªæ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„socketï¼Œå¹¶å°†å…¶ä¸è¯·æ±‚è¿æ¥çš„å®¢æˆ·ç«¯å…³è”èµ·æ¥ï¼Œç„¶åé€šè¿‡è¿™ä¸ªæ–°çš„socketä¸å®¢æˆ·ç«¯è¿›è¡Œæ•°æ®é€šä¿¡ã€‚

5. æ•°æ®é€šä¿¡ï¼šä¸€æ—¦è¿æ¥è¢«æ¥å—ï¼ŒæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯å°±å¯ä»¥é€šè¿‡æ–°åˆ›å»ºçš„è¿æ¥è¿›è¡Œæ•°æ®é€šä¿¡ã€‚è¿™é‡Œçš„é€šä¿¡å¯ä»¥æ˜¯åŒå‘çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®¢æˆ·ç«¯å¯ä»¥å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼ŒæœåŠ¡å™¨ä¹Ÿå¯ä»¥å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ã€‚

6. æ–­å¼€è¿æ¥ï¼šé€šä¿¡ç»“æŸåï¼ŒæœåŠ¡å™¨éœ€è¦å…³é—­ä¸å®¢æˆ·ç«¯çš„è¿æ¥ã€‚é€šå¸¸æ˜¯åœ¨å®Œæˆæ‰€æœ‰é€šä¿¡åï¼ŒæœåŠ¡å™¨ä¼šå…ˆå…³é—­è¿æ¥ï¼Œç„¶åå†ç»“æŸç¨‹åºã€‚

ä»¥ä¸Šå°±æ˜¯æœåŠ¡å™¨ç«¯è¿›è¡ŒSocketé€šä¿¡çš„ä¸»è¦æ­¥éª¤ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›æ­¥éª¤å¯èƒ½ä¼šæ ¹æ®å…·ä½“çš„ç¼–ç¨‹è¯­è¨€ã€æ¡†æ¶ä»¥åŠä¸šåŠ¡éœ€æ±‚è€Œæœ‰æ‰€ä¸åŒã€‚

:::

### â“`Socket` vs `TCP`

::: details ğŸ’¡

  - `Socket`ï¼ˆå¥—æ¥å­—ï¼‰ï¼šè¿™æ˜¯åœ¨è®¡ç®—æœºä¸ŠæŸä¸ªåº”ç”¨ç¨‹åºä¸ç½‘ç»œåè®®ï¼ˆæ¯”å¦‚ `TCP`ï¼‰è¿›è¡Œæ•°æ®äº¤æ¢çš„ä¸€ä¸ªæ¥å£æˆ–è€…å·¥å…·ã€‚å½“ä¸€ä¸ªåº”ç”¨ç¨‹åºæƒ³è¦è·Ÿç½‘ç»œä¸Šçš„å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºé€šä¿¡æ—¶ï¼Œä¼šé€šè¿‡ `Socket` æ¥å‘é€å’Œæ¥æ”¶æ•°æ®ã€‚ä¸ `TCP` ç›¸æ¯” `Socket` æ˜¯æ›´é«˜å±‚æ¬¡çš„æ¦‚å¿µã€‚å®ƒä¸ä»…èƒ½å¤Ÿæ”¯æŒ `TCP` åè®®ï¼Œè¿˜èƒ½æ”¯æŒå…¶ä»–å¤šç§é€šä¿¡åè®®ï¼Œæ¯”å¦‚ `UDP` ç­‰ã€‚

  - `TCP`ï¼ˆ`Transmission Control Protocol`ï¼Œä¼ è¾“æ§åˆ¶åè®®ï¼‰ï¼šè¿™æ˜¯ä¸€ç§é€šä¿¡åè®®ï¼Œå±äºç½‘ç»œæ¨¡å‹ä¸­çš„ä¼ è¾“å±‚åè®®ã€‚å®ƒæ˜¯é¢å‘è¿æ¥çš„ï¼Œå¯é çš„ï¼ŒåŸºäºå­—èŠ‚æµçš„é€šä¿¡åè®®ã€‚ä¸»è¦ç”¨äºåœ¨ç½‘ç»œä¸­å»ºç«‹å¯é çš„æ²Ÿé€šé€šé“ã€‚
  
  æ€»ç»“ï¼š`Socket` å’Œ `TCP` åè®®æ˜¯ç›¸äº’å…³è”çš„ã€‚`Socket` æä¾›äº†è®¿é—® `TCP/IP` åè®®çš„æ¥å£ï¼Œç”¨äºå®ç°è¿›ç¨‹æˆ–åº”ç”¨ç¨‹åºä¹‹é—´çš„æ•°æ®ä¼ è¾“ã€‚

:::

### â“`Socket` vs `RTMP`

::: details ğŸ’¡

  - `Socket`æ˜¯ä¸€ç§ç½‘ç»œé€šä¿¡çš„åŸºæœ¬æ¨¡å‹ï¼Œå®ƒæ˜¯åœ¨ç½‘ç»œä¸­è¿è¡Œçš„ç¨‹åºé—´çš„é€šä¿¡æ¥å£ã€‚å®šä¹‰äº†å¾ˆå¤šå‡½æ•°å’Œæ•°æ®ç»“æ„ï¼Œç”¨ä»¥è®¾è®¡å’Œç¼–å†™ç½‘ç»œç¨‹åºã€‚å®ƒæ˜¯ `OSI` æ¨¡å‹ä¸­çš„ä¼šè¯å±‚å’Œä¼ è¾“å±‚çš„ä¸€ä¸ªæ“ä½œé›†ï¼Œä¸ºé€šä¿¡ç»„ä»¶æä¾›äº†ç»Ÿä¸€çš„æ¥å£ã€‚

  - `RTMP`ï¼ˆ`Real Time Messaging Protocol`ï¼‰åˆ™æ˜¯ä¸€ç§ä¸“é—¨ç”¨äºéŸ³è§†é¢‘æµåª’ä½“æ•°æ®ä¼ è¾“çš„åè®®ï¼Œè®¾è®¡ç”¨äºäº’è”ç½‘ä¸Šçš„å®æ—¶æµåª’ä½“ä¼ è¾“ï¼ŒåŸºäº `TCP`ï¼Œæ”¯æŒå¸¦å®½æ£€æµ‹ï¼Œå¹¶èƒ½è‡ªåŠ¨é€‚åº”ç½‘ç»œçŠ¶æ€ã€‚å®ƒè®¾è®¡ä¹‹åˆï¼Œä¸»è¦ç”¨äºåœ¨Flash Playerå’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚

  åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œ`Socket` æ›´åº•å±‚ï¼Œå‡ ä¹å¯ä»¥ç”¨äºä»»ä½•ç±»å‹çš„ç½‘ç»œé€šä¿¡ï¼Œé€‚ç”¨æ€§å¹¿æ³›ï¼›è€Œ `RTMP` æ›´ä¸“æ³¨åœ¨éŸ³è§†é¢‘æµçš„å®æ—¶ä¼ è¾“ï¼Œæ›´åŠ é«˜æ•ˆå’Œç¨³å®šã€‚

åŒºåˆ«ï¼š

  - ä½¿ç”¨åœºæ™¯ä¸åŒï¼š`Socket` æ›´åº•å±‚ï¼Œé€‚ç”¨äºå„ç±»ç½‘ç»œé€šä¿¡ï¼Œ`RTMP` ä¸»è¦ç”¨äºéŸ³è§†é¢‘æµä¼ è¾“ã€‚

  - æŠ€æœ¯ä¾§é‡ç‚¹ä¸åŒï¼š`Socket` å…³æ³¨ç½‘ç»œé€šä¿¡çš„åŸºæœ¬æ¨¡å‹ï¼Œ`RTMP` æ›´åŠ å…³æ³¨æµåª’ä½“æ•°æ®çš„å®æ—¶æ€§ã€‚

  - å·¥ä½œæ–¹å¼ä¸åŒï¼š`Socket` å·¥ä½œåœ¨ `OSI` æ¨¡å‹çš„ä¼šè¯å±‚å’Œä¼ è¾“å±‚ï¼Œ`RTMP` åˆ™åŸºäº `TCP` å·¥ä½œåœ¨åº”ç”¨å±‚ã€‚

  - åŠŸèƒ½ä¸Šçš„å·®å¼‚ï¼š`Socket` æä¾›çš„æ˜¯ä¸€ç§é€šä¿¡æ¥å£ï¼Œ`RTMP` ä¸ä»…æ”¯æŒæ•°æ®ä¼ è¾“ï¼Œè¿˜æ”¯æŒå¸¦å®½æ£€æµ‹å’Œè‡ªåŠ¨é€‚åº”ç½‘ç»œçŠ¶æ€ç­‰é«˜çº§åŠŸèƒ½ã€‚

:::

### â“`WebSocket` æ˜¯ä»€ä¹ˆ

::: details ğŸ’¡

> `WebSocket` æ˜¯ä¸€ç§ç½‘ç»œé€šä¿¡åè®®ï¼Œæœ€æ—©ç”± `Web` æµè§ˆå™¨å’Œ `Web` æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œå…¨åŒå·¥é€šä¿¡çš„æŠ€æœ¯ã€‚

å‘å±•å†å²ï¼š

  - 2008å¹´ï¼Œ`WebSocket` å—åˆ° `HTML5` çš„å½±å“å¼€å§‹è¯ç”Ÿã€‚
  - 2011å¹´ï¼Œè¯¥åè®®è¢« `IETF` å®šä¸ºæ ‡å‡† `RFC 6455`ï¼Œå¹¶è¢« `W3C` ç”¨ä½œ `Web IDL` ä¸­ä¸€éƒ¨åˆ†ã€‚

ä¸»è¦ç‰¹ç‚¹ï¼š

  - å»ºç«‹åœ¨ `TCP` åè®®ä¹‹ä¸Šï¼ŒæœåŠ¡å™¨ç½‘ç»œæµé‡å‹åŠ›è¾ƒå°ã€‚
  - ä¸ `HTTP` åè®®æœ‰è¾ƒå¥½çš„å…¼å®¹æ€§ã€‚é»˜è®¤ç«¯å£ä¹Ÿæ˜¯ `80` å’Œ `443`ï¼Œå¹¶ä¸”æ¡æ‰‹é˜¶æ®µé‡‡ç”¨ `HTTP` åè®®ï¼Œä½¿å¾—å…¶å¯ä»¥ç©¿é€å¤§å¤šæ•°é˜²ç«å¢™ï¼ŒåŒæ—¶ä¹Ÿå®¹æ˜“å’Œç°æœ‰çš„ `Web` æœåŠ¡å™¨èåˆã€‚
  - æ•°æ®æ ¼å¼æ¯”è¾ƒè½»é‡ï¼Œæ€§èƒ½å¼€é”€å°ï¼Œé€šä¿¡é«˜æ•ˆã€‚
  - å¯ä»¥å‘é€æ–‡æœ¬ï¼Œä¹Ÿå¯å‘é€äºŒè¿›åˆ¶æ•°æ®ã€‚
  - æ— åŒæºé™åˆ¶ï¼ˆ`cross-domain`ï¼‰ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä¸ä»»æ„æœåŠ¡å™¨é€šä¿¡ã€‚
  - åè®®æ ‡è¯†ç¬¦æ˜¯ `ws`ï¼ˆæˆ– `wss` è¡¨ç¤ºä½¿ç”¨äº† `TLS` åŠ å¯†ï¼‰ï¼ŒæœåŠ¡å™¨ç½‘å€å°±æ˜¯ `URL`ã€‚

é€šä¿¡æµç¨‹ï¼š

  - å®¢æˆ·ç«¯é€šè¿‡ `HTTP` è¯·æ±‚ä¸ `WebSocket` æœåŠ¡ç«¯åå•†åŠ å¯†æ¡æ‰‹ã€‚
  - å¦‚æœæœåŠ¡å™¨æ”¯æŒ `WebSocket`ï¼Œé‚£ä¹ˆæ¡æ‰‹æˆåŠŸï¼ŒæœåŠ¡å™¨ä¼šè¿”å› `Upgrade` åè®®çš„ `HTTP` çŠ¶æ€ç  `101`ï¼Œå³ `HTTP` åè®®è½¬æ¢æˆ `WebSocket` åè®®ï¼Œæ­¤åï¼Œä¼ è¾“çš„æ•°æ®å°±ä¸å†æ˜¯ `HTTP` åè®®ï¼Œè€Œæ˜¯ `WebSocket` åè®®ã€‚
  - å®Œæˆå‡çº§åï¼Œæ•°æ®å°±ç›´æ¥ä» `TCP` é€šé“ä¼ è¾“ï¼Œä¸ `HTTP` æ— å…³äº†ã€‚

æ€»ç»“ï¼š`WebSocket` æä¾›äº†ä¸€ç§ç›¸è¾ƒäº `AJAX` æ›´åŠ å®æ—¶ã€æ›´åŠ ç¬¦åˆä¸»æµç¼–ç¨‹æ¨¡å‹ã€å¼€é”€æ›´å°çš„å®æ—¶åŒå‘é€šä¿¡æ‰‹æ®µï¼Œä½¿å¾—åœ¨ `WEB` é¡µé¢ä¸Šçš„å®æ—¶é€šä¿¡å˜å¾—æ›´åŠ å®¹æ˜“ã€‚å¸¸ç”¨äºå³æ—¶é€šè®¯ã€åœ¨çº¿æ¸¸æˆç­‰éœ€è¦å®æ—¶äº¤äº’çš„åœºæ™¯ã€‚

:::

------

## HTTP

### ç‰ˆæœ¬

#### â“`HTTP` å„ä¸ªç‰ˆæœ¬çš„åŒºåˆ«

::: details ğŸ’¡

- `HTTP/0.9`: é¦–ä¸ª `HTTP` ç‰ˆæœ¬ï¼Œåªå…è®¸ç®€å•çš„è¯·æ±‚ï¼Œä»…æ”¯æŒ `GET` æ–¹æ³•ä¸”æ— å¤´éƒ¨ã€‚

- `HTTP/1.0`: è¯¥ç‰ˆæœ¬å¢åŠ äº†å¾ˆå¤šæ–°ç‰¹æ€§ã€‚
    * å¢åŠ äº† `POST` å’Œ `HEAD` æ–¹æ³•ã€‚
    * å¼•å…¥äº† `HTTP` å¤´éƒ¨æœºåˆ¶ï¼Œä¾‹å¦‚ï¼š`Content-Type`ï¼Œ`Content-Length` ç­‰ã€‚
    * â€œéæŒç»­æ€§è¿æ¥â€ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šé‡æ–°åˆ›å»º `TCP` çš„è¿æ¥çš„åˆ›å»ºå’Œé‡Šæ”¾ï¼Œé€ æˆæå¤§çš„èµ„æºæ¶ˆè€—ã€‚

- `HTTP/1.1`: ç›¸æ¯”äº `1.0`ï¼Œç‰ˆæœ¬ `1.1` åšäº†è®¸å¤šæ”¹è¿›ã€‚
    * å¢åŠ äº† `PUT, DELETE` ç­‰æ–°æ–¹æ³•ã€‚
    * å¼•å…¥ â€œæŒç»­æ€§è¿æ¥â€ åœ¨ä¸€æ¬¡ `TCP` è¿æ¥ä¸­å¤„ç†å¤šä¸ª `HTTP` è¯·æ±‚ã€‚
    * å¼•å…¥ â€œç®¡é“æœºåˆ¶â€ (`pipeline`) å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªçš„è¯·æ±‚ï¼Œä½†æ˜¯å“åº”ä¼šæŒ‰ç…§è¯·æ±‚é˜Ÿåˆ—çš„å…ˆåé¡ºåºè¿›è¡Œï¼Œä¼šå­˜åœ¨ â€œé˜Ÿå¤´é˜»å¡â€ é—®é¢˜ã€‚
    * å¼•å…¥äº†åˆ†å—ä¼ è¾“ç¼–ç æœºåˆ¶ï¼Œå¯ä»¥å°†è¯·æ±‚åˆ†ä¸ºå¤šä¸ªéƒ¨åˆ†åˆ†åˆ«å‘é€ï¼Œå…è®¸æœåŠ¡å™¨åœ¨å®Œå…¨ç”Ÿæˆæ•´ä¸ªå†…å®¹ä¹‹å‰å°±å¼€å§‹å›åº”ã€‚
    * å¢åŠ äº†è¯·æ±‚å¤´ `Host`ï¼Œä½¿å¾—ä¸€å°ç‰©ç†æœåŠ¡å™¨å¯ä»¥æ‰¿è½½å¤šä¸ªè™šæ‹Ÿçš„ä¸»æœºã€‚

  > â€œé˜Ÿå¤´é˜»å¡â€ é—®é¢˜ï¼š
    åœ¨ `HTTP/1.1` å¼•å…¥ â€œæŒç»­æ€§è¿æ¥â€ï¼ˆ`Persistent Connection`ï¼‰è®©å¤šä¸ª `HTTP` è¯·æ±‚å’Œå“åº”å¯ä»¥åœ¨ä¸€ä¸ª `TCP` è¿æ¥ä¸­ä¼ è¾“ï¼Œä½†æ˜¯ç”±äº `TCP` åè®®çš„ç‰¹æ€§ï¼Œæ•°æ®åŒ…å¿…é¡»æŒ‰ç…§å‘é€é¡ºåºè¿›è¡Œæ¥æ”¶ï¼Œå› æ­¤å¦‚æœé˜Ÿå¤´çš„åŒ…å› ä¸ºæŸäº›åŸå› å»¶è¿Ÿåˆ°è¾¾ï¼Œåé¢çš„åŒ…å°±å¿…é¡»ç­‰å¾…ï¼Œå³ä½¿åé¢çš„åŒ…å·²ç»åˆ°è¾¾ï¼Œä¹Ÿä¸èƒ½å…ˆæ¥æ”¶ã€‚

- `HTTP/2.0`: ç‰ˆæœ¬ `2.0` åŸºäº `Google` çš„ `SPDY` åè®®ã€‚
    * äºŒè¿›åˆ¶åè®®ï¼šä¸å†æ˜¯åŸºäºæ–‡æœ¬çš„åè®®ï¼Œå‡å°‘äº†è§£æå¤æ‚åº¦å’Œæå‡ä¼ è¾“é€Ÿåº¦ã€‚(ä¼˜åŒ–ä¼ è¾“æ•°æ®æ ¼å¼ï¼šæ–‡æœ¬ -> äºŒè¿›åˆ¶)
    * å¤šè·¯å¤ç”¨ï¼š(`Multiplexing`) åœ¨ä¸€æ¬¡ `TCP` è¿æ¥ä¸­å¯ä»¥å‘é€å¤šä¸ªè¯·æ±‚ä¸”æ¥æ”¶å¤šä¸ªå“åº”ï¼Œå‡å°‘äº† `TCP` è¿æ¥æ•°é‡åŒæ—¶ä¹Ÿå‡å°äº†å»¶è¿Ÿã€‚è§£å†³ `1.1` åè®®ä¸­çš„ â€œé˜Ÿå¤´é˜»å¡â€ é—®é¢˜ã€‚ä¼šå­˜åœ¨ â€œåŒç”ŸåŒç­â€ é—®é¢˜ã€‚
    * å¤´éƒ¨å‹ç¼©ï¼šé‡‡ç”¨ `HPACK` ç®—æ³•å¯¹å¤´ä¿¡æ¯å‹ç¼©å¤„ç†ï¼Œå‡å°‘æ•°æ®ä½“ç§¯ã€‚
    * æœåŠ¡å™¨æ¨é€ï¼šæœåŠ¡å™¨å¯ä»¥å¯¹ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚å‘é€å¤šä¸ªå“åº”ã€‚
    * è¯·æ±‚ä¼˜å…ˆçº§ï¼šä¸åŒçš„è¯·æ±‚å¯ä»¥æœ‰ä¸åŒçš„ä¼˜å…ˆçº§ã€‚

  > â€œåŒç”ŸåŒç­â€ é—®é¢˜ï¼š
    åœ¨ `HTTP/2.0` çš„å•ä¸ªè¿æ¥ä¸­ï¼Œå¦‚æœæœ‰ä¸€ä¸ªè¯·æ±‚å› ä¸ºæŸç§åŸå› å¤±è´¥äº†ï¼ˆæ¯”å¦‚ç½‘ç»œæ³¢åŠ¨ï¼ŒæœåŠ¡å™¨å®•æœºï¼‰ï¼Œåˆ™è¿™ä¸ª `TCP` è¿æ¥ä¸Šçš„æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«å…³é—­ï¼Œä»è€Œå¯¼è‡´å¤§é‡çš„è¯·æ±‚å¤±è´¥ï¼Œè¿™æ˜¯ç”± `TCP` åè®®çš„ç‰¹æ€§å†³å®šçš„ã€‚

- `HTTP/3.0`: æœ€æ–°ç‰ˆæœ¬ã€‚
    * åŸºäº `QUIC` åè®® (`Quick UDP Internet Connections`)ï¼Œè§£å†³ `TCP` çš„ â€œé˜Ÿå¤´é˜»å¡â€ é—®é¢˜ã€‚
        > åœ¨ `QUIC` åè®®ä¸­ï¼Œæ•°æ®åŒ…æ˜¯ç‹¬ç«‹ä¼ è¾“çš„ï¼Œå³ä½¿æœ‰æ•°æ®åŒ…ä¸¢å¤±ï¼Œä¹Ÿä¸ä¼šå½±å“åˆ°å…¶å®ƒæ•°æ®åŒ…çš„ä¼ è¾“å’Œå¤„ç†ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº† â€œé˜Ÿå¤´é˜»å¡â€ é—®é¢˜ã€‚
    * åº•å±‚åè®®æ”¹ä¸º `UDP`ï¼Œå› æ­¤è§£å†³äº† `HTTP/2.0` ä¸­å¤šè·¯å¤ç”¨çš„ â€œåŒç”ŸåŒç­â€ é—®é¢˜ã€‚
    
:::

#### â“`HTTP` æ˜¯æ— çŠ¶æ€çš„ï¼Œæ€ä¹ˆç†è§£

::: details ğŸ’¡

> `HTTP` (`HyperText Transfer Protocol`) è¢«ç§°ä¸ºæ— çŠ¶æ€çš„ï¼Œæ˜¯å› ä¸ºåœ¨å•ä¸€çš„ `HTTP` è¯·æ±‚å’Œå“åº”äº¤äº’è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨å¹¶ä¸ä¼šä¿å­˜ä»»ä½•å…³äºå®¢æˆ·ç«¯çš„ä¿¡æ¯ã€‚

  - æ— çŠ¶æ€ï¼šæ¯ä¸€æ¬¡ `HTTP` è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼ŒæœåŠ¡å™¨ä¸ä¼šè®°ä½ä¹‹å‰çš„è¯·æ±‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»å®¢æˆ·ç«¯å‘å‡ºç¬¬ä¸€ä¸ªè¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œç„¶ååˆ°ç¬¬äºŒä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨å¹¶ä¸çŸ¥é“è¿™ä¸¤ä¸ªè¯·æ±‚æ˜¯æ¥è‡ªåŒä¸€ä¸ªå®¢æˆ·ç«¯ã€‚æ— è®ºå®¢æˆ·ç«¯åœ¨å‰ä¸€ä¸ªè¯·æ±‚ä¸­åšäº†ä»€ä¹ˆï¼Œæ¯ä¸ªè¯·æ±‚éƒ½è¢«è§†ä¸ºå…¨æ–°çš„ã€ä¸å…¶ä»–è¯·æ±‚æ²¡æœ‰å…³ç³»çš„è¯·æ±‚ã€‚

  - ä¼˜ç‚¹ï¼šæ— çŠ¶æ€è®¾è®¡ä½¿ `HTTP` çš„ç»“æ„å˜å¾—ç®€å•ã€æ— å¤æ‚æ€§å’Œç‹¬ç«‹æ€§ã€‚

  - ç¼ºç‚¹ï¼šæ¯”å¦‚æœåŠ¡å™¨æ— æ³•è®°å½•ç”¨æˆ·çš„æ“ä½œå†å²ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº† `Cookies`ã€`Session` ç­‰æŠ€æœ¯ï¼Œå®ƒä»¬ä½¿å¾— `HTTP` èƒ½å¤Ÿå®ç°æœ‰çŠ¶æ€çš„äº¤äº’ï¼Œæ¯”å¦‚ç”¨æˆ·è®¤è¯ã€è´­ç‰©è½¦åŠŸèƒ½ç­‰ã€‚

:::

#### â“`HTTP 2.0` é’ˆå¯¹åŒä¸€ä¸ªåŸŸåçš„å¤šä¸ªè¯·æ±‚ï¼Œä¼šå»ºç«‹å¤šå°‘ä¸ª `TCP` è¿æ¥

::: details ğŸ’¡

  åœ¨ `HTTP 2.0` ä¸­ï¼Œåªéœ€è¦å»ºç«‹ä¸€ä¸ª `TCP` è¿æ¥å°±å¯ä»¥å¤„ç†åŒä¸€ä¸ªåŸŸåçš„æ‰€æœ‰è¯·æ±‚ã€‚`HTTP 2.0` æ”¯æŒå¤šè·¯å¤ç”¨ï¼ˆ`Multiplexing`ï¼‰ï¼Œå¯ä»¥åœ¨ä¸€ä¸ª `TCP` è¿æ¥ä¸ŠåŒæ—¶å¤„ç†å¤šä¸ª `HTTP` è¯·æ±‚å’Œå“åº”ã€‚

  - `HTTP 1.x` ä¸­æµè§ˆå™¨é€šå¸¸ä¼šå¯¹åŒä¸€ä¸ªåŸŸåå»ºç«‹å¤šä¸ªå¹¶è¡Œçš„ `TCP` è¿æ¥ï¼Œä»¥ä¾¿å¹¶è¡Œå¤„ç†å¤šä¸ª `HTTP` è¯·æ±‚ï¼Œä½†è¿™ç§æ–¹å¼åœ¨ `TCP` è¿æ¥æ•°è¿‡å¤šæ—¶ä¼šå¯¼è‡´èµ„æºæ¶ˆè€—è¿‡å¤§å¹¶å½±å“æ€§èƒ½ã€‚

  - `HTTP 2.0` å¤šè·¯å¤ç”¨åŠŸèƒ½æœ‰æ•ˆåœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå°†ä¸åŒçš„è¯·æ±‚åˆ†å‰²ä¸ºæ›´å°çš„æ¶ˆæ¯å’Œå¸§ï¼Œå¹¶åœ¨ä¸€ä¸ª `TCP` è¿æ¥ä¸­å¹¶è¡Œå‘èµ·ï¼Œä»è€Œå‡å°‘äº†éœ€è¦çš„è¿æ¥æ•°é‡ï¼Œæå‡äº†ç½‘ç»œä¼ è¾“æ•ˆç‡ã€‚

:::

#### â“`HTTP 3.0` ä¸­çš„ `QUIC` æ˜¯ä»€ä¹ˆ

::: details ğŸ’¡

> `QUIC`ï¼ˆ`Quick UDP Internet Connections`ï¼‰: ç”± `Google` æå‡ºå¹¶å¼€å‘çš„ä¸€ç§åŸºäº `UDP` (`User Datagram Protocol`) çš„äº’è”ç½‘ä¼ è¾“å±‚åè®®ã€‚

`QUIC` ç›¸å¯¹äº `TCP/UDP` çš„ä¼˜ç‚¹ï¼š

  - ä½å»¶è¿Ÿï¼š`QUIC` é€šè¿‡å‡å°‘ä¼ è¾“å±‚çš„æ¡æ‰‹æ­¥éª¤ï¼Œå¯ä»¥å®ç°æ— å»¶è¿Ÿã€`0-RTT`ï¼ˆå¾€è¿”æ—¶é—´ï¼‰çš„è¿æ¥å»ºç«‹ã€‚
    
  - å¼¹æ€§ï¼š`QUIC` åè®®åŸºäº `UDP`ï¼Œæ‰€ä»¥æ¯ä¸ª `QUIC` æ•°æ®åŒ…éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ•°æ®åŒ…ä¹‹é—´æ²¡æœ‰é¡ºåºå…³ç³»ã€‚è¿™æ„å‘³ç€ï¼Œå³ä½¿æŸä¸ªæ•°æ®åŒ…ä¸¢å¤±æˆ–è€…å»¶è¿Ÿï¼Œä¹Ÿä¸ä¼šå¯¼è‡´ â€œé˜Ÿå¤´é˜»å¡â€ é—®é¢˜ã€‚è¿™ä½¿å¾— `QUIC` åè®®åœ¨é¢å¯¹ç½‘ç»œä¸¢åŒ…ç­‰æ¶åŠ£ç½‘ç»œç¯å¢ƒæ—¶ï¼Œæ¯” `TCP` å…·æœ‰æ›´å¥½çš„å¼¹æ€§ã€‚

  - å¤šè·¯å¤ç”¨ï¼š`QUIC` åè®®æ”¯æŒæµçš„æ¦‚å¿µï¼ŒåŒä¸€ `QUIC` è¿æ¥å¯ä»¥åŒ…å«å¤šä¸ªæµï¼Œæ¯ä¸ªæµéƒ½æ˜¯ç‹¬ç«‹çš„ã€‚è¿™å…è®¸å¤šä¸ªè¯·æ±‚å’Œå“åº”åœ¨åŒä¸€ä¸ªè¿æ¥ä¸Šå¹¶è¡Œä¼ è¾“ï¼Œä»è€Œé¿å…äº† `HTTP/2` ä¸­åŒä¸€ä¸ª `TCP` è¿æ¥ä¸Šçš„ â€œåŒç”ŸåŒç­â€ é—®é¢˜ã€‚

  - å®‰å…¨ï¼š`QUIC` åè®®é›†æˆäº† `TLS` (`Transport Layer Security`) åè®®ï¼Œå¯ä»¥æä¾›ç«¯åˆ°ç«¯çš„æ•°æ®åŠ å¯†å’Œèº«ä»½éªŒè¯ã€‚

:::

### è¯·æ±‚æ–¹æ³•

#### â“`GET` vs `POST`

::: details ğŸ’¡

  - ä½œç”¨ï¼š
    * `GET`ï¼šä»æŒ‡å®šçš„èµ„æºè¯·æ±‚æ•°æ®ï¼Œé€šå¸¸ç”¨äºè·å–æ•°æ®ã€‚
    * `POST`ï¼šå‘æŒ‡å®šçš„èµ„æºæäº¤è¦è¢«å¤„ç†çš„æ•°æ®ï¼Œä¸»è¦ç”¨äºå‘é€æ•°æ®ã€‚

  - æ•°æ®ä¼ é€’æ–¹å¼ï¼š
    * `GET` æ–¹æ³•é€šå¸¸å°†å‚æ•°ç›´æ¥é™„åŠ åœ¨ `URL` åé¢ï¼Œå¹¶ä¸”ç”¨é—®å·ï¼ˆ`?`ï¼‰åˆ†éš”ï¼Œé”®å€¼å¯¹ä¹‹é—´åˆ™ä»¥ `&` ç¬¦å·è¿›è¡Œåˆ†å‰²
        > ä¾‹å¦‚ï¼š`http://example.com/test?name=test1&value=test2`ã€‚
    * `POST` æ–¹æ³•åˆ™å°†æ•°æ®åŒ…å«åœ¨ `HTTP` è¯·æ±‚ä½“å†…ã€‚

  - å®‰å…¨æ€§ï¼š
    * `GET` æ–¹æ³•å°†å‚æ•°ç›´æ¥æš´éœ²åœ¨ `URL` ä¸­ï¼Œæ‰€ä»¥å®ƒçš„å®‰å…¨æ€§ç›¸å¯¹è¾ƒä½ï¼Œæ›´é€‚åˆä¸åŒ…å«éšç§æˆ–è€…æ•æ„Ÿä¿¡æ¯çš„è¯·æ±‚ã€‚
    * `POST` æ–¹æ³•ç”±äºå°†å‚æ•°åŒ…å«åœ¨è¯·æ±‚ä½“å†…ï¼Œæ‰€ä»¥ç›¸å¯¹æ›´åŠ å®‰å…¨ä¸€äº›ã€‚

  - æ•°æ®å¤§å°ï¼š
    * `GET` æ–¹æ³•ç”±äºå—åˆ° `URL` é•¿åº¦çš„é™åˆ¶ï¼ˆé€šå¸¸ä¸º `2048` å­—ç¬¦ï¼‰ï¼Œæ‰€ä»¥å…¶å‘é€çš„æ•°æ®é‡æœ‰é™ã€‚
    * `POST` æ–¹æ³•ç†è®ºä¸Šæ²¡æœ‰æ•°æ®å¤§å°çš„é™åˆ¶ã€‚

  - æ•°æ®ç±»å‹ï¼š
    * `GET` æ–¹æ³•åªå…è®¸å‘é€æ–‡æœ¬ç±»å‹çš„æ•°æ®ã€‚
    * `POST`æ–¹æ³•æ²¡æœ‰è¿™æ ·çš„é™åˆ¶ï¼Œå¯ä»¥å‘é€äºŒè¿›åˆ¶æ•°æ®ã€‚

  - ç¼“å­˜å’Œå†å²ï¼š
    * `GET` æ–¹å¼å‘é€çš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šä¸»åŠ¨ç¼“å­˜ï¼Œç”¨æˆ·åœ¨ `URL` åœ°å€æ ç”Ÿæˆå†å²è®°å½•ã€‚
    * `POST` æ–¹å¼åˆ™ä¸ä¼šè¢«ç¼“å­˜ï¼Œä¹Ÿä¸ä¼šç•™ä¸‹å†å²è®°å½•ã€‚
    
  - å¹‚ç­‰æ€§ï¼š
    * `GET` è¯·æ±‚æ˜¯å¹‚ç­‰çš„ï¼Œå³å¤šæ¬¡æ‰§è¡ŒåŒä¸€è¯·æ±‚ï¼Œä¸ä¼šæ”¹å˜æœåŠ¡å™¨çŠ¶æ€ã€‚
    * `POST` è¯·æ±‚ä¸æ˜¯å¹‚ç­‰çš„ï¼Œç›¸åŒçš„ `POST` è¯·æ±‚è¢«æ‰§è¡Œå¤šæ¬¡å¯èƒ½å¯¼è‡´ä¸åŒçš„ç»“æœã€‚

:::

#### â“`GET` è¯·æ±‚å‚æ•°ä¸€å®šæ˜¯æ”¾åœ¨ `URL` ä¸­çš„å—

::: details ğŸ’¡

  ä¸ä¸€å®šã€‚

  `GET` è¯·æ±‚çš„å‚æ•°æ˜¯æ”¾åœ¨ `URL` ä¸­çš„ï¼Œè¿™æ˜¯ `GET` è¯·æ±‚è®¾è®¡çš„åˆè¡·å’Œæœ€å¸¸è§çš„ä½¿ç”¨æ–¹å¼ã€‚ä½†æ˜¯ï¼Œå¹¶éæ‰€æœ‰æƒ…å†µä¸‹ `GET` è¯·æ±‚çš„å‚æ•°éƒ½éœ€è¦æ”¾åœ¨ `URL` ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¯·æ±‚å¤´æ¥ä¼ é€’ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡ `Authorization` å­—æ®µåœ¨ `GET` è¯·æ±‚å¤´ä¸­ä¼ é€’è®¤è¯ä¿¡æ¯ã€‚

  æ³¨æ„ï¼šå› ä¸º `GET` è¯·æ±‚çš„å‚æ•°æ˜¯ç›´æ¥æš´éœ²åœ¨ `URL` ä¸­çš„ï¼Œå› æ­¤æœ‰ä¸€å®šçš„å®‰å…¨é£é™©ï¼Œä¸é€‚åˆç”¨äºä¼ è¾“æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚å¯†ç ï¼Œé“¶è¡Œå¡å·ç­‰ã€‚åŒæ—¶ï¼Œ`URL` çš„é•¿åº¦åœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¸­éƒ½æœ‰é™åˆ¶ï¼Œè¿‡é•¿çš„ `URL` å¯èƒ½ä¼šè¢«æˆªæ–­ï¼Œå¯¼è‡´è¯·æ±‚å¤±è´¥ã€‚åœ¨éœ€è¦ä¼ è¾“å¤§é‡æ•°æ®æ—¶ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨ `POST` è¯·æ±‚ï¼Œå…¶å‚æ•°é€šè¿‡è¯·æ±‚ä½“ä¼ è¾“ï¼Œç›¸å¯¹å®‰å…¨åˆæ²¡æœ‰é•¿åº¦é™åˆ¶ã€‚

:::

#### â“`GET` ä¸æŠŠå‚æ•°æ”¾åœ¨ `URL` é‡Œï¼Œå¯ä»¥æ”¾åœ¨ `body` é‡Œå—ï¼Œå¦‚æœæ”¾åœ¨bodyä¸­ï¼Œå¯ä»¥è¢«æœåŠ¡å™¨è§£æå—

::: details ğŸ’¡

åœ¨æ ‡å‡†çš„HTTPåè®®ä¸­ï¼ŒGETè¯·æ±‚çš„å‚æ•°é€šå¸¸æ˜¯æ”¾åœ¨URLä¸­çš„ã€‚è¿™æ˜¯å› ä¸ºGETè¯·æ±‚æ˜¯ç”¨æ¥è¯·æ±‚ç‰¹å®šçš„æ•°æ®ï¼Œè€Œè¿™äº›æ•°æ®é€šå¸¸å¯ä»¥é€šè¿‡URLæ¥æŒ‡å®šã€‚

å°†GETè¯·æ±‚çš„å‚æ•°æ”¾åœ¨bodyä¸­ï¼Œå¹¶ä¸ç¬¦åˆHTTPåè®®çš„è§„å®šã€‚åœ¨å®é™…çš„å®è·µä¸­ï¼Œå¤§éƒ¨åˆ†çš„æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼ˆä¾‹å¦‚æµè§ˆå™¨ï¼‰ä¹Ÿä¸æ”¯æŒå°†GETè¯·æ±‚çš„å‚æ•°æ”¾åœ¨bodyä¸­ã€‚å³ä½¿ä½ çœŸçš„æŠŠå‚æ•°æ”¾åœ¨GETè¯·æ±‚çš„bodyä¸­ï¼ŒæœåŠ¡å™¨ä¹Ÿä¸ä¼šå»è§£æå®ƒã€‚

æ­¤å¤–ï¼Œå°†GETè¯·æ±‚çš„å‚æ•°æ”¾åœ¨bodyä¸­ä¹Ÿæœ‰ä¸€äº›å…¶ä»–çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼ŒGETè¯·æ±‚é€šå¸¸ä¼šè¢«æµè§ˆå™¨ç¼“å­˜ï¼Œè€Œç¼“å­˜ç³»ç»Ÿé€šå¸¸åªä¼šè€ƒè™‘URLï¼Œè€Œä¸ä¼šè€ƒè™‘bodyã€‚å› æ­¤ï¼Œå³ä½¿ä½ æ”¹å˜äº†bodyä¸­çš„å†…å®¹ï¼Œæµè§ˆå™¨ä¹Ÿå¯èƒ½ç›´æ¥ä½¿ç”¨ç¼“å­˜çš„ç»“æœï¼Œè€Œä¸ä¼šé‡æ–°å‘èµ·è¯·æ±‚ã€‚

æ€»çš„æ¥è¯´ï¼ŒGETè¯·æ±‚çš„å‚æ•°åº”è¯¥æ”¾åœ¨URLä¸­ï¼Œè€Œä¸åº”è¯¥æ”¾åœ¨bodyä¸­ã€‚å¦‚æœä½ éœ€è¦å‘é€å¤§é‡çš„æ•°æ®ï¼Œæˆ–è€…éœ€è¦å‘é€é™¤äº†å­—ç¬¦ä¸²ä»¥å¤–çš„æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆåº”è¯¥ä½¿ç”¨POSTè¯·æ±‚ã€‚

:::

#### â“`POST` è¯·æ±‚å‚æ•°èƒ½æ”¾åœ¨ `URL` ä¸­å—

::: details ğŸ’¡

æŠ€æœ¯ä¸Šå¯è¡Œï¼Œä½†ä¸æ¨èã€‚

ä¸æ¨èåŸå› ï¼š

  - å®‰å…¨æ€§ï¼šæ”¾åœ¨ `URL` ä¸­çš„å‚æ•°å¯¹ä»–äººæ˜¯å¯è§çš„ï¼Œæ¯”å¦‚å­˜å‚¨åœ¨æµè§ˆå™¨çš„æµè§ˆå†å²ä¸­ï¼Œæˆ–è€…åœ¨ `Web` æœåŠ¡å™¨çš„æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œæˆ–è€…åœ¨ç½‘ç»œä¸Šè¢«æˆªè·ã€‚å› æ­¤ï¼Œè¿™å¯èƒ½ä¼šæ³„éœ²æ•æ„Ÿä¿¡æ¯ã€‚

  - å®¹é‡é™åˆ¶ï¼šå¯¹ `URL` çš„å¤§å°ï¼Œå¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½æœ‰ä¸€å®šçš„é™åˆ¶ï¼ˆé€šå¸¸ä¸º `2000~4000` å­—ç¬¦ï¼‰ã€‚å°† `POST` å‚æ•°æ”¾åœ¨URLä¸­å¯èƒ½ä¼šè®© `URL` è¿‡é•¿ï¼Œè¶…è¿‡æµè§ˆå™¨çš„å¤„ç†èƒ½åŠ›ã€‚

  - è§„èŒƒæ€§ï¼šè¿å `HTTP` çš„è¯­ä¹‰ï¼Œæ ¹æ® `HTTP` è§„èŒƒï¼Œ`POST` æ–¹æ³•çš„è¯­ä¹‰æ˜¯ â€œå‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼ˆä¾‹å¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ï¼‰ã€‚æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚â€ï¼Œè¿™å°±æ„å‘³ç€ `POST` è¯·æ±‚çš„æ•°æ®åº”è¯¥æ”¾åœ¨è¯·æ±‚ä½“ä¸­ã€‚

:::

#### â“`POST` è¯·æ±‚çš„ `body` ä½“ä½¿ç”¨ `form-urlencoded` å’Œ `multipart/form-data` çš„åŒºåˆ«

::: details ğŸ’¡
  
  - `application/x-www-form-urlencoded`ï¼šæ— æ³•è¿›è¡ŒäºŒè¿›åˆ¶æ•°æ®çš„ä¼ è¾“ï¼Œåªèƒ½ä¸Šä¼ æ–‡æœ¬æ•°æ®ã€‚
    > åœ¨è¿™ç§ç¼–ç æ–¹å¼ä¸‹ï¼Œæ‰€æœ‰çš„é”®å€¼å¯¹éƒ½ä¼šè¢«åˆå¹¶åˆ°ä¸€ä¸ªæŸ¥è¯¢å­—ç¬¦ä¸²ä¸­ï¼ŒæŸ¥è¯¢å­—ç¬¦ä¸²çš„æ ¼å¼å’Œ `GET` è¯·æ±‚ä¸­ `URL` çš„æŸ¥è¯¢å­—ç¬¦ä¸²æ ¼å¼ä¸€è‡´ã€‚æ¯ä¸ªé”®å€¼å¯¹ä¹‹é—´ç”¨ `&` ç¬¦å·åˆ†å‰²ï¼Œæ¯ä¸ªé”®ä¸å€¼ä¹‹é—´ç”¨ç­‰å· `=` åˆ†å‰²ï¼Œä¾‹å¦‚ `key1=value1&key2=value2`ã€‚å¦‚æœå€¼ä¸­åŒ…å«ä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼Œè¿™äº›å­—ç¬¦éœ€è¦è¢« `URL` ç¼–ç ï¼ˆæ¯”å¦‚ç©ºæ ¼è¢«ç¼–ç æˆ `+` æˆ– `%20`ï¼‰ã€‚

  - `multipart/form-data`ï¼šä¸ä»…å¯ä»¥ä¸Šä¼ æ–‡æœ¬æ•°æ®ï¼Œè¿˜å¯ä»¥ä¸Šä¼ æ–‡ä»¶æˆ–å…¶ä»–äºŒè¿›åˆ¶æ•°æ®ã€‚
    > åœ¨è¿™ç§ç¼–ç æ–¹å¼ä¸‹ï¼Œæ¶ˆæ¯ä½“ä¼šè¢«åˆ†å‰²æˆå¤šä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†å¯¹åº”ä¸€ä¸ªå­—æ®µã€‚æ¯ä¸ªéƒ¨åˆ†çš„å¼€å¤´éƒ½åŒ…å«ä¸€ä¸ªå«æœ‰è¯¥å­—æ®µåçš„ `Content-Disposition` å¤´éƒ¨ï¼Œç„¶åæ˜¯å­—æ®µçš„å€¼ã€‚å„ä¸ªéƒ¨åˆ†ä¹‹é—´ç”¨ `boundary` å­—ç¬¦ä¸²åˆ†éš”ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²åœ¨ `Content-Type` å¤´éƒ¨ä¸­æŒ‡å®šã€‚

:::

#### â“`POST` ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿä¸¤æ¬¡è¯·æ±‚

::: details ğŸ’¡

ä¸¤æ¬¡è¯·æ±‚ï¼šç¬¬ä¸€æ¬¡æ˜¯ `OPTIONS` è¯·æ±‚ï¼Œç¬¬äºŒæ¬¡å°±æ˜¯é¢„æœŸä¸­çš„ `POST` è¯·æ±‚ã€‚
  
  > `OPTIONS`ï¼šç”¨äºè¯·æ±‚è·å¾—ç”± `Request-URI` æ ‡è¯†çš„èµ„æºåœ¨è¯·æ±‚/å“åº”çš„é€šä¿¡è¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨çš„åŠŸèƒ½é€‰é¡¹ã€‚
  
äº§ç”Ÿ `OPTIONS` è¯·æ±‚çš„åŸå› ï¼š
    
  - æ·»åŠ äº†è‡ªå®šä¹‰å¤´éƒ¨ `Header`
    > ä¾‹å¦‚ï¼šåœ¨å¤´éƒ¨æ·»åŠ ä¸€ä¸‹ `token` ä¿¡æ¯æ¥æ ¡éªŒç”¨æˆ·ä¿¡æ¯
    
  - å‘ç”Ÿäº†è·¨åŸŸ
  
:::

> â“å¦‚ä½•é¿å… `OTPIONS` è¯·æ±‚

::: details ğŸ’¡

é€šè¿‡ç¡®ä¿è¯·æ±‚æ˜¯ä¸€ä¸ªâ€œç®€å•è¯·æ±‚â€ (`simple request`)ï¼Œæ¥é¿å…ä¸ä¼šè§¦å‘é¢„æ£€è¯·æ±‚ã€‚

  - è¯·æ±‚æ–¹æ³•ä¸º `GET`ã€`HEAD` æˆ– `POST`ã€‚
  - ä½¿ç”¨è‡ªåŠ¨è®¾ç½®çš„å¤´ï¼ˆå¦‚ `Connection`ã€`Content-Type`ã€`User-Agent`...ï¼‰ã€‚
  - `Content-Type` çš„å€¼åªé™äºä»¥ä¸‹ä¸‰è€…ä¹‹ä¸€ï¼š`text/plain`ã€`multipart/form-data`ã€`application/x-www-form-urlencoded`ã€‚å¦‚æœéœ€è¦å‘é€ä¸€ä¸ª `JSON` æ ¼å¼çš„æ•°æ®ï¼Œå¯èƒ½éœ€è¦åœ¨æœåŠ¡å™¨ç«¯æ”¹å˜ä¸€äº›è®¾ç½®ï¼Œæ¯”å¦‚ä½¿ç”¨ `text/plain` æ¥æ¥æ”¶ `JSON` æ•°æ®ã€‚
    
:::

#### â“`HTTP` ä¸­çš„ç®€å•è¯·æ±‚å’Œå¤æ‚è¯·æ±‚

::: details ğŸ’¡

  - ç®€å•è¯·æ±‚ï¼š
    * `HTTP` æ–¹æ³•ä¸º `HEAD`ã€`GET` æˆ– `POST`ã€‚
    * `HTTP` å¤´ä¿¡æ¯ä¸è¶…å‡ºä»¥ä¸‹å­—æ®µï¼š`Accept`ã€`Accept-Language`ã€`Content-Language`ã€`Content-Type`ï¼ˆä½†åªé™äº`application/x-www-form-urlencoded`ã€`multipart/form-data`ã€`text/plain`ï¼‰ä»¥åŠ`DPR`ã€`Downlink`ã€`Save-Data`ã€`Viewport-Width`ã€`Width`ã€‚

  - å¤æ‚è¯·æ±‚ï¼šä¸æ»¡è¶³ä¸Šè¿°æ¡ä»¶çš„è¯·æ±‚ï¼Œå°±è§†ä¸ºå¤æ‚è¯·æ±‚ã€‚

è·¨åŸŸèµ„æºå…±äº« (`CORS`) è¯·æ±‚
  
  - ç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨ç›´æ¥å‘å‡º `CORS` è¯·æ±‚ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯åœ¨å¤´ä¿¡æ¯ä¸­ï¼Œå¢åŠ ä¸€ä¸ª `Origin` å­—æ®µã€‚
  - å¤æ‚è¯·æ±‚ï¼Œ`CORS` è¯·æ±‚ä¼šåœ¨æ­£å¼é€šä¿¡ä¹‹å‰ï¼Œå¢åŠ ä¸€æ¬¡ `HTTP` æŸ¥è¯¢è¯·æ±‚ï¼Œç§°ä¸º"é¢„æ£€"è¯·æ±‚ï¼ˆ`preflight`ï¼‰ã€‚æµè§ˆå™¨é¦–å…ˆä¼šå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ª `HTTP OPTIONS` è¯·æ±‚å¤´ï¼Œæ£€æµ‹æœåŠ¡ç«¯æ˜¯å¦æ”¯æŒè·¨åŸŸè¯·æ±‚ï¼Œä¹‹åæ‰ä¼šå‘å‡ºå®é™…çš„ `HTTP` è¯·æ±‚ã€‚
    
:::

### çŠ¶æ€ç 

#### â“`HTTP` çŠ¶æ€ç  `2XXï¼Œ3XXï¼Œ4XXï¼Œ5XX` åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆ

::: details

> `HTTP` çŠ¶æ€ç ï¼šæœåŠ¡å™¨åœ¨å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œå¯¹è¯¥è¯·æ±‚çš„å“åº”çŠ¶æ€è¿›è¡Œæ ‡è¯†çš„ä¸€ç§æ–¹å¼ã€‚

  - `2XX`ï¼ˆæˆåŠŸï¼‰- è¡¨ç¤ºæˆåŠŸå¤„ç†äº†è¯·æ±‚çš„çŠ¶æ€ç ã€‚
    * 200 `OK`ï¼Œè¡¨ç¤ºè¯·æ±‚æˆåŠŸã€‚
    * 201 `Created`ï¼Œè¡¨ç¤ºå·²åˆ›å»ºæˆåŠŸã€‚
    * 204 `No Content`ï¼Œè¡¨ç¤ºå¤„ç†æˆåŠŸï¼Œä½†æ— éœ€è¿”å›å†…å®¹ã€‚

  - `3XX`ï¼ˆé‡å®šå‘ï¼‰- è¡¨ç¤ºéœ€è¦å®¢æˆ·ç«¯è¿›è¡Œé¢å¤–æ“ä½œçš„çŠ¶æ€ç ã€‚
    * 301 `Moved Permanently`ï¼Œè¡¨ç¤ºèµ„æºå·²è¢«æ°¸ä¹…ç§»åŠ¨ã€‚
    * 302 `Found`ï¼Œè¡¨ç¤ºèµ„æºä¸´æ—¶ç§»åŠ¨ã€‚
    * 304 `Not Modified`ï¼Œè¡¨ç¤ºèµ„æºæœªæ›´æ”¹(ç¼“å­˜)ã€‚

  - `4XX`ï¼ˆå®¢æˆ·ç«¯é”™è¯¯ï¼‰ - è¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚æœ‰é”™è¯¯çš„çŠ¶æ€ç ã€‚
    * 400 `Bad Request`ï¼Œè¡¨ç¤ºè¯·æ±‚æ ¼å¼é”™è¯¯ã€‚
    * 401 `Unauthorized`ï¼Œè¡¨ç¤ºè¯·æ±‚æœªè¢«æˆæƒã€‚
    * 404 `Not Found`ï¼Œè¡¨ç¤ºè¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ã€‚

  - `5XX`ï¼ˆæœåŠ¡å™¨é”™è¯¯ï¼‰ - è¡¨ç¤ºæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯çš„çŠ¶æ€ç ã€‚
    * 500 `Internal Server Error`ï¼Œè¡¨ç¤ºæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ã€‚
    * 502 `Bad Gateway`ï¼Œè¡¨ç¤ºç½‘å…³é”™è¯¯ã€‚
    * 503 `Service Unavailable`ï¼Œè¡¨ç¤ºæœåŠ¡å™¨å½“å‰æ— æ³•å¤„ç†è¯·æ±‚ã€‚

:::

#### â“ä¸ºä»€ä¹ˆè¦è®¾è®¡ `304` è¿™ä¸ªçŠ¶æ€ç 

::: details

> `HTTP 304` çŠ¶æ€ç ä¹Ÿè¢«ç§°ä½œ `Not Modified`ï¼Œå³ â€œæœªè¢«ä¿®æ”¹â€ã€‚å½“å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªå¸¦æœ‰ `If-Modified-Since` æˆ–` If-None-Match` å¤´çš„æ¡ä»¶è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªçŠ¶æ€ç æ¥å‘ŠçŸ¥å®¢æˆ·ç«¯ï¼Œè‡ªä»ä¸Šæ¬¡è·å–èµ„æºä»¥æ¥ï¼Œèµ„æºæ²¡æœ‰ä»»ä½•æ”¹å˜ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯å¯ä»¥ç»§ç»­ä½¿ç”¨å®ƒçš„æœ¬åœ°æ‹·è´ã€‚

è®¾è®¡åŸå› ï¼š
    
  - æé«˜æ•ˆç‡ï¼šå¦‚æœèµ„æºè‡ªä¸Šæ¬¡è·å–ä»¥æ¥æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆé‡æ–°å‘é€è¯¥èµ„æºæ˜¾ç„¶æ˜¯ä¸€ç§æµªè´¹ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤§å‹èµ„æºï¼ˆå¦‚å›¾åƒã€è§†é¢‘ã€å¤§å‹ `CSS` æˆ– `JavaScript` æ–‡ä»¶ï¼‰è€Œè¨€ã€‚`304` çŠ¶æ€ç è®©æœåŠ¡å™¨æœ‰å¯èƒ½ä»…ä»…é€šè¿‡å‘é€ä¸€ä¸ªå°çš„ `HTTP` å¤´æ¥æ»¡è¶³è¯·æ±‚ï¼Œè¿™æ˜¾è‘—å‡å°‘äº†æ•°æ®é‡ï¼ŒèŠ‚çœäº†å¸¦å®½ï¼Œæé«˜äº†å“åº”é€Ÿåº¦ã€‚

  - å‡å°‘æœåŠ¡å™¨è´Ÿè½½ï¼šå¯¹äºå¾ˆå¤šåŠ¨æ€ç”Ÿæˆçš„èµ„æºï¼ˆæ¯”å¦‚åŸºäºæ•°æ®åº“çš„ç½‘é¡µå†…å®¹ï¼‰ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ç”Ÿæˆå’Œå‘é€æ–°èµ„æºå¯èƒ½ä¼šç»™æœåŠ¡å™¨å¸¦æ¥å¾ˆå¤§çš„è®¡ç®—è´Ÿæ‹…ï¼Œé€šè¿‡å‘é€ä¸€ä¸ª `304` çŠ¶æ€ï¼ŒæœåŠ¡å™¨å¯ä»¥é¿å¼€è¿™ä¸ªè´Ÿæ‹…ã€‚
    
æ€»ç»“ï¼š`304` çŠ¶æ€ç ä¸ºäº†æé«˜ `Web` æ€§èƒ½ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œå‡å°‘æœåŠ¡å™¨è´Ÿè½½è€Œè®¾è®¡ã€‚

:::

### åŠŸèƒ½çŸ¥è¯†

#### â“`HTTP` çš„è¯·æ±‚æŠ¥æ–‡ç»“æ„

::: details ğŸ’¡

  - è¯·æ±‚è¡Œï¼ˆ`Request Line`ï¼‰ï¼šåŒ…æ‹¬è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚ `URI`ã€åè®®ç‰ˆæœ¬ï¼Œä¸‰è€…é€šè¿‡ç©ºæ ¼åˆ†éš”ã€‚
    > ä¾‹å¦‚ `GET /index.html HTTP/1.1`

  - è¯·æ±‚å¤´éƒ¨ï¼ˆ`Request Headers`ï¼‰ï¼šåŒ…æ‹¬ä¸€ç³»åˆ—çš„é”®å€¼å¯¹ï¼Œæ¯å¯¹é”®å€¼ä¹‹é—´ä½¿ç”¨å†’å·":"åˆ†éš”ã€‚
    > ä¾‹å¦‚ `Host: www.example.com`

  - ç©ºè¡Œï¼ˆ`CR+LF`ï¼‰ï¼šä½¿ç”¨å›è½¦ï¼ˆ`CR`ï¼‰å’Œæ¢è¡Œï¼ˆ`LF`ï¼‰è¡¨ç¤ºï¼Œè¡¨ç¤ºè¯·æ±‚å¤´éƒ¨ç»“æŸã€‚

  - è¯·æ±‚ä½“ï¼ˆRequest Bodyï¼‰ï¼šä¹Ÿå«æ¶ˆæ¯ä½“ï¼Œä¸»è¦ç”¨äºPOSTå’ŒPUTè¯·æ±‚ä¸­ï¼Œæäº¤çš„æ•°æ®é€šå¸¸æ”¾åœ¨æ­¤å¤„ã€‚

ğŸŒ° ä¸€ä¸ª `POST` è¯·æ±‚ï¼Œè¯·æ±‚èµ„æºæ˜¯ä¸»é¡µï¼Œ`HTTP` åè®®ç‰ˆæœ¬æ˜¯1.1 ã€‚å¤´éƒ¨å­—æ®µä¸­åŒ…å«äº†ä¸»æœºåã€ç”¨æˆ·ä»£ç†ã€æ¥å—çš„å†…å®¹ç±»å‹ç­‰ä¿¡æ¯ã€‚è¯·æ±‚ä½“ä¸­åŒ…å«äº†è¡¨å•æäº¤çš„æ•°æ®ã€‚

```
POST / HTTP/1.1
Host: www.example.com
User-Agent: curl/7.43.0
Accept: */*
Content-Length: 11
Content-Type: application/x-www-form-urlencoded

key1=value1
```

:::

#### â“`HTTP` å¦‚ä½•å®ç°é•¿è¿æ¥

::: details ğŸ’¡

> `HTTP` é•¿è¿æ¥ï¼Œåˆç§°ä¸º â€œæŒç»­æ€§è¿æ¥â€ï¼ˆ`Persistent Connection`ï¼‰

å®ç°ï¼š

  - `HTTP/1.0` ç‰ˆæœ¬è¦æ”¯æŒ â€œæŒç»­æ€§è¿æ¥â€ï¼Œå¿…é¡»åœ¨ `HTTP` å¤´ä¿¡æ¯ä¸­æŒ‡å®š `Connection: keep-alive`ã€‚

  - `HTTP/1.1` ç‰ˆæœ¬ä¸­æ‰€æœ‰çš„è¿æ¥é»˜è®¤éƒ½æ˜¯ â€œæŒç»­æ€§è¿æ¥â€ï¼Œé™¤éæ˜ç¡®æŒ‡å®š `Connection: close` å…³é—­å®ƒã€‚è¦å®ç°é•¿è¿æ¥ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¸å¿…åšä»»ä½•ç‰¹åˆ«çš„å¤„ç†ã€‚

ä¼˜ç‚¹ï¼šå¤ç”¨å·²å»ºç«‹çš„ `TCP` è¿æ¥ï¼Œå‡å°‘ `TCP` è¿æ¥çš„åˆ›å»ºå’Œå…³é—­æ‰€å¸¦æ¥çš„é¢å¤–å¼€é”€ï¼Œé™ä½äº†å»¶è¿Ÿï¼Œæé«˜äº†ç½‘é¡µåŠ è½½é€Ÿåº¦ã€‚

ç¼ºç‚¹ï¼šå¦‚æœæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´æ²¡æœ‰æ•°æ®äº¤æ¢ï¼Œè¿™ä¸ªè¿æ¥å°†ä¼šä¸€ç›´å ç”¨èµ„æºï¼Œå¯èƒ½ä¼šå¼•å‘ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚è¿æ¥æ•°è¿‡å¤šå¯¼è‡´æœåŠ¡å™¨èµ„æºè€—å°½ã€‚

åº”ç”¨ï¼š`Websocket` å’ŒæœåŠ¡å™¨æ¨é€(`Server Sent Event`)ç­‰å®æ—¶é€šä¿¡æŠ€æœ¯ä¸­ï¼Œå®ƒä»¬å¯¹è¿æ¥çš„ä¿æŒæ—¶é—´å’Œäº¤äº’æ¨¡å¼ç­‰æœ‰æ›´å…·ä½“çš„è¦æ±‚ã€‚

:::

#### â“`HTTP` æ–­ç‚¹ç»­ä¼ æ¶‰åŠåˆ°å“ªäº›å­—æ®µ

::: details ğŸ’¡

æ–­ç‚¹ç»­ä¼  `Header` å­—æ®µï¼š

  - `Content-Length`ï¼šæ ‡è¯†æ•´ä¸ªå®ä½“æ–‡ä»¶çš„å¤§å°ï¼Œå•ä½ä¸ºå­—èŠ‚ã€‚

  - `Content-Range`ï¼šåœ¨æ•´ä¸ªå®ä½“ä¸­æœ¬æ¬¡å‘é€çš„å­—èŠ‚ä½ç½®å’Œæ€»å¤§å°ã€‚
    > ä¾‹å¦‚ï¼Œ`Content-Range: bytes 0-499/1234`ï¼Œè¡¨ç¤ºæœ¬æ¬¡è¯·æ±‚æ˜¯è¯·æ±‚ç¬¬ `0-499` å­—èŠ‚ï¼Œæ•´ä¸ªæ–‡ä»¶å¤§å°ä¸º `1234` å­—èŠ‚ã€‚

  - `Accept-Ranges`ï¼šè¡¨ç¤ºæœåŠ¡å™¨æ˜¯å¦æ”¯æŒèŒƒå›´è¯·æ±‚ï¼ŒåŠå…¶æ”¯æŒçš„å•ä½ï¼Œé€šå¸¸ä¸º`bytes`ã€‚
  
  - `ETag`ï¼šè¡¨ç¤ºèµ„æºçš„ç‰¹å®šç‰ˆæœ¬ï¼Œé€šå¸¸æ˜¯ç”±èµ„æºå†…å®¹çš„å“ˆå¸Œå€¼è®¡ç®—å¾—åˆ°ã€‚

:::

> â“æ€ä¹ˆç¡®ä¿åˆ†ç‰‡å…¨éƒ¨ä¼ è¾“å®Œåï¼Œæ–‡ä»¶çš„å®Œæ•´æ€§å’Œæ— ç¯¡æ”¹

::: details ğŸ’¡
    
  - ä½¿ç”¨ `Content-Length` å’Œ `Content-Range` ç¡®è®¤æ¥æ”¶åˆ°çš„æ•°æ®æ®µçš„æ­£ç¡®æ€§ã€‚
   
  - ä½¿ç”¨ `ETag` ã€‚åœ¨æ•´ä¸ªä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œ`ETag` åº”è¯¥ä¿æŒä¸å˜ã€‚å¦‚æœåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ `ETag` å‘ç”Ÿæ”¹å˜ï¼Œè¯´æ˜æ–‡ä»¶å·²ç»è¢«ä¿®æ”¹ï¼Œéœ€è¦é‡æ–°å¼€å§‹ä¼ è¾“ã€‚

  - åœ¨æ‰€æœ‰åˆ†ç‰‡ä¼ è¾“å®Œæ¯•åï¼Œå¯¹æ¥æ”¶åˆ°çš„æ–‡ä»¶è¿›è¡Œæ ¡éªŒï¼Œæ¯”å¦‚ä½¿ç”¨ `MD5` æˆ–è€… `SHA` éªŒè¯å…¶å®Œæ•´æ€§ã€‚å¦‚æœæ ¡éªŒç»“æœå’Œé¢„æœŸç›¸ç¬¦ï¼Œè¯´æ˜æ–‡ä»¶ä¼ è¾“å®Œæ•´å¹¶ä¸”æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚

:::

------

## HTTPS

### â“`HTTPS` vs `HTTP`

::: details ğŸ’¡

æ¦‚å¿µï¼š

  - `HTTP`: æ˜¯åŸºäº `TCP/IP` é€šä¿¡åè®®çš„ä¸€ç§æ•°æ®ä¼ è¾“åè®®ã€‚
  - `HTTPS` : `= HTTP + SSL`ï¼Œåœ¨ `HTTP` åè®®çš„åŸºç¡€åŠ ä¸Šäº†åŠ å¯†å¤„ç†ã€‚

åŒºåˆ«ï¼š

  - å®‰å…¨æ€§ï¼š
   
    * `HTTP`ï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰ï¼šæ˜æ–‡ä¼ è¾“ï¼Œæ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¦‚æœè¢«æ‹¦æˆªï¼Œå°±å¯ä»¥ç›´æ¥æŸ¥çœ‹å†…å®¹ï¼Œè¿™å°±å­˜åœ¨å®‰å…¨éšæ‚£ã€‚

    * `HTTPS`ï¼ˆè¶…æ–‡æœ¬ä¼ è¾“å®‰å…¨åè®®ï¼‰ï¼šåœ¨ `HTTP` çš„åŸºç¡€ä¸Šå¢åŠ äº† `SSL/TLS` åè®®ï¼Œé€šè¿‡è¯ä¹¦æ¥éªŒè¯æœåŠ¡å™¨çš„èº«ä»½ï¼Œå¹¶å¯¹å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä¿æŠ¤äº†æ•°æ®çš„ç§å¯†æ€§å’Œå®Œæ•´æ€§ã€‚

  - æ€§èƒ½ï¼š

    * `HTTP`ï¼šå¤„ç†é€Ÿåº¦æ›´å¿«ï¼Œå»¶è¿Ÿæ›´ä½ï¼Œä½†è¿™æ˜¯ä»¥å®‰å…¨æ€§ä¸ºä»£ä»·çš„ã€‚

    * `HTTPS`ï¼šéœ€è¦å¤„ç†åŠ å¯†å’Œè§£å¯†è¿‡ç¨‹ï¼Œå¢åŠ äº†ä¸€äº›å¤„ç†å¼€é”€ï¼Œå¯èƒ½å¯¹æ€§èƒ½äº§ç”Ÿå½±å“ã€‚ä½†éšç€æŠ€æœ¯çš„å‘å±•ï¼Œè¿™ç‚¹æ€§èƒ½å½±å“åœ¨å¾ˆå¤šåº”ç”¨ä¸­å·²ç»å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚

  - æˆæœ¬
  
    * `HTTP`ï¼šä¸è¦è¯ä¹¦
    * `HTTPS`ï¼šéœ€è¦è¯ä¹¦ï¼Œè™½ç„¶æœ‰å…è´¹çš„è¯ä¹¦ï¼Œä½†é«˜çº§çš„è¯ä¹¦å¯èƒ½éœ€è¦ä»˜è´¹ã€‚

:::

### â“`HTTPS` æ¯”èµ· `HTTP` æœ‰ä»€ä¹ˆç¼ºé™·

::: details ğŸ’¡

  - å»ºç«‹è¿æ¥æ—¶éœ€è¦èŠ±è´¹æ›´é•¿çš„æ—¶é—´ï¼š`HTTPS` éœ€è¦è¿›è¡Œä¸€æ¬¡ "æ¡æ‰‹" è¿‡ç¨‹æ¥å»ºç«‹ä¸€ä¸ªå®‰å…¨è¿æ¥ã€‚è¿™ä¸ªè¿‡ç¨‹éœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´æ¥å›ä¼ è¾“å¤šæ¬¡ä¿¡æ¯ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¿æ¥çš„å»¶è¿Ÿã€‚ç„¶è€Œï¼Œç°ä»£æŠ€æœ¯å¦‚ `HTTP/2`ã€`TLS 1.3` åŠ `QUIC` å·²ç»å¤§å¤§ç¼©çŸ­äº†è¿™ä¸ªå»¶è¿Ÿã€‚

  - æ›´é«˜çš„æœåŠ¡å™¨èµ„æºæ¶ˆè€—ï¼šç”±äº `HTTPS` åœ¨ä¼ è¾“æ•°æ®å‰éœ€è¦è¿›è¡ŒåŠ å¯†å¤„ç†ï¼Œå› æ­¤ä¼šä½¿ç”¨æ›´å¤šçš„ `CPU` å’Œå†…å­˜èµ„æºã€‚è¿™å¯èƒ½ä¼šå¯¹å¤„ç†èƒ½åŠ›æœ‰é™çš„æœåŠ¡å™¨é€ æˆä¸€å®šçš„è´Ÿæ‹…ã€‚

  - è¯ä¹¦çš„è·å–å’Œç®¡ç†ï¼š`HTTPS` éœ€è¦ä»è®¤è¯æœºæ„è·å– `SSL/TLS` è¯ä¹¦ã€‚è™½ç„¶æœ‰ä¸€äº›å…è´¹çš„è¯ä¹¦ä¾›ç½‘ç«™ä½¿ç”¨ï¼Œä½†å¦‚æœéœ€è¦é«˜çº§çš„è¯ä¹¦ï¼Œå¯èƒ½éœ€è¦é¢å¤–ä»˜è´¹ã€‚æ­¤å¤–ï¼Œè¯ä¹¦çš„å®šæœŸæ›´æ–°å’Œç®¡ç†ä¹Ÿéœ€è¦æŠ•å…¥ä¸€å®šçš„ç»´æŠ¤æˆæœ¬ã€‚

  - å…¼å®¹æ€§ï¼šæœ‰äº›è€çš„è®¾å¤‡æˆ–è€…ç³»ç»Ÿå¯èƒ½ä¸æ”¯æŒ `HTTPS` æˆ–è€…åªæ”¯æŒè€çš„ã€å®‰å…¨æ€§è¾ƒä½çš„ `SSL/TLS` ç‰ˆæœ¬ã€‚
    
:::

### â“`CA` è¯ä¹¦æ˜¯ä»€ä¹ˆè§£é‡Šä¸€ä¸‹

::: details ğŸ’¡

> `CA` è¯ä¹¦ï¼Œå…¨ç§°ä¸ºè¯ä¹¦æˆæƒï¼ˆ`Certificate Authority`ï¼‰è¯ä¹¦ï¼Œæ˜¯ä¸€ä¸ªå¯ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹æœºæ„å‘æ”¾çš„æ•°å­—è¯ä¹¦ã€‚`CA` è¯ä¹¦çš„ä½œç”¨ä¸»è¦æ˜¯éªŒè¯ç½‘ç«™æœåŠ¡å™¨çš„èº«ä»½ä¿¡æ¯ï¼Œä¿éšœä¿¡æ¯åœ¨ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­çš„å®‰å…¨æ€§ã€‚

  `CA` è¯ä¹¦ä¸­åŒ…å«äº†å…¬é’¥ã€èº«ä»½ä¿¡æ¯å’Œç­¾åç­‰å†…å®¹ã€‚å…¬é’¥ç”¨äºåŠ å¯†ä¿¡æ¯æˆ–è€…éªŒè¯æ•°å­—ç­¾åï¼Œèº«ä»½ä¿¡æ¯åˆ™æ˜¯è¯æ˜æœåŠ¡å™¨çš„èº«ä»½ï¼Œç­¾ååˆ™æ˜¯ `CA` æœºæ„å¯¹è¯ä¹¦å†…å®¹çš„è®¤è¯ã€‚

äº’è”ç½‘ä¸Šçš„å¾ˆå¤šäº¤äº’éƒ½éœ€è¦æ•°å­—è¯ä¹¦çš„éªŒè¯ï¼Œæ¯”å¦‚HTTPSåè®®å°±éœ€è¦ç”¨åˆ°ã€‚ç”¨æˆ·åœ¨è®¿é—®ä¸€ä¸ªHTTPSç½‘ç«™æ—¶ï¼Œä¼šå…ˆè·å–åˆ°ç½‘ç«™çš„CAè¯ä¹¦ï¼Œé€šè¿‡éªŒè¯è¯ä¹¦çš„ç­¾åï¼Œç¡®è®¤è¯ä¹¦çš„æœ‰æ•ˆæ€§å’ŒæœåŠ¡å™¨çš„èº«ä»½ï¼Œä¹‹åå†ä½¿ç”¨è¯ä¹¦ä¸­çš„å…¬é’¥åŠ å¯†ä¿¡æ¯è¿›è¡Œä¼ è¾“ï¼Œä»è€Œä¿è¯ä¿¡æ¯çš„å®‰å…¨ã€‚

æ€»çš„æ¥è¯´ï¼ŒCAè¯ä¹¦å°±åƒæ˜¯ä¸€ä¸ªç½‘ç»œä¸–ç•Œçš„èº«ä»½è¯ï¼Œç”¨æ¥ä¿è¯ä¿¡æ¯å®‰å…¨å’Œèº«ä»½éªŒè¯ã€‚

:::

### â“`CA` è¯ä¹¦ç”³è¯·æµç¨‹

::: details ğŸ’¡

  - é€‰æ‹©è¯ä¹¦æœåŠ¡å•†ï¼šé¦–å…ˆéœ€è¦é€‰æ‹©ä¸€ä¸ªå¯ä¿¡ä»»çš„è¯ä¹¦æœåŠ¡å•†ï¼ˆ`Certificate Authority`ï¼Œ`CA`ï¼‰ï¼Œå¦‚`DigiCert`ã€`Symantec`ã€`Let's Encrypt`ç­‰ã€‚

  - ç”Ÿæˆ `CSR`ï¼šåœ¨æœåŠ¡å™¨ä¸Šç”Ÿæˆä¸€ä¸ªè¯ä¹¦ç­¾åè¯·æ±‚ï¼ˆ`Certificate Signing Request`ï¼Œ`CSR`ï¼‰ã€‚`CSR` åŒ…å«äº†ä½ çš„å…¬é’¥å’Œä¸€äº›å®ä½“ä¿¡æ¯ï¼ˆä¾‹å¦‚ä½ çš„ç»„ç»‡åç§°ã€åŸŸåç­‰ï¼‰ã€‚

  - æäº¤ `CSR`ï¼šå°†ç”Ÿæˆçš„ `CSR` æäº¤ç»™æ‰€é€‰æ‹©çš„è¯ä¹¦æœåŠ¡å•†ã€‚

  - éªŒè¯åŸŸåæ‰€æœ‰æƒï¼šè¯ä¹¦æœåŠ¡å•†ä¼šéªŒè¯åŸŸåçš„æ‰€æœ‰æƒã€‚éªŒè¯æ–¹å¼é€šå¸¸æœ‰é€šè¿‡é‚®ä»¶éªŒè¯ã€`DNS` è®°å½•éªŒè¯ã€`HTTP` æ–‡ä»¶éªŒè¯ç­‰ã€‚

  - æä¾›å…¬å¸èµ„è´¨ï¼ˆå¯é€‰ï¼‰ï¼šå¦‚æœæ˜¯ä¼ä¸šçº§çš„è¯ä¹¦ï¼Œåƒæ˜¯`OV`ï¼ˆ`Organization Validation`ï¼‰æˆ–è€…`EV`ï¼ˆ`Extended Validation`ï¼‰è¯ä¹¦ï¼Œè¿˜éœ€è¦æä¾›ä¸€äº›ç›¸å…³çš„å…¬å¸èµ„è´¨ï¼Œå¦‚è¥ä¸šæ‰§ç…§å‰¯æœ¬ç­‰ï¼Œä»¥ä¾›è¯ä¹¦æœåŠ¡å•†è¿›è¡Œå®¡æ ¸ã€‚

  - å®¡æ ¸é€šè¿‡åè·å–è¯ä¹¦ï¼šå®¡æ ¸é€šè¿‡åï¼Œè¯ä¹¦æœåŠ¡å•†ä¼šæä¾›ä¸€ä¸ªæ•°å­—è¯ä¹¦ï¼ˆé€šå¸¸æ˜¯ `.crt` æˆ– `.pem` æ–‡ä»¶ï¼‰ã€‚è¿™ä¸ªè¯ä¹¦åŒ…æ‹¬äº†å…¬é’¥å’Œ `CA` çš„ç­¾åç­‰ä¿¡æ¯ã€‚

  - å®‰è£…è¯ä¹¦ï¼šå°†å¾—åˆ°çš„ `CA` è¯ä¹¦å®‰è£…åˆ°æœåŠ¡å™¨ä¸Šã€‚å®‰è£…çš„æ–¹å¼å’Œæ­¥éª¤æ ¹æ®æœåŠ¡å™¨å’Œä½¿ç”¨çš„æœåŠ¡æœ‰æ‰€ä¸åŒã€‚

  - æµ‹è¯•éªŒè¯ï¼šå®‰è£…å®Œè¯ä¹¦åï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨æ¥æµ‹è¯•éªŒè¯ï¼Œçœ‹æ˜¯å¦èƒ½æ­£å¸¸è®¿é—® `https` çš„ç½‘å€å¹¶ä¸”æ˜¾ç¤ºå‡ºæ­£ç¡®çš„è¯ä¹¦ä¿¡æ¯ã€‚
    
:::

### â“å¦‚ä½•å°† `CA` è¯ä¹¦å®‰è£…åˆ°æœåŠ¡å™¨ä¸Š

::: details ğŸ’¡

> å®‰è£… `CA` è¯ä¹¦åˆ°æœåŠ¡å™¨ä¸Šçš„å…·ä½“æ­¥éª¤ä¸»è¦å–å†³äºä½ çš„æœåŠ¡å™¨ç±»å‹å’Œä½¿ç”¨çš„ `web` æœåŠ¡å™¨è½¯ä»¶ã€‚

  - `Nginx` æœåŠ¡å™¨çš„å®‰è£…æ­¥éª¤ï¼š

    * è·å–è¯ä¹¦ï¼š
        > å‡è®¾å·²ä» `CA` è·å–äº†è¯ä¹¦æ–‡ä»¶ï¼Œé€šå¸¸æ˜¯åˆ†åˆ«ä»¥`.crt` ï¼ˆæ‚¨çš„åŸŸæœåŠ¡å™¨è¯ä¹¦ï¼‰å’Œ `.ca-bundle` ï¼ˆ`CA` é“¾è¯ä¹¦ï¼‰ä¸ºåç¼€çš„ä¸¤ä¸ªæ–‡ä»¶ã€‚
    * ä¸Šä¼ è¯ä¹¦æ–‡ä»¶ï¼š
        > å°†è¿™ä¸¤ä¸ªè¯ä¹¦æ–‡ä»¶ä¸Šä¼ åˆ° `Nginx` æœåŠ¡å™¨ä¸Šï¼Œå¹¶å­˜æ”¾åœ¨ä¸€ä¸ªå®‰å…¨çš„ç›®å½•ä¸‹ã€‚ä¾‹å¦‚ï¼š`/etc/nginx/certs`ã€‚
    * åˆå¹¶è¯ä¹¦æ–‡ä»¶ï¼š
        > å› ä¸º `Nginx` æœŸæœ›æœåŠ¡å™¨è¯ä¹¦å’Œä¸­é—´è¯ä¹¦ï¼ˆ`CA` é“¾è¯ä¹¦ï¼‰åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥éœ€è¦å°†ä¸¤ä¸ªæ–‡ä»¶åˆå¹¶åˆ°ä¸€èµ·ã€‚ 
        
        ```shell
        cat yourdomain.crt yourdomain.ca-bundle > yourdomain_with_chain.crt
        ```

    * é…ç½® `Nginx`ï¼š
        > æ‰“å¼€ `Nginx` çš„é…ç½®æ–‡ä»¶ï¼Œå¯èƒ½åœ¨ `/etc/nginx/nginx.conf` æˆ– `/etc/nginx/sites-available/default` æˆ–è€…å…¶ä»–ä½ç½®ï¼Œæ‰¾åˆ° `server` éƒ¨åˆ†ï¼Œå¹¶æ·»åŠ æˆ–ä¿®æ”¹ä»¥ä¸‹è¡Œï¼Œä½¿å…¶æŒ‡å‘ä½ çš„è¯ä¹¦æ–‡ä»¶å’Œç§é’¥æ–‡ä»¶ï¼š
        
        ```shell
        server {
           listen 443 ssl;
           server_name yourdomain.com;
           # ssl_certificate æŒ‡å‘è¯ä¹¦
           ssl_certificate /etc/nginx/certs/yourdomain_with_chain.crt;
           # ssl_certificate_key æŒ‡å‘ç§é’¥æ–‡ä»¶
           ssl_certificate_key /etc/nginx/certs/yourdomain.key;
           ...
        }
        ```

    * é‡å¯ `Nginx`ï¼š
        > å®Œæˆä¸Šè¿°é…ç½®åï¼Œä¿å­˜é…ç½®æ–‡ä»¶ï¼Œå¹¶é‡å¯ `Nginx` ä½¿å…¶ç”Ÿæ•ˆã€‚
    
        ```shell
        sudo service nginx restart
        # æˆ–
        sudo /etc/init.d/nginx restart
        ```
        
    * éªŒè¯è¯ä¹¦å®‰è£…ï¼š
        > å®‰è£…å®Œæˆåï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—® `HTTPS` ç½‘ç«™æ¥éªŒè¯è¯ä¹¦æ˜¯å¦å·²è¢«æˆåŠŸå®‰è£…ã€‚åœ¨åœ°å€æ åº”è¯¥ä¼šæ˜¾ç¤ºä¸€ä¸ªç»¿è‰²çš„é”å›¾æ ‡ï¼Œå¯ä»¥ç‚¹å‡»å›¾æ ‡æŸ¥çœ‹è¯ä¹¦è¯¦æƒ…ã€‚
    

  - `Apache` æœåŠ¡å™¨æŒ‰ç…§æµç¨‹
    
    * è·å–è¯ä¹¦ï¼š
        > ä» `CA` è·å–çš„è¯ä¹¦é€šå¸¸åŒ…æ‹¬ä¸¤ä¸ªæ–‡ä»¶ï¼šä¸€ä¸ªæ˜¯ä»¥ `.crt` æ–‡ä»¶ï¼ˆæœåŠ¡å™¨è¯ä¹¦ï¼‰ï¼ŒåŒ…å«ä½ çš„å…¬é’¥å’Œç½‘ç«™ä¿¡æ¯ï¼›å¦ä¸€ä¸ªæ˜¯ä»¥ `.ca-bundle` ä¸ºåç¼€çš„æ–‡ä»¶ï¼ˆ`CA` é“¾è¯ä¹¦ï¼‰ï¼ŒåŒ…å«äº†ä¸ºè¯ä¹¦ç­¾åçš„ä¸­çº§ `CA` å’Œæ ¹ `CA` çš„å…¬å¼€è¯ä¹¦ã€‚
    * ä¸Šä¼ è¯ä¹¦æ–‡ä»¶ï¼š
        > å°†è·å–åˆ°çš„è¯ä¹¦æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼Œä¿å­˜åœ¨ä¸€ä¸ªå®‰å…¨çš„ç›®å½•ä¸‹ã€‚å¸¸è§çš„ç›®å½•åŒ…æ‹¬ `/etc/apache2`ã€`/etc/httpd`ã€`/etc/nginx` ç­‰ï¼Œå…·ä½“å–å†³äºä½ çš„æœåŠ¡å™¨è®¾ç½®ã€‚
    * ä¿®æ”¹ `Apache` é…ç½®æ–‡ä»¶ï¼š
        > æ‰“å¼€ `Apache` çš„é…ç½®æ–‡ä»¶ï¼ˆä¾‹å¦‚ `httpd.conf`ï¼Œä¹Ÿå¯èƒ½æ˜¯åœ¨ `sites-available` æˆ–è€…å…¶ä»–åœ°æ–¹çš„è™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶ï¼‰ï¼Œæ‰¾åˆ°æˆ–è€…æ·»åŠ ä¸€æ®µå…³äºSSLçš„é…ç½®ã€‚æŒ‡å®š `SSLCertificateFile` æŒ‡å‘åˆšåˆšä¸Šä¼ çš„ `.crt` æ–‡ä»¶ï¼Œ`SSLCertificateChainFile` æŒ‡å‘ `.ca-bundle`æ–‡ä»¶ã€‚
        
        ```xml
        <VirtualHost _default_:443>
            ...
            ServerName www.yourdomain.com
            ServerAlias yourdomain.com 
            SSLCertificateFile /path-to-your-file/yourdomain.crt 
            SSLCertificateChainFile /path-to-your-file/yourdomain.ca-bundle 
            ...
        </VirtualHost>
        ```
        
    * é‡å¯ `Apache` æœåŠ¡å™¨ï¼š
        > ä¿å­˜é…ç½®æ–‡ä»¶ï¼Œç„¶åé‡å¯ApacheæœåŠ¡å™¨æ¥åº”ç”¨æ›´æ”¹ã€‚åœ¨å‘½ä»¤è¡Œè¾“å…¥`sudo service apache2 restart`ï¼ˆä¹Ÿå¯èƒ½æ˜¯httpdï¼Œå…·ä½“å–å†³äºä½ çš„è®¾ç½®ï¼‰ã€‚

    * æµ‹è¯•è¯ä¹¦å®‰è£…ï¼š
        > ä½¿ç”¨æµè§ˆå™¨è®¿é—®ä½ çš„ç½‘ç«™ï¼ŒæŸ¥çœ‹æ˜¯å¦æ˜¾ç¤ºäº†æ­£ç¡®çš„é”æ ‡è¯†å’Œè¯ä¹¦ä¿¡æ¯ã€‚æˆ–è€…å¯ä»¥ä½¿ç”¨åœ¨çº¿çš„SSLæ£€æµ‹å·¥å…·è¿›è¡Œæ£€æŸ¥ã€‚

:::

### â“`SSL` è¯ä¹¦é™¤äº†å‹ç¼©åŠ å¯†ï¼Œè¿˜æœ‰ä»€ä¹ˆåˆ«çš„ç”¨å¤„

::: details ğŸ’¡

> `SSL`ï¼ˆSecure Sockets Layerï¼‰è¯ä¹¦æ˜¯ä¸€ç§å®‰å…¨åè®®ã€‚
  
  - åŠ å¯†ï¼š`SSL` è¯ä¹¦å¯ä»¥ç”¨æ¥å¯¹å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡è¿›è¡ŒåŠ å¯†ï¼Œé˜²æ­¢æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«æ‹¦æˆªä¸çªƒå–ã€‚

  - èº«ä»½éªŒè¯ï¼š`SSL` è¯ä¹¦åŒ…å«äº†ç½‘ç«™çš„å…¬é’¥ä»¥åŠç½‘ç«™æ‰€æœ‰è€…çš„ä¿¡æ¯ã€‚
    > å½“ç”¨æˆ·è®¿é—®ä¸€ä¸ªä½¿ç”¨ `SSL` è¯ä¹¦çš„ç½‘ç«™æ—¶ï¼Œç”¨æˆ·çš„æµè§ˆå™¨ä¼šå¯¹è¿™ä¸ªè¯ä¹¦è¿›è¡Œæ£€æŸ¥ï¼Œç¡®è®¤å…¶æœ‰æ•ˆæ€§ä»¥åŠç”±å¯ä¿¡çš„æœºæ„é¢å‘ï¼Œä»è€ŒéªŒè¯ç½‘ç«™çš„çœŸå®èº«ä»½ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç½‘ç«™æ‰€æœ‰è€…çš„ä¿¡æ¯å¯¹ç”¨æˆ·æ˜¯å¯è§çš„ï¼Œæé«˜äº†ç½‘ç«™çš„å¯ä¿¡åº¦ã€‚

  - å®Œæ•´æ€§ä¿æŠ¤ï¼š`SSL` è¯ä¹¦è¿˜ç”¨æ¥ä¿æŠ¤æ•°æ®çš„å®Œæ•´æ€§ï¼Œç¡®ä¿æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚

æ³¨æ„ï¼šè™½ç„¶è¯´ "`SSL` è¯ä¹¦åŠ å¯†"ï¼Œå®é™…ä¸Šæ›´å‡†ç¡®çš„è¯´æ³•åº”è¯¥æ˜¯ â€œ`SSL` è¯ä¹¦æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œè®©æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´å¯ä»¥å»ºç«‹å®‰å…¨çš„åŠ å¯†é€šä¿¡â€ã€‚å› ä¸ºè¯ä¹¦æœ¬èº«å¹¶ä¸è¿›è¡ŒåŠ å¯†æ“ä½œï¼Œå®ƒåŒ…å«çš„å…¬é’¥å’Œç§é’¥æ‰æ˜¯ç”¨æ¥åŠ å¯†å’Œè§£å¯†é€šä¿¡æ•°æ®çš„å·¥å…·ã€‚

:::

------

## FTP

### â“`FTP` å’Œ `HTTP` çš„åŒºåˆ«

::: details ğŸ’¡
    
  - `FTP`ï¼ˆ`File Transfer Protocol`ï¼‰: æ–‡ä»¶ä¼ è¾“åè®®

    * `FTP` æ˜¯æ–‡ä»¶ä¼ è¾“åè®®ï¼Œå®ƒæ˜¯äº’è”ç½‘ä¸Šç”¨äºä¼ è¾“æ–‡ä»¶çš„åè®®ä¹‹ä¸€ã€‚å¯ä»¥ç”¨äºä¸Šä¼ å’Œä¸‹è½½æ–‡ä»¶ã€‚
    * `FTP` ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„è¿æ¥ï¼Œä¸€ä¸ªç”¨äºä¼ è¾“æ•°æ®ï¼Œå¦ä¸€ä¸ªç”¨äºæ§åˆ¶æ–­å¼€å’Œé‡æ–°è¿æ¥ã€‚
    * `FTP` éœ€è¦ç™»å½•è®¤è¯ï¼Œå³éœ€è¦ç”¨æˆ·åå’Œå¯†ç æ‰èƒ½è®¿é—®å’Œæ§åˆ¶æ–‡ä»¶ã€‚
    * `FTP` å¯ä»¥ç»è¿‡é…ç½®ä»¥æ”¯æŒåŒ¿åè®¿é—®ï¼Œè¿™ä½¿å¾—ä»»ä½•äººéƒ½å¯ä»¥ä¸‹è½½å…¬å¼€çš„æ–‡ä»¶ã€‚

  - `HTTP`ï¼ˆ`Hypertext Transfer Protocol`ï¼‰

    * `HTTP` æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œå®ƒæ˜¯äº’è”ç½‘ä¸Šç”¨äºä¼ è¾“è¶…æ–‡æœ¬ï¼ˆå¦‚ `HTML` é¡µé¢ï¼‰çš„åè®®ä¹‹ä¸€ã€‚
    * `HTTP` ä½¿ç”¨ä¸€ä¸ªè¿æ¥è¿›è¡Œæ‰€æœ‰çš„æ•°æ®ä¼ è¾“ã€‚
    * `HTTP` é€šå¸¸ä¸éœ€è¦è®¤è¯ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ç½‘é¡µå¹¶è·å–ä¿¡æ¯ã€‚
    * `HTTP` ä¸èƒ½å®ç°åƒ `FTP` é‚£æ ·çš„æ–‡ä»¶ç®¡ç†æ“ä½œï¼Œå¦‚ç§»åŠ¨ã€åˆ é™¤ã€é‡å‘½åç­‰ã€‚
    * `HTTP` ä½¿ç”¨çš„æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œè€Œ `HTTPS`ï¼ˆ`HTTP Secure`ï¼‰åˆ™æ˜¯åœ¨ `HTTP` ä¸Šæ„å»ºçš„ä½¿ç”¨ `SSL/TLS` çš„å®‰å…¨ç‰ˆæœ¬ã€‚

æ€»ç»“ï¼š`FTP` ä¸»è¦ç”¨äºæ–‡ä»¶çš„ä¼ è¾“å’Œç®¡ç†ï¼Œè€Œ `HTTP` ä¸»è¦ç”¨äºç½‘é¡µçš„æµè§ˆå’Œä¿¡æ¯çš„è·å–ã€‚

:::

------

## DNS

### â“`DNS` æ˜¯ä»€ä¹ˆ

::: details ğŸ’¡

> `DNS`ï¼ˆ`Domain Name System`ï¼ŒåŸŸåç³»ç»Ÿï¼‰æ˜¯äº’è”ç½‘çš„ä¸€é¡¹æ ¸å¿ƒæœåŠ¡ï¼Œä¸»è¦è´Ÿè´£å°†æ˜“äºäººç±»ç†è§£çš„åŸŸåè½¬æ¢ä¸ºè®¡ç®—æœºå¯ç†è§£çš„ `IP` åœ°å€ã€‚è¿™ç§å°†åŸŸåè§£ææˆ `IP` åœ°å€çš„è¿‡ç¨‹å°±ç§°ä¸º `DNS` è§£æã€‚

  `DNS` æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œç”±å…¨çƒä¼—å¤šçš„ `DNS` æœåŠ¡å™¨ç»„æˆï¼Œå®ƒä»¬ä¹‹é—´ç›¸äº’åä½œï¼Œå°†æ‰€æœ‰çš„åŸŸåå’Œ `IP` åœ°å€ä¿¡æ¯äº’ç›¸ä¼ é€’ã€‚å½“åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä¸€ä¸ªç½‘å€æ—¶ï¼Œè®¡ç®—æœºä¼šå…ˆå‘ `DNS` æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œè¯¢é—®è¿™ä¸ªåŸŸåå¯¹åº”çš„ `IP` åœ°å€ï¼Œç„¶å `DNS` æœåŠ¡å™¨ä¼šè¿”å›è¯¥ `IP` åœ°å€ï¼Œæœ€åè®¡ç®—æœºä¼šä½¿ç”¨è¿™ä¸ª `IP` åœ°å€ä¸ç½‘ç«™æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚

ä¼˜ç‚¹ï¼š
  
  - å¯ä»¥ä½¿ç”¨å®¹æ˜“è®°å¿†çš„åŸŸåæ¥è®¿é—®éœ€è¦çš„ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦è®°ä½å¤æ‚çš„ `IP` åœ°å€ã€‚
  - ç”±äºæ˜¯åˆ†å¸ƒå¼çš„ï¼Œ`DNS` ç³»ç»Ÿå…·æœ‰å¾ˆé«˜çš„å¯æ‰©å±•æ€§å’Œå¯é æ€§ï¼Œä½¿å¾—å¯ä»¥éšæ—¶éšåœ°è®¿é—®äº’è”ç½‘ä¸Šçš„ä¿¡æ¯ã€‚

:::

### â“`DNS` è§£æè¿‡ç¨‹

::: details ğŸ’¡

  - æœ¬åœ°ç¼“å­˜æŸ¥è¯¢ï¼šå®¢æˆ·ç«¯æµè§ˆå™¨ä¼šåœ¨æœ¬åœ°ç¼“å­˜ä¸­æŸ¥è¯¢æ­¤å‰æ˜¯å¦æœ‰è¯·æ±‚è¿‡è¿™ä¸ªåŸŸåçš„è®°å½•ï¼Œå¦‚æœæœ‰ï¼Œç›´æ¥è¿”å›å¯¹åº”çš„ `IP` åœ°å€ï¼Œç„¶åè¿›è¡Œè¿æ¥è®¿é—®ã€‚
    > æœ¬åœ°ç¼“å­˜é€šå¸¸æœ‰æœ‰æ•ˆæœŸï¼Œè¶…è¿‡ä¸€æ®µæ—¶é—´åä¼šè‡ªåŠ¨æ¸…ç©ºã€‚

  - å‘æœ¬åœ° `DNS` æœåŠ¡å™¨æŸ¥è¯¢ï¼šå¦‚æœæœ¬åœ°ç¼“å­˜ä¸­æ²¡æœ‰æ‰¾åˆ°ï¼Œå®¢æˆ·ç«¯æµè§ˆå™¨ä¼šå‘æœ¬åœ°çš„ `DNS` æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚
    > æœ¬åœ° `DNS` æœåŠ¡å™¨é€šå¸¸ç”±ç”¨æˆ·çš„ `ISP`ï¼ˆ`Internet Service Provider`ï¼Œäº’è”ç½‘æœåŠ¡æä¾›å•†ï¼‰æä¾›ã€‚

  - è½¬å‘è¯·æ±‚åˆ°æ ¹æœåŠ¡å™¨ï¼šå¦‚æœæœ¬åœ° `DNS` æœåŠ¡å™¨ä¸­ä¹Ÿæ²¡æœ‰ç›¸åº”çš„è®°å½•ï¼Œå®ƒå°±ä¼šå°†è¿™ä¸ªè¯·æ±‚è½¬å‘åˆ°æ ¹ `DNS` æœåŠ¡å™¨ã€‚

  - è½¬å‘åˆ°é¡¶çº§åŸŸæœåŠ¡å™¨ï¼šæ ¹ `DNS` æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä¼šå‘Šè¯‰æœ¬åœ° `DNS` æœåŠ¡å™¨ï¼Œåº”è¯¥å»é¡¶çº§åŸŸï¼ˆ`TLD`ï¼Œ`Top-Level Domain`ï¼‰æœåŠ¡å™¨æŸ¥è¯¢ï¼Œæ¯”å¦‚ `.com` çš„æœåŠ¡å™¨ã€‚

  - è½¬å‘åˆ°æƒå¨æœåŠ¡å™¨ï¼šé¡¶çº§åŸŸæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åä¼šå‘Šè¯‰æœ¬åœ° `DNS` æœåŠ¡å™¨ï¼Œåº”è¯¥å»è¯·æ±‚ `example.com` åŸŸçš„æƒå¨ `DNS` æœåŠ¡å™¨ã€‚

  - åœ¨æƒå¨æœåŠ¡å™¨æŸ¥è¯¢å¹¶è¿”å›è§£æç»“æœï¼šæƒå¨æœåŠ¡å™¨æ‰¾åˆ°å¯¹åº”çš„ `IP` å¹¶è¿”å›åˆ°æœ¬åœ° `DNS` æœåŠ¡å™¨ï¼Œæœ¬åœ° `DNS` æœåŠ¡å™¨å°†è§£æç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ï¼ŒåŒæ—¶å°†ç»“æœç¼“å­˜åˆ°æœ¬åœ°ï¼Œä»¥ä¾¿ä¸‹æ¬¡æŸ¥è¯¢æ—¶å¿«é€Ÿè¿”å›ã€‚
  
  - å®¢æˆ·ç«¯æ”¶åˆ° `IP` åœ°å€åå’ŒæœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œä»è€Œè®¿é—®ç½‘ç«™ã€‚
  
æ€»ç»“ï¼šæ•´ä¸ª `DNS` è§£æè¿‡ç¨‹å®é™…ä¸Šæ˜¯ä¸€ä¸ªé€’å½’å’Œè¿­ä»£æŸ¥æ‰¾çš„è¿‡ç¨‹ï¼Œå¦‚æœæŸä¸€æ­¥å·²ç»æ‰¾åˆ°äº†å¯¹åº”çš„ `IP` åœ°å€ï¼Œåˆ™ä¸éœ€å†è¿›è¡Œä¸‹ä¸€æ­¥ã€‚

:::

### â“æ¥æ”¶åˆ° `DNS` æŸ¥è¯¢ç»“æœä¹‹åè¿˜åšäº†ä»€ä¹ˆ

::: details ğŸ’¡

æ¥æ”¶åˆ° `DNS` æŸ¥è¯¢ç»“æœåï¼Œæµè§ˆå™¨æˆ–æ“ä½œç³»ç»Ÿä¼šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
  
  - å­˜å‚¨ç»“æœ: æ¥æ”¶åˆ°çš„ `DNS` ç»“æœä¼šè¢«å­˜å‚¨åˆ° `DNS` ç¼“å­˜æ± ä¸­ï¼Œä»¥ä¾¿å°†æ¥å†æ¬¡è®¿é—®ç›¸åŒåŸŸåæ—¶å¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­è·å–ï¼Œè€Œæ— éœ€å†æ¬¡è¿›è¡Œ `DNS` æŸ¥è¯¢ã€‚è¿™å¯ä»¥å¤§å¤§æé«˜è®¿é—®é€Ÿåº¦ã€‚

  - ä½¿ç”¨ `IP` åœ°å€: æµè§ˆå™¨ä¼šå¼€å§‹åˆ©ç”¨æ¥æ”¶åˆ°çš„ `IP` åœ°å€å‘èµ·ä¸ç›®æ ‡æœåŠ¡å™¨çš„è¿æ¥è¯·æ±‚ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½è¿˜ä¼šä½¿ç”¨åˆ°å…¶ä»–åè®®ï¼Œä¾‹å¦‚ `TCP/IP` åè®®ï¼Œä»¥ç¡®ä¿æ•°æ®åŒ…èƒ½å¤Ÿæ­£ç¡®ã€å®Œæ•´åœ°å‘é€åˆ°ç›®æ ‡ `IP` åœ°å€å¹¶æ¥æ”¶å›åº”ã€‚

  - `HTTP` è¯·æ±‚: ä¸€æ—¦ä¸ç›®æ ‡æœåŠ¡å™¨å»ºç«‹äº†è¿æ¥ï¼Œæµè§ˆå™¨å°±ä¼šå‘æœåŠ¡å™¨å‘é€ `HTTP` è¯·æ±‚ï¼Œè¯·æ±‚ä¸‹è½½ç½‘é¡µå†…å®¹æˆ–è¿›è¡Œå…¶ä»–æ“ä½œã€‚
    
  - è§£æå’Œæ˜¾ç¤º: æœåŠ¡å™¨è¿”å› `HTMLã€CSSã€JavaScript` ç­‰æ–‡ä»¶åï¼Œæµè§ˆå™¨ä¼šå¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œè§£æå¹¶æ¸²æŸ“ç½‘é¡µï¼Œæœ€åå°†ç½‘é¡µå†…å®¹æ˜¾ç¤ºç»™ç”¨æˆ·ã€‚
  
:::

### â“`DNS` ç¼“å­˜å­˜åœ¨å“ªï¼Œæœ‰æ•ˆæœŸå¤šå°‘ï¼Œå¯ä»¥è®¾ç½®å—

::: details ğŸ’¡

`DNS` ç¼“å­˜ä½ç½®ï¼š

  - æµè§ˆå™¨ç¼“å­˜ï¼šå½“è®¿é—®ä¸€ä¸ªç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨ä¼šå­˜å‚¨è¯¥ç½‘ç«™çš„ `DNS` è®°å½•ï¼Œç›´åˆ°å…¶æœ‰æ•ˆæœŸåˆ°è¾¾ï¼Œæ­¤åçš„æŸ¥è¯¢å¯ä»¥ç›´æ¥åœ¨ç¼“å­˜ä¸­æŸ¥æ‰¾ï¼Œè€Œä¸å¿…å†å‘ `DNS` æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚

  - æ“ä½œç³»ç»Ÿç¼“å­˜ï¼šå¦‚æœæµè§ˆå™¨ç¼“å­˜ä¸­æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä¼šå»æ“ä½œç³»ç»Ÿçš„ `DNS` ç¼“å­˜ä¸­æŸ¥æ‰¾ã€‚

  - è·¯ç”±å™¨ç¼“å­˜ï¼šå¦‚æœæ“ä½œç³»ç»Ÿç¼“å­˜ä¸­ä¹Ÿæ²¡æœ‰æ‰¾åˆ°ï¼Œä¼šå»è·¯ç”±å™¨ç¼“å­˜ä¸­æŸ¥æ‰¾ã€‚

  - `ISP DNS` æœåŠ¡å™¨ï¼šå¦‚æœä»¥ä¸Šæ­¥éª¤éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œæœ€åä¼šå» `ISP`ï¼ˆäº’è”ç½‘æœåŠ¡æä¾›å•†ï¼‰çš„ `DNS` æœåŠ¡å™¨ä¸­æŸ¥æ‰¾ã€‚

`DNS` ç¼“å­˜çš„æœ‰æ•ˆæœŸ
  >`DNS` ç¼“å­˜çš„æœ‰æ•ˆæœŸï¼ˆ`TTL`ï¼Œ`time-to-live`ï¼‰æ˜¯å¯ä»¥è¢«è®¾ç½®çš„ï¼Œä¸€èˆ¬ç”± `DNS` è®°å½•çš„æ‰€æœ‰è€…è®¾ç½®ã€‚`TTL` çš„å€¼è¡¨ç¤ºäº† `DNS` è®°å½•åœ¨è¢«é‡æ–°æŸ¥è¯¢å’Œæ›´æ–°ä¹‹å‰çš„å­˜æ´»æ—¶é—´ã€‚å½“ `DNS` è®°å½•çš„ `TTL` åˆ°è¾¾æ—¶ï¼Œç¼“å­˜ä¸­çš„è¯¥ `DNS` è®°å½•ä¼šè¢«æ¸…é™¤ï¼Œä¸‹ä¸€æ¬¡æŸ¥è¯¢æ—¶ä¼šç›´æ¥å‘ `DNS` æœåŠ¡å™¨è¯·æ±‚ï¼Œä»¥è·å–æœ€æ–°çš„è®°å½•ä¿¡æ¯ã€‚
  
  - å¯¹äºä¸€äº›ç»å¸¸æ”¹å˜ `IP` åœ°å€çš„ç½‘ç«™ï¼Œå¯èƒ½è®¾ç½®è¾ƒçŸ­çš„ `TTL`ï¼Œä¾‹å¦‚äº”åˆ†é’Ÿæˆ–ååˆ†é’Ÿï¼›
  - å¯¹äºä¸€äº› `IP` åœ°å€ç›¸å¯¹ç¨³å®šçš„ç½‘ç«™ï¼Œå¯èƒ½è®¾ç½®è¾ƒé•¿çš„ `TTL` ï¼Œä¾‹å¦‚ä¸€å¤©æˆ–ä¸€å‘¨ã€‚
    
:::

### â“`DNS` åŠ«æŒ

::: details ğŸ’¡

> `DNS` åŠ«æŒï¼Œåˆç§°ä¸ºåŸŸååŠ«æŒï¼Œæ˜¯ä¸€ç§æ¶æ„è¡Œä¸ºã€‚å®ƒæ˜¯é€šè¿‡ç¯¡æ”¹ `DNS`ï¼ˆåŸŸåç³»ç»Ÿï¼‰æœåŠ¡å™¨ä¸Šç½‘ç«™çš„è§£æè·¯å¾„ï¼Œå°†ç”¨æˆ·è®¿é—®è¯·æ±‚å¼•å¯¼åˆ°æ¶æ„æœåŠ¡å™¨æˆ–è€…é”™è¯¯çš„ç½‘é¡µä¸Šï¼Œä»è€Œè·å–ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯æˆ–è€…è¿›è¡Œç½‘ç»œæ”»å‡»ã€‚

ğŸŒ° æ¯”å¦‚åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€ï¼ˆæ¯”å¦‚ `www.google.com`ï¼‰æ—¶ï¼Œè®¾å¤‡ä¼šé¦–å…ˆæŸ¥è¯¢ `DNS` æœåŠ¡å™¨ä»¥è·å–ä¸è¯¥ç½‘å€å…³è”çš„ `IP` åœ°å€ã€‚è¿™æ˜¯å› ä¸ºç½‘ç»œé€šä¿¡å®é™…ä¸Šæ˜¯é€šè¿‡ `IP` åœ°å€è¿›è¡Œçš„ï¼Œè€Œä¸æ˜¯ç›´æ¥é€šè¿‡ç½‘å€ã€‚ç„¶è€Œï¼Œå¦‚æœ `DNS` æœåŠ¡å™¨è¢«æ¶æ„ç¯¡æ”¹ï¼Œé‚£ä¹ˆæŸ¥è¯¢åˆ°çš„ `IP` åœ°å€å¯èƒ½ä¼šè¢«å¼•å¯¼åˆ°ä¸€ä¸ªé”™è¯¯çš„æˆ–æ¶æ„çš„åœ°æ–¹ï¼Œè¿™å°±æ˜¯ `DNS` åŠ«æŒã€‚

`DNS` åŠ«æŒçš„åæœï¼š

  - ç”¨æˆ·è¢«è¯¯å¯¼åˆ°ä»¿å†’ç½‘ç«™ï¼Œè¾“å…¥å¯†ç ç­‰ä¸ªäººä¿¡æ¯ ï¼Œé€ æˆä¿¡æ¯è¢«ç›—å–ã€‚

  - ç”¨æˆ·è®¿é—®é€Ÿåº¦å˜æ…¢ï¼Œè¢«åŠ«æŒçš„ç½‘é¡µå¯èƒ½ä¼šå¼¹å‡ºå¤§é‡çš„å¹¿å‘Šã€‚

  - ç”¨æˆ·æ— æ³•è®¿é—®åˆ°çœŸå®çš„ç½‘ç«™ï¼Œå½±å“æ­£å¸¸çš„ç½‘ç»œè®¿é—®ã€‚

:::

### â“å¸¸è§çš„ `DNS` æ ¼å¼

::: details ğŸ’¡

  - **A è®°å½•ï¼ˆAddress Recordï¼‰**ï¼šè¿™æ˜¯æœ€å¸¸è§çš„ `DNS` è®°å½•ç±»å‹ã€‚å®ƒå°†ä¸€ä¸ªä¸»æœºåæ˜ å°„ä¸ºä¸€ä¸ª` IPv4` åœ°å€ã€‚

  - **AAAA è®°å½•ï¼ˆQuad A Recordï¼‰**ï¼šè¿™æ˜¯ä¸€ç§ç”¨äº `IPv6` åœ°å€çš„ `DNS` è®°å½•ç±»å‹ã€‚å®ƒå°†ä¸€ä¸ªä¸»æœºåæ˜ å°„ä¸ºä¸€ä¸ª `IPv6` åœ°å€ã€‚

  - **CNAME è®°å½•ï¼ˆCanonical Name Recordï¼‰**ï¼šä¹Ÿç§°ä¸ºåˆ«åè®°å½•ï¼Œå°†ä¸€ä¸ªåŸŸåæ˜ å°„ä¸ºå¦ä¸€ä¸ªçœŸæ­£çš„åŸŸåã€‚

  - **MX è®°å½•ï¼ˆMail Exchanger Recordï¼‰**ï¼šè¯¥è®°å½•ç”¨äºå‘Šè¯‰å‘é€é‚®ä»¶çš„é‚®ä»¶æœåŠ¡å™¨åº”å°†é‚®ä»¶æŠ•é€’åˆ°å“ªä¸ªä¸»æœºæˆ–åŸŸã€‚

  - **NS è®°å½•ï¼ˆName Server Recordï¼‰**ï¼šè¯¥è®°å½•æŒ‡ç¤ºè¯¥åŸŸçš„ `DNS` æœåŠ¡å™¨æ˜¯ä»€ä¹ˆã€‚

  - **TXT è®°å½•ï¼ˆText Recordï¼‰**ï¼šè¯¥è®°å½•ä¸»è¦ç”¨äºåŒ…å«é’ˆå¯¹æœºå™¨çš„æœ‰ç”¨æ–‡æœ¬ä¿¡æ¯ï¼Œä¾‹å¦‚ `SPF` æ•°æ®æˆ–éªŒè¯ `Google` ç­‰çš„æ‰€æœ‰æƒã€‚

  - **SRV è®°å½•ï¼ˆService Recordï¼‰**ï¼šç”¨äºå®šä¹‰æŒ‡å®šæœåŠ¡çš„æœåŠ¡å™¨ä½ç½®ã€‚

  - **SOA è®°å½•ï¼ˆStart of Authority Recordï¼‰**ï¼šè®°å½•æŸä¸ªæœåŠ¡å™¨å¯¹æŸä¸ªåŒºåŸŸè´Ÿè´£

  - **PTR è®°å½•ï¼ˆPointer Recordï¼‰**ï¼šä¸ `Aã€AAAA` è®°å½•ç›¸åï¼Œå®ƒå°†ä¸€ä¸ª `IP` åœ°å€æ˜ å°„ä¸ºä¸€ä¸ªä¸»æœºåã€‚é€šå¸¸ç”¨äºåå‘ `DNS` æŸ¥æ‰¾ã€‚

:::

### â“`DNS` ä¸ºä»€ä¹ˆç”¨ `UDP` è€Œä¸ç”¨ `TCP`

::: details ğŸ’¡

  - **é€Ÿåº¦**ï¼š`UDP` ç›¸æ¯” `TCP` æ›´è½»é‡çº§ï¼Œæ— éœ€è¿›è¡Œè¿æ¥å»ºç«‹å’Œæ–­å¼€çš„è¿‡ç¨‹ï¼Œå› æ­¤åœ¨ä¼ è¾“é€Ÿåº¦ä¸Šä¼˜äº `TCP`ã€‚`DNS` æŸ¥è¯¢éœ€è¦å¿«é€Ÿè¿”å›ç»“æœï¼Œå› æ­¤ `DNS` é€‰æ‹©äº†æ›´ä¸ºé«˜æ•ˆçš„ `UDP`ã€‚

  - **èµ„æºå ç”¨**ï¼š`TCP` è¿æ¥éœ€è¦ç»´æŠ¤è¿æ¥çŠ¶æ€ï¼Œå¯¹äºæœåŠ¡å™¨æ¥è¯´ï¼Œå¦‚æœæœ‰å¤§é‡çš„ `TCP` è¿æ¥ï¼Œå°†éœ€è¦ç»´æŠ¤å¤§é‡çš„è¿æ¥çŠ¶æ€ï¼Œè€Œä¸” `TCP` è¿æ¥åœ¨æ–­å¼€åè¿˜éœ€è¦ç»´æŒä¸€æ®µæ—¶é—´çš„ `TIME_WAIT` çŠ¶æ€ï¼Œè¿™éƒ½æ˜¯å¯¹èµ„æºçš„ä¸€ç§é¢å¤–å¼€é”€ã€‚è€Œ `UDP` æ˜¯æ— è¿æ¥çš„ï¼Œå¯¹æœåŠ¡å™¨ç«¯çš„èµ„æºå ç”¨æ›´å°ã€‚

  - **ç®€å•åº”ç”¨é€‚åˆUDP**ï¼š`DNS` æŸ¥è¯¢ä¸€èˆ¬åªéœ€è¦å‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œç„¶åæ¥å—ä¸€æ¬¡å“åº”ã€‚å¯¹äºè¿™ç§ç®€å•çš„è¯·æ±‚/å“åº”æ¨¡å¼ï¼Œ`UDP` æ¯” `TCP` æ›´é€‚åˆã€‚

æ³¨æ„ï¼šè™½ç„¶ `DNS` ä¸»è¦ä½¿ç”¨ `UDP`ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ä¹Ÿä¼šä½¿ç”¨ `TCP`ï¼Œæ¯”å¦‚å½“ `UDP` åŒ…æ— æ³•å®¹çº³å…¨éƒ¨çš„ `DNS` å“åº”æ•°æ®æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨ `TCP`ã€‚`TCP` ä¹Ÿä¼šåœ¨åŒºåŸŸä¼ è¾“ï¼ˆ`zone transfers`ï¼‰ç­‰åœºæ™¯ä¸‹ä½¿ç”¨ã€‚

:::

### â“`DNS` ä¸­è¿­ä»£æŸ¥è¯¢å’Œé€’å½’æŸ¥è¯¢çš„åŒºåˆ«

::: details ğŸ’¡

  - **è¿­ä»£æŸ¥è¯¢**ï¼š`DNS` å®¢æˆ·ç«¯ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ª `resolver` æˆ–è€…å¦ä¸€ä¸ª `DNS` æœåŠ¡å™¨ï¼‰å‘é€è¯·æ±‚åˆ° `DNS` æœåŠ¡å™¨ï¼Œå¦‚æœè¿™ä¸ª `DNS` æœåŠ¡å™¨æœ¬èº«æ— æ³•å›ç­”è¿™ä¸ªé—®é¢˜ï¼ˆæ¯”å¦‚éœ€è¦æŸ¥è¯¢çš„åŸŸåå®ƒå¹¶æ²¡æœ‰ç¼“å­˜ï¼‰ï¼Œå®ƒä¼šæä¾›ä¸€ä¸ª"æœ€å¥½çš„ç­”æ¡ˆ"ç»™å®¢æˆ·ç«¯ã€‚è¿™ä¸ªç­”æ¡ˆé€šå¸¸æ˜¯æŸ¥è¯¢åŸŸåçš„æƒå¨æœåŠ¡å™¨çš„ä¸€ä¸ªå¼•ç”¨ã€‚ç„¶åå®¢æˆ·ç«¯é’ˆå¯¹è¿™ä¸ªå¼•ç”¨å†å‘èµ·å¦å¤–ä¸€ä¸ªè¯·æ±‚ã€‚åœ¨è¿­ä»£æŸ¥è¯¢ä¸­ï¼Œæœ¬è´¨ä¸Šå®¢æˆ·ç«¯æ˜¯è½®è¯¢ `DNS` æœåŠ¡å™¨ï¼Œè·å–æœ€åçš„æŸ¥è¯¢ç»“æœï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­å®¢æˆ·ç«¯åšäº†æ›´å¤šçš„å·¥ä½œã€‚

  - **é€’å½’æŸ¥è¯¢**ï¼š`DNS` å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ° `DNS` æœåŠ¡å™¨ï¼Œå¦‚æœè¿™ä¸ª `DNS` æœåŠ¡å™¨æœ¬èº«æ— æ³•å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œå®ƒä¼šæ›¿å®¢æˆ·ç«¯è¯¢é—®å…¶ä»– `DNS` æœåŠ¡å™¨ï¼Œå¹¶å‘å®¢æˆ·ç«¯è¿”å›æœ€ç»ˆçš„æŸ¥è¯¢ç»“æœï¼Œæ•´ä¸ªè¿‡ç¨‹å¯¹å®¢æˆ·ç«¯æ¥è¯´æ˜¯é€æ˜çš„ï¼Œæ‰€ä»¥åœ¨é€’å½’æŸ¥è¯¢ä¸­ï¼Œ `DNS` æœåŠ¡å™¨æ‰§è¡Œäº†æ›´å¤šçš„å·¥ä½œã€‚
    
æ€»ç»“ï¼šè¿­ä»£æŸ¥è¯¢æ˜¯â€œå»æ‰¾åˆ«äººâ€ï¼Œé€’å½’æŸ¥è¯¢æ˜¯â€œå¸®ä½ å»æ‰¾åˆ«äººâ€ã€‚

:::

------

## æŠ“åŒ…

### â“æŠ“åŒ…å·¥å…·æŠ“å– `HTTPS` çš„åŸç†

::: details ğŸ’¡

åŸç†ï¼šé€šè¿‡ â€œä¸­é—´äººæ”»å‡»â€ï¼ˆ`Man-in-the-middle attack`, `MITM`ï¼‰æ–¹å¼ã€‚

  - å½“å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘å‡º `HTTPS` è¯·æ±‚æ—¶ï¼ŒæŠ“åŒ…å·¥å…·ä¼šæ’å…¥åˆ°å®ƒä»¬ä¹‹é—´ï¼Œç”Ÿæˆä¸€å¯¹æ–°çš„å…¬é’¥å’Œç§é’¥ï¼Œå¹¶å‘å®¢æˆ·ç«¯å‘é€å…¬é’¥ä»¥åŠä¼ªé€ çš„æœåŠ¡å™¨è¯ä¹¦ï¼Œå®¢æˆ·ç«¯ç”±äºä¿¡ä»»è¿™ä¸ªä¼ªé€ çš„è¯ä¹¦ï¼Œæ¥å—å…¬é’¥å¹¶ç”¨å®ƒæ¥åŠ å¯†å‘é€çš„æ•°æ®ã€‚

  - å½“æŠ“åŒ…å·¥å…·æ”¶åˆ°å®¢æˆ·ç«¯åŠ å¯†åçš„æ•°æ®ï¼Œä¼šç”¨è‡ªå·±çš„ç§é’¥è§£å¯†æ•°æ®ï¼Œç„¶åè¯»å–å¹¶è®°å½•æ˜æ–‡ä¿¡æ¯ã€‚æ­¤æ—¶çš„æŠ“åŒ…å·¥å…·å°±åƒæ˜¯å®¢æˆ·ç«¯å‘å…¶å‘é€ `HTTPS` è¯·æ±‚çš„æœåŠ¡å™¨ã€‚æ¥ç€ï¼ŒæŠ“åŒ…å·¥å…·ç”¨çœŸæ­£çš„æœåŠ¡å™¨çš„å…¬é’¥æŠŠæ•°æ®é‡æ–°åŠ å¯†åï¼Œå‘é€ç»™çœŸæ­£çš„æœåŠ¡å™¨ã€‚

  - å½“çœŸæ­£çš„æœåŠ¡å™¨å“åº”ä»¥åï¼ŒæŠ“åŒ…å·¥å…·å†æ¬¡æ’å…¥åˆ°é€šä¿¡çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨çœŸæ­£çš„æœåŠ¡å™¨çš„å…¬é’¥è§£å¯†å“åº”æ¶ˆæ¯ï¼Œç„¶åå†ç”¨è‡ªå·±çš„ç§é’¥åŠ å¯†å¹¶å‘é€ç»™å®¢æˆ·ç«¯ã€‚

æ³¨æ„ï¼šè¿™ç§æ–¹æ³•éœ€è¦å®¢æˆ·ç«¯èƒ½å¤Ÿä¿¡ä»»æŠ“åŒ…å·¥å…·ç”Ÿæˆçš„ä¼ªé€ è¯ä¹¦ï¼Œå¦åˆ™å®¢æˆ·ç«¯å°†æ— æ³•ä¿¡ä»»å¹¶æ¥å—è¿™ä¸ªå…¬é’¥å’Œä¼ªé€ çš„æœåŠ¡å™¨è¯ä¹¦ï¼Œé€šä¿¡å°±ä¼šå¤±è´¥ã€‚åœ¨å®é™…æ“ä½œä¸­ï¼Œè¿™é€šå¸¸æ˜¯é€šè¿‡åœ¨å®¢æˆ·ç«¯å®‰è£…ä¸€ä¸ªç”±æŠ“åŒ…å·¥å…·é¢å‘çš„æ ¹è¯ä¹¦æ¥å®ç°çš„ã€‚

:::

### â“`Charles` æŠ“åŒ…è½¯ä»¶çš„åŸç†

::: details ğŸ’¡

  å¯ä»¥å°†å®ƒç†è§£æˆä¸­é—´äººæ”»å‡»ã€‚å®¢æˆ·ç«¯å°† `Charles` ä½œä¸ºä»£ç†æœåŠ¡å™¨(ä¸­é—´äºº)ã€‚å®¢æˆ·ç«¯æ‰€æœ‰è¯·æ±‚éƒ½ä¼šå…ˆå‘é€ç»™ `Charles`ï¼Œ`Charles` å†å°†å®¢æˆ·ç«¯çš„è¯·æ±‚è½¬å‘ç»™æœåŠ¡å™¨ã€‚`Charles` æ”¶åˆ°æœåŠ¡å™¨å“åº”ä¹‹åï¼Œå†å°†ä»æœåŠ¡å™¨æ”¶åˆ°çš„å›å¤å†…å®¹è½¬å‘ç»™å®¢æˆ·ç«¯ã€‚è¿™æ ·è¯·æ±‚å’Œå“åº”æ•°æ®éƒ½è¢« `Charles` è®°å½•ä¸‹æ¥ï¼Œå†é€šè¿‡ç•Œé¢å±•ç¤ºå³å¯ã€‚
  
  å¯¹äº `HTTP` ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ï¼Œç›´æ¥è¿›è¡Œæ¥æ”¶å’Œè½¬å‘å³å¯ã€‚è€Œ `HTTPS` ä¸­æ¶‰åŠ `CA` è®¤è¯ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯éœ€è¦è¿›è¡Œçš„æ“ä½œä¿¡ä»» `Charles` çš„è¯ä¹¦ï¼Œè¿™æ ·é€šè¿‡ `Charles` å‘é€ç»™å®¢æˆ·ç«¯çš„å…¬é’¥å°±å¯ä»¥é€šè¿‡è¿™ä¸ªè¯ä¹¦æ ¡éªŒæˆåŠŸï¼Œä»è€Œå®Œæˆé€šä¿¡ã€‚

:::

### â“ä¸ä½¿ç”¨ `Charles`ï¼Œ`4G` ç½‘ç»œå¦‚ä½•æŠ“åŒ…

::: details ğŸ’¡

  -  `Wireshark`ï¼šè¿™æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„ç½‘ç»œå°åŒ…åˆ†æè½¯ä»¶ï¼Œå®ƒå¯ä»¥æ•è·ç½‘ç»œå°åŒ…ï¼Œå¹¶å°½å¯èƒ½æ˜¾ç¤ºå‡ºæœ€ä¸ºè¯¦ç»†çš„å°åŒ…æ•°æ®ã€‚ä½¿ç”¨ `Wireshark` å¯ä»¥åœ¨è®¾å¤‡ï¼ˆéœ€è¦é…åˆå…¶ä»–å·¥å…·å¦‚ `tcpdump`ï¼‰å’Œæ— çº¿è·¯ç”±å™¨ï¼ˆå¦‚æœå®ƒè¢«é…ç½®ä¸º `Wireshark` å¯ä»¥åœ¨å…¶ä¸Šè¿è¡Œï¼‰ä¹‹é—´æŠ“å–æµé‡ã€‚

  - `Tcpdump`ï¼šä¸€ä¸ª `Powerful` çš„å‘½ä»¤è¡ŒæŠ“åŒ…å·¥å…·ï¼Œå¯ä»¥è·å¾—ä¼ è¾“åœ¨ç½‘ç»œä¸Šçš„ `TCP/IP` æ•°æ®åŒ…çš„è¯¦ç»†ä¿¡æ¯ã€‚

  - ä½¿ç”¨ `Android` æ‰‹æœºçš„æŠ“åŒ…åº”ç”¨ï¼Œä¾‹å¦‚ `Packet Capture`, `tPacketCapture` ç­‰ã€‚

  - ä½¿ç”¨ä»£ç†æœåŠ¡å™¨ï¼ŒæŠŠæ‰‹æœºçš„ç½‘ç»œæµé‡é€šè¿‡ä»£ç†æœåŠ¡å™¨ï¼Œç„¶ååœ¨ä»£ç†æœåŠ¡å™¨ä¸ŠæŠ“åŒ…ã€‚ä¸€äº›äº‘æœåŠ¡æä¾›å•†(ä¾‹å¦‚`AWS`ï¼Œ`GCP`ï¼Œ`Azure` ç­‰)å¯ä»¥æä¾›æ–¹ä¾¿çš„ç½‘ç»œæµé‡é‡‡é›†åŠŸèƒ½ã€‚

:::

### â“ä¸ºä»€ä¹ˆ `Wireshark` ä¸èƒ½ç›´æ¥æŠ“å– `SSL` çš„åŸå§‹æ•°æ®

::: details ğŸ’¡

> `SSL`ï¼ˆ`Secure Sockets Layer`ï¼Œå®‰å…¨å¥—æ¥å­—å±‚ï¼‰ï¼Œä»¥åŠå…¶ç»§ä»»è€…`TLS`ï¼ˆ`Transport Layer Security`ï¼Œä¼ è¾“å±‚å®‰å…¨ï¼‰ï¼Œæ˜¯ç”¨äºä¿æŠ¤ç½‘ç»œé€šä¿¡çš„åŠ å¯†åè®®ã€‚æ‰€æœ‰é€šè¿‡ `SSL` æˆ– `TLS` é€šä¿¡çš„æ•°æ®åœ¨ç½‘ç»œä¸Šçš„ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯è¢«åŠ å¯†çš„ã€‚

  åªæœ‰å½“æ•°æ®åˆ°è¾¾ç›®æ ‡æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”ä½¿ç”¨æ­£ç¡®çš„ç§é’¥è¿›è¡Œè§£å¯†åï¼Œæ•°æ®çš„å†…å®¹æ‰å¯ä»¥è¢«è¯»å–ã€‚å› æ­¤ï¼Œä½¿ç”¨ `Wireshark` ç­‰æŠ“åŒ…å·¥å…·ç›´æ¥æŠ“å– `SSL/TLS` é€šä¿¡çš„æ•°æ®åŒ…ï¼Œåªèƒ½çœ‹åˆ°åŠ å¯†åçš„æ•°æ®ï¼Œè€Œä¸æ˜¯åŸå§‹çš„æ˜æ–‡æ•°æ®ã€‚

  å¦‚æœæœ‰æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯çš„ç§é’¥ï¼Œæˆ–è€…èƒ½åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è®¾ç½®ä¸€ä¸ªå¯ä»¥è§£å¯†æ•°æ®çš„ä»£ç†ï¼ˆä¾‹å¦‚â€œä¸­é—´äººæ”»å‡»â€æ–¹å¼ï¼‰ï¼Œé‚£ä¹ˆ `Wireshark` æ˜¯å¯ä»¥è§£æå¹¶æ˜¾ç¤º `SSL/TLS` åŠ å¯†é€šä¿¡çš„åŸå§‹æ˜æ–‡æ•°æ®ã€‚åªè¦åœ¨ â€œåè®®â€ å±æ€§ä¸­è®¾ç½®å¯¹åº”çš„ç§é’¥æ–‡ä»¶ï¼Œæˆ–è€…é…ç½®  `SSLKEYLOGFILE` ç¯å¢ƒå˜é‡ï¼Œä½¿å…¶æŒ‡å‘ä¸€ä¸ªç”±æµè§ˆå™¨æˆ–å…¶ä»–åº”ç”¨ç”Ÿæˆçš„å¯†é’¥æ—¥å¿—æ–‡ä»¶ï¼Œå°±å¯ä»¥çœ‹åˆ°è§£å¯†åçš„æ˜æ–‡æ•°æ®ã€‚

æ€»ç»“ï¼šç”±äº `SSL` çš„è®¾è®¡åˆè¡·æ˜¯ä¿æŠ¤ç½‘ç»œé€šä¿¡çš„å®‰å…¨ï¼Œé˜²æ­¢æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«çªƒå–æˆ–ç¯¡æ”¹ï¼Œæ‰€ä»¥ `Wireshark` ç­‰æŠ“åŒ…å·¥å…·ä¸èƒ½ç›´æ¥æŠ“å– `SSL` çš„åŸå§‹æ•°æ®ã€‚è¿™ä¹Ÿç¡®ä¿äº†åœ¨ä½¿ç”¨ `HTTPS`ã€`IMAPS`ã€`POPS`ã€`FTPS` ç­‰åŸºäº `SSL/TLS` çš„æœåŠ¡æ—¶ï¼Œé€šä¿¡çš„å®‰å…¨æ€§å’Œéšç§æ€§ã€‚

:::

### â“å¦‚ä½•è®¾è®¡ä¸€ä¸ª `HTTPS` æŠ“åŒ…

::: details ğŸ’¡

  è®¾è®¡ä¸€ä¸ª `HTTPS` æŠ“åŒ…å·¥å…·ï¼Œå®é™…ä¸Šæ˜¯è¦è®¾è®¡ä¸€ä¸ªä¸­é—´äººï¼ˆ`Man-In-The-Middle`ï¼Œå³ `MITM`ï¼‰æ”»å‡»çš„ä»£ç†æœåŠ¡å™¨ã€‚å‰ææ˜¯å¿…é¡»è¦è·å¾—å®¢æˆ·ç«¯çš„ä¿¡ä»»ï¼Œè®©å®¢æˆ·ç«¯æ„¿æ„æ¥å—æˆ‘ä»¬çš„è¯ä¹¦ï¼Œå¦åˆ™å®¢æˆ·ç«¯å°†æ— æ³•è®¿é—® `HTTPS` æœåŠ¡ã€‚

  - åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ï¼Œç”¨äºæ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ `HTTP` æˆ– `HTTPS` è¯·æ±‚ã€‚æ ¹æ®è¯·æ±‚çš„åè®®å’Œå¤´ä¿¡æ¯ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œ `HTTPS` æŠ“åŒ…ã€‚

  - å½“æ¥æ”¶åˆ° `HTTPS` è¯·æ±‚æ—¶ï¼Œå…ˆå‘ `HTTPS` æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¿æ¥è¯·æ±‚ï¼Œè·å–æœåŠ¡å™¨çš„è¯ä¹¦å’Œå…¬é’¥ã€‚

  - åˆ›å»ºä¸€ä¸ªè‡ªç­¾åçš„ `SSL` è¯ä¹¦ï¼Œå¹¶å°†æ­¥éª¤ 2 ä¸­è·å–çš„å…¬é’¥å¡«å…¥å…¶ä¸­ã€‚è¿™æ ·ï¼Œå°±æ‹¥æœ‰äº†ä¸€ä¸ªå…·æœ‰ç›®æ ‡æœåŠ¡å™¨å…¬é’¥çš„è¯ä¹¦ã€‚

  - è¿”å›è¿™ä¸ªè‡ªç­¾åè¯ä¹¦ç»™å®¢æˆ·ç«¯ã€‚ç›¸å½“äºå‘Šè¯‰å®¢æˆ·ç«¯ï¼šâ€œæˆ‘å°±æ˜¯ä½ æƒ³è®¿é—®çš„æœåŠ¡å™¨ï¼ŒæŠŠä½ çš„æ•°æ®åŠ å¯†åç»™æˆ‘â€ã€‚

  - å®¢æˆ·ç«¯æ”¶åˆ°è¯ä¹¦åï¼Œä¼šéªŒè¯è¯ä¹¦çš„æœ‰æ•ˆæ€§ã€‚åœ¨è¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼š
    * æ‰‹åŠ¨å®‰è£…ï¼šå¦‚æœæŠ“åŒ…å·¥å…·æ˜¯ç”¨æˆ·è‡ªæ„¿ä½¿ç”¨çš„ï¼ˆå¦‚è°ƒè¯•å·¥å…·ï¼‰ï¼Œé‚£ä¹ˆç”¨æˆ·å¯èƒ½ä¼šä¸»åŠ¨å°†è¯ä¹¦æ·»åŠ åˆ°å—ä¿¡ä»»çš„è¯ä¹¦åˆ—è¡¨ä¸­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯ä¼šè®¤ä¸ºè¯ä¹¦æœ‰æ•ˆï¼Œå¹¶ç»§ç»­ä¸æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ã€‚
    * éæ‰‹åŠ¨å®‰è£…ï¼šåœ¨ç½‘ç»œæ”»å‡»çš„æƒ…å†µä¸‹ï¼Œæ— æ³•æ§åˆ¶å®¢æˆ·ç«¯çš„è¡Œä¸ºã€‚å¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰å°†è¯ä¹¦åŠ å…¥åˆ°å—ä¿¡ä»»çš„åˆ—è¡¨ä¸­ï¼Œå®¢æˆ·ç«¯ä¼šæ‹’ç»ä¸æœåŠ¡å™¨é€šä¿¡ã€‚

  - å®¢æˆ·ç«¯éªŒè¯é€šè¿‡åï¼ŒæœåŠ¡å™¨å°±å¯ä»¥æ¥æ”¶åˆ°å®¢æˆ·ç«¯åŠ å¯†åçš„æ•°æ®ã€‚ç”±äºæ‹¥æœ‰è¯ä¹¦çš„ç§é’¥ï¼Œå¯ä»¥å¯¹åŠ å¯†æ•°æ®è¿›è¡Œè§£å¯†ï¼Œå®ç°äº† `HTTPS` çš„æŠ“åŒ…ã€‚

:::

------

## æƒ…æ™¯é¢˜

### é€šä¿¡æµç¨‹

#### â“æ–‡ä»¶ä¸‹è½½ä¸€èˆ¬ç”¨ä»€ä¹ˆåè®®ï¼Œ`UDP` è¿˜æ˜¯ `TCP`

::: details ğŸ’¡

> æ–‡ä»¶ä¸‹è½½ä¸€èˆ¬ä½¿ç”¨çš„æ˜¯ `TCP` åè®®ã€‚

  `TCP`ï¼ˆ`Transmission Control Protocol`ï¼Œä¼ è¾“æ§åˆ¶åè®®ï¼‰æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚åœ¨ `TCP` åè®®ä¸­ï¼Œå‘é€è€…å’Œæ¥æ”¶è€…ä¼šåœ¨æ•°æ®äº¤æ¢å‰å»ºç«‹ä¸€æ¡è¿æ¥ï¼Œç¡®ä¿æ•°æ®èƒ½æŒ‰ç…§é¡ºåºåä¸”æœªè¢«ç ´åçš„é€è¾¾ç›®çš„åœ°ã€‚

  æ–‡ä»¶ä¸‹è½½é€šå¸¸éœ€è¦é«˜å¯é æ€§ï¼Œ`TCP` æä¾›è¿™ç§å¯é æ€§ï¼Œä¸” `TCP` èƒ½å¤Ÿå¤„ç†ç½‘ç»œæ‹¥å¡å’Œæ•°æ®å‡ºé”™çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œ`HTTP` å’Œ `FTP` éƒ½æ˜¯åŸºäº `TCP` çš„åè®®ï¼Œé€šå¸¸ç”¨äºæ–‡ä»¶ä¸‹è½½ã€‚

  ç›¸è¾ƒä¹‹ä¸‹ï¼Œè™½ç„¶ `UDP`ï¼ˆ`User Datagram Protocol`ï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰çš„ä¼ è¾“é€Ÿåº¦å¯èƒ½ä¼šæ¯” `TCP` æ›´å¿«ï¼ˆå› ä¸º `UDP` ä¸éœ€è¦è¿›è¡Œå¤æ‚çš„é”™è¯¯æ£€æŸ¥å’ŒåŒ…ç¡®è®¤ç­‰æµç¨‹ï¼‰ï¼Œä½† `UDP` ä¸ä¿è¯æ•°æ®åŒ…çš„åˆ°è¾¾ï¼Œå› æ­¤é€šå¸¸ä¸ç”¨äºæ–‡ä»¶ä¸‹è½½ã€‚`UDP` æ›´å¸¸ç”¨äºå®æ—¶åº”ç”¨ï¼Œå¦‚éŸ³è§†é¢‘æµä¼ è¾“ã€æ¸¸æˆç­‰ï¼Œè¿™äº›åº”ç”¨å¯¹äºæ•°æ®ä¸¢å¤±æœ‰ä¸€å®šçš„å®¹å¿åº¦ï¼Œä½†å¯¹æ—¶é—´æ•æ„Ÿã€‚
    
:::

#### â“è®¿é—®ä¸€ä¸ªç½‘ç«™çš„è¯¦ç»†è¿‡ç¨‹

::: details ğŸ’¡

  - æµè§ˆå™¨è§£æ `URL`ï¼šåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€ï¼ˆ`URL`ï¼‰ï¼Œæµè§ˆå™¨é¦–å…ˆéœ€è¦è§£æè¿™ä¸ª `URL`ï¼Œç¡®å®šè¦è¯·æ±‚çš„æ˜¯å“ªä¸ªç½‘ç«™ã€‚

  - `DNS` è§£æï¼šæµè§ˆå™¨é€šè¿‡ `DNS`ï¼ˆ`Domain Name System`ï¼ŒåŸŸåç³»ç»Ÿï¼‰å°†ç½‘ç«™çš„åŸŸåè§£ææˆæœåŠ¡å™¨çš„ `IP` åœ°å€ã€‚`DNS` è§£æé€šå¸¸ä¼šåœ¨æœ¬åœ°ç¼“å­˜ã€æ“ä½œç³»ç»Ÿç¼“å­˜ã€è·¯ç”±å™¨ç¼“å­˜ã€`ISP DNS` æœåŠ¡å™¨ç­‰å¤šä¸ªå±‚é¢è¿›è¡Œã€‚
    
  - å»ºç«‹ `TCP` è¿æ¥ï¼šå¾—åˆ°æœåŠ¡å™¨çš„ `IP` åœ°å€åï¼Œæµè§ˆå™¨ä¼šå‘æœåŠ¡å™¨å‘èµ·ä¸€ä¸ª `TCP` è¿æ¥è¯·æ±‚ï¼Œé€šå¸¸æ˜¯ä¸‰æ¬¡æ¡æ‰‹ã€‚

  - å‘é€ `HTTP` è¯·æ±‚ï¼š`TCP` è¿æ¥å»ºç«‹å¥½åï¼Œæµè§ˆå™¨å°±å¯ä»¥å‘æœåŠ¡å™¨å‘é€ `HTTP` (`Hypertext Transfer Protocol`ï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®) è¯·æ±‚äº†ã€‚è¿™ä¸ªè¯·æ±‚ä¸­åŒ…æ‹¬è¦è·å–çš„èµ„æºï¼ˆæ¯”å¦‚ä¸€ä¸ª `HTML` é¡µé¢ï¼‰ã€è¯·æ±‚çš„æ–¹æ³•ï¼ˆæ¯”å¦‚ `GET` æˆ– `POST`ï¼‰ï¼Œä»¥åŠä¸€äº›å…¶ä»–çš„å¤´ä¿¡æ¯ã€‚

  - æœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶è¿”å› `HTTP` å“åº”ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ° `HTTP` è¯·æ±‚åï¼Œä¼šè§£æè¯·æ±‚ï¼Œç„¶åæŸ¥æ‰¾è¯·æ±‚çš„èµ„æºå¹¶è¿”å›ç»™æµè§ˆå™¨ã€‚è¿”å›çš„ `HTTP` å“åº”ä¸­åŒ…æ‹¬ä¸€ä¸ªçŠ¶æ€ç ï¼ˆæ¯”å¦‚ `200` è¡¨ç¤ºæˆåŠŸï¼Œ`404` è¡¨ç¤ºæ‰¾ä¸åˆ°é¡µé¢ï¼‰ï¼Œä»¥åŠè¯·æ±‚çš„èµ„æºå†…å®¹ï¼Œæ¯”å¦‚ä¸€ä¸ª `HTML` é¡µé¢ã€‚
    
  - æµè§ˆå™¨æ¸²æŸ“é¡µé¢ï¼šæµè§ˆå™¨æ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„ `HTML` é¡µé¢åï¼Œä¼šå¯¹å…¶è¿›è¡Œè§£æå’Œæ¸²æŸ“ï¼Œæ˜¾ç¤ºç»™ç”¨æˆ·ã€‚å¦‚æœé¡µé¢ä¸­è¿˜åŒ…å«å…¶ä»–èµ„æºçš„é“¾æ¥ï¼ˆæ¯”å¦‚å›¾ç‰‡ã€`CSS` æ ·å¼ã€`JavaScript` è„šæœ¬ç­‰ï¼‰ï¼Œæµè§ˆå™¨ä¼šå†æ¬¡å‘èµ· `HTTP` è¯·æ±‚è·å–è¿™äº›èµ„æºï¼Œç„¶åä¸€èµ·æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚

  - æ–­å¼€è¿æ¥ï¼šå¦‚æœæ²¡æœ‰è®¾ç½®æŒä¹…è¿æ¥ï¼ˆ`HTTP 1.1`é»˜è®¤ä¸ºæŒä¹…è¿æ¥ï¼‰ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¼šæ–­å¼€ `TCP` è¿æ¥ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡è¯·æ±‚ã€‚å¦‚æœæ˜¯æŒä¹…è¿æ¥ï¼Œé‚£ä¹ˆåœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨çš„ `TCP` è¿æ¥ä¼šä¿æŒï¼Œä¾¿äºä¼ è¾“æ›´å¤šçš„èµ„æºã€‚

:::

#### â“æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ç½‘å€åˆ°çœ‹åˆ°ç½‘ç«™é¦–é¡µéƒ½ç»å†é‚£äº›è¿‡ç¨‹ï¼Œä½ è§‰å¾—æœ€è€—æ—¶æ˜¯å“ªé‡Œï¼Œæ€ä¹ˆä¼˜åŒ–

::: details ğŸ’¡
  
è®¿é—®æµç¨‹ï¼š
  
  - **DNS æŸ¥è¯¢**ï¼šæµè§ˆå™¨éœ€è¦è§£æè¾“å…¥çš„ `URL` ä¸­çš„åŸŸååˆ°å¯¹åº”çš„ `IP` åœ°å€ï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦é€šè¿‡ç½‘ç»œè¿›è¡Œ `DNS` æŸ¥è¯¢ã€‚

  - **å»ºç«‹TCPè¿æ¥**ï¼šæµè§ˆå™¨ä½¿ç”¨è§£æå¾—åˆ°çš„ `IP` åœ°å€ä¸æœåŠ¡å™¨å»ºç«‹ `TCP` è¿æ¥ï¼Œä¹Ÿå³è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ã€‚

  - **å‘é€HTTPè¯·æ±‚**ï¼šæµè§ˆå™¨é€šè¿‡å»ºç«‹å¥½çš„ `TCP` è¿æ¥å‘æœåŠ¡å™¨å‘é€ `HTTP` è¯·æ±‚ï¼ŒåŒ…æ‹¬ `GETã€POST` ç­‰è¯·æ±‚ã€‚

  - **æœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶è¿”å›HTTPå“åº”**ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åè¿›è¡Œå¤„ç†ï¼Œå¹¶è¿”å›ä¸€ä¸ª `HTTP` å“åº”ï¼ŒåŒ…å«äº†è¯·æ±‚çš„æ–‡ä»¶ã€æ•°æ®ç­‰ä¿¡æ¯ã€‚

  - **æµè§ˆå™¨å¤„ç†è¿”å›çš„å“åº”**ï¼šæµè§ˆå™¨æ¥æ”¶å¹¶å¤„ç†æ¥è‡ªæœåŠ¡å™¨çš„ `HTTP` å“åº”ï¼Œå¯¹å“åº”ä¸­çš„ `HTML`ã€`CSS` å’Œ `JavaScript` ç­‰èµ„æºè¿›è¡Œè§£æå’Œæ¸²æŸ“ï¼Œå¦‚æœæœ‰å…¶ä»–èµ„æºï¼ˆå¦‚å›¾ç‰‡ã€éŸ³è§†é¢‘èµ„æºï¼‰ï¼Œå¯èƒ½è¿˜éœ€è¦è¿›è¡Œé¢å¤–çš„ `HTTP` è¯·æ±‚ã€‚

  - **æ–­å¼€è¿æ¥æˆ–è€…åœ¨è¯·æ±‚å…¶ä»–èµ„æºåä¿æŒè¿æ¥**ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®æŒä¹…è¿æ¥ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¼šæ–­å¼€ `TCP` è¿æ¥ï¼Œå¦‚æœæ˜¯æŒä¹…è¿æ¥ï¼Œçº¿è·¯ä¼šåœ¨ä¼ è¾“æ›´å¤šèµ„æºåä¿æŒã€‚

ä¼˜åŒ–æ–¹æ¡ˆï¼š

  - **ä¼˜åŒ–DNSæŸ¥è¯¢**ï¼šä½¿ç”¨æ›´å¿«çš„ `DNS` æœåŠ¡å™¨ï¼Œä½¿ç”¨ `DNS` ç¼“å­˜ï¼Œä½¿ç”¨ `DNS` é¢„è¯»å–ç­‰æ–¹æ³•ã€‚

  - **å‡å°‘TCPè¿æ¥æ¬¡æ•°**ï¼šä½¿ç”¨ `HTTP` æŒä¹…è¿æ¥ï¼ˆ`HTTP/1.1` é»˜è®¤å¼€å¯ï¼‰ï¼Œåˆ©ç”¨æµè§ˆå™¨å¹¶è¡Œè¿æ¥çš„ç‰¹æ€§ï¼Œä½¿ç”¨ `HTTP/2` å¤šè·¯å¤ç”¨ç­‰ã€‚

  - **ä¼˜åŒ–æœåŠ¡å™¨å¤„ç†**ï¼šæé«˜æœåŠ¡å™¨ç¡¬ä»¶æ€§èƒ½ï¼Œä¼˜åŒ–åç«¯ä»£ç ï¼Œä½¿ç”¨æœåŠ¡å™¨ç¼“å­˜ï¼Œä½¿ç”¨ `CDN` ç­‰ã€‚

  - **å‡å°‘HTTPè¯·æ±‚ä»¥åŠå‡å°è¯·æ±‚/å“åº”å¤§å°**ï¼šåˆå¹¶æ–‡ä»¶ã€å‹ç¼©æ–‡ä»¶ã€ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜ï¼Œä½¿ç”¨æ›´é«˜æ•ˆçš„æ–‡ä»¶æ ¼å¼ç­‰ã€‚

  - **ä¼˜åŒ–é¡µé¢æ¸²æŸ“**ï¼šé¿å…é‡æ’å’Œé‡ç»˜ï¼Œä½¿ç”¨æ‡’åŠ è½½ã€å¼‚æ­¥åŠ è½½ç­‰æŠ€æœ¯ï¼Œå¯¹ `JS/CSS` è¿›è¡Œä¼˜åŒ–ç­‰ã€‚

:::

#### â“ä½¿ç”¨ `ssh` è¿æ¥äº‘æœåŠ¡å™¨ï¼Œæ•´ä¸ªç½‘ç»œé€šä¿¡è¿‡ç¨‹

::: details ğŸ’¡

> `SSH`(`Secure Shell)`: ä¸€ç§ç½‘ç»œåè®®ï¼Œç”¨äºè®¡ç®—æœºç”¨æˆ·é€šè¿‡åŠ å¯†çš„æ–¹å¼è¿›è¡Œè¿œç¨‹ç™»å½•åˆ°å¦ä¸€å°è®¡ç®—æœºä¸Šã€‚

  - **åœ°å€è§£æ**ï¼šè¿æ¥çš„äº‘æœåŠ¡å™¨çš„IPåœ°å€æˆ–è€…åŸŸåã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯åŸŸåï¼Œé‚£ä¹ˆä¼šé€šè¿‡ `DNS` æœåŠ¡è§£æå‡ºæœåŠ¡å™¨çš„çœŸå® `IP` åœ°å€ã€‚

  - **TCPæ¡æ‰‹**ï¼šè®¾å¤‡ä¼šå‘è¿™ä¸ª `IP` åœ°å€å‘èµ·ä¸€ä¸ª `TCP` è¿æ¥ã€‚è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œç¡®ä¿åŒæ–¹éƒ½å·²ç»å‡†å¤‡å¥½å¼€å§‹é€šä¿¡ã€‚

  - **SSHè¿æ¥**ï¼š`TCP` è¿æ¥å»ºç«‹åï¼Œè®¾å¤‡ä¼šå‘èµ· `SSH` çš„è¿æ¥è¯·æ±‚ã€‚åœ¨è¿™ä¸ªè¯·æ±‚ä¸­ï¼Œä¼šåŒ…å«è®¡ç®—æœºçš„å…¬é’¥ï¼ˆå¦‚æœè®¾ç½®äº†å¯†é’¥ç™»å½•çš„è¯ï¼‰æˆ–è€…ç”¨æˆ·åå’Œå¯†ç ä¿¡æ¯ã€‚

  - **èº«ä»½éªŒè¯**ï¼šäº‘æœåŠ¡å™¨æ¥æ”¶åˆ° `SSH` è¯·æ±‚åï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯å¯†é’¥ç™»å½•ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ä¼šä½¿ç”¨å­˜å‚¨çš„å…¬é’¥ä¿¡æ¯æ¥éªŒè¯ç§é’¥æ˜¯å¦åŒ¹é…ï¼›å¦‚æœä½¿ç”¨çš„æ˜¯ç”¨æˆ·åå’Œå¯†ç ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šéªŒè¯ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®ã€‚åªæœ‰åœ¨éªŒè¯é€šè¿‡åï¼Œæ‰ä¼šå…è®¸ `SSH` è¿æ¥ã€‚

  - **ä¼šè¯å¼€å§‹**ï¼šä¸€æ—¦è·å¾—è®¸å¯ï¼Œä¸€ä¸ª `SSH` ä¼šè¯å°±ä¼šå»ºç«‹ï¼Œå°±å¯ä»¥å¼€å§‹åœ¨è¿™ä¸ªç»ˆç«¯ä¼šè¯ä¸­è¿è¡Œå‘½ä»¤ï¼Œæ“ä½œäº‘æœåŠ¡å™¨äº†ã€‚

  - **ä¼šè¯ç»“æŸ**ï¼šå½“ç»“æŸè¿™ä¸ª `SSH` ä¼šè¯æ—¶ï¼ˆæ¯”å¦‚è¾“å…¥ `exit` å‘½ä»¤ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ª `SSH` è¿æ¥å°±ä¼šå…³é—­ï¼Œå¹¶é‡Šæ”¾è¿™ä¸ª `TCP` è¿æ¥ã€‚

æ³¨æ„ï¼š`SSH` åè®®æä¾›äº†ä¸€ç§å®‰å…¨çš„ã€åŠ å¯†çš„ç½‘ç»œé€šä¿¡æœºåˆ¶ï¼Œæ‰€ä»¥åœ¨æ•´ä¸ªé€šä¿¡è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯è¢«åŠ å¯†çš„ï¼Œè¿™å°±ä¿è¯äº†æ•°æ®çš„å®‰å…¨æ€§å’Œéšç§æ€§ã€‚

:::

### éŸ³è§†é¢‘

#### â“åœ¨æ•´ä¸ªè§†é¢‘é¢è¯•çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šç”¨åˆ°å“ªäº›åè®®ï¼Œéƒ½åœ¨å“ªå‡ å±‚

::: details ğŸ’¡

  - **ç‰©ç†å±‚å’Œé“¾è·¯å±‚**ï¼š`Ethernet`ï¼ˆä»¥å¤ªç½‘ï¼‰åè®®ç”¨äºå®ç°å±€åŸŸç½‘ä¸­çš„è®¾å¤‡äº¤äº’ï¼Œ`Wi-Fi` ç”¨äºæ— çº¿ç½‘ç»œé€šä¿¡ã€‚è¿™äº›é€šå¸¸åœ¨ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚èµ·ä½œç”¨ã€‚

  - **ç½‘ç»œå±‚**ï¼š`IP` åè®®ï¼ˆInternet Protocolï¼‰ç”¨äºåœ¨ç½‘ç»œä¸­å®šä½è®¾å¤‡ï¼Œå¹¶åœ¨è®¾å¤‡ä¹‹é—´ä¼ è¾“æ•°æ®åŒ…ï¼Œå®ƒåœ¨ç½‘ç»œå±‚èµ·ä½œç”¨ã€‚

  - **ä¼ è¾“å±‚**ï¼š`TCP` åè®®ï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰ç”¨äºåœ¨ç½‘ç»œä¸­åˆ›å»ºè¿æ¥å¹¶æä¾›å¯é çš„æ•°æ®ä¼ è¾“ã€‚è€Œ `UDP` åè®®ï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰åˆ™æä¾›æ— è¿æ¥çš„å¿«é€Ÿæ•°æ®ä¼ è¾“ï¼Œç”¨äºå®æ—¶é€šä¿¡ï¼Œå¦‚éŸ³è§†é¢‘ä¼ è¾“ã€‚

  - **ä¼šè¯å±‚å’Œè¡¨ç¤ºå±‚**ï¼šè¿™ä¸¤å±‚åœ¨ç°ä»£ç½‘ç»œä¸­å¹¶ä¸æ˜ç¡®åŒºåˆ†ï¼Œä¸è¿‡ `SSL/TLS` åè®®æä¾›äº†æ•°æ®åŠ å¯†çš„æœåŠ¡ï¼Œå¯è§†ä¸ºåœ¨æ­¤ä¸¤å±‚ä¸­ã€‚

  - **åº”ç”¨å±‚**ï¼š`HTTP/HTTPS` åè®®ç”¨äºç½‘ç»œæµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ï¼Œ`RTMP`(`Real Time Messaging Protocol`) æˆ–è€… `WebRTC`ï¼ˆ`Web` å®æ—¶é€šä¿¡ï¼‰ç­‰æ˜¯ä¸“ä¸ºæµåª’ä½“å’Œé€šä¿¡è®¾è®¡çš„åè®®ï¼Œç”¨äºå®æ—¶éŸ³è§†é¢‘æ•°æ®ä¼ è¾“ã€‚

:::

#### â“ä¸ºä»€ä¹ˆè§†é¢‘ä¼šè®®ç”¨ `UDP`

::: details ğŸ’¡

  - å®æ—¶æ€§ï¼šè§†é¢‘ä¼šè®®è¦æ±‚éŸ³é¢‘å’Œè§†é¢‘æ•°æ®èƒ½å¤Ÿå°½å¿«åœ°ä¼ è¾“å’Œæ’­æ”¾ï¼Œè¿™éœ€è¦ä½å»¶è¿Ÿçš„ä¼ è¾“åè®®ã€‚`UDP` åè®®æ˜¯ä¸€ç§æ— è¿æ¥åè®®ï¼Œä¸éœ€è¦å»ºç«‹å’Œç»´æŠ¤å¤æ‚çš„è¿æ¥çŠ¶æ€ï¼Œå› æ­¤å¯ä»¥å‡å°‘å¾ˆå¤šç½‘ç»œå»¶è¿Ÿã€‚

  - å®¹å¿æ•°æ®ä¸¢å¤±ï¼šåœ¨è§†é¢‘ä¼šè®®ä¸­ï¼Œå¦‚æœå¶å°”ä¸¢å¤±ä¸€äº›éŸ³é¢‘æˆ–è§†é¢‘æ•°æ®åŒ…ï¼Œå¹¶ä¸ä¼šå¯¹æ•´ä½“çš„é€šä¿¡è´¨é‡äº§ç”Ÿå¤ªå¤§å½±å“ï¼Œç›¸åï¼Œå¦‚æœä½¿ç”¨äº† `TCP` åè®®ï¼Œ`TCP` ä¼šå°è¯•é‡ä¼ ä¸¢å¤±çš„æ•°æ®åŒ…ï¼Œè¿™å¯èƒ½å¼•å…¥æ›´å¤šçš„ç½‘ç»œå»¶è¿Ÿï¼Œå½±å“é€šä¿¡çš„å®æ—¶æ€§ã€‚

  - ç®€å•é«˜æ•ˆï¼šå’Œ `TCP` ç›¸æ¯”ï¼Œ`UDP` çš„åè®®å¤´éƒ¨æ›´ç®€å•ï¼Œå¤„ç†èµ·æ¥æ›´é«˜æ•ˆï¼Œå¯ä»¥ç”¨äºæ„å»ºé«˜æ€§èƒ½çš„å®æ—¶åº”ç”¨ã€‚

  - å¤„ç†ç½‘ç»œæ‹¥å¡ï¼š`UDP` ä¸ä¼šåƒ `TCP` é‚£æ ·æ ¹æ®ç½‘ç»œæ‹¥å¡æ¥è°ƒæ•´æ•°æ®çš„å‘é€é€Ÿç‡ï¼Œè¿™æ ·å³ä½¿åœ¨ç½‘ç»œä¸ç¨³å®šçš„ç¯å¢ƒä¸‹ï¼Œä¹Ÿå¯ä»¥ä¿è¯è§†é¢‘ä¼šè®®çš„æµç•…æ€§ã€‚

  - æ›´å¥½çš„æ”¯æŒå¤šæ’­å’Œå¹¿æ’­ï¼šè§†é¢‘ä¼šè®®å¸¸å¸¸éœ€è¦åŒæ—¶å‘å¤šä¸ªç«¯ç‚¹å‘é€åŒæ ·çš„æ•°æ®ï¼Œè¿™ç§åœºæ™¯ä¸‹ `UDP` æ¯” `TCP` æ›´æœ‰ä¼˜åŠ¿ã€‚

ç»“è®ºï¼šç”±äº `UDP` åè®®çš„å®æ—¶æ€§ã€å®¹é”™æ€§ã€ç®€å•é«˜æ•ˆå’Œå¯¹å¤šæ’­å’Œå¹¿æ’­çš„è‰¯å¥½æ”¯æŒï¼Œè§†é¢‘ä¼šè®®é€šå¸¸ä¼šé€‰æ‹©ä½¿ç”¨ `UDP` åè®®ã€‚ç„¶åï¼Œé€šè¿‡åœ¨åº”ç”¨å±‚æ·»åŠ ä¸€äº›é”™è¯¯æ§åˆ¶å’Œæ¢å¤æœºåˆ¶ï¼Œæ¥ç¡®ä¿é€šä¿¡è´¨é‡ã€‚

:::

#### â“ç”¨ `UDP` å®ç°éŸ³è§†é¢‘ï¼Œæœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥ä¿è¯é€šè¯è´¨é‡

::: details ğŸ’¡

  - åº”ç”¨å±‚çš„é‡ä¼ ï¼šåœ¨å…³é”®æ•°æ®æµï¼ˆä¾‹å¦‚å…³é”®å¸§ï¼‰ä¸¢å¤±æ—¶ï¼Œåº”ç”¨å¯ä»¥é€‰æ‹©é‡æ–°å‘é€ä¸¢åŒ…ã€‚

  - ä½¿ç”¨å‰å‘çº é”™ï¼ˆ`FEC`ï¼‰ï¼š`FEC` å¯ä»¥åœ¨å‘é€ç«¯åŠ å…¥å†—ä½™æ•°æ®ï¼Œå³ä½¿éƒ¨åˆ†æ•°æ®ä¸¢å¤±ï¼Œä¹Ÿèƒ½å€ŸåŠ©å†—ä½™æ•°æ®è¿›è¡Œæ¢å¤ã€‚

  - ä½¿ç”¨å·®é”™æ§åˆ¶ç¼–ç ï¼šå¦‚ `RS`(`Reed-Solomon`) ç¼–ç ç­‰ï¼Œå¯ä»¥å¸®åŠ©æ¥æ”¶ç«¯ä¿®å¤éƒ¨åˆ†ä¸¢å¤±çš„æ•°æ®ã€‚

  - äº¤é”™å’ŒæŠ–åŠ¨ç¼“å†²ï¼šå°†æ•°æ®æ‰“åŒ…ä¸ºæ›´å¤§çš„å•ä½å¹¶äº¤é”™å‘é€ï¼Œå¯ä»¥å‡å°‘ä¸¢åŒ…ç‡å¯¹äºè§£ç çš„å½±å“ã€‚å¦å¤–ï¼Œåº”ç”¨å¯ä»¥åœ¨å®¢æˆ·ç«¯ä½¿ç”¨æŠ–åŠ¨ç¼“å†²åŒºï¼Œå¯¹æ¥æ”¶çš„æ•°æ®åŒ…è¿›è¡Œæ’åºå’Œç¼“å†²ï¼Œä»¥é€‚åº”ç½‘ç»œå»¶è¿Ÿçš„å˜åŒ–ã€‚

  - åˆ©ç”¨ `QoS`(`Quality of Service`)ï¼šé€šè¿‡å¯¹ç½‘ç»œè¿›è¡Œä¼˜åŒ–ï¼Œå¦‚è®¾ç½®ä¼˜å…ˆçº§ï¼Œä¿è¯éŸ³è§†é¢‘æµçš„å¸¦å®½ã€å»¶è¿Ÿç­‰ã€‚

  - ç ç‡è‡ªé€‚åº”ï¼šæ ¹æ®ç½‘ç»œçŠ¶æ€åŠ¨æ€è°ƒæ•´éŸ³è§†é¢‘çš„ç¼–ç ç‡ã€‚

  - ä½¿ç”¨å®æ—¶ä¼ è¾“åè®®ï¼ˆ`RTP`ï¼‰ä»¥åŠå®æ—¶ä¼ è¾“æ§åˆ¶åè®®ï¼ˆ`RTCP`ï¼‰
    * `RTP` æä¾›äº†æ ‡å‡†åŒ–çš„åŒ…ç»“æ„ç”¨äºéŸ³è§†é¢‘æ•°æ®ã€‚
    * `RTCP` æä¾›å…³äºç½‘ç»œçŠ¶å†µçš„åé¦ˆã€‚

:::

#### â“å¦‚æœç”¨ `TCP` å®ç°éŸ³è§†é¢‘ï¼Œéœ€è¦å»ºç«‹å‡ æ¬¡è¿æ¥

::: details ğŸ’¡

> è‡³å°‘éœ€è¦å»ºç«‹ä¸€æ¬¡è¿æ¥ã€‚

  - `TCP` æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„åè®®ï¼Œå®ƒéœ€è¦åœ¨ä¼ è¾“æ•°æ®å‰ä¸å¦ä¸€å°è®¾å¤‡å»ºç«‹ä¸€ä¸ªè¿æ¥ã€‚
    > åœ¨ä¸€ä¸ªéŸ³è§†é¢‘é€šè¯åœºæ™¯ä¸­ï¼Œè‡³å°‘éœ€è¦å»ºç«‹ä¸€æ¬¡è¿æ¥ï¼Œè¿™ä¸ªè¿æ¥ç”¨æ¥ä¼ è¾“éŸ³é¢‘å’Œè§†é¢‘æ•°æ®ã€‚

  - æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦å»ºç«‹å¤šä¸ªTCPè¿æ¥ã€‚
    > ä¾‹å¦‚ï¼Œå¦‚æœéŸ³é¢‘å’Œè§†é¢‘æ•°æ®éœ€è¦ç”±ä¸åŒçš„æœåŠ¡å™¨åˆ†åˆ«å¤„ç†ï¼Œé‚£ä¹ˆå°±å¯èƒ½éœ€è¦åˆ†åˆ«å¯¹æ¯ä¸ªæœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªè¿æ¥ã€‚åˆæˆ–è€…ï¼Œå¦‚æœéœ€è¦åœ¨éŸ³è§†é¢‘ä¼ è¾“çš„åŒæ—¶è¿›è¡Œå…¶ä»–çš„æ•°æ®äº¤æ¢ï¼ˆæ¯”å¦‚æ–‡æœ¬èŠå¤©ï¼Œæ–‡ä»¶ä¼ è¾“ç­‰ï¼‰ï¼Œé‚£ä¹ˆä¹Ÿå¯èƒ½éœ€è¦é¢å¤–å»ºç«‹ä¸€ä¸ªæˆ–å¤šä¸ª `TCP` è¿æ¥ã€‚

  - `TCP` è¿æ¥çš„æ•°é‡ä¹Ÿå¯èƒ½ä¸ç‰¹å®šçš„åº”ç”¨æ¶æ„æˆ–åè®®æœ‰å…³ã€‚
    > ä¾‹å¦‚ï¼Œåœ¨ `WebRTC`ï¼ˆä¸€ç§ç”¨äºå®æ—¶é€šä¿¡çš„å¼€æ”¾æºä»£ç é¡¹ç›®ï¼‰ä¸­ï¼ŒéŸ³é¢‘å’Œè§†é¢‘æµé€šå¸¸ä¼šä½¿ç”¨å•ç‹¬çš„è¿æ¥ï¼Œä»¥ä¾¿å•ç‹¬æ§åˆ¶å®ƒä»¬çš„ä¼ è¾“è´¨é‡ã€‚

:::

### æ•…éšœåˆ†æ

#### â“å¦‚æœå‘ç°å¾®ä¿¡å’Œ QQ éƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œä½†æ˜¯æµè§ˆå™¨ç½‘é¡µæ‰“ä¸å¼€ï¼Œå¯èƒ½æ˜¯ä»€ä¹ˆåŸå› ï¼Œæœ‰ä»€ä¹ˆæ’æŸ¥çš„åŠæ³•

::: details ğŸ’¡

  - æµè§ˆå™¨è®¾ç½®é—®é¢˜ï¼šå¯èƒ½æµè§ˆå™¨çš„ä»£ç†è®¾ç½®è¢«ä¿®æ”¹ï¼Œæˆ–è€…è¢«æŸäº›æ¶æ„è½¯ä»¶æ›´æ”¹äº†ç½‘ç»œè®¾ç½®ã€‚

  - `DNS` è§£æé—®é¢˜ï¼šå¾®ä¿¡å’Œ `QQ` æœåŠ¡å™¨çš„ `IP` åœ°å€å¯èƒ½å·²ç»åœ¨æœ¬åœ°ç¼“å­˜ä¸­ï¼Œä¸éœ€è¦ `DNS` è§£æï¼Œä½†æ˜¯æµè§ˆå™¨è®¿é—®ç½‘ç«™éœ€è¦ `DNS` è§£æåŸŸååˆ° `IP`ï¼Œå¦‚æœ `DNS` è§£æå‡ºç°é—®é¢˜ï¼Œå°±ä¼šå¯¼è‡´ç½‘é¡µæ— æ³•æ‰“å¼€ã€‚

  - ç½‘ç»œè¿æ¥ç±»å‹ï¼šæœ‰äº›ç½‘ç»œç¯å¢ƒå¯¹ä¸åŒç±»å‹çš„ç½‘ç»œè¿æ¥æœ‰é™åˆ¶ï¼Œå¯èƒ½å¯¹æµè§ˆå™¨ä½¿ç”¨çš„ `HTTP/HTTPS` åè®®è¿›è¡Œäº†é™åˆ¶ã€‚

:::

>â“æœ‰ä»€ä¹ˆæ’æŸ¥çš„åŠæ³•

::: details ğŸ’¡

  - æ£€æŸ¥å¹¶é‡ç½®æµè§ˆå™¨è®¾ç½®ï¼šç¡®è®¤æµè§ˆå™¨çš„ç½‘ç»œè®¾ç½®æ˜¯æ­£ç¡®çš„ï¼Œæ²¡æœ‰è¢«é”™è¯¯çš„ä»£ç†æœåŠ¡æˆ– `VPN` å¹²æ‰°ã€‚ä¹Ÿå¯ä»¥å°è¯•é‡ç½®æµè§ˆå™¨è®¾ç½®ï¼Œæˆ–è€…ä½¿ç”¨å¦å¤–ä¸€ç§æµè§ˆå™¨è¯•è¯•ã€‚

  - æ›´æ¢ `DNS`ï¼šè¯•ç€æ›´æ¢ä¸€ä¸‹ `DNS` æœåŠ¡å™¨åœ°å€ã€‚
    > ä¾‹å¦‚ï¼Œæ›´æ”¹ä¸º `Google` çš„å…¬å…± `DNS` åœ°å€ `8.8.8.8` æˆ– `8.8.4.4`ã€‚

  - ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·ï¼šå¯ä»¥ä½¿ç”¨ `Ping` å‘½ä»¤æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œä½¿ç”¨ `nslookup` å‘½ä»¤æ£€æŸ¥ `DNS` è§£ææ˜¯å¦æ­£å¸¸ã€‚

  - æŸ¥çœ‹é˜²ç«å¢™è®¾ç½®ï¼šæ£€æŸ¥ä¸€ä¸‹ä¸ªäººç”µè„‘çš„é˜²ç«å¢™æˆ–è€…è·¯ç”±å™¨è®¾ç½®ï¼Œçœ‹çœ‹æ˜¯å¦å¯¹ `HTTP/HTTPS` åè®®æœ‰æ‰€é™åˆ¶ã€‚

  - åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæµ‹è¯•ï¼šå¦‚æœæœ‰æ¡ä»¶çš„è¯ï¼Œå¯ä»¥å°è¯•åœ¨æ‰‹æœºæˆ–è€…å…¶ä»–ç”µè„‘ä¸Šè¿åŒæ ·çš„ç½‘ç»œï¼Œçœ‹çœ‹èƒ½å¦æ­£å¸¸ä½¿ç”¨æµè§ˆå™¨è®¿é—®ç½‘é¡µã€‚

:::

#### â“åœ¨åŒ—äº¬ `HTTP` è¯·æ±‚æœåŠ¡å™¨å“åº”å¿«ï¼Œå¯èƒ½ç¦»æœåŠ¡å™¨è·ç¦»è¿‘ï¼›è€Œåœ¨ä¸Šæµ·è®¿é—®å°±éå¸¸æ…¢ï¼Œä¼šæ˜¯ä»€ä¹ˆåŸå› 
::: details

  - ç½‘ç»œè·¯å¾„å’Œè·ç¦»ï¼šå°½ç®¡è·ç¦»åœ¨ç‰©ç†ä¸Šç›¸è¿‘ï¼Œä½†åœ¨ç½‘ç»œä¼ è¾“ä¸Šï¼Œä¿¡æ¯å¯èƒ½è¦ç»è¿‡å¤šä¸ªèŠ‚ç‚¹æ‰èƒ½åˆ°è¾¾ç›®çš„åœ°ã€‚ç½‘ç»œå µå¡ã€è·¯ç”±å™¨æ€§èƒ½ã€ç½‘ç»œæä¾›å•†ç­‰éƒ½ä¼šå½±å“ç½‘ç»œçš„ä¼ è¾“é€Ÿåº¦ã€‚ä»ä¸Šæµ·åˆ°æœåŠ¡å™¨çš„ç½‘ç»œè·¯å¾„å¯èƒ½æ¯”ä»åŒ—äº¬åˆ°æœåŠ¡å™¨çš„ç½‘ç»œè·¯å¾„å¤æ‚ï¼Œè¿›è€Œé€ æˆå»¶è¿Ÿå¢åŠ ã€‚

  - æœåŠ¡å™¨è´Ÿè½½ï¼šå¦‚æœæœåŠ¡å™¨åœ¨å¤„ç†ä¸Šæµ·çš„è¯·æ±‚æ—¶è´Ÿè½½è¿‡é«˜ï¼Œå¯èƒ½ä¼šå¯¼è‡´å“åº”é€Ÿåº¦ä¸‹é™ã€‚
    > æ¯”å¦‚ï¼Œå¦‚æœæœåŠ¡å™¨åŒæ—¶å¤„ç†çš„è¯·æ±‚å¤ªå¤šï¼Œæˆ–è€…æœåŠ¡å™¨ä¸Šè¿è¡Œçš„å…¶ä»–åº”ç”¨å ç”¨äº†å¤§é‡èµ„æºï¼Œéƒ½å¯èƒ½å¯¼è‡´æœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„é€Ÿåº¦é™ä½ã€‚

  - `CDN` é…ç½®ï¼šå¦‚æœæœåŠ¡å™¨ä½¿ç”¨äº†å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆ`CDN`ï¼‰ï¼Œä½†æ²¡æœ‰åœ¨ä¸Šæµ·æˆ–è€…é™„è¿‘åœ°åŒºè®¾ç½®èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä¸Šæµ·çš„ç”¨æˆ·å°±éœ€è¦ä»è¿œå¤„çš„æœåŠ¡å™¨è·å–æ•°æ®ï¼Œè¿™ä¼šå¢åŠ å»¶è¿Ÿã€‚

  - `DNS` è§£æï¼šå¦‚æœæœåŠ¡å™¨çš„ `DNS` è§£ææœåŠ¡åœ¨ä¸Šæµ·çš„æ•ˆç‡è¾ƒä½ï¼Œä¹Ÿä¼šä½¿å¾—ä¸Šæµ·ç”¨æˆ·åœ¨è·å–æœåŠ¡å™¨åœ°å€æ—¶èŠ±è´¹æ›´å¤šçš„æ—¶é—´ã€‚
    
:::

>â“å¦‚æœç”¨æˆ·æŠ•è¯‰ï¼Œæ€ä¹ˆåˆ†æè¿™ä¸ªé—®é¢˜

::: details

  - ç½‘ç»œçŠ¶å†µæ£€æµ‹ï¼šé¦–å…ˆå¯ä»¥è¿›è¡Œä¸€äº›åŸºç¡€çš„ç½‘ç»œæ€§èƒ½æµ‹è¯•ã€‚
    > æ¯”å¦‚ `Ping` å’Œ `Traceroute`ï¼Œç”¨æ¥æ£€æµ‹æ•°æ®åŒ…åˆ°è¾¾æœåŠ¡å™¨æ‰€éœ€çš„æ—¶é—´ä»¥åŠç»è¿‡çš„èŠ‚ç‚¹ã€‚`Ping` å¯ä»¥æŸ¥çœ‹ç½‘ç»œå»¶è¿Ÿï¼Œ`Traceroute` å¯ä»¥çœ‹åˆ°æ•°æ®åŒ…åˆ°è¾¾æœåŠ¡å™¨æ‰€ç»è¿‡çš„æ‰€æœ‰è·¯ç”±èŠ‚ç‚¹ã€‚å¦‚æœå‘ç°æŸä¸€è·³çš„å»¶è¿Ÿç‰¹åˆ«é«˜ï¼Œå¯èƒ½å°±æ˜¯å‡ºé—®é¢˜çš„åœ°æ–¹ã€‚

  - `CDN` æ˜¯å¦ä½¿ç”¨ï¼šå¦‚æœæœåŠ¡å™¨ä½¿ç”¨äº†å†…å®¹åˆ†å‘ç½‘ç»œ (`CDN`)ï¼Œæ£€æŸ¥ `CDN` æ˜¯å¦åœ¨æœ‰é—®é¢˜çš„åœ°æ–¹æ­£å¸¸å·¥ä½œã€‚
    > `CDN` è¿è¥å•†é€šå¸¸ä¼šåœ¨å…¨å›½å„åœ°è®¾ç«‹èŠ‚ç‚¹ï¼Œå¦‚æœæŸä¸ªåœ°æ–¹çš„èŠ‚ç‚¹å‡ºç°é—®é¢˜ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¯¥åœ°åŒºçš„è®¿é—®é€Ÿåº¦å˜æ…¢ã€‚

  - å¸¦å®½æŸ¥çœ‹ï¼šæŸ¥çœ‹æœåŠ¡å™¨çš„å¸¦å®½ä½¿ç”¨æƒ…å†µï¼Œå¦‚æœå¸¦å®½ä½¿ç”¨è¿‡é«˜ï¼Œå¯èƒ½ä¼šå¯¼è‡´è®¿é—®é€Ÿåº¦å˜æ…¢ã€‚

  - æœåŠ¡å™¨æ€§èƒ½æŸ¥çœ‹ï¼šåˆ†ææœåŠ¡å™¨æ€§èƒ½æŒ‡æ ‡ã€‚
    > å¦‚ `CPU` ä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨æƒ…å†µã€`I/O`ç­‰ï¼Œå¦‚æœæœåŠ¡å™¨è´Ÿè½½è¿‡é«˜ï¼Œå¯èƒ½ä¼šå½±å“æœåŠ¡çš„å“åº”æ—¶é—´ã€‚
   
  - æŠ•è¯‰ç”¨æˆ·æ‰€åœ¨ç½‘ç»œç¯å¢ƒåˆ†æï¼šäº†è§£æŠ•è¯‰ç”¨æˆ·çš„ç½‘ç»œç¯å¢ƒã€‚
    > å¦‚ç½‘ç»œè¿è¥å•†ï¼Œç½‘ç»œç±»å‹ï¼ˆå…‰çº¤ã€`ADSL`ã€`4G`ç­‰ï¼‰ï¼Œæˆ–è€…åœ¨å…¶ä»–ç½‘ç»œç¯å¢ƒä¸‹è®¿é—®æƒ…å†µï¼Œä»¥æ’é™¤æ˜¯ç”¨æˆ·æœ¬èº«ç½‘ç»œåŸå› å¯¼è‡´çš„é—®é¢˜ã€‚

  - åº”ç”¨å±‚é¢çš„æ£€æŸ¥ï¼šé™¤äº†ç¡¬ä»¶å’Œç½‘ç»œï¼Œè¿˜è¦æ£€æŸ¥åº”ç”¨å±‚é¢ã€‚
    > æ¯”å¦‚æœåŠ¡å™¨æ˜¯ä¸æ˜¯å‡ºç°äº†é”™è¯¯ã€æ˜¯å¦æœ‰å¤§é‡çš„è¯·æ±‚ç­‰ã€‚

  - æœ€åï¼Œå¦‚æœé—®é¢˜è¿˜æ˜¯æ— æ³•å®šä½ï¼Œæˆ–è€…æ˜¯è·¨è¶Šå¤šä¸ªç½‘ç»œè¿è¥å•†çš„é—®é¢˜ï¼Œåˆ™éœ€è¦ä¸ç½‘ç»œæœåŠ¡æä¾›å•†è¿›è¡Œæ²Ÿé€šï¼Œå¯èƒ½èƒ½æä¾›æ›´å¤šçš„ä¿¡æ¯æˆ–è€…è§£å†³æ–¹æ¡ˆã€‚

:::

#### â“æ•´ä¸ªç½‘ç»œè¿‡ç¨‹ä¸­ï¼Œç½‘ç»œè€—æ—¶ä¼šåœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œæ€ä¹ˆä¼˜åŒ–

::: details ğŸ’¡

  - `DNS` æŸ¥è¯¢ï¼šå½“ä½ å‘ä¸€ä¸ª `URL` å‘é€è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨æˆ–åº”ç”¨éœ€è¦é¦–å…ˆé€šè¿‡ `DNS` æŸ¥è¯¢è¿™ä¸ª `URL` çš„ `IP` åœ°å€ã€‚`DNS` æŸ¥è¯¢æœ‰æ—¶ä¼šéå¸¸è€—æ—¶ï¼Œç‰¹åˆ«æ˜¯åœ¨åˆæ¬¡æŸ¥è¯¢æˆ– `DNS` ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µä¸‹ã€‚
    > ä¼˜åŒ–æ–¹æ³•ï¼šå¯ä»¥åœ¨æœåŠ¡ç«¯çš„è§£ææœåŠ¡å™¨é‡‡ç”¨ `CDN` æ¥åŠ é€Ÿ `DNS` çš„è§£æé€Ÿåº¦ï¼Œæˆ–è€…ä½¿ç”¨ `DNS` é¢„è·å–æŠ€æœ¯ï¼Œåœ¨åŠ è½½é¡µé¢æˆ–è€…åº”ç”¨çš„æ—¶å€™ï¼Œé¢„å…ˆè¿›è¡Œ `DNS` æŸ¥è¯¢ã€‚

  - å»ºç«‹è¿æ¥ï¼šæ ¹æ®åè®®çš„ä¸åŒï¼ˆ`HTTP/HTTPs`ï¼‰ï¼Œå»ºç«‹è¿æ¥éœ€è¦æ¶ˆè€—ä¸åŒçš„æ—¶é—´ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­ã€‚
    > ä¼˜åŒ–æ–¹æ³•ï¼šå¯ä»¥ä½¿ç”¨ `HTTP/2`ï¼Œæ”¯æŒå•ä¸€è¿æ¥ä¸Šå¹¶è¡Œäº¤é”™ï¼ˆ`multiplexing`ï¼‰è¯·æ±‚å’Œå“åº”ï¼Œä»è€Œé¿å… `HTTP/1.1` ä¸­çš„é˜Ÿå¤´é˜»å¡ï¼ˆ`Head-of-line blocking`ï¼‰é—®é¢˜ã€‚

  - æœåŠ¡å™¨å¤„ç†ï¼šæœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶ç”Ÿæˆå“åº”æ•°æ®ä¹Ÿä¼šéœ€è¦ä¸€äº›æ—¶é—´ã€‚ç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤æ‚æŸ¥è¯¢æˆ–ç”Ÿæˆå¤§é‡æ•°æ®æ—¶ï¼Œè¿™éƒ¨åˆ†æ—¶é—´å¯èƒ½ä¼šéå¸¸é•¿ã€‚
    > ä¼˜åŒ–æ–¹æ³•ï¼šåœ¨äºæœåŠ¡ç«¯çš„æ€§èƒ½ä¼˜åŒ–ï¼Œä¾‹å¦‚ä½¿ç”¨åˆé€‚çš„ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼Œä»¥åŠé€‚å½“çš„ç³»ç»Ÿå’Œåº”ç”¨å±‚ç¼“å­˜ã€‚é’ˆå¯¹æ•°æ®åº“æŸ¥è¯¢ï¼Œå¯ä»¥ä¼˜åŒ– `SQL` è¯­å¥æˆ–è€…è¿›è¡Œåˆé€‚çš„æ•°æ®åº“è®¾è®¡å’Œç´¢å¼•ã€‚

  - æ•°æ®ä¼ è¾“ï¼šæ•°æ®åœ¨ç½‘ç»œä¼ è¾“ä¸­è€—æ—¶ï¼Œå–å†³äºæ•°æ®é‡å’Œç½‘ç»œå¸¦å®½ã€‚
    > ä¼˜åŒ–æ–¹æ³•ï¼šå¯ä»¥ä½¿ç”¨æ•°æ®å‹ç¼©æŠ€æœ¯ï¼Œå°½é‡å‡å°‘ä¼ è¾“çš„æ•°æ®é‡ã€‚è¿˜å¯ä»¥ä½¿ç”¨åˆ†å—ä¼ è¾“ç¼–ç ï¼ˆ`Chunked transfer encoding`ï¼‰ï¼Œè®©æœåŠ¡å™¨ç”Ÿæˆå“åº”æ—¶å°±å¯ä»¥å¼€å§‹å‘é€æ•°æ®ã€‚

:::

#### â“å¦‚æœæ‰‹æœºåº”ç”¨ä¸æœåŠ¡å™¨é€šè¿‡ `TCP` è¿æ¥ï¼Œè¿™ä¸ªæ—¶å€™æ‰‹æœºåˆ‡æ¢ä¸ºé£è¡Œæ¨¡å¼ï¼ŒæœåŠ¡å™¨å¯ä»¥çŸ­æ—¶é—´å†…çŸ¥é“åˆ°æ‰‹æœºç¦»çº¿çŠ¶æ€å—

::: details ğŸ’¡

  æœåŠ¡å™¨é€šè¿‡ `TCP` çŸ­æ—¶é—´å†…æ˜¯ä¸èƒ½çŸ¥æ™“æ‰‹æœºçš„ç¦»çº¿çŠ¶æ€çš„ã€‚å› ä¸º `TCP` ä¸»è¦æ˜¯ä¸ºäº†ä¿è¯æ•°æ®çš„å¯é ä¼ è¾“ï¼Œé€šä¿¡åŒæ–¹æ˜¯é€šè¿‡æ•°æ®äº¤æ¢æ¥äº†è§£å¯¹æ–¹çŠ¶æ€ã€‚è€Œ `TCP` å¹¶æ²¡æœ‰è®¾è®¡å¿ƒè·³æ£€æµ‹æœºåˆ¶ï¼Œæ‰€æœ‰å°±æ²¡æœ‰å®æ—¶æ£€æµ‹å¯¹æ–¹æ˜¯å¦ç¦»çº¿çš„èƒ½åŠ›ã€‚

  å›åˆ° `TCP` çš„è¿è¡Œæœºåˆ¶ï¼Œå½“ä¸€æ–¹æ–­å¼€è¿æ¥æ—¶ï¼Œé€šå¸¸ä¼šå‘é€ä¸€ä¸ª `FIN` åŒ…åˆ°å¦ä¸€æ–¹ã€‚ä½†æ˜¯å½“æ‰‹æœºè¿›å…¥é£è¡Œæ¨¡å¼æ—¶ï¼Œå®ƒå¹¶æ²¡æœ‰å‘é€ä»»ä½•ç±»å‹çš„ `TCP` åŒ…åˆ°æœåŠ¡å™¨ï¼Œæ‰€ä»¥æœåŠ¡å™¨å¹¶æ²¡æœ‰æ˜æ˜¾çš„è¿¹è±¡è¡¨æ˜æ‰‹æœºå·²ç»ç¦»çº¿ã€‚

ä¸¤ç§æœºåˆ¶ï¼š

  - `TCP` è¶…æ—¶ï¼š`TCP` è¿æ¥æœ‰ä¸€ä¸ªè¶…æ—¶æœºåˆ¶ï¼Œä¸€æ—¦è¿æ¥ä¸Šæ²¡æœ‰æ•°æ®ä¼ è¾“å¹¶ä¸”è¶…è¿‡äº†ç»™å®šçš„æ—¶é—´é™åˆ¶ï¼Œé‚£ä¹ˆè¿æ¥å°±ä¼šè¢«å…³é—­ï¼ŒæœåŠ¡å™¨ä¼šçŸ¥é“æ‰‹æœºå·²ç»ç¦»çº¿ã€‚

  - `Keep-Alive`ï¼šå¦‚æœåœ¨æœåŠ¡å™¨å’Œæ‰‹æœºä¹‹é—´å¯ç”¨äº† `TCP` æˆ–åº”ç”¨å±‚çš„ `Keep-Alive` æœºåˆ¶ï¼ŒæœåŠ¡å™¨ä¼šå®šæœŸå‘æ‰‹æœºå‘é€å°çš„æ•°æ®åŒ…æ¥æ£€æŸ¥è¿æ¥æ˜¯å¦ä»ç„¶æœ‰æ•ˆã€‚å¦‚æœæ‰‹æœºæ²¡æœ‰å“åº”è¿™äº›æ•°æ®åŒ…ï¼ŒæœåŠ¡å™¨å°†çŸ¥é“æ‰‹æœºå·²ç»ç¦»çº¿ã€‚

ç»“è®ºï¼šä¸¤ç§æœºåˆ¶éƒ½éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½å·¥ä½œã€‚å› æ­¤ï¼Œå¦‚æœæ‰‹æœºåˆ‡æ¢åˆ°é£è¡Œæ¨¡å¼ï¼ŒæœåŠ¡å™¨å¹¶ä¸èƒ½ç«‹å³çŸ¥é“è¿™ä¸€ç‚¹ã€‚ä½†æ˜¯ç»è¿‡ä¸€æ®µæ—¶é—´åï¼Œä¸€æ—¦æœåŠ¡å™¨å°è¯•å‘æ‰‹æœºå‘é€æ•°æ®æˆ–è€…æ‰§è¡Œ `Keep-Alive` æ£€æŸ¥å¹¶ä¸”å¤±è´¥ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šçŸ¥é“æ‰‹æœºå·²ç»ç¦»çº¿ã€‚
   
:::
