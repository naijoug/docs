import{_ as p}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as c,o as i,c as l,a as t,b as n,e as s,d as e,f as o}from"./app-HKAFCGrh.js";const u={},d=n("h2",{id:"reference",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#reference","aria-hidden":"true"},"#"),s(" reference")],-1),r=n("a",{href:"%E2%9C%85"},null,-1),k={href:"https://zhuanlan.zhihu.com/p/98432137",target:"_blank",rel:"noopener noreferrer"},v=n("a",{href:""},null,-1),m={href:"https://kingcos.me/posts/2019/nsobject_in_ios",target:"_blank",rel:"noopener noreferrer"},b=n("a",{href:"%E2%9C%85"},null,-1),h={href:"https://juejin.cn/post/6844903728311435271",target:"_blank",rel:"noopener noreferrer"},g=o("<blockquote><p>ä½œè€…é¦–å…ˆè¿è¡Œäº†ä»£ç ï¼Œå‘ç°å°½ç„¶ç¥å¥‡è¾“å‡ºäº†ï¼Œäºæ˜¯å¼€å§‹è¿›ä¸€æ­¥ç ”ç©¶ ğŸ‘‰ğŸ» é¦–å…ˆæ ¹æ® <code>runtime</code> æºç åˆ†æç¡®å®šäº† <code>cls</code> æ˜¯å°±æ˜¯æŒ‡å‘ç±»å¯¹è±¡çš„ä¸€ä¸ªæŒ‡é’ˆ ğŸ‘‰ğŸ» è¿›ä¸€æ­¥ç ”ç©¶ä¸€ä¸ªç±»çš„å†…å­˜å¸ƒå±€ï¼Œæ ¹æ®å­—æ®µå¤§å°ï¼Œç±»æ ¹æ®ç±»æŒ‡é’ˆåç§»å†…å­˜è¿›è¡Œè·å–å€¼ ğŸ‘‰ğŸ» è€Œ <code>cls</code> åœ¨å‡½æ•°ç±»æ˜¯åˆ†é…åœ¨æ ˆä¸Šï¼Œæ ˆä¸Šåœ°å€æ˜¯ä»é«˜å¾€ä½åˆ†å¸ƒï¼Œå…ˆå…¥æ ˆçš„åœ°å€å¤§ã€‚ ğŸ‘‰ğŸ» æ ¹æ® <code>viewDidLoad</code> è°ƒç”¨æ—¶çš„æ ˆæ•°æ®ä¼šå…ˆå°† <code>self</code>(åˆšå¥½ <code>name</code> å±æ€§æ˜¯ä¸€ä¸ª <code>NSString</code> ç±»å‹ï¼Œå¤§å°ä¸º 8 å­—èŠ‚) å‹å…¥æ ˆï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º <code>ViewController</code> ç±»åã€‚</p></blockquote>",1),f=n("a",{href:"%E2%9C%85"},"ğŸ’¯",-1),w={href:"https://blog.sunnyxx.com/2014/11/06/runtime-nuts",target:"_blank",rel:"noopener noreferrer"},y=n("a",{href:""},null,-1),q={href:"https://juejin.cn/post/6844903569322164232",target:"_blank",rel:"noopener noreferrer"},x=n("a",{href:"%E2%9C%85"},null,-1),_={href:"https://nemocdz.github.io/post/%E4%BB%8E%E4%B8%80%E9%81%93%E7%BD%91%E6%98%93%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B5%85%E8%B0%88-objective-c-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/",target:"_blank",rel:"noopener noreferrer"},j=n("blockquote",null,[n("p",null,[s("ä½œè€…é€šè¿‡è°ƒè¯•ä»£ç ï¼Œé€šè¿‡å´©æºƒå †æ ˆå‘ç°äº†æ˜¯ "),n("code",null,"objc_release"),s("ï¼Œç¡®è®¤äº†æ˜¯å†…å­˜åœ°å€å¤šæ¬¡é‡Šæ”¾é€ æˆçš„ã€‚ ğŸ‘‰ğŸ» è¿›è€Œè¿›ä¸€æ­¥ç ”ç©¶ "),n("code",null,"runtime"),s(" æºç ä¸­çš„ "),n("code",null,"objc_storeStrong"),s(" å¯¹å¼ºå¼•ç”¨ç±»å‹çš„æ•°æ®çš„å­˜å‚¨ ğŸ‘‰ğŸ» æ ¹æ®é‡Œé¢çš„å­˜å‚¨é€»è¾‘ï¼Œå‘ç°äº†å¤šçº¿ç¨‹å¹¶å‘ä¸­çš„å¯èƒ½å­˜åœ¨é‡å¤å¤šæ¬¡é‡Šæ”¾æ—§å€¼çš„æƒ…å†µã€‚ ğŸ‘‰ğŸ» æœ€åä½œè€…è¿›ä¸€æ­¥ç ”ç©¶æ€ä¹ˆè§£å†³è¿™ä¸ªå´©æºƒï¼Œä¸€å…±ç»™å‡ºå››ç§è§£å†³æ–¹æ¡ˆã€‚")])],-1),S=o(`<hr><h2 id="objective-c" tabindex="-1"><a class="header-anchor" href="#objective-c" aria-hidden="true">#</a> Objective-C</h2><h3 id="â“0x01-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" tabindex="-1"><a class="header-anchor" href="#â“0x01-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" aria-hidden="true">#</a> â“0x01 - ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ</h3><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token keyword">@property</span> <span class="token punctuation">(</span>atomic<span class="token punctuation">)</span> NSInteger i<span class="token punctuation">;</span>
<span class="token comment">// å¤šçº¿ç¨‹ä¸­</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>i<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>ğŸ’¡</summary><p>å±æ€§ <code>i</code> å¹¶ä¸èƒ½ä¿è¯ä»¥çº¿ç¨‹å®‰å…¨çš„æ–¹å¼é€’å¢ã€‚<code>atomic</code> åªèƒ½ä¿è¯å±æ€§çš„ <code>getter</code> å’Œ <code>setter</code> æ–¹æ³•åœ¨è¢«è°ƒç”¨æ—¶ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹æ‰“æ–­ï¼Œå¹¶ä¸èƒ½ä¿è¯åƒ <code>self.i++</code> è¿™æ ·çš„å¤åˆæ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p><code>self.i++</code> å®é™…ä¸ŠåŒ…å«äº†ä¸‰ä¸ªæ“ä½œï¼š</p><ul><li>è·å– <code>i</code> çš„å€¼</li><li>å°†è·å–åˆ°çš„å€¼åŠ ä¸€</li><li>å°†æ–°å€¼èµ‹å€¼ç»™ <code>i</code></li></ul><p>è¿™ä¸‰ä¸ªæ“ä½œæ˜¯åˆ†å¼€è¿›è¡Œçš„ï¼Œå¹¶ä¸æ˜¯åŸå­æ“ä½œï¼Œæ‰€ä»¥å¤šä¸ªçº¿ç¨‹å¯èƒ½åŒæ—¶åœ¨è·å–å’Œè®¾ç½® <code>i</code> çš„å€¼ï¼Œè¿™ä¼šå¯¼è‡´æ•°æ®çš„æ··ä¹±ã€‚</p></details><h3 id="â“0x02-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" tabindex="-1"><a class="header-anchor" href="#â“0x02-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" aria-hidden="true">#</a> â“0x02 - ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ</h3><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token keyword">@interface</span> Animal
<span class="token keyword">@end</span>
<span class="token keyword">@interface</span> Dog <span class="token punctuation">:</span> Animal
<span class="token keyword">@end</span>
<span class="token keyword">@implementation</span> Dog
    <span class="token operator">-</span> <span class="token punctuation">(</span>instancetype<span class="token punctuation">)</span>init <span class="token punctuation">{</span>
        <span class="token keyword">self</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">super</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;%@&quot;</span><span class="token punctuation">,</span> <span class="token function">NSStringFromClass</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">self</span> class<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;%@&quot;</span><span class="token punctuation">,</span> <span class="token function">NSStringFromClass</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">super</span> class<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">self</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">@end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>ğŸ’¡</summary><p>è¾“å‡ºç»“æœï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Dog 
Dog
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>super</code> å¹¶ä¸ä¼šæ”¹å˜æ¶ˆæ¯çš„æ¥æ”¶è€…ï¼Œæ‰€ä»¥å½“è°ƒç”¨ <code>[super class]</code> æ—¶ï¼Œè™½ç„¶æ˜¯ä»çˆ¶ç±»å¼€å§‹æŸ¥æ‰¾ <code>class</code> æ–¹æ³•ï¼Œä½†æ˜¯æ–¹æ³•çš„æ¥æ”¶è€…ä¾ç„¶æ˜¯ <code>self</code> æœ¬èº«ï¼Œå…¶ç±»åˆ«è‡ªç„¶æ˜¯å½“å‰ç±»æœ¬èº«ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè°ƒç”¨ <code>[super class]</code> æ—¶è¿˜ä¼šè¿”å› <code>Dog</code> ç±»çš„åŸå› ã€‚</p></blockquote></details><h3 id="â“0x03-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" tabindex="-1"><a class="header-anchor" href="#â“0x03-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" aria-hidden="true">#</a> â“0x03 - ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ</h3><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token keyword">@interface</span> <span class="token function">NSObject</span> <span class="token punctuation">(</span>Test<span class="token punctuation">)</span>
<span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>test<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>test<span class="token punctuation">;</span>
<span class="token keyword">@end</span>

<span class="token keyword">@implementation</span> <span class="token function">NSObject</span> <span class="token punctuation">(</span>Test<span class="token punctuation">)</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>test <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;testing...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">@end</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">@</span>autoreleasepool <span class="token punctuation">{</span>
        <span class="token punctuation">[</span>NSObject test<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">[</span><span class="token punctuation">[</span>NSObject new<span class="token punctuation">]</span> test<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>ğŸ’¡</summary><p>è¾“å‡ºç»“æœï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Test
Test
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ <code>Objective-C</code> å¯¹è±¡æ¨¡å‹ä¸­ï¼Œæ‰€æœ‰ç±»çš„å…ƒç±»(<code>meta-class</code>)å½¢æˆäº†ä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œé“¾è¡¨çš„æœ«ç«¯æ˜¯æ ¹ç±»ï¼ˆå¦‚<code>NSObject</code>ï¼‰çš„å…ƒç±»ï¼Œ<code>NSObject</code> çš„å…ƒç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­åŒ…å«äº†å…¶æ‰€æœ‰å­ç±»çš„ç±»æ–¹æ³•ã€‚å› æ­¤ï¼Œå½“ä¸€ä¸ªå­ç±»çš„ç±»æ–¹æ³•åœ¨å…¶è‡ªèº«çš„å…ƒç±»ä¸­æ‰¾ä¸åˆ°å®ç°æ—¶ï¼Œä¼šåœ¨è¿™æ¡å•å‘é“¾è¡¨ä¸­ç»§ç»­å¯»æ‰¾ï¼Œæœ€ç»ˆä¼šæ‰¾åˆ°æ ¹å…ƒç±» <code>NSObject</code> çš„æ–¹æ³•åˆ—è¡¨ï¼Œæ‰€ä»¥ <code>[NSObject test]</code>ä¼šè°ƒç”¨åˆ°å®šä¹‰åœ¨åˆ†ç±»ä¸­çš„å®ä¾‹æ–¹æ³•ã€‚</p></details><h3 id="â“0x04-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" tabindex="-1"><a class="header-anchor" href="#â“0x04-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" aria-hidden="true">#</a> â“0x04 - ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ</h3><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token keyword">@interface</span> Test <span class="token punctuation">:</span> NSObject
 <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>test<span class="token punctuation">;</span>
 <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>test<span class="token punctuation">;</span>
 <span class="token keyword">@end</span>

 <span class="token keyword">@implementation</span> Test
 <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>test <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;testing...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">@end</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">@</span>autoreleasepool <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token punctuation">[</span>Test new<span class="token punctuation">]</span> test<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">[</span>Test test<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>ğŸ’¡</summary><blockquote><p>è¾“å‡ºä¸€ä¸ª â€œtesting...â€ ä¹‹åå´©æºƒã€‚</p></blockquote><p>ä¸€ä¸ªç±»æ–¹æ³•åœ¨å®ƒä»¬è‡ªå·±çš„ç±»ä¸­æ²¡æœ‰æ‰¾åˆ°ï¼Œ<code>Objective-C</code> è¿è¡Œæ—¶å°†å°è¯•åœ¨å®ƒçš„è¶…ç±»ä¸­æŸ¥æ‰¾ã€‚ä½†æ˜¯è‡ªå®šä¹‰çš„ç±» <code>Test</code>ï¼ˆå­ç±»ï¼‰å¹¶ä¸åŒ…å«å…ƒç±»æ–¹æ³• <code>+test</code>ï¼Œå¹¶ä¸”å®ƒçš„è¶…ç±» <code>NSObject</code> ä¹Ÿæ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œå› æ­¤ <code>[Test test];</code> å°†å¼•å‘ <code>unrecognized selector sent to class</code> å¼‚å¸¸ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒã€‚</p></details><h3 id="â“0x05-ä¸‹é¢ä»£ç èƒ½æ­£å¸¸è¿è¡Œå—-å¦‚æœèƒ½-è¾“å‡ºæ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#â“0x05-ä¸‹é¢ä»£ç èƒ½æ­£å¸¸è¿è¡Œå—-å¦‚æœèƒ½-è¾“å‡ºæ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> â“0x05 - ä¸‹é¢ä»£ç èƒ½æ­£å¸¸è¿è¡Œå—(å¦‚æœèƒ½ï¼Œè¾“å‡ºæ˜¯ä»€ä¹ˆ)</h3><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token keyword">@interface</span> Person <span class="token punctuation">:</span> NSObject 
<span class="token keyword">@property</span><span class="token punctuation">(</span>nonatomic<span class="token punctuation">,</span>copy<span class="token punctuation">)</span> NSString <span class="token operator">*</span>name<span class="token punctuation">;</span> 
<span class="token keyword">@end</span>
<span class="token keyword">@implementation</span> Person
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>speak <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;My name is: %@&quot;</span><span class="token punctuation">,</span> <span class="token keyword">self</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
<span class="token keyword">@end</span>

<span class="token keyword">@implementation</span> ViewController
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>viewDidLoad <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token keyword">super</span> viewDidLoad<span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    id cls <span class="token operator">=</span> <span class="token punctuation">[</span>Person class<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token operator">*</span>obj <span class="token operator">=</span> <span class="token operator">&amp;</span>cls<span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token punctuation">(</span>__bridge id<span class="token punctuation">)</span>obj speak<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">@end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>ğŸ’¡</summary><blockquote><p>è¿™æ®µä»£ç å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œå…¶è¾“å‡ºå°†æ˜¯ <code>My name is:&lt;ViewController: 0x......&gt;</code>ã€‚</p></blockquote><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token comment">// 1&gt; ä½¿ç”¨ id æŒ‡é’ˆ cls è·å– Person ç±»</span>
id cls <span class="token operator">=</span> <span class="token punctuation">[</span>Person class<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 2&gt; ä½¿ç”¨ obj è·å–æŒ‡å‘ cls çš„æŒ‡é’ˆï¼ŒæŒ‡å‘çš„æ˜¯ä¸€ä¸ª Person ç±»çš„å¯¹è±¡(ä¸æ˜¯å®ä¾‹å¯¹è±¡)</span>
<span class="token keyword">void</span> <span class="token operator">*</span>obj <span class="token operator">=</span> <span class="token operator">&amp;</span>cls<span class="token punctuation">;</span>
<span class="token comment">// 3&gt; </span>
<span class="token punctuation">[</span><span class="token punctuation">(</span>__bridge id<span class="token punctuation">)</span>obj speak<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>id cls = [Person class];</code> è¿™è¡Œä»£ç æ˜¯è·å– <code>Person</code> ç±»ã€‚ç„¶å <code>void *obj = &amp;cls;</code> è¿™è¡Œä»£ç æ˜¯è·å–äº†æŒ‡å‘ <code>cls</code> çš„æŒ‡é’ˆï¼Œæ‰€ä»¥ <code>obj</code> æŒ‡å‘çš„æ˜¯ä¸€ä¸ª <code>Person</code> ç±»çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ <code>Person</code> ç±»çš„å®ä¾‹ã€‚ç„¶å <code>[(__bridge id)obj speak];</code> è¿™è¡Œä»£ç å°±æ˜¯å‘é€ä¸€ä¸ªæ¶ˆæ¯ç»™ <code>obj</code>ï¼Œæ‰€ä»¥æœ€ç»ˆè°ƒç”¨çš„æ˜¯ <code>Person</code> ç±»çš„ <code>speak</code> æ–¹æ³•ã€‚</li></ul><p>æ³¨æ„ï¼šå¹¶æ²¡æœ‰ç»™ <code>name</code> å±æ€§èµ‹å€¼ï¼Œæ‰€ä»¥å½“æ‰“å° <code>name</code> å±æ€§çš„æ—¶å€™ï¼Œå®ƒçš„å€¼æ˜¯ <code>nil</code>ï¼Œä¹Ÿå°±æ˜¯ <code>(null)</code>ã€‚</p></details><h3 id="â“0x06-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" tabindex="-1"><a class="header-anchor" href="#â“0x06-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" aria-hidden="true">#</a> â“0x06 - ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ</h3><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token keyword">@interface</span> Father <span class="token punctuation">:</span> NSObject
<span class="token keyword">@end</span>
<span class="token keyword">@implementation</span> Father
<span class="token keyword">@end</span>

<span class="token keyword">@interface</span> Son <span class="token punctuation">:</span> Father
<span class="token keyword">@end</span>
<span class="token keyword">@implementation</span> Son
<span class="token keyword">@end</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">@</span>autoreleasepool <span class="token punctuation">{</span>
        Son <span class="token operator">*</span>son <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>Son alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
        Father <span class="token operator">*</span>father <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>Father alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
        
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;%d&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>Son isKindOfClass<span class="token punctuation">:</span><span class="token punctuation">[</span>father class<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;%d&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>son isKindOfClass<span class="token punctuation">:</span><span class="token punctuation">[</span>Father class<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;%d&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>Son isMemberOfClass<span class="token punctuation">:</span><span class="token punctuation">[</span>father class<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;%d&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>son isMemberOfClass<span class="token punctuation">:</span><span class="token punctuation">[</span>Father class<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>ğŸ’¡</summary><p>è¾“å‡ºç»“æœï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>0
1
0
0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h3 id="â“0x07-è®¡ç®—å†…å­˜å¤§å°" tabindex="-1"><a class="header-anchor" href="#â“0x07-è®¡ç®—å†…å­˜å¤§å°" aria-hidden="true">#</a> â“0x07 - è®¡ç®—å†…å­˜å¤§å°</h3><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token keyword">@interface</span> Person <span class="token punctuation">:</span> NSObject
<span class="token keyword">@property</span><span class="token punctuation">(</span>nonatomic<span class="token punctuation">,</span> assign<span class="token punctuation">)</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
<span class="token keyword">@property</span><span class="token punctuation">(</span>nonatomic<span class="token punctuation">,</span> assign<span class="token punctuation">)</span> <span class="token keyword">int</span> height<span class="token punctuation">;</span>
<span class="token keyword">@end</span>
<span class="token keyword">@implementation</span> Person
<span class="token keyword">@end</span>

<span class="token keyword">@interface</span> Student <span class="token punctuation">:</span> Person
<span class="token keyword">@property</span><span class="token punctuation">(</span>nonatomic<span class="token punctuation">,</span> copy<span class="token punctuation">)</span> NSString <span class="token operator">*</span>school<span class="token punctuation">;</span>
<span class="token keyword">@end</span>
<span class="token keyword">@implementation</span> Student
<span class="token keyword">@end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>åˆ†åˆ«è®¡ç®— <code>NSObject</code>ã€<code>Person</code>ã€<code>Student</code> å¯¹è±¡å ç”¨å†…å­˜å¤§å°</p></blockquote><details class="hint-container details"><summary>ğŸ’¡</summary><ul><li><code>NSObject</code> å¯¹è±¡: å ç”¨ 16 å­—èŠ‚ (<code>isa</code> æŒ‡é’ˆ 8 å­—èŠ‚ + å†…å­˜å¯¹é½(8 å­—èŠ‚))</li><li><code>Person</code> å¯¹è±¡: å ç”¨ 16 å­—èŠ‚ (<code>isa</code> æŒ‡é’ˆ 8 å­—èŠ‚ + <code>int</code>(4 å­—èŠ‚) + <code>int</code>(4 å­—èŠ‚))</li><li><code>Student</code> å¯¹è±¡: å ç”¨ 32 å­—èŠ‚ (<code>isa</code> æŒ‡é’ˆ 8 å­—èŠ‚ + <code>int</code>(4 å­—èŠ‚) + <code>int</code>(4 å­—èŠ‚) + <code>NSString</code>(8 å­—èŠ‚) + å†…å­˜å¯¹é½(8 å­—èŠ‚))</li></ul></details><hr><h2 id="c" tabindex="-1"><a class="header-anchor" href="#c" aria-hidden="true">#</a> C</h2><h3 id="â“0xc01-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" tabindex="-1"><a class="header-anchor" href="#â“0xc01-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" aria-hidden="true">#</a> â“0xc01 - ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ</h3><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token operator">*</span>ptr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d, %d&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>ptr <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>ğŸ’¡</summary><p>è¾“å‡ºç»“æœï¼š<code>2, 5</code></p><ul><li><p><code>*(a + 1)</code>: æ•°ç»„ <code>a</code>ä¸­å½“å‰ç´¢å¼•å¾€å³æŒªä¸€ä½å¯¹åº”çš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯ <code>a[1]</code>ï¼Œæ‰€ä»¥è¯¥è¾“å‡ºå€¼ä¸º <code>2</code>ã€‚</p></li><li><p><code>*(ptr - 1)</code>: <code>ptr</code> æ˜¯ <code>(&amp;a + 1)</code> çš„èµ‹å€¼ç»“æœï¼Œè¿™é‡Œ <code>&amp;a</code> æ˜¯æ•´ä¸ªæ•°ç»„ï¼ˆç”±5ä¸ªæ•´æ•°æ„æˆï¼‰çš„åœ°å€ï¼Œæ‰€ä»¥ <code>&amp;a + 1</code> ä¼šè·¨è¿‡æ•´ä¸ª <code>a</code> æ•°ç»„ï¼ŒæŒ‡å‘ <code>a</code> æ•°ç»„åé¢çš„å†…å­˜åœ°å€ã€‚<code>ptr-1</code> ä¼šæŒ‡å‘ <code>a</code> æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´  <code>a[4]</code> ä¹Ÿå°±æ˜¯å¯¹åº”äº†å€¼ <code>5</code> ã€‚æ‰€ä»¥ <code>*(ptr-1)</code> è¾“å‡ºçš„æ˜¯ <code>5</code>ã€‚</p></li></ul></details><hr><h2 id="swift" tabindex="-1"><a class="header-anchor" href="#swift" aria-hidden="true">#</a> Swift</h2><h3 id="â“0xs01-ä¸‹é¢ä»£ç è¾“å‡ºæ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#â“0xs01-ä¸‹é¢ä»£ç è¾“å‡ºæ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> â“0xs01 - ä¸‹é¢ä»£ç è¾“å‡ºæ˜¯ä»€ä¹ˆ</h3><div class="language-swift line-numbers-mode" data-ext="swift"><pre class="language-swift"><code><span class="token attribute atrule">@propertyWrapper</span>
<span class="token keyword">struct</span> <span class="token class-name">Wrapper</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> wrappedValue<span class="token punctuation">:</span> <span class="token class-name">T</span>

	<span class="token keyword">var</span> projectedValue<span class="token punctuation">:</span> <span class="token class-name">Wrapper</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">self</span> <span class="token punctuation">}</span>

	<span class="token keyword">func</span> <span class="token function-definition function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Foo&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">struct</span> <span class="token class-name">HasWrapper</span> <span class="token punctuation">{</span>
	<span class="token attribute atrule">@Wrapper</span> <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">0</span>
    
	<span class="token keyword">func</span> <span class="token function-definition function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    <span class="token function">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token comment">// wrappedValue</span>
	    <span class="token function">print</span><span class="token punctuation">(</span>_x<span class="token punctuation">)</span> <span class="token comment">// wrapper type itself</span>
	    <span class="token function">print</span><span class="token punctuation">(</span>$x<span class="token punctuation">)</span> <span class="token comment">// projectedValue</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>ğŸ’¡</summary><p>è¾“å‡ºç»“æœ</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>0
Wrapper(wrappedValue: 0)
Wrapper(wrappedValue: 0)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>x</code> æ˜¯é€šè¿‡ <code>@Wrapper</code> ä¿®é¥°ç¬¦è¢«åŒ…è£…çš„å±æ€§ã€‚ å½“ç›´æ¥è®¿é—® <code>x</code> æ—¶ï¼Œå°†è·å– <code>wrappedValue</code> çš„å®é™…å€¼ã€‚</li><li><code>_x</code> åˆ™è®¿é—®åˆ° <code>Wrapper</code> çš„å®ä¾‹æœ¬èº«ã€‚</li><li><code>$x</code> ç”¨äºè®¿é—® <code>projectedValue</code>ï¼Œè¿”å›çš„æ˜¯ <code>Wrapper</code> çš„å®ä¾‹(ç”±äº <code>Wrapper</code> ç»“æ„ä½“æ²¡æœ‰å®šä¹‰ <code>CustomStringConvertible</code> åè®®ï¼Œå› æ­¤å®ƒä¼šä½¿ç”¨é»˜è®¤çš„æè¿°ç¬¦ï¼Œä¹Ÿå°±æ˜¯å…¶å†…éƒ¨å­˜å‚¨çš„å­—ç¬¦ä¸²æè¿°ã€‚)ã€‚</li></ul></details><hr><h2 id="å¤šçº¿ç¨‹" tabindex="-1"><a class="header-anchor" href="#å¤šçº¿ç¨‹" aria-hidden="true">#</a> å¤šçº¿ç¨‹</h2><h3 id="â“0xt01-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" tabindex="-1"><a class="header-anchor" href="#â“0xt01-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" aria-hidden="true">#</a> â“0xt01 - ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ</h3><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code>dispatch_queue_t queue <span class="token operator">=</span> <span class="token function">dispatch_get_main_queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
BOOL isEqual <span class="token operator">=</span> <span class="token punctuation">[</span>queue isKindOfClass<span class="token punctuation">:</span><span class="token punctuation">[</span>NSObject class<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;isEqual = %d&quot;</span><span class="token punctuation">,</span> isEqual<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>ğŸ’¡</summary><p>è¾“å‡ºç»“æœï¼š<code>isEqual = 1</code>ã€‚</p><p>è™½ç„¶ <code>Objective-C </code>çš„ <code>GCD</code> é˜Ÿåˆ—æ˜¯åŸºäº <code>C</code> è¯­è¨€çš„ <code>dispatch_queue_t</code> ç±»å‹å®ç°çš„ï¼Œä½†å®ƒä»ç„¶æ˜¯ <code>NSObject</code> çš„å­ç±»ã€‚å°½ç®¡ <code>GCD</code> çš„ <code>API</code> éƒ½æ˜¯ç”¨çº¯ <code>C</code> æ¥å®ç°çš„ï¼Œä½†å®é™…ä¸Š <code>GCD</code> å¯¹è±¡åœ¨ <code>Objective-C</code> çš„è¿è¡Œæ—¶ç¯å¢ƒä¸­æ˜¯è¢«å½“ä½œ <code>Objective-C</code> å¯¹è±¡æ¥å¤„ç†çš„ã€‚æ‰€ä»¥è¿™é‡Œçš„ <code>queue</code> æ˜¯å¯ä»¥è¢«å½“ä½œ <code>NSObject</code> çš„å®ä¾‹æ¥å¤„ç†çš„ï¼Œ<code>[queue isKindOfClass:[NSObject class]]</code> çš„ç»“æœæ˜¯ <code>YES</code>ï¼Œå³ <code>isEqual=1</code>ã€‚</p></details><h3 id="â“0xt02-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" tabindex="-1"><a class="header-anchor" href="#â“0xt02-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" aria-hidden="true">#</a> â“0xt02 - ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ</h3><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">dispatch_sync</span><span class="token punctuation">(</span><span class="token function">dispatch_get_main_queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">^</span><span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>ğŸ’¡</summary><ul><li><p>å¦‚æœè¿™æ®µä»£ç åœ¨<strong>ä¸»çº¿ç¨‹</strong>ä¸­æ‰§è¡Œï¼Œé‚£ä¹ˆä¼šå¯¼è‡´æ­»é”ã€‚</p><blockquote><p>å› ä¸º <code>dispatch_sync</code> å‡½æ•°æ˜¯ä¸€ä¸ªåŒæ­¥æ‰§è¡Œçš„å‡½æ•°ï¼Œå®ƒä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œå¹¶ç­‰å¾… <code>dispatch_sync</code> å†…éƒ¨çš„ä»»åŠ¡æ‰§è¡Œå®Œæˆåå†ç»§ç»­æ‰§è¡Œã€‚ç„¶è€Œæ­¤å¤„çš„ <code>dispatch_sync</code> å†…éƒ¨ä»»åŠ¡è¢«æ´¾å‘åˆ°äº†ä¸»é˜Ÿåˆ—ï¼Œæ‰€ä»¥è¿™ä¸ªä»»åŠ¡éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œã€‚ä½†æ˜¯ä¸»çº¿ç¨‹æ­¤æ—¶è¢«ä¸Šè¿°çš„ <code>dispatch_sync</code> é˜»å¡äº†ï¼Œæ‰€ä»¥ <code>dispatch_sync</code> å†…éƒ¨çš„ä»»åŠ¡æ— æ³•æ‰§è¡Œã€‚è¿™å°±é€ æˆäº†æ­»é”ï¼Œä¸Šè¿°ä»£ç ä¼šåœ¨è¾“å‡º &quot;1&quot; ååœæ­¢ã€‚</p></blockquote></li><li><p>å¦‚æœè¿™æ®µä»£ç åœ¨ä¸€ä¸ª<strong>éä¸»çº¿ç¨‹</strong>æ‰§è¡Œï¼Œé‚£ä¹ˆå®ƒä¼šå…ˆé˜»å¡è¯¥çº¿ç¨‹ï¼Œå†åœ¨ä¸»çº¿ç¨‹ä¸ŠåŒæ­¥æ‰§è¡Œä»»åŠ¡ï¼Œè¾“å‡º &quot;2&quot;ï¼Œç„¶åå–æ¶ˆé˜»å¡ï¼Œæ¥ç€è¾“å‡º &quot;3&quot;ï¼Œæ‰€ä»¥ç»“æœæ˜¯ &quot;1&quot;ï¼Œ&quot;2&quot;ï¼Œ&quot;3&quot;ã€‚</p></li></ul></details><blockquote><p>â“æ”¹ä¸º <code>global queue</code> å‘¢</p></blockquote><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">dispatch_sync</span><span class="token punctuation">(</span><span class="token function">dispatch_get_global_queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">^</span><span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>ğŸ’¡</summary><p>è¿™æ®µä»£ç æ— è®ºåœ¨ä¸»çº¿ç¨‹è¿˜æ˜¯åœ¨å­çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œæœ€ç»ˆçš„è¾“å‡ºç»“æœéƒ½æ˜¯ &quot;1&quot;, &quot;2&quot;, &quot;3&quot;ã€‚</p><p>é¦–å…ˆè¾“å‡º &quot;1&quot;ï¼Œç„¶å <code>dispatch_sync</code> ä¼šå°† <code>block</code> ä¸­çš„ä»»åŠ¡åŒæ­¥åœ°æ·»åŠ åˆ°å…¨å±€é˜Ÿåˆ—ï¼Œå¹¶é˜»å¡å½“å‰çº¿ç¨‹ç›´åˆ° <code>block</code> ä¸­çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ã€‚ç”±äºè¿™é‡Œä½¿ç”¨çš„æ˜¯å…¨å±€é˜Ÿåˆ—ï¼Œè¿™ä¸ªé˜Ÿåˆ—æ˜¯å¹¶å‘é˜Ÿåˆ—ï¼Œä¸”å’Œå½“å‰çº¿ç¨‹ï¼ˆæ— è®ºä¸»çº¿ç¨‹æˆ–å­çº¿ç¨‹ï¼‰ä¸æ˜¯åŒä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ‰€ä»¥ä¸ä¼šé€ æˆæ­»é”ã€‚<code>block</code> ä¸­çš„ä»»åŠ¡æ‰§è¡Œåï¼Œè¾“å‡º &quot;2&quot;ï¼Œç„¶å <code>dispatch_sync</code> è¿”å›ï¼Œå½“å‰çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œè¾“å‡º &quot;3&quot;ã€‚æ‰€ä»¥æœ€ç»ˆçš„è¾“å‡ºç»“æœå°±æ˜¯ &quot;1&quot;, &quot;2&quot;, &quot;3&quot;ã€‚</p></details><h3 id="â“0xt03-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" tabindex="-1"><a class="header-anchor" href="#â“0xt03-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" aria-hidden="true">#</a> â“0xt03 - ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ</h3><div class="language-swift line-numbers-mode" data-ext="swift"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function-definition function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span>sync <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;1&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>ğŸ’¡</summary><p>è¿™æ®µä»£ç ä¼šé€ æˆä¸»çº¿ç¨‹çš„æ­»é”ã€‚</p><p>å‡½æ•°<code>test()</code> æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­è¢«è°ƒç”¨çš„ï¼Œç„¶ååœ¨ <code>test()</code> å‡½æ•°ä¸­ï¼Œåˆä½¿ç”¨äº†<code>DispatchQueue.main.sync</code>å°è¯•å†æ¬¡åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œä¸€æ®µä»»åŠ¡ã€‚</p><p>ç”±äº <code>sync</code> æ˜¯åŒæ­¥æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ <code>sync</code>åé¢çš„ä»»åŠ¡ä¼šç«‹åˆ»æ‰§è¡Œï¼Œæ‰§è¡Œå®Œåæ‰ä¼šç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ã€‚ä½†æ˜¯ <code>sync</code> åé¢çš„ä»£ç å—åˆæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œè¿™ä¸ªæ—¶å€™ä¸»çº¿ç¨‹å·²ç»è¢«å‰é¢çš„ <code>test()</code> å‡½æ•°å ç”¨ï¼Œæ‰€ä»¥<code>sync</code>åé¢çš„ä»£ç å—å°±ä¼šç­‰å¾…ä¸»çº¿ç¨‹ç©ºé—²ï¼Œä½†æ˜¯ä¸»çº¿ç¨‹åœ¨ç­‰å¾… <code>sync</code> åçš„ä»£ç å—æ‰§è¡Œå®Œæ¯•ï¼Œå¯¼è‡´äº’ç›¸ç­‰å¾…ï¼Œäº§ç”Ÿæ­»é”ã€‚</p></details><h3 id="â“0xt04-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" tabindex="-1"><a class="header-anchor" href="#â“0xt04-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" aria-hidden="true">#</a> â“0xt04 - ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ</h3><div class="language-swift line-numbers-mode" data-ext="swift"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function-definition function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;1&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> queue <span class="token operator">=</span> <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>label<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;thread&quot;</span></span><span class="token punctuation">)</span>
    queue<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;2&quot;</span></span><span class="token punctuation">)</span>
        <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span>sync <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;3&quot;</span></span><span class="token punctuation">)</span>
            queue<span class="token punctuation">.</span>sync <span class="token punctuation">{</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;4&quot;</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;5&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;6&quot;</span></span><span class="token punctuation">)</span>
    queue<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;7&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;8&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>ğŸ’¡</summary><p>è¾“å‡ºç»“æœï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>1
6
8
2
3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™æ®µä»£ç é¦–å…ˆåœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨ <code>print(&quot;1&quot;)</code>ï¼Œæ¥ç€åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„å¹¶å‘é˜Ÿåˆ— <code>queue</code>ã€‚</li><li>ç„¶ååœ¨ <code>queue</code> ä¸­å¼‚æ­¥æ‰§è¡Œä¸€ä¸ª blockï¼Œä½†æ‰§è¡Œè¿™ä¸ª block å¹¶ä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼ˆå³ä¸»çº¿ç¨‹ï¼‰ã€‚æ‰€ä»¥ï¼Œ<code>print(&quot;1&quot;)</code>ï¼Œ<code>print(&quot;6&quot;)</code> å’Œ <code>print(&quot;8&quot;)</code> å‡ ä¹æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œåªæ˜¯å› ä¸º CPU çš„è°ƒåº¦é—®é¢˜ï¼Œå¯èƒ½å­˜åœ¨è½»å¾®çš„å»¶è¿Ÿã€‚</li><li>ä¹‹åï¼Œå›åˆ° <code>queue</code> ä¸­å¼‚æ­¥æ‰§è¡Œçš„é‚£ä¸ª blockã€‚åœ¨è¿™ä¸ª block çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šé¦–å…ˆæ‰§è¡Œ <code>print(&quot;2&quot;)</code>ã€‚æ¥ç€ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­åŒæ­¥æ‰§è¡Œä¸€ä¸ª block ä¼šæ‰“å° <code>print(&quot;3&quot;)</code>ã€‚è¿™ä¸ª block çš„æ‰§è¡Œä¼šé˜»å¡ <code>queue</code>ï¼Œç›´åˆ°è¿™ä¸ª block æ‰§è¡Œå®Œæ¯•ã€‚ åœ¨è¿™ä¸ª block ä¸­ï¼Œåˆåœ¨ <code>queue</code> ä¸­æ‰§è¡Œäº†ä¸€ä¸ª blockï¼Œä½†æ˜¯ç”±äºè¿™æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥è¦ç­‰å¾…è¿™ä¸ª block æ‰§è¡Œå®Œæ¯•åæ‰èƒ½ç»§ç»­æ‰§è¡Œä¸»çº¿ç¨‹çš„ blockã€‚ä½†æ˜¯ï¼Œè¿™ä¸ª block å¹¶ä¸ä¼šè¢«æ‰§è¡Œï¼Œå› ä¸ºæ˜¯åœ¨ <code>queue</code> ä¸­åŒæ­¥æ‰§è¡Œçš„ï¼Œ<code>queue</code> åœ¨è¿™ä¸ªæ—¶å€™è¿˜åœ¨ç­‰å¾…ä¸»çº¿ç¨‹ä¸­çš„ block æ‰§è¡Œå®Œæ¯•ã€‚è¿™å°±äº§ç”Ÿäº†æ­»é”ã€‚</li><li>æœ€åï¼Œ<code>queue</code> ä¸­çš„å¦ä¸€ä¸ª block å¹¶ä¸ä¼šè¢«æ‰§è¡Œï¼Œå› ä¸ºåœ¨æ‰§è¡Œè¿™ä¸ª block çš„æ—¶å€™ï¼Œ<code>queue</code> å·²ç»è¢«ä¸Šé¢çš„æ­»é”é˜»å¡äº†ã€‚</li></ul></details><h3 id="â“0xt05-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" tabindex="-1"><a class="header-anchor" href="#â“0xt05-ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ" aria-hidden="true">#</a> â“0xt05 - ä¸‹é¢ä»£ç è¾“å‡ºç»“æœ</h3><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">dispatch_async</span><span class="token punctuation">(</span><span class="token function">dispatch_get_global_queue</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">^</span><span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span> performSelector<span class="token punctuation">:</span><span class="token keyword">@selector</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span> withObject<span class="token punctuation">:</span>nil afterDelay<span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>test <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>ğŸ’¡</summary><blockquote><p>æ‰“å°é¡ºåº : 1, 4, 2, 3</p></blockquote><p>&quot;1&quot;å’Œ&quot;4&quot;æ˜¯æ™®é€šçš„ç›´æ¥æ‰§è¡Œä»£ç ï¼Œå› æ­¤ä¼šæŒ‰ç…§é¡ºåºè¾“å‡ºã€‚</p><p>&quot;2&quot;å’Œ&quot;3&quot;ä½äºå¼‚æ­¥å¹¶å‘é˜Ÿåˆ—ä¸­ï¼Œä¼šåœ¨æ–°çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œæ‰€ä»¥ä¼šåœ¨&quot;1&quot;å’Œ&quot;4&quot;ä¹‹åå¼€å§‹æ‰§è¡Œã€‚</p><p>&quot;5&quot;ä¸ä¼šè¾“å‡ºã€‚åŸå› æ˜¯<code>[self performSelector:@selector(test) withObject:nil afterDelay:10];</code>è¿™ä¸€è¡Œä»£ç è¢«æ”¾åœ¨å¼‚æ­¥å¹¶å‘é˜Ÿåˆ—ä¸­ï¼Œå¹¶ä¸”æ˜¯åœ¨å­çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä½†æ˜¯è¿™ç§æ‰§è¡Œæ–¹å¼æ˜¯ä¾èµ– <code>RunLoop</code> çš„ï¼Œè€Œæ–°åˆ›å»ºçš„çº¿ç¨‹é»˜è®¤æ˜¯æ²¡æœ‰å¯åŠ¨ <code>RunLoop</code> çš„ï¼Œæ‰€ä»¥<code>performSelector:afterDelay:</code>æ–¹æ³•ä¼šå¤±æ•ˆã€‚</p></details><blockquote><p>â“å¦‚æœæƒ³è¦ä½¿ &quot;5&quot; èƒ½å¤Ÿæ‰“å°ï¼Œåº”è¯¥æ€ä¹ˆå¤„ç†</p></blockquote><details class="hint-container details"><summary>ğŸ’¡</summary><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token comment">// æ–¹æ¡ˆä¸€ : æ”¾å…¥ä¸»çº¿ç¨‹ RunLoop</span>
<span class="token punctuation">[</span><span class="token keyword">self</span> performSelectorOnMainThread<span class="token punctuation">:</span><span class="token keyword">@selector</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span> withObject<span class="token punctuation">:</span>nil waitUntilDone<span class="token punctuation">:</span>NO<span class="token punctuation">]</span><span class="token punctuation">;</span>
    
<span class="token comment">// æ–¹æ¡ˆäºŒ : åœ¨å­çº¿ç¨‹ä¸­æ‰‹åŠ¨å¯åŠ¨ RunLoop</span>
NSRunLoop <span class="token operator">*</span>runLoop <span class="token operator">=</span> <span class="token punctuation">[</span>NSRunLoop currentRunLoop<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token keyword">self</span> performSelector<span class="token punctuation">:</span><span class="token keyword">@selector</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span> withObject<span class="token punctuation">:</span>nil afterDelay<span class="token punctuation">:</span><span class="token number">5.0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>runLoop run<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h3 id="â“0xt06-ä¸‹é¢ä»£ç ä¼šå‘ç”Ÿä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#â“0xt06-ä¸‹é¢ä»£ç ä¼šå‘ç”Ÿä»€ä¹ˆ" aria-hidden="true">#</a> â“0xt06 - ä¸‹é¢ä»£ç ä¼šå‘ç”Ÿä»€ä¹ˆ</h3><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token keyword">@property</span> <span class="token punctuation">(</span>nonatomic<span class="token punctuation">,</span> strong<span class="token punctuation">)</span> NSString <span class="token operator">*</span>target<span class="token punctuation">;</span>
<span class="token comment">//....</span>

dispatch_queue_t queue <span class="token operator">=</span> <span class="token function">dispatch_queue_create</span><span class="token punctuation">(</span><span class="token string">&quot;parallel&quot;</span><span class="token punctuation">,</span> DISPATCH_QUEUE_CONCURRENT<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000000</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">dispatch_async</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span> <span class="token operator">^</span><span class="token punctuation">{</span>
     	<span class="token keyword">self</span><span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token punctuation">[</span>NSString stringWithFormat<span class="token punctuation">:</span><span class="token string">@&quot;ksddkjalkjd%d&quot;</span><span class="token punctuation">,</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>ğŸ’¡</summary><p>è¿™æ®µä»£ç ä¼šå´©æºƒã€‚</p><p>åœ¨ä¸€ä¸ªå¹¶å‘é˜Ÿåˆ— (&quot;parallel&quot;) ä¸Šå¼‚æ­¥åœ°å¤šæ¬¡æ‰§è¡Œä¸€ä¸ª <code>block</code>ã€‚æ¯æ¬¡ <code>block</code> æ‰§è¡Œæ—¶,ä¼šæŠŠ <code>self.target</code> çš„å€¼è®¾ç½®ä¸ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚å› ä¸ºè¿™æ˜¯åœ¨å¹¶å‘é˜Ÿåˆ—ä¸Šæ‰§è¡Œçš„ï¼Œæ‰€ä»¥è¿™äº›è®¾ç½® <code>self.target</code> çš„æ“ä½œå¯èƒ½åŒæ—¶æ‰§è¡Œã€‚</p><p>è¿™ä¼šå¼•èµ·çº¿ç¨‹å®‰å…¨çš„é—®é¢˜â€”â€”æ•°æ®ç«äº‰ (data race)ã€‚ç”±äº <code>setter</code> æœ¬è´¨ä¸Šæ˜¯è¯»å–+å†™å…¥ä¸¤ä¸ªæ“ä½œï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›è¡Œè¿™ä¸¤ä¸ªæ“ä½œï¼Œå¯èƒ½ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´ã€‚è¿™å°±æ˜¯æ‰€è°“çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p><p>åŒæ—¶ï¼Œä¸ç¡®å®šçš„å¹¶å‘æ“ä½œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æš´æ¶¨ã€‚<code>dispatch_async</code> çš„ <code>block</code>ï¼Œä¼šè¢«<code>dispatch_retain</code>ï¼Œç„¶åè¢«å­˜å‚¨èµ·æ¥ç­‰å¾…æ‰§è¡Œã€‚å¦‚æœå¹¶è¡Œé˜Ÿåˆ—ä¸­ <code>block</code> å‰§å¢ï¼Œæœªæ‰§è¡Œçš„ <code>block</code> å¯èƒ½ä¼šç§¯å‹ï¼Œå¯¼è‡´å¤§é‡å†…å­˜æ¶ˆè€—ã€‚</p></details><hr><h2 id="uikit" tabindex="-1"><a class="header-anchor" href="#uikit" aria-hidden="true">#</a> UIKit</h2><h3 id="â“å¯»æ‰¾æœ€è¿‘çš„å…¬å…±-view" tabindex="-1"><a class="header-anchor" href="#â“å¯»æ‰¾æœ€è¿‘çš„å…¬å…±-view" aria-hidden="true">#</a> â“å¯»æ‰¾æœ€è¿‘çš„å…¬å…± <code>View</code></h3><details class="hint-container details"><summary>ğŸ’¡</summary><div class="language-swift line-numbers-mode" data-ext="swift"><pre class="language-swift"><code><span class="token comment">// å¯»æ‰¾ä¸¤ä¸ªå­è§†å›¾æœ€è¿‘çš„å…¬å…±çˆ¶è§†å›¾</span>
<span class="token keyword">func</span> <span class="token function-definition function">findNearestCommonAncestor</span><span class="token punctuation">(</span>view1<span class="token punctuation">:</span> <span class="token class-name">UIView</span><span class="token punctuation">,</span> view2<span class="token punctuation">:</span> <span class="token class-name">UIView</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">UIView</span><span class="token operator">?</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> currentView<span class="token punctuation">:</span> <span class="token class-name">UIView</span><span class="token operator">?</span> <span class="token operator">=</span> view1
    <span class="token keyword">while</span> <span class="token keyword">let</span> view <span class="token operator">=</span> currentView <span class="token punctuation">{</span> <span class="token comment">// é€’å½’è§†å›¾çš„çˆ¶è§†å›¾</span>
        <span class="token comment">// åˆ¤æ–­ view2 æ˜¯å¦ä¸ºå½“å‰éå†çˆ¶è§†å›¾çš„åä»£è§†å›¾ï¼Œå¦‚æœæ˜¯å°±æ˜¯å…¬å…±çˆ¶è§†å›¾</span>
        <span class="token keyword">if</span> view2<span class="token punctuation">.</span><span class="token function">isDescendant</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> view<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">return</span> view
        <span class="token punctuation">}</span>
        currentView <span class="token operator">=</span> view<span class="token punctuation">.</span>superview
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token nil constant">nil</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h3 id="â“æ‰“å°ä¸€ä¸ª-view-çš„æ‰€æœ‰å­-view-è¦æ±‚åˆ†å±‚æ‰“å°" tabindex="-1"><a class="header-anchor" href="#â“æ‰“å°ä¸€ä¸ª-view-çš„æ‰€æœ‰å­-view-è¦æ±‚åˆ†å±‚æ‰“å°" aria-hidden="true">#</a> â“æ‰“å°ä¸€ä¸ª <code>View</code> çš„æ‰€æœ‰å­ <code>View</code>ï¼Œè¦æ±‚åˆ†å±‚æ‰“å°</h3><details class="hint-container details"><summary>ğŸ’¡</summary><blockquote><p>æ ‘çš„å±‚åºéå†é—®é¢˜</p></blockquote><div class="language-swift line-numbers-mode" data-ext="swift"><pre class="language-swift"><code><span class="token comment">// é˜Ÿåˆ—(Queue)æ¥å®ç°æ ‘çš„å±‚æ¬¡éå†</span>
<span class="token keyword">func</span> <span class="token function-definition function">printSubviewsInLevelOrder</span><span class="token punctuation">(</span><span class="token keyword">for</span> view<span class="token punctuation">:</span> <span class="token class-name">UIView</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">UIView</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    queue<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span>
    <span class="token keyword">while</span> <span class="token operator">!</span>queue<span class="token punctuation">.</span>isEmpty <span class="token punctuation">{</span>
        <span class="token keyword">var</span> count <span class="token operator">=</span> queue<span class="token punctuation">.</span>count <span class="token comment">// å½“å‰å±‚æ•°é‡</span>
        <span class="token keyword">var</span> levelViews <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">UIView</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å½“å‰å±‚è§†å›¾</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> levelView <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            levelViews<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>levelView<span class="token punctuation">)</span>
            count <span class="token operator">-=</span> <span class="token number">1</span>
            <span class="token comment">// å°†å½“å‰å±‚è§†å›¾å­è§†å›¾ç»§ç»­åŠ å…¥é˜Ÿåˆ—</span>
            <span class="token keyword">for</span> subview <span class="token keyword">in</span> levelView<span class="token punctuation">.</span>subviews <span class="token punctuation">{</span>
                queue<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>subview<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">print</span><span class="token punctuation">(</span>levelViews<span class="token punctuation">)</span> <span class="token comment">// æ‰“å°å½“å‰å±‚è§†å›¾   </span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>`,65);function N(O,C){const a=c("ExternalLinkIcon");return i(),l("div",null,[t(" more "),d,t(" NSObject & å†…å­˜å¸ƒå±€ "),n("ul",null,[n("li",null,[r,n("a",k,[s("2019-12-20 å…³äº NSObject å¯¹è±¡çš„å†…å­˜å¸ƒå±€ï¼Œçœ‹æˆ‘å°±å¤Ÿäº†ï¼"),e(a)])]),n("li",null,[v,n("a",m,[s("2019-03-13 iOS ä¸­çš„ NSObject"),e(a)])])]),t(" runtime "),n("ul",null,[n("li",null,[b,n("a",h,[s("2018-11-30 ä¸€é“å€¼å¾—æ€è€ƒçš„ iOS é¢è¯•é¢˜"),e(a)]),g]),n("li",null,[f,n("a",w,[s("2014-11-06 ç¥ç»ç—…é™¢ objc runtime å…¥é™¢è€ƒè¯•"),e(a)])])]),t(" å¤šçº¿ç¨‹ "),n("ul",null,[n("li",null,[y,n("a",q,[s("2018-03-03 5 é“ iOS å¤šçº¿ç¨‹â€œé¢è¯•é¢˜â€"),e(a)])]),n("li",null,[x,n("a",_,[s("2017-08-25 ä»ä¸€é“ç½‘æ˜“é¢è¯•é¢˜æµ…è°ˆ Objective-C çº¿ç¨‹å®‰å…¨"),e(a)]),j])]),S])}const E=p(u,[["render",N],["__file","0x18.code.html.vue"]]);export{E as default};
