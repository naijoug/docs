import{_ as o}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as c,o as p,c as i,b as n,e as s,d as e,f as t}from"./app-KB7Ct32Q.js";const l={},r=n("h2",{id:"çœ‹æºç ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#çœ‹æºç ","aria-hidden":"true"},"#"),s(" çœ‹æºç ")],-1),u=n("h3",{id:"isa",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#isa","aria-hidden":"true"},"#"),s(" isa")],-1),d={href:"https://github.com/apple-oss-distributions/objc4/blob/objc4-876/runtime/objc-private.h#L83",target:"_blank",rel:"noopener noreferrer"},k=t(`<div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token comment">// objc-private.h#L83</span>
<span class="token keyword">union</span> isa_t <span class="token punctuation">{</span>
    <span class="token function">isa_t</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token function">isa_t</span><span class="token punctuation">(</span>uintptr_t value<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">bits</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    uintptr_t bits<span class="token punctuation">;</span>
private<span class="token punctuation">:</span> 
    <span class="token comment">// Accessing the class requires custom ptrauth operations, so force clients to go through setClass/getClass by making this private.</span>
    Class cls<span class="token punctuation">;</span> <span class="token comment">// è®¿é—®ç±»éœ€è¦è‡ªå®šä¹‰ ptrauth æ“ä½œï¼Œå°†å®ƒè®¾ä¸ºç§æœ‰ï¼Œè¿™æ ·å°±å¯ä»¥å¼ºåˆ¶å®¢æˆ·ç«¯é€šè¿‡ setClass/getClass æ¥è®¿é—®</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="class" tabindex="-1"><a class="header-anchor" href="#class" aria-hidden="true">#</a> Class</h3>`,2),b={href:"https://github.com/apple-oss-distributions/objc4/blob/objc4-876/runtime/objc-private.h#L75",target:"_blank",rel:"noopener noreferrer"},v=t(`<div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token comment">// objc-private.h#L75</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> objc_class <span class="token operator">*</span>Class<span class="token punctuation">;</span>   <span class="token comment">// OC ä¸­çš„ç±»å¯¹è±¡</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="id" tabindex="-1"><a class="header-anchor" href="#id" aria-hidden="true">#</a> id</h3>`,2),m={href:"https://github.com/apple-oss-distributions/objc4/blob/objc4-876/runtime/objc-private.h#L76",target:"_blank",rel:"noopener noreferrer"},_=t(`<div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token comment">// objc-private.h#L76</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> objc_object <span class="token operator">*</span>id<span class="token punctuation">;</span>     <span class="token comment">// OC ä¸­çš„å®ä¾‹å¯¹è±¡</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="objc-object" tabindex="-1"><a class="header-anchor" href="#objc-object" aria-hidden="true">#</a> objc_object</h3>`,2),h={href:"https://github.com/apple-oss-distributions/objc4/blob/objc4-876/runtime/objc-private.h#L121",target:"_blank",rel:"noopener noreferrer"},j=t(`<div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token comment">// objc-private.h#121</span>
<span class="token keyword">struct</span> objc_object <span class="token punctuation">{</span> <span class="token comment">// OC ä¸­çš„ç±»å®ä¾‹ç»“æ„ä½“å®šä¹‰</span>
private<span class="token punctuation">:</span>
    <span class="token keyword">char</span> isa_storage<span class="token punctuation">[</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>isa_t<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// reinterpret_cast : C++ä¸­çš„ä¸€ç§å¼ºåˆ¶ç±»å‹è½¬æ¢è¿ç®—ç¬¦ï¼Œå…è®¸è®²ä»»æ„æŒ‡é’ˆç±»å‹è½¬åŒ–ä¸ºå…¶å®ƒç±»å‹æŒ‡é’ˆ </span>
    isa_t <span class="token operator">&amp;</span><span class="token function">isa</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token operator">*</span>reinterpret_cast<span class="token operator">&lt;</span>isa_t <span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>isa_storage<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">const</span> isa_t <span class="token operator">&amp;</span><span class="token function">isa</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token operator">*</span>reinterpret_cast<span class="token operator">&lt;</span><span class="token keyword">const</span> isa_t <span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>isa_storage<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="objc-class" tabindex="-1"><a class="header-anchor" href="#objc-class" aria-hidden="true">#</a> objc_class</h3>`,2),g={href:"https://github.com/apple-oss-distributions/objc4/blob/objc4-876/runtime/objc-runtime-new.h#L2254",target:"_blank",rel:"noopener noreferrer"},f=t(`<div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token comment">// objc-runtime-new.h#L2254</span>
<span class="token keyword">struct</span> objc_class <span class="token punctuation">:</span> objc_object <span class="token punctuation">{</span> <span class="token comment">// OC ä¸­ç±»ç»“æ„ä½“å®šä¹‰</span>
    <span class="token comment">// \`= delete\` : c++ 11 è¯­æ³•ï¼Œç¦æ­¢ç¼–è¯‘å™¨ç”Ÿæˆæ„é€ å‡½æ•°ã€èµ‹å€¼è¿ç®—ç¬¦ï¼Œä¿è¯ objc_class æ“ä½œå®‰å…¨æ€§</span>
    <span class="token function">objc_class</span><span class="token punctuation">(</span><span class="token keyword">const</span> objc_class<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> delete<span class="token punctuation">;</span>
    <span class="token function">objc_class</span><span class="token punctuation">(</span>objc_class<span class="token operator">&amp;&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> delete<span class="token punctuation">;</span>
    <span class="token keyword">void</span> operator<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> objc_class<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> delete<span class="token punctuation">;</span>
    <span class="token keyword">void</span> operator<span class="token operator">=</span><span class="token punctuation">(</span>objc_class<span class="token operator">&amp;&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> delete<span class="token punctuation">;</span>
    <span class="token comment">// Class ISA;</span>
    Class superclass<span class="token punctuation">;</span>
    cache_t cache<span class="token punctuation">;</span>             <span class="token comment">// formerly cache pointer and vtable         ç¼“å­˜æŒ‡é’ˆå’Œè™šå‡½æ•°è¡¨(ä¼˜åŒ–æ€§èƒ½)</span>
    class_data_bits_t bits<span class="token punctuation">;</span>    <span class="token comment">// class_rw_t * plus custom rr/alloc flags   å­˜æ”¾ç±»æ•°æ®</span>
    
    class_rw_t <span class="token operator">*</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token comment">// è·å–ç±»æ•°æ®(å¯è¯»å¯å†™)</span>
        <span class="token keyword">return</span> bits<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> class_ro_t <span class="token operator">*</span><span class="token function">safe_ro</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token comment">// è·å–çš„å®‰å…¨çš„åªè¯»æ•°æ®</span>
        <span class="token keyword">return</span> bits<span class="token punctuation">.</span><span class="token function">safe_ro</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="class-data-bits-t" tabindex="-1"><a class="header-anchor" href="#class-data-bits-t" aria-hidden="true">#</a> class_data_bits_t</h3>`,2),w={href:"https://github.com/apple-oss-distributions/objc4/blob/objc4-876/runtime/objc-runtime-new.h#L2005",target:"_blank",rel:"noopener noreferrer"},y=t(`<div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token comment">// objc-runtime-new.h#L2005</span>
<span class="token keyword">struct</span> class_data_bits_t <span class="token punctuation">{</span> <span class="token comment">// ç±»æ•°æ®å­˜æ”¾ç»“æ„ä½“</span>
    friend objc_class<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="class-ro-t" tabindex="-1"><a class="header-anchor" href="#class-ro-t" aria-hidden="true">#</a> class_ro_t</h3>`,2),x={href:"https://github.com/apple-oss-distributions/objc4/blob/objc4-876/runtime/objc-runtime-new.h#L1505",target:"_blank",rel:"noopener noreferrer"},C=t(`<div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token comment">// objc-runtime-new.h#L1505</span>
<span class="token keyword">struct</span> class_ro_t <span class="token punctuation">{</span> <span class="token comment">// ç±»åªè¯»ç»“æ„ä½“å®šä¹‰</span>
    uint32_t flags<span class="token punctuation">;</span>
    uint32_t instanceStart<span class="token punctuation">;</span> <span class="token comment">// å®ä¾‹å†…å­˜å¼€å§‹ä½ç½®</span>
    uint32_t instanceSize<span class="token punctuation">;</span>  <span class="token comment">// å®ä¾‹å†…å­˜å¤§å°</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">__LP64__</span></span>
    uint32_t reserved<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

    <span class="token keyword">union</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> uint8_t <span class="token operator">*</span> ivarLayout<span class="token punctuation">;</span>
        Class nonMetaclass<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// ç±»å</span>
    explicit_atomic<span class="token operator">&lt;</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">&gt;</span> name<span class="token punctuation">;</span>
    <span class="token comment">// åŸºç¡€çš„æ–¹æ³•åˆ—è¡¨</span>
    objc<span class="token punctuation">:</span><span class="token punctuation">:</span>PointerUnion<span class="token operator">&lt;</span>method_list_t<span class="token punctuation">,</span> relative_list_list_t<span class="token operator">&lt;</span>method_list_t<span class="token operator">&gt;</span><span class="token punctuation">,</span> method_list_t<span class="token punctuation">:</span><span class="token punctuation">:</span>Ptrauth<span class="token punctuation">,</span> method_list_t<span class="token punctuation">:</span><span class="token punctuation">:</span>Ptrauth<span class="token operator">&gt;</span> baseMethods<span class="token punctuation">;</span>
    <span class="token comment">// åŸºç¡€çš„åè®®åˆ—è¡¨</span>
    objc<span class="token punctuation">:</span><span class="token punctuation">:</span>PointerUnion<span class="token operator">&lt;</span>protocol_list_t<span class="token punctuation">,</span> relative_list_list_t<span class="token operator">&lt;</span>protocol_list_t<span class="token operator">&gt;</span><span class="token punctuation">,</span> PtrauthRaw<span class="token punctuation">,</span> PtrauthRaw<span class="token operator">&gt;</span> baseProtocols<span class="token punctuation">;</span>
    <span class="token comment">// å®ä¾‹å˜é‡åˆ—è¡¨</span>
    <span class="token keyword">const</span> ivar_list_t <span class="token operator">*</span> ivars<span class="token punctuation">;</span>
    <span class="token comment">// å¼±å¼•ç”¨å®ä¾‹å˜é‡</span>
    <span class="token keyword">const</span> uint8_t <span class="token operator">*</span> weakIvarLayout<span class="token punctuation">;</span>
    <span class="token comment">// åŸºç¡€çš„å±æ€§åˆ—è¡¨</span>
    objc<span class="token punctuation">:</span><span class="token punctuation">:</span>PointerUnion<span class="token operator">&lt;</span>property_list_t<span class="token punctuation">,</span> relative_list_list_t<span class="token operator">&lt;</span>property_list_t<span class="token operator">&gt;</span><span class="token punctuation">,</span> PtrauthRaw<span class="token punctuation">,</span> PtrauthRaw<span class="token operator">&gt;</span> baseProperties<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="class-rw-t" tabindex="-1"><a class="header-anchor" href="#class-rw-t" aria-hidden="true">#</a> class_rw_t</h3>`,2),L={href:"https://github.com/apple-oss-distributions/objc4/blob/objc4-876/runtime/objc-runtime-new.h#L1883",target:"_blank",rel:"noopener noreferrer"},q=t(`<div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token comment">// å¯è¯»å¯å†™ç±»ç»“æ„å®šä¹‰</span>
<span class="token keyword">struct</span> class_rw_t <span class="token punctuation">{</span> 
    <span class="token comment">// Be warned that Symbolication knows the layout of this structure.</span>
    uint32_t flags<span class="token punctuation">;</span>
    uint16_t witness<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">SUPPORT_INDEXED_ISA</span></span>
    uint16_t index<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

    explicit_atomic<span class="token operator">&lt;</span>uintptr_t<span class="token operator">&gt;</span> ro_or_rw_ext<span class="token punctuation">;</span> <span class="token comment">// åŸå­æ“ä½œæŒ‡é’ˆï¼Œç”¨äºæŒ‡å‘åªè¯»ç±»æˆ–è€…ç±»æ‰©å±•</span>

    Class firstSubclass<span class="token punctuation">;</span>    <span class="token comment">// ç¬¬ä¸€ä¸ªå­ç±»      </span>
    Class nextSiblingClass<span class="token punctuation">;</span> <span class="token comment">// ä¸‹ä¸€ä¸ªå…„å¼Ÿç±»</span>
    
private<span class="token punctuation">:</span> <span class="token comment">// è”åˆæŒ‡é’ˆï¼ŒæŒ‡å‘ class_ro_t æˆ–è€… class_rw_ext_t</span>
    using ro_or_rw_ext_t <span class="token operator">=</span> objc<span class="token punctuation">:</span><span class="token punctuation">:</span>PointerUnion<span class="token operator">&lt;</span><span class="token keyword">const</span> class_ro_t<span class="token punctuation">,</span> class_rw_ext_t<span class="token punctuation">,</span> <span class="token function">PTRAUTH_STR</span><span class="token punctuation">(</span><span class="token string">&quot;class_ro_t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">PTRAUTH_STR</span><span class="token punctuation">(</span><span class="token string">&quot;class_rw_ext_t&quot;</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="class-rw-ext-t" tabindex="-1"><a class="header-anchor" href="#class-rw-ext-t" aria-hidden="true">#</a> class_rw_ext_t</h3>`,2),P={href:"https://github.com/apple-oss-distributions/objc4/blob/objc4-876/runtime/objc-runtime-new.h#L1873",target:"_blank",rel:"noopener noreferrer"},A=t(`<div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token comment">// objc-runtime-new.h#L1873 </span>
<span class="token keyword">struct</span> class_rw_ext_t <span class="token punctuation">{</span> <span class="token comment">// å¯è¯»å¯å†™ç±»æ‰©å±•ä¿¡æ¯</span>
    <span class="token function">DECLARE_AUTHED_PTR_TEMPLATE</span><span class="token punctuation">(</span>class_ro_t<span class="token punctuation">)</span>
    class_ro_t_authed_ptr<span class="token operator">&lt;</span><span class="token keyword">const</span> class_ro_t<span class="token operator">&gt;</span> ro<span class="token punctuation">;</span> <span class="token comment">// æŒ‡å‘åªè¯»ç±»çš„æŒ‡é’ˆ</span>
    method_array_t methods<span class="token punctuation">;</span>         <span class="token comment">// æ–¹æ³•åˆ—è¡¨</span>
    property_array_t properties<span class="token punctuation">;</span>    <span class="token comment">// å±æ€§åˆ—è¡¨ </span>
    protocol_array_t protocols<span class="token punctuation">;</span>     <span class="token comment">// åè®®åˆ—è¡¨</span>
    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>demangledName<span class="token punctuation">;</span>
    uint32_t version<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="swift-class-t" tabindex="-1"><a class="header-anchor" href="#swift-class-t" aria-hidden="true">#</a> swift_class_t</h3>`,2),S={href:"https://github.com/apple-oss-distributions/objc4/blob/objc4-876/runtime/objc-runtime-new.h#L2787",target:"_blank",rel:"noopener noreferrer"},N=t(`<div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token comment">// objc-runtime-new.h#L2787</span>
<span class="token keyword">struct</span> swift_class_t <span class="token punctuation">:</span> objc_class <span class="token punctuation">{</span>
    uint32_t flags<span class="token punctuation">;</span>
    uint32_t instanceAddressOffset<span class="token punctuation">;</span>
    uint32_t instanceSize<span class="token punctuation">;</span>
    uint16_t instanceAlignMask<span class="token punctuation">;</span>
    uint16_t reserved<span class="token punctuation">;</span>

    uint32_t classSize<span class="token punctuation">;</span>
    uint32_t classAddressOffset<span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token operator">*</span>description<span class="token punctuation">;</span>
    <span class="token comment">// ...</span>

    <span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">baseAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">(</span>uint8_t <span class="token operator">*</span><span class="token punctuation">)</span>this <span class="token operator">-</span> classAddressOffset<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å†™æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å†™æ€»ç»“" aria-hidden="true">#</a> å†™æ€»ç»“</h2><p>é¦–å…ˆå›ç­”é—®é¢˜ï¼Œé€šè¿‡ <code>objc_class</code> è¯»å–æ•°æ®å‡½æ•°è¿”å› <code>class_rw_t</code> ç±»å‹ï¼Œè¿˜æœ‰å®‰å…¨è¯»å–æ•°æ®è¿”å› <code>class_ro_t</code>ã€‚å¯ä»¥å¾—çŸ¥ç±»ä¸­å®ä¾‹å˜é‡ã€å±æ€§ã€æ–¹æ³•å­˜æ”¾åœ¨ <code>class_rw_t</code> å’Œ <code>class_ro_t</code> ä¸­ã€‚</p><p>ç„¶åéœ€è¦æ˜ç™½ <code>class_ro_t</code> ä¸ <code>class_rw_t</code> çš„åŒºåˆ«</p><ul><li><code>class_ro_t</code> : è¿™ä¸ªæ˜¯ç¼–è¯‘æœŸé—´å¯ä»¥ç¡®å®šçš„ï¼ŒåŒ…æ‹¬ç±»åã€å®ä¾‹å˜é‡ï¼Œå¼±å¼•ç”¨å®ä¾‹ï¼ŒåŸºæœ¬çš„å±æ€§ã€æ–¹æ³•ã€åè®®ã€‚</li><li><code>class_rw_t</code> : è¿™æ˜¯è¿è¡Œæ—¶æœŸé—´å¯ä»¥ç¡®å®šçš„ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ªæŒ‡å‘ <code>class_ro_t</code>ã€‚å°±æ˜¯è¯´è¿è¡Œæ—¶è¿˜ä¼šæ·»åŠ ä¸€ä¸‹å±æ€§ã€æ–¹æ³•ã€åè®®ã€‚</li></ul><h2 id="metaclass-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#metaclass-æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> <code>metaClass</code> æ˜¯ä»€ä¹ˆï¼Ÿ</h2><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token comment">// file: objc-runtime.mm</span>
<span class="token comment">// line:192 é€šè¿‡ç±»åè·å– metaClass</span>
<span class="token comment">/***********************************************************************
* objc_getMetaClass.  Return the id of the meta class the named class.
* Warning: doesn&#39;t work if aClassName is the name of a posed-for class&#39;s isa!
**********************************************************************/</span>
Class <span class="token function">objc_getMetaClass</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>aClassName<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Class cls<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>aClassName<span class="token punctuation">)</span> <span class="token keyword">return</span> Nil<span class="token punctuation">;</span>

    cls <span class="token operator">=</span> <span class="token function">objc_getClass</span> <span class="token punctuation">(</span>aClassName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cls<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">_objc_inform</span> <span class="token punctuation">(</span><span class="token string">&quot;class \`%s&#39; not linked into application&quot;</span><span class="token punctuation">,</span> aClassName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Nil<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> cls<span class="token operator">-&gt;</span><span class="token function">ISA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å†™æ€»ç»“-1" tabindex="-1"><a class="header-anchor" href="#å†™æ€»ç»“-1" aria-hidden="true">#</a> å†™æ€»ç»“</h2><ul><li><p><code>isa</code> æ˜¯ä¸€ä¸ªè”åˆä½“ï¼ŒåŒ…å«ä¸€ä¸ªæŒ‡å‘ç±»çš„æŒ‡é’ˆ <code>cls</code>ï¼Œ<code>cls</code> æ˜¯ <code>Class</code> ç±»å‹ã€‚</p></li><li><p><code>Class</code> æ˜¯ä¸€ä¸ª <code>objc_class</code> çš„æŒ‡é’ˆï¼Œå¯ä»¥æŒ‡å‘ <code>OC</code> ä¸­çš„ä»»æ„ç±»å¯¹è±¡ã€‚è€Œ <code>objc_class</code> åˆæ˜¯ç»§æ‰¿äº <code>objc_object</code>ï¼Œè¿™ä¹Ÿè¯´æ˜äº† <code>Class</code> ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°è¯äº† <code>OC ä¸­ä¸€åˆ‡çš†å¯¹è±¡</code>ã€‚</p></li><li><p><code>id</code> æ˜¯ä¸€ä¸ª <code>objc_object</code> çš„æŒ‡é’ˆï¼Œå¯ä»¥æŒ‡å‘ <code>OC</code> ä¸­çš„ä»»æ„å®ä¾‹å¯¹è±¡ã€‚</p></li></ul><blockquote><p><code>OC</code> ä¸­çš„å®ä¾‹å˜é‡ã€å±æ€§ã€æ–¹æ³•ã€åè®®éƒ½å­˜æ”¾åœ¨å“ªï¼Ÿ</p></blockquote>`,10);function O(R,T){const a=c("ExternalLinkIcon");return p(),i("div",null,[r,u,n("blockquote",null,[n("p",null,[n("a",d,[s("ğŸ‘‰ğŸ»"),e(a)])])]),k,n("blockquote",null,[n("p",null,[n("a",b,[s("ğŸ‘‰ğŸ»"),e(a)])])]),v,n("blockquote",null,[n("p",null,[n("a",m,[s("ğŸ‘‰ğŸ»"),e(a)])])]),_,n("blockquote",null,[n("p",null,[n("a",h,[s("ğŸ‘‰ğŸ»"),e(a)])])]),j,n("blockquote",null,[n("p",null,[n("a",g,[s("ğŸ‘‰ğŸ»"),e(a)])])]),f,n("blockquote",null,[n("p",null,[n("a",w,[s("ğŸ‘‰ğŸ»"),e(a)])])]),y,n("blockquote",null,[n("p",null,[n("a",x,[s("ğŸ‘‰ğŸ»"),e(a)])])]),C,n("blockquote",null,[n("p",null,[n("a",L,[s("ğŸ‘‰ğŸ»"),e(a)])])]),q,n("blockquote",null,[n("p",null,[n("a",P,[s("ğŸ‘‰ğŸ»"),e(a)])])]),A,n("blockquote",null,[n("p",null,[n("a",S,[s("ğŸ‘‰ğŸ»"),e(a)])])]),N])}const I=o(l,[["render",O],["__file","class.html.vue"]]);export{I as default};
