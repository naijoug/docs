import{_ as l}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as p,o as d,c as u,a as r,b as e,d as i,w as s,f as c,e as n}from"./app-gyVArVUl.js";const k={},m=c('<hr><h2 id="web" tabindex="-1"><a class="header-anchor" href="#web" aria-hidden="true">#</a> Web</h2><h3 id="â“web-ç™»å½•æ—¶æ€ä¹ˆä¿æŒä¼šè¯çŠ¶æ€çš„" tabindex="-1"><a class="header-anchor" href="#â“web-ç™»å½•æ—¶æ€ä¹ˆä¿æŒä¼šè¯çŠ¶æ€çš„" aria-hidden="true">#</a> â“<code>Web</code> ç™»å½•æ—¶æ€ä¹ˆä¿æŒä¼šè¯çŠ¶æ€çš„</h3><details class="hint-container details"><summary>ğŸ’¡</summary><blockquote><p>åœ¨ <code>iOS</code> ä¸­ï¼Œé€šè¿‡ <code>WebKit</code> çš„ <code>WKWebView</code> è¿›è¡Œ <code>Web</code> ç™»å½•æ—¶ï¼Œä¼šè¯çŠ¶æ€é€šå¸¸ç”± <code>Web</code> æœåŠ¡å™¨é€šè¿‡ç”¨æˆ·çš„æ¯æ¬¡è¯·æ±‚ä¸­é™„å¸¦çš„ <code>Cookies</code> æ¥ä¿æŒã€‚å½“ç”¨æˆ·æˆåŠŸç™»å½•åï¼ŒæœåŠ¡å™¨ä¼šç”Ÿæˆä¸€ä¸ªä»£è¡¨è¯¥ç”¨æˆ·ä¼šè¯çš„ <code>Cookie</code> å¹¶å‘é€ç»™å®¢æˆ·ç«¯ï¼Œç„¶ååœ¨åç»­çš„æ¯æ¬¡è¯·æ±‚ä¸­ï¼Œå®¢æˆ·ç«¯ä¼šå°†è¿™ä¸ª <code>Cookie</code> å¸¦ä¸Šï¼Œè®©æœåŠ¡å™¨çŸ¥é“è¿™ä¸ªè¯·æ±‚æ¥è‡ªå“ªä¸ªç”¨æˆ·çš„ä¼šè¯ã€‚</p></blockquote><p>ä½†æ˜¯ <code>iOS</code> çš„ <code>WKWebView</code>å¹¶ä¸ä¼šåƒ <code>UIWebView</code> é‚£æ ·è‡ªåŠ¨ä¿å­˜å’Œå‘é€ <code>Cookie</code>ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨ç®¡ç† <code>Cookie</code>ã€‚</p><p>å…·ä½“åšæ³•ï¼š</p><ul><li><p>ç™»å½•æˆåŠŸçš„å›è°ƒæˆ–è€…å…¶ä»–åˆé€‚çš„åœ°æ–¹ä¿å­˜æœåŠ¡å™¨é€šè¿‡ <code>Set-Cookie</code> å“åº”å¤´å‘é€è¿‡æ¥çš„ <code>Cookie</code>ã€‚å¯ä»¥é€šè¿‡ <code>WKNavigationDelegate</code> çš„æ¥å£è·å–åˆ°è¿™ä¸ªå“åº”å¤´ã€‚</p></li><li><p>åœ¨æ¯æ¬¡è¯·æ±‚æ—¶ï¼Œæ‰‹åŠ¨å°†ä¿å­˜çš„ <code>Cookie</code> æ”¾å…¥è¯·æ±‚å¤´é‡Œã€‚è¿™å¯ä»¥åœ¨ <code>WKNavigationDelegate</code> çš„ <code>decidePolicyForNavigationAction</code> æ¥å£ä¸­å¤„ç†ã€‚è·å–åˆ°è¯·æ±‚çš„ <code>URLRequest</code> åï¼Œä¿®æ”¹å…¶<code>HTTPHeaderFields</code> çš„ <code>Cookie</code> å­—æ®µï¼Œç„¶åç”¨ <code>WKWebView</code>çš„ <code>load</code> æ–¹æ³•å‘èµ·ä¸€ä¸ªæ–°çš„è¯·æ±‚ã€‚</p></li></ul><p>æ³¨æ„ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œè·¨åŸŸè¯·æ±‚ä¸ä¼šæºå¸¦ <code>Cookie</code>ï¼Œå¦‚æœéœ€è¦åœ¨è·¨åŸŸè¯·æ±‚ä¸­ä¿æŒç”¨æˆ·ä¼šè¯ï¼Œéœ€è¦è®¾ç½® <code>NSHTTPCookie</code> çš„ <code>HTTPShouldHandleCookies</code> å­—æ®µä¸º <code>true</code>ã€‚</p></details><h3 id="â“web-å’Œ-native-æ€ä¹ˆå…±äº«-cookie" tabindex="-1"><a class="header-anchor" href="#â“web-å’Œ-native-æ€ä¹ˆå…±äº«-cookie" aria-hidden="true">#</a> â“<code>Web</code> å’Œ <code>Native</code> æ€ä¹ˆå…±äº« <code>Cookie</code></h3>',5),b={class:"hint-container details"},w=c("<summary>ğŸ’¡</summary><p>æ€»ä½“æ€è·¯é€šï¼šåœ¨ <code>Native</code> å±‚è¿›è¡Œç™»å½•ç­‰æ“ä½œåï¼Œè·å–æœåŠ¡ç«¯è¿”å›çš„ <code>Cookie</code>ï¼Œç„¶ååœ¨æ¯æ¬¡ <code>WebView</code> åŠ è½½è¯·æ±‚æ—¶ï¼Œå°† <code>Cookie</code> è®¾ç½®è¿› <code>request</code> çš„ <code>header</code>ã€‚</p><p>å…·ä½“æ­¥éª¤ï¼š</p><ul><li><p>åœ¨åŸç”Ÿåº”ç”¨è·å–åˆ° <code>Cookie</code>ã€‚å¦‚æœæ˜¯é€šè¿‡ç½‘ç»œè¯·æ±‚æ¥è·å–æ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨è¯·æ±‚æˆåŠŸåï¼Œä»<code>Response Headers</code> é‡Œè·å– <code>Set-Cookie</code> å­—æ®µçš„å€¼ã€‚</p></li><li><p>è·å–åˆ° <code>Cookie</code> ä¹‹åï¼Œå¯ä»¥å­˜å‚¨åˆ°åº”ç”¨çš„å­˜å‚¨ç©ºé—´ï¼ˆå¦‚ <code>UserDefault</code>)ã€‚</p></li><li><p>åœ¨ <code>WebView</code> å‘é€è¯·æ±‚ä¹‹å‰ï¼Œä»å­˜å‚¨ç©ºé—´è·å– <code>Cookie</code>ï¼Œå°†å…¶æ·»åŠ åˆ° <code>WKWebView</code> åŠ è½½è¯·æ±‚çš„ <code>header</code> ä¸­ã€‚åœ¨ <code>iOS</code> ä¸­ï¼Œå¯ä»¥å…ˆè·å–ä¸€ä¸ª <code>NSMutableURLRequest</code> çš„å®ä¾‹ï¼Œç„¶åé€šè¿‡ <code>setValue:forHTTPHeaderField:</code> æ–¹æ³•è®¾ç½® <code>Cookie</code>ï¼Œæœ€åé€šè¿‡ <code>WKWebView</code> çš„ <code>loadRequest</code> æ–¹æ³•åŠ è½½è¿™ä¸ªè¯·æ±‚ã€‚</p></li></ul>",4),v=e("div",{class:"language-swift line-numbers-mode","data-ext":"swift"},[e("pre",{class:"language-swift"},[e("code",null,[e("span",{class:"token keyword"},"let"),n(" url "),e("span",{class:"token operator"},"="),n(),e("span",{class:"token function"},"URL"),e("span",{class:"token punctuation"},"("),n("string"),e("span",{class:"token punctuation"},":"),n(),e("span",{class:"token string-literal"},[e("span",{class:"token string"},'"https://example.com"')]),e("span",{class:"token punctuation"},")"),n(`
`),e("span",{class:"token keyword"},"var"),n(" request "),e("span",{class:"token operator"},"="),n(),e("span",{class:"token class-name"},"URLRequest"),e("span",{class:"token punctuation"},"("),n("url"),e("span",{class:"token punctuation"},":"),n(" url"),e("span",{class:"token punctuation"},")"),n(`
request`),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"setValue"),e("span",{class:"token punctuation"},"("),e("span",{class:"token string-literal"},[e("span",{class:"token string"},'"cookieName=cookieValue"')]),e("span",{class:"token punctuation"},","),n(" forHTTPHeaderField"),e("span",{class:"token punctuation"},":"),n(),e("span",{class:"token string-literal"},[e("span",{class:"token string"},'"Cookie"')]),e("span",{class:"token punctuation"},")"),n(`
webView`),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"load"),e("span",{class:"token punctuation"},"("),n("request"),e("span",{class:"token punctuation"},")"),n(`
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),g=e("div",{class:"language-java line-numbers-mode","data-ext":"java"},[e("pre",{class:"language-java"},[e("code",null,[e("span",{class:"token class-name"},"String"),n(" url "),e("span",{class:"token operator"},"="),n(),e("span",{class:"token string"},'"https://example.com"'),e("span",{class:"token punctuation"},";"),n(`
`),e("span",{class:"token class-name"},"String"),n(" cookieString "),e("span",{class:"token operator"},"="),n(),e("span",{class:"token string"},'"cookieName=cookieValue; Domain=.example.com"'),e("span",{class:"token punctuation"},";"),n(`
`),e("span",{class:"token class-name"},"CookieManager"),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"getInstance"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"setCookie"),e("span",{class:"token punctuation"},"("),n("url"),e("span",{class:"token punctuation"},","),n(" cookieString"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),n(`
webView`),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"loadUrl"),e("span",{class:"token punctuation"},"("),n("url"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),n(`
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),W=c(`<h3 id="â“web-æ¸²æŸ“å’Œ-native-æ¸²æŸ“æœ‰ä»€ä¹ˆå¼‚åŒç‚¹" tabindex="-1"><a class="header-anchor" href="#â“web-æ¸²æŸ“å’Œ-native-æ¸²æŸ“æœ‰ä»€ä¹ˆå¼‚åŒç‚¹" aria-hidden="true">#</a> â“<code>Web</code> æ¸²æŸ“å’Œ <code>Native</code> æ¸²æŸ“æœ‰ä»€ä¹ˆå¼‚åŒç‚¹</h3><details class="hint-container details"><summary>ğŸ’¡</summary><p>ä¸åŒç‚¹ï¼š</p><ul><li><p>æ¸²æŸ“æµç¨‹ï¼š</p><ul><li><code>Web</code> æ¸²æŸ“æµç¨‹ä¸€èˆ¬åŒ…æ‹¬è§£æ <code>HTML</code>ã€ç”Ÿæˆ <code>DOM</code> æ ‘ã€è§£æ <code>CSS</code>ã€ç”Ÿæˆ <code>CSSOM</code> æ ‘ã€ç”Ÿæˆæ¸²æŸ“æ ‘ã€å¸ƒå±€ï¼ˆè®¡ç®—å…ƒç´ çš„å‡ ä½•ä½ç½®ï¼‰ã€æ¸²æŸ“ï¼ˆå°†å…ƒç´ ç»˜åˆ¶åˆ°å±å¹•ï¼‰ç­‰æ­¥éª¤ã€‚</li><li><code>Native</code> æ¸²æŸ“åˆ™æ˜¯é€šè¿‡æ„å»ºå’Œè°ƒç”¨æœ¬åœ°ç»„ä»¶ã€è°ƒç”¨ç³»ç»Ÿåº•å±‚ <code>API</code> æ¥ç›´æ¥åœ¨å±å¹•ä¸Šç»˜åˆ¶ç•Œé¢ã€‚</li></ul></li><li><p>ç»˜å›¾æ€§èƒ½ï¼šç”±äº <code>Native</code> æ¸²æŸ“ç›´æ¥è°ƒç”¨ç³»ç»Ÿåº•å±‚ <code>API</code>ï¼Œé€šå¸¸ä¼šæ¯” <code>Web</code> æ¸²æŸ“æ›´å¿«ï¼Œå°¤å…¶æ˜¯åœ¨åŠ¨ç”»å’Œå¤æ‚ç”¨æˆ·äº¤äº’ç­‰åœºæ™¯ä¸‹ã€‚</p></li><li><p>è·¨å¹³å°èƒ½åŠ›ï¼š</p><ul><li><code>Web</code> æ¸²æŸ“åŸºäºæ ‡å‡†åŒ–çš„ <code>Web</code> æŠ€æœ¯ï¼Œå› æ­¤å…·æœ‰å¾ˆå¼ºçš„è·¨å¹³å°èƒ½åŠ›ã€‚</li><li><code>Native</code> æ¸²æŸ“å¾€å¾€æ˜¯é’ˆå¯¹å•ä¸€å¹³å°çš„ï¼Œä¸è¿‡ä¹Ÿæœ‰ä¸€äº›è·¨å¹³å°çš„ <code>Native</code> æ¡†æ¶ï¼Œå¦‚ <code>React Native</code> å’Œ <code>Flutter</code>ã€‚</li></ul></li><li><p>è®¿é—®ç³»ç»Ÿèƒ½åŠ›ï¼š</p><ul><li><code>Web</code> å¯ä»¥é€šè¿‡ <code>Web APIs</code> è®¿é—®ä¸€éƒ¨åˆ†ç³»ç»ŸåŠŸèƒ½ï¼Œä½†å…¶èƒ½åŠ›ç›¸å¯¹å—é™ã€‚</li><li><code>Native</code> æ¸²æŸ“æ›´å®¹æ˜“è®¿é—®å’Œä½¿ç”¨æ“ä½œç³»ç»Ÿçš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¦‚ç›¸æœºã€<code>GPS</code>ã€é™€èºä»ªç­‰ã€‚</li></ul></li></ul><p>ç›¸åŒç‚¹ï¼š</p><ul><li>éƒ½æ˜¯é€šè¿‡æ›´æ”¹ <code>UI</code> çŠ¶æ€æ¥å“åº”ç”¨æˆ·æ“ä½œçš„ã€‚</li><li>éƒ½å¯ä»¥é€šè¿‡ä½¿ç”¨åŠ¨ç”»æ¥å¢å¼ºç”¨æˆ·ä½“éªŒã€‚</li><li>ä¸ºäº†ä¿è¯æµç•…çš„ç”¨æˆ·ä½“éªŒï¼Œéƒ½éœ€è¦å°½é‡é¿å…åœ¨ä¸»çº¿ç¨‹ï¼ˆ<code>UI</code> çº¿ç¨‹ï¼‰ä¸­è¿›è¡Œé‡å‹ä»»åŠ¡ã€‚</li></ul></details><hr><h2 id="wkwebview" tabindex="-1"><a class="header-anchor" href="#wkwebview" aria-hidden="true">#</a> WKWebView</h2><h3 id="â“wkwebview-ç™½å±é—®é¢˜å¦‚ä½•å‘ç”Ÿ-è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#â“wkwebview-ç™½å±é—®é¢˜å¦‚ä½•å‘ç”Ÿ-è§£å†³æ–¹æ¡ˆ" aria-hidden="true">#</a> â“<code>WKWebView</code> ç™½å±é—®é¢˜å¦‚ä½•å‘ç”Ÿï¼Œè§£å†³æ–¹æ¡ˆ</h3><details class="hint-container details"><summary>ğŸ’¡</summary><p>ç™½å±é—®é¢˜å¼•èµ·åŸå› ï¼š</p><ul><li><code>WKWebView</code> åˆå§‹åŒ–åå› å†…å­˜å›æ”¶ç­‰åŸå› è¢«æå‰é‡Šæ”¾ã€‚</li><li><code>WKWebView</code> åœ¨åˆå§‹åŒ–ã€åŠ è½½ <code>web</code> èµ„æºæ—¶ï¼Œç”±äº <code>CPU</code> å¤„ç†ä¸è¿‡æ¥äº§ç”Ÿçš„å¡é¡¿ã€‚</li></ul><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li><p>å°† <code>WKWebView</code> å¼ºå¼•ç”¨ä»¥ä¿è¯å…¶åœ¨ <code>ViewController</code> ç”Ÿå‘½å‘¨æœŸå†…ä»¥åŠç½‘ç»œè¯·æ±‚è¿‡ç¨‹ä¸­ä¸è¢«é‡Šæ”¾ã€‚</p><blockquote><p>æ¯”å¦‚åœ¨ <code>ViewController</code> ä¸­å®šä¹‰ <code>WKWebView</code> ä¸ºå…¨å±€å±æ€§ã€‚</p></blockquote></li><li><p>åœ¨é€‚å½“çš„æ—¶æœºï¼Œä¾‹å¦‚åœ¨ <code>viewDidLoad()</code> å‡½æ•°ä¸­è¿›è¡Œ <code>WKWebView</code> çš„åˆå§‹åŒ–å’Œé¡µé¢åŠ è½½ã€‚é¿å…è¿‡æ—©åŠ è½½å¯¼è‡´ <code>WKWebView</code> æœªè¢«æ­£å¸¸åˆå§‹åŒ–å°±å·²ç»å¼€å§‹é¡µé¢åŠ è½½ã€‚</p></li><li><p>ä½¿ç”¨ <code>Key-Value Observing</code>ï¼ˆ<code>KVO</code>ï¼‰æ¥ç›‘å¬ <code>WKWebView</code> çš„ <code>loading</code>ã€<code>title</code>ã€<code>estimatedProgress</code>å±æ€§ï¼Œè·å– <code>WKWebView</code> çš„åŠ è½½çŠ¶æ€å¹¶åŠæ—¶è¿›è¡Œç›¸åº”å¤„ç†ã€‚</p><div class="language-swift line-numbers-mode" data-ext="swift"><pre class="language-swift"><code>webView<span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">,</span> forKeyPath<span class="token punctuation">:</span> <span class="token other-directive property">#keyPath</span><span class="token punctuation">(</span><span class="token class-name">WKWebView</span><span class="token punctuation">.</span>estimatedProgress<span class="token punctuation">)</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">.</span>new<span class="token punctuation">,</span> context<span class="token punctuation">:</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span>
webView<span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">,</span> forKeyPath<span class="token punctuation">:</span> <span class="token other-directive property">#keyPath</span><span class="token punctuation">(</span><span class="token class-name">WKWebView</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">.</span>new<span class="token punctuation">,</span> context<span class="token punctuation">:</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å¦‚æœæ˜¯å› ä¸º <code>WKWebView</code> åœ¨åŠ è½½å¤§é‡ <code>web</code> èµ„æºæ—¶å‡ºç°å¡é¡¿ï¼Œå¯¼è‡´ç™½å±ï¼Œå¯ä»¥å°è¯•å¯¹ <code>web</code> èµ„æºåšä¸€äº›ä¼˜åŒ–ï¼Œå‡å°‘é¦–å±éœ€è¦åŠ è½½çš„èµ„æºã€‚</p></li><li><p>åˆç†è®¾ç½® <code>WKWebView</code> çš„ <code>Frame</code>ï¼Œä¸€å¼€å§‹è®¾ç½®ä¸ºä¸€åƒç´ ï¼Œç­‰ç½‘é¡µåŠ è½½å®Œæ¯•å†è®¾ç½®ä¸ºå…¨å±å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³é—®é¢˜ã€‚</p></li><li><p>Webå¼€å‘è€…å·¥å…·ï¼šç™½å±é—®é¢˜å¯èƒ½å’Œç½‘é¡µçš„åŠ è½½æ–¹å¼ä¹Ÿæœ‰å…³ç³»ï¼Œå¦‚æœå¯ä»¥çš„è¯ï¼Œå¯ä»¥è¯·ç½‘é¡µå¼€å‘è€…å·¥å…·æŸ¥çœ‹å¯¹åº”çš„ç½‘é¡µï¼Œçœ‹çœ‹æ˜¯å¦æœ‰ä½¿ç”¨æŸäº›ç‰¹æ®Šçš„æŠ€æœ¯å¯¼è‡´ <code>WKWebView</code> æ— æ³•æ­£ç¡®è§£æã€‚</p></li></ul></details><h3 id="â“wkwebview-ç¼“å­˜å’Œæ¸…ç†ç¼“å­˜çš„æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#â“wkwebview-ç¼“å­˜å’Œæ¸…ç†ç¼“å­˜çš„æ–¹æ³•" aria-hidden="true">#</a> â“<code>WKWebView</code> ç¼“å­˜å’Œæ¸…ç†ç¼“å­˜çš„æ–¹æ³•</h3><details class="hint-container details"><summary>ğŸ’¡</summary><div class="language-swift line-numbers-mode" data-ext="swift"><pre class="language-swift"><code><span class="token comment">// ç¦æ­¢ç¼“å­˜</span>
<span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;https://www.website.com&quot;</span></span><span class="token punctuation">)</span><span class="token operator">!</span>
<span class="token keyword">var</span> request <span class="token operator">=</span> <span class="token class-name">URLRequest</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> url<span class="token punctuation">)</span>
request<span class="token punctuation">.</span>cachePolicy <span class="token operator">=</span> <span class="token punctuation">.</span>reloadIgnoringLocalCacheData
wkWebView<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>

<span class="token comment">// æ¸…é™¤ç¼“å­˜</span>
<span class="token keyword">let</span> dateFrom <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>timeIntervalSince1970<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> websiteDataTypes <span class="token operator">=</span> <span class="token class-name">Set</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
websiteDataTypes<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">WKWebsiteDataTypeDiskCache</span><span class="token punctuation">)</span>
websiteDataTypes<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">WKWebsiteDataTypeMemoryCache</span><span class="token punctuation">)</span>
<span class="token class-name">WKWebsiteDataStore</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeData</span><span class="token punctuation">(</span>ofTypes<span class="token punctuation">:</span> websiteDataTypes<span class="token punctuation">,</span> modifiedSince<span class="token punctuation">:</span> dateFrom<span class="token punctuation">,</span> completionHandler<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šæ¸…ç†ç¼“å­˜æ“ä½œå¯èƒ½éœ€è¦å‡ ç§’é’Ÿçš„æ—¶é—´å»å®Œæˆï¼Œç‰¹åˆ«æ˜¯å½“ç£ç›˜ä¸­çš„ç¼“å­˜æ¯”è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œåº”å½“å¯¹å®ƒè¿›è¡Œå¼‚æ­¥å¤„ç†ã€‚</p></details><h3 id="â“wkwebview-è®¾ç½®-useragent-çš„æ–¹æ³•çŸ¥é“å—-æœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜å—" tabindex="-1"><a class="header-anchor" href="#â“wkwebview-è®¾ç½®-useragent-çš„æ–¹æ³•çŸ¥é“å—-æœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜å—" aria-hidden="true">#</a> â“<code>WKWebView</code> è®¾ç½® <code>userAgent</code> çš„æ–¹æ³•çŸ¥é“å—ï¼Œæœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜å—</h3><details class="hint-container details"><summary>ğŸ’¡</summary><ul><li><p>ç›´æ¥é€šè¿‡ <code>WKWebView</code> çš„ <code>customUserAgent</code> å±æ€§æ¥è®¾ç½®ã€‚</p><div class="language-swift line-numbers-mode" data-ext="swift"><pre class="language-swift"><code><span class="token keyword">let</span> webView <span class="token operator">=</span> <span class="token class-name">WKWebView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
webView<span class="token punctuation">.</span>customUserAgent <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;Your Custom User Agent&quot;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>é€šè¿‡ <code>WKWebView</code> çš„ <code>evaluateJavaScript</code> æ–¹æ³•è·å–é»˜è®¤ <code>UserAgent</code>ï¼Œç„¶ååœ¨å…¶åŸºç¡€ä¸Šæ·»åŠ è‡ªå®šä¹‰éƒ¨åˆ†ï¼š</p><div class="language-swift line-numbers-mode" data-ext="swift"><pre class="language-swift"><code><span class="token keyword">let</span> webView <span class="token operator">=</span> <span class="token class-name">WKWebView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
webView<span class="token punctuation">.</span><span class="token function">evaluateJavaScript</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;navigator.userAgent&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>result<span class="token punctuation">,</span> error<span class="token punctuation">)</span> <span class="token keyword">in</span>
    <span class="token keyword">if</span> <span class="token keyword">let</span> userAgent <span class="token operator">=</span> result <span class="token keyword">as</span><span class="token operator">?</span> <span class="token class-name">String</span> <span class="token punctuation">{</span>
        webView<span class="token punctuation">.</span>customUserAgent <span class="token operator">=</span> userAgent <span class="token operator">+</span> <span class="token string-literal"><span class="token string">&quot; Your Custom User Agent&quot;</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜ï¼š</p><ul><li><p><code>UserAgent</code> è®¾ç½®æ²¡æœ‰ç”Ÿæ•ˆï¼šæœ‰æ—¶å¯èƒ½ä¼šå‡ºç°è®¾ç½®äº† <code>customUserAgent</code> åæ²¡æœ‰ç«‹å³ç”Ÿæ•ˆçš„æƒ…å†µï¼Œè¿™é€šå¸¸æ˜¯å› ä¸º <code>WKWebView</code> è¿˜åœ¨åŠ è½½é¡µé¢æˆ–è€…è¿˜æ²¡æœ‰å¼€å§‹åŠ è½½é¡µé¢ã€‚ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åœ¨åˆ›å»º <code>WKWebView</code> å®ä¾‹åç«‹å³è®¾ç½® <code>customUserAgent</code>ã€‚</p></li><li><p><code>UserAgent</code> è®¾ç½®è¢«è¦†ç›–ï¼šæœ‰æ—¶å¯èƒ½ä¼šå‡ºç°è®¾ç½®äº† <code>customUserAgent</code> åï¼Œåç»­å†æ¬¡è®¾ç½® <code>customUserAgent</code> æ—¶å‰ä¸€æ¬¡çš„è®¾ç½®è¢«è¦†ç›–ã€‚ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åœ¨è®¾ç½® <code>customUserAgent</code> å‰å…ˆè·å–å½“å‰çš„ <code>userAgent</code> ï¼Œç„¶åå°†æ–°çš„ <code>userAgent</code> æ·»åŠ åˆ°åŸæœ‰çš„ <code>userAgent</code> åé¢ã€‚</p></li></ul></details><h3 id="â“customuseragent-å’Œ-applicationnameforuseragent-è®¾ç½®-useragent-æœ‰ä»€ä¹ˆåŒºåˆ«å—" tabindex="-1"><a class="header-anchor" href="#â“customuseragent-å’Œ-applicationnameforuseragent-è®¾ç½®-useragent-æœ‰ä»€ä¹ˆåŒºåˆ«å—" aria-hidden="true">#</a> â“<code>customUserAgent</code> å’Œ <code>applicationNameForUserAgent</code> è®¾ç½® <code>userAgent</code> æœ‰ä»€ä¹ˆåŒºåˆ«å—</h3><details class="hint-container details"><summary>ğŸ’¡</summary><ul><li><p><code>customUserAgent</code>ï¼šå¯ä»¥è‡ªå®šä¹‰æ•´ä¸ª <code>userAgent</code> å­—ç¬¦ä¸²çš„å€¼ã€‚</p><blockquote><p>æ¯”å¦‚å¯ä»¥æŠŠ <code>userAgent</code> è®¾ç½®ä¸ºä»»ä½•å€¼ï¼Œæµè§ˆå™¨ä¿¡æ¯ã€æ“ä½œç³»ç»Ÿä¿¡æ¯ç­‰éƒ½å¯ä»¥è¢«æ›¿æ¢æˆ–è€…çœç•¥ã€‚</p></blockquote></li><li><p><code>applicationNameForUserAgent</code>ï¼šå¯¹åº”äº <code>WKWebViewConfiguration</code> çš„å±æ€§ï¼Œç”¨äºè®¾ç½® <code>userAgent</code> å­—ç¬¦ä¸²çš„åç¼€ã€‚å°†å…¶è®¾ç½®ä¸ºç‰¹å®šå­—ç¬¦ä¸²åï¼Œè¿™ä¸ªå­—ç¬¦ä¸²ä¼šè¢«æ·»åŠ åˆ°æ•´ä¸ª <code>userAgent</code> çš„æœ«å°¾ï¼Œå½¢æˆæ–°çš„ <code>userAgent</code>ã€‚</p><blockquote><p>è¿™ä¸ä¼šæ”¹å˜åŸæœ‰æµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿçš„ä¿¡æ¯ã€‚</p></blockquote></li></ul><p>æ€»ç»“ï¼š<code>customUserAgent</code> å¯ä»¥ç”¨æ¥å…¨é¢è‡ªå®šä¹‰ <code>userAgent</code>ï¼Œè€Œ <code>applicationNameForUserAgent</code> åˆ™åªæ˜¯åœ¨é»˜è®¤çš„ <code>userAgent</code> å­—ç¬¦ä¸²åé¢è¿½åŠ äº†ä¸€å°æ®µè‡ªå®šä¹‰çš„å­—ç¬¦ä¸²ã€‚</p></details><h3 id="â“wkwebview-ä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜å˜›" tabindex="-1"><a class="header-anchor" href="#â“wkwebview-ä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜å˜›" aria-hidden="true">#</a> â“<code>WKWebView</code> ä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜å˜›</h3><details class="hint-container details"><summary>ğŸ’¡</summary><p>å¸¸è§é—®é¢˜ï¼š</p><ul><li><p><code>Cookie</code> ç®¡ç†é—®é¢˜ï¼šä½¿ç”¨ <code>WKWebView</code> çš„æ—¶å€™ï¼Œæœ‰æ—¶å¯èƒ½ä¼šé‡åˆ° <code>Cookie</code> åŒæ­¥é—®é¢˜ï¼Œè¿™æ˜¯å› ä¸º <code>iOS</code> çš„ <code>WKWebView</code> ç®¡ç† <code>Cookie</code> çš„æ–¹å¼ä¸ <code>UIWebView</code> å’Œ <code>Safari</code> ä¸åŒï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨ç®¡ç† <code>Cookie</code>ã€‚å¯ä»¥é€šè¿‡åœ¨æ¯æ¬¡è¯·æ±‚æ—¶ï¼Œå°†å­˜å‚¨åœ¨ <code>HTTPCookieStorage</code> çš„ <code>Cookie</code> å†™å…¥æ¯æ¬¡çš„è¯·æ±‚å¤´ä¸­ã€‚</p></li><li><p>å†…å­˜æ³„æ¼é—®é¢˜ï¼š<code>WKWebView</code> åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œç‰¹åˆ«æ˜¯åœ¨ <code>WKWebView</code> åŠ è½½ <code>JavaScript</code> å†…å®¹æ—¶ã€‚å¯¹æ­¤ï¼Œå¯ä»¥é‡‡å–åˆç†åœ°åˆ›å»ºå’Œé”€æ¯ <code>WKWebView</code> çš„æ–¹å¼æˆ–è€…å°† <code>WKWebView</code> è§†å›¾æ”¾åœ¨æ–°çš„ <code>Window</code> ä¸Šæ¥é¿å…ã€‚</p></li><li><p><code>HTTPS</code> è¯ä¹¦é—®é¢˜ï¼šåœ¨ <code>WKWebView</code> ä¸­åŠ è½½è‡ªç­¾åè¯ä¹¦çš„ <code>https</code> ç«™ç‚¹æ—¶ï¼Œå¯èƒ½ä¼šå‘ç”Ÿæœªè¢«ä¿¡ä»»çš„æƒ…å†µã€‚åº”å¯¹ç­–ç•¥æ˜¯å®ç°ç›¸åº”çš„ <code>WKNavigationDelegate</code> ä¸­çš„æ–¹æ³•æ¥è‡ªå®šä¹‰å¤„ç†ã€‚</p></li><li><p>æ— æ³•ç›´æ¥åŠ è½½æœ¬åœ°æ–‡ä»¶ï¼š<code>WKWebView</code> æ— æ³•åƒ <code>UIWebView</code> é‚£æ ·ç›´æ¥åŠ è½½æœ¬åœ°ç½‘é¡µæˆ–å…¶ä»–æ–‡æ¡£ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ <code>WKWebView</code> çš„åŠ è½½è¯·æ±‚æ–¹æ³•æ·»åŠ æœ¬åœ°æ–‡ä»¶çš„ <code>URL</code> è®¿é—®æœ¬åœ°æ–‡ä»¶ã€‚</p></li></ul></details><h3 id="â“uiwebview-è¿ç§»åˆ°-wkwebview-è¿‡ç¨‹ä¸­æœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜æˆ–è€…éº»çƒ¦å—-æ€ä¹ˆè§£å†³çš„" tabindex="-1"><a class="header-anchor" href="#â“uiwebview-è¿ç§»åˆ°-wkwebview-è¿‡ç¨‹ä¸­æœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜æˆ–è€…éº»çƒ¦å—-æ€ä¹ˆè§£å†³çš„" aria-hidden="true">#</a> â“<code>UIWebview</code> è¿ç§»åˆ° <code>WKWebView</code> è¿‡ç¨‹ä¸­æœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜æˆ–è€…éº»çƒ¦å—ï¼Œæ€ä¹ˆè§£å†³çš„</h3><details class="hint-container details"><summary>ğŸ’¡</summary><p>ä¸€äº›å¸¸è§é—®é¢˜å’Œè§£å†³ç­–ç•¥ï¼š</p><ul><li><p><code>Cookie</code> ç®¡ç†æ–¹é¢ï¼Œ<code>UIWebView</code> ä¸æµè§ˆå™¨å…±äº« <code>Cookie</code> å­˜å‚¨ï¼Œä½† <code>WKWebView</code> æ²¡æœ‰è¿™æ ·çš„ç‰¹æ€§ã€‚ä¸€ä¸ªå¸¸è§çš„è§£å†³åŠæ³•æ˜¯åœ¨ <code>HTTP</code> è¯·æ±‚å¤´ä¸­æ‰‹åŠ¨æ·»åŠ  <code>Cookie</code>ã€‚</p></li><li><p>æœ¬åœ°æ–‡ä»¶åŠ è½½é—®é¢˜ã€‚<code>UIWebView</code> å¯ä»¥è½»æ¾åŠ è½½æœ¬åœ° <code>HTML</code> æ–‡ä»¶ï¼Œè€Œ <code>WKWebView</code> ä¸èƒ½ç›´æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚è§£å†³æ–¹æ³•é€šå¸¸æ˜¯é€šè¿‡ <code>WKWebView</code> çš„ <code>loadFileURL</code> æ¥åŠ è½½æœ¬åœ°æ–‡ä»¶ã€‚</p></li><li><p>è®¿é—®å†å²è®°å½•ã€‚<code>UIWebView</code> æä¾›äº†ä¾¿æ·çš„ <code>backForwardList</code> æ–¹æ³•æ¥è·å¾—å†å²è®°å½•ï¼Œä½†æ˜¯åœ¨ <code>WKWebView</code> ä¸­ï¼Œå¹¶æ²¡æœ‰å¯¹åº”çš„ä¾¿æ·æ–¹æ³•ã€‚å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼ï¼ˆæ¯”å¦‚è‡ªå·±ç¼–å†™ä»£ç æ¥ç»´æŠ¤ä¸€ä¸ªå†å²è®°å½•ï¼‰æ¥æ›¿ä»£ã€‚</p></li><li><p>åœ¨ <code>WKWebView</code> ä¸­ï¼Œ<code>scrollView</code> çš„ <code>zoom</code> åŠŸèƒ½è¢«ç¦ç”¨äº†ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦æ”¯æŒç¼©æ”¾ï¼Œéœ€è¦ä½¿ç”¨ä¸€äº›å¥‡æŠ€æ·«å·§ï¼Œä¾‹å¦‚åœ¨æ¯æ¬¡åŠ è½½å®Œæ¯•åæ‰§è¡Œ <code>JavaScript</code> ä»£ç ï¼Œæ‰‹åŠ¨å¯ç”¨ <code>Pinch Zoom</code>ã€‚</p></li><li><p>å†…å­˜é—®é¢˜ã€‚<code>WKWebView</code> é€šå¸¸ä¼šä½¿ç”¨æ›´å¤šçš„å†…å­˜ï¼Œå¦‚æœä½ çš„åº”ç”¨åœ¨ä½å†…å­˜è®¾å¤‡ä¸Šä½¿ç”¨ï¼Œå¯èƒ½éœ€è¦åšä¸€äº›å†…å­˜ä¼˜åŒ–ã€‚</p></li><li><p>ä¸€äº›æ—§çš„ <code>JavaScript</code> ä»£ç å¯èƒ½åœ¨ <code>WKWebView</code> ä¸Šæ— æ³•æ­£å¸¸å·¥ä½œï¼Œå¯èƒ½éœ€è¦é‡æ–°è°ƒæ•´æˆ–ç¼–å†™ <code>JavaScript</code> ä»£ç ã€‚</p></li><li><p>åŸæœ‰çš„ <code>UIWebView Delegate</code> æ–¹æ³•åœ¨ <code>WKWebView</code> ä¸­å¯èƒ½ä¸å­˜åœ¨ç­‰ä»·çš„æ–¹æ³•ï¼Œéœ€è¦åšå‡ºç›¸åº”çš„è°ƒæ•´å’Œæ›¿æ¢ã€‚</p></li></ul></details><h3 id="â“js-ä¸-ios-ç›¸äº’è°ƒç”¨çš„æ–¹æ¡ˆæœ‰å“ªäº›" tabindex="-1"><a class="header-anchor" href="#â“js-ä¸-ios-ç›¸äº’è°ƒç”¨çš„æ–¹æ¡ˆæœ‰å“ªäº›" aria-hidden="true">#</a> â“<code>js</code> ä¸ <code>iOS</code> ç›¸äº’è°ƒç”¨çš„æ–¹æ¡ˆæœ‰å“ªäº›</h3>`,17),h={class:"hint-container details"},f=e("summary",null,"ğŸ’¡",-1),V=e("p",null,[e("code",null,"WKWebView")],-1),S=e("div",{class:"language-swift line-numbers-mode","data-ext":"swift"},[e("pre",{class:"language-swift"},[e("code",null,[e("span",{class:"token comment"},"// iOS ç«¯"),n(`
`),e("span",{class:"token keyword"},"class"),n(),e("span",{class:"token class-name"},"ViewController"),e("span",{class:"token punctuation"},":"),n(),e("span",{class:"token class-name"},"UIViewController"),n(),e("span",{class:"token punctuation"},"{"),n(`
    `),e("span",{class:"token keyword"},"func"),n(),e("span",{class:"token function-definition function"},"viewDidLoad"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},")"),n(),e("span",{class:"token punctuation"},"{"),n(`
        `),e("span",{class:"token keyword"},"super"),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"viewDidLoad"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},")"),n(`
        `),e("span",{class:"token comment"},"// è®¾ç½®é…ç½®"),n(`
        `),e("span",{class:"token keyword"},"let"),n(" config "),e("span",{class:"token operator"},"="),n(),e("span",{class:"token class-name"},"WKWebViewConfiguration"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},")"),n(`
        `),e("span",{class:"token comment"},"// è®¾ç½®æ¶ˆæ¯æ§åˆ¶å™¨"),n(`
        `),e("span",{class:"token keyword"},"let"),n(" userContentController "),e("span",{class:"token operator"},"="),n(),e("span",{class:"token class-name"},"WKUserContentController"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},")"),n(`
        `),e("span",{class:"token comment"},'// æ·»åŠ æ¶ˆæ¯å¤„ç†ï¼Œéµå¾ª WKScriptMessageHandler åè®®, "AppModel" éœ€è¦ä¸ JS ç«¯åå•†ä¸€è‡´'),n(`
        userContentController`),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"add"),e("span",{class:"token punctuation"},"("),e("span",{class:"token keyword"},"self"),e("span",{class:"token punctuation"},","),n(" name"),e("span",{class:"token punctuation"},":"),n(),e("span",{class:"token string-literal"},[e("span",{class:"token string"},'"AppModel"')]),e("span",{class:"token punctuation"},")"),n(`
        config`),e("span",{class:"token punctuation"},"."),n("userContentController "),e("span",{class:"token operator"},"="),n(` userContentController
        `),e("span",{class:"token comment"},"// ä½¿ç”¨æ­¤é…ç½®åˆå§‹åŒ–åˆ›å»º webview"),n(`
        `),e("span",{class:"token keyword"},"let"),n(" webView "),e("span",{class:"token operator"},"="),n(),e("span",{class:"token class-name"},"WKWebView"),e("span",{class:"token punctuation"},"("),n("frame"),e("span",{class:"token punctuation"},":"),n(" view"),e("span",{class:"token punctuation"},"."),n("bounds"),e("span",{class:"token punctuation"},","),n(" configuration"),e("span",{class:"token punctuation"},":"),n(" config"),e("span",{class:"token punctuation"},")"),n(`
        view`),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"addSubview"),e("span",{class:"token punctuation"},"("),n("webView"),e("span",{class:"token punctuation"},")"),n(`
    `),e("span",{class:"token punctuation"},"}"),n(`
`),e("span",{class:"token punctuation"},"}"),n(`
`),e("span",{class:"token comment"},"// å®ç° WKScriptMessageHandler åè®®ï¼Œå¹¶å®ç°å…¶æ–¹æ³•"),n(`
`),e("span",{class:"token keyword"},"extension"),n(),e("span",{class:"token class-name"},"ViewController"),e("span",{class:"token punctuation"},":"),n(),e("span",{class:"token class-name"},"WKScriptMessageHandler"),n(),e("span",{class:"token punctuation"},"{"),n(`
    `),e("span",{class:"token keyword"},"func"),n(),e("span",{class:"token function-definition function"},"userContentController"),e("span",{class:"token punctuation"},"("),e("span",{class:"token omit keyword"},"_"),n(" userContentController"),e("span",{class:"token punctuation"},":"),n(),e("span",{class:"token class-name"},"WKUserContentController"),e("span",{class:"token punctuation"},","),n(" didReceive message"),e("span",{class:"token punctuation"},":"),n(),e("span",{class:"token class-name"},"WKScriptMessage"),e("span",{class:"token punctuation"},")"),n(),e("span",{class:"token punctuation"},"{"),n(`
        `),e("span",{class:"token keyword"},"if"),n(" message"),e("span",{class:"token punctuation"},"."),n("name "),e("span",{class:"token operator"},"=="),n(),e("span",{class:"token string-literal"},[e("span",{class:"token string"},'"AppModel"')]),n(),e("span",{class:"token punctuation"},"{"),n(`
            `),e("span",{class:"token function"},"print"),e("span",{class:"token punctuation"},"("),e("span",{class:"token string-literal"},[e("span",{class:"token string"},'"Message received: '),e("span",{class:"token interpolation-punctuation punctuation"},"\\("),e("span",{class:"token interpolation"},[n("message"),e("span",{class:"token punctuation"},"."),n("body")]),e("span",{class:"token interpolation-punctuation punctuation"},")"),e("span",{class:"token string"},'"')]),e("span",{class:"token punctuation"},")"),n(`
            `),e("span",{class:"token comment"},"// åœ¨æ­¤å¤„è§£æ message.body ä¸­çš„å†…å®¹ï¼Œå¹¶åšå‡ºç›¸åº”çš„æ“ä½œ"),n(`
        `),e("span",{class:"token punctuation"},"}"),n(`
    `),e("span",{class:"token punctuation"},"}"),n(`
`),e("span",{class:"token punctuation"},"}"),n(`

`),e("span",{class:"token comment"},"// JavaScript ç«¯"),n(`
`),e("span",{class:"token comment"},"// ç‚¹å‡»æŒ‰é’®è°ƒç”¨ native æ–¹æ³•"),n(`
function `),e("span",{class:"token function"},"callNative"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},")"),n(),e("span",{class:"token punctuation"},"{"),n(`
    window`),e("span",{class:"token punctuation"},"."),n("webkit"),e("span",{class:"token punctuation"},"."),n("messageHandlers"),e("span",{class:"token punctuation"},"."),e("span",{class:"token class-name"},"AppModel"),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"postMessage"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},"{"),n("body"),e("span",{class:"token punctuation"},":"),n(" '"),e("span",{class:"token class-name"},"Hello"),e("span",{class:"token punctuation"},","),n(),e("span",{class:"token class-name"},"Native"),e("span",{class:"token operator"},"!"),n("'"),e("span",{class:"token punctuation"},"}"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),n(`
`),e("span",{class:"token punctuation"},"}"),n(`
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),y=e("div",{class:"language-swift line-numbers-mode","data-ext":"swift"},[e("pre",{class:"language-swift"},[e("code",null,[e("span",{class:"token comment"},"// å‘ JS æ³¨å…¥ä»£ç "),n(`
`),e("span",{class:"token keyword"},"let"),n(" script "),e("span",{class:"token operator"},"="),n(),e("span",{class:"token class-name"},"WKUserScript"),e("span",{class:"token punctuation"},"("),n("source"),e("span",{class:"token punctuation"},":"),n(),e("span",{class:"token string-literal"},[e("span",{class:"token string"},`"alert('Hello, JS!')"`)]),e("span",{class:"token punctuation"},","),n(" injectionTime"),e("span",{class:"token punctuation"},":"),n(),e("span",{class:"token punctuation"},"."),n("atDocumentEnd"),e("span",{class:"token punctuation"},","),n(" forMainFrameOnly"),e("span",{class:"token punctuation"},":"),n(),e("span",{class:"token boolean"},"false"),e("span",{class:"token punctuation"},")"),n(`
webView`),e("span",{class:"token punctuation"},"."),n("configuration"),e("span",{class:"token punctuation"},"."),n("userContentController"),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"addUserScript"),e("span",{class:"token punctuation"},"("),n("script"),e("span",{class:"token punctuation"},")"),n(`

`),e("span",{class:"token comment"},"// è°ƒç”¨ JS æ–¹æ³•"),n(`
webView`),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"evaluateJavaScript"),e("span",{class:"token punctuation"},"("),e("span",{class:"token string-literal"},[e("span",{class:"token string"},'"doSomething();"')]),e("span",{class:"token punctuation"},","),n(" completionHandler"),e("span",{class:"token punctuation"},":"),n(),e("span",{class:"token punctuation"},"{"),n(),e("span",{class:"token punctuation"},"("),n("result"),e("span",{class:"token punctuation"},","),n(" error"),e("span",{class:"token punctuation"},")"),n(),e("span",{class:"token keyword"},"in"),n(`
    `),e("span",{class:"token keyword"},"if"),n(),e("span",{class:"token keyword"},"let"),n(" error "),e("span",{class:"token operator"},"="),n(" error "),e("span",{class:"token punctuation"},"{"),n(`
        `),e("span",{class:"token function"},"print"),e("span",{class:"token punctuation"},"("),n("error"),e("span",{class:"token punctuation"},")"),n(`
    `),e("span",{class:"token punctuation"},"}"),n(),e("span",{class:"token keyword"},"else"),n(),e("span",{class:"token punctuation"},"{"),n(`
        `),e("span",{class:"token function"},"print"),e("span",{class:"token punctuation"},"("),e("span",{class:"token string-literal"},[e("span",{class:"token string"},'"Success"')]),e("span",{class:"token punctuation"},")"),n(`
    `),e("span",{class:"token punctuation"},"}"),n(`
`),e("span",{class:"token punctuation"},"}"),e("span",{class:"token punctuation"},")"),n(`
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),C=c("<li><p><code>JavaScriptCore</code>: å¯ä»¥åœ¨ <code>iOS</code> åŸç”Ÿåº”ç”¨ä¸ <code>JavaScript</code> ä¹‹é—´ç›¸äº’æ‰ç”¨ï¼ŒåŒ…æ‹¬é€šè¿‡ <code>JSContext</code> å¯¹è±¡è½½å…¥ <code>JS</code> ä»£ç ï¼Œä½¿ <code>JS</code> èƒ½ç›´æ¥è®¿é—® <code>native</code> å¯¹è±¡çš„ç±»å’Œå®ä¾‹æ–¹æ³•ã€‚</p></li><li><p>ä½¿ç”¨æ··åˆå¼€å‘æ¡†æ¶ï¼šå¦‚ <code>React-Native</code>, <code>Ionic</code> ç­‰ã€‚åœ¨è¿™äº›æ¡†æ¶ä¸­ï¼Œé€šå¸¸æœ‰ä¸€å¥—æˆç†Ÿçš„æœºåˆ¶æ¥å®Œæˆ <code>JS</code> å’Œ <code>iOS</code> ä¹‹é—´çš„è°ƒç”¨ï¼Œæ¯”å¦‚ <code>React-Native</code> ä¸­çš„ <code>Bridge</code> æ¨¡å—ï¼Œ<code>Ionic</code> ä¸­çš„ <code>Cordova</code> æ’ä»¶ç­‰ã€‚</p></li>",2),K=c('<h3 id="â“js-äº¤äº’å‰ç«¯ä»£ç -android-å’Œ-ios-ä¸ºä»€ä¹ˆè¦å†™ä¸¤å¥—-æœ‰åŠæ³•ä¸€å¥—è§£å†³å—" tabindex="-1"><a class="header-anchor" href="#â“js-äº¤äº’å‰ç«¯ä»£ç -android-å’Œ-ios-ä¸ºä»€ä¹ˆè¦å†™ä¸¤å¥—-æœ‰åŠæ³•ä¸€å¥—è§£å†³å—" aria-hidden="true">#</a> â“<code>js</code> äº¤äº’å‰ç«¯ä»£ç  <code>Android</code> å’Œ <code>iOS</code> ä¸ºä»€ä¹ˆè¦å†™ä¸¤å¥—ï¼Œæœ‰åŠæ³•ä¸€å¥—è§£å†³å—</h3><details class="hint-container details"><summary>ğŸ’¡</summary><ul><li><p>ä» <code>JavaScript</code> è°ƒç”¨åŸç”Ÿä»£ç </p><ul><li><p>åœ¨ <code>Android</code> ä¸­ï¼Œé€šå¸¸æ˜¯åœ¨ <code>Java</code> ä»£ç ä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶å°†å…¶æ³¨å…¥åˆ° <code>WebView</code> ä¸­ï¼Œç„¶ååœ¨ <code>JavaScript</code> ä¸­ä½¿ç”¨è¯¥å¯¹è±¡çš„åç§°è°ƒç”¨å…¶æ–¹æ³•ã€‚</p></li><li><p>åœ¨ <code>iOS</code> ä¸­ï¼Œ<code>JavaScript</code> å¯ä»¥é€šè¿‡è°ƒç”¨ <code>webkit.messageHandlers.&lt;name&gt;.postMessage(&lt;messageBody&gt;)</code> æ¥è°ƒç”¨åŸç”Ÿä»£ç ï¼Œç„¶ååœ¨åŸç”Ÿä»£ç ä¸­å®ç°ç›¸åº”çš„ <code>WKScriptMessageHandler</code> çš„ <code>didReceive</code> æ–¹æ³•æ¥æ¥æ”¶è¿™ä¸ªè°ƒç”¨ã€‚</p></li></ul></li><li><p>ä»åŸç”Ÿä»£ç è°ƒç”¨ <code>JavaScript</code>ï¼š<code>Android</code> å’Œ <code>iOS</code> éƒ½æ˜¯é€šè¿‡åœ¨åŸç”Ÿä»£ç ä¸­æ‰§è¡Œ <code>JavaScript</code> å­—ç¬¦ä¸²æ¥å®ç°çš„ã€‚</p></li></ul><p>ç»Ÿä¸€æ–¹æ¡ˆï¼š</p><ul><li><p>å¯ä»¥é€šè¿‡ä¸€äº›é€šç”¨çš„è®¾è®¡æ¨¡å¼æˆ–è€…å·¥å…·æ¥ä½¿å¾— <code>JavaScript</code> ç«¯çš„ä»£ç å°½å¯èƒ½ä¸€è‡´ã€‚</p><blockquote><p>ä¾‹å¦‚ï¼Œå¯ä»¥åœ¨ <code>JavaScript</code> ä¸­å°è£…ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œæ ¹æ®ä¸åŒçš„å¹³å°è°ƒç”¨ä¸åŒçš„åº•å±‚æ–¹æ³•ï¼Œç„¶ååœ¨è¿™ä¸ªæ¥å£ä¸Šå±‚æä¾›ç»Ÿä¸€çš„ <code>API</code> ç»™å…¶ä»– <code>JavaScript</code> ä»£ç ä½¿ç”¨ã€‚</p></blockquote></li><li><p>ä½¿ç”¨ç¬¬ä¸‰æ–¹è·¨å¹³å°å·¥å…·ï¼Œå¦‚ <code>React Native</code>ã€<code>Cordova</code> ç­‰ï¼Œå®ƒä»¬æä¾›äº†ç»Ÿä¸€çš„ <code>JavaScript API</code> æ¥è°ƒç”¨åŸç”ŸåŠŸèƒ½ï¼Œå¹¶å°†åº•å±‚çš„ <code>Android</code> å’Œ <code>iOS</code> çš„å·®å¼‚å°è£…èµ·æ¥ï¼Œä½¿å¾—å¯ä»¥ç”¨ä¸€å¥— <code>JavaScript</code> ä»£ç æ¥å¼€å‘ <code>Android</code> å’Œ <code>iOS</code> åº”ç”¨ã€‚</p></li></ul></details>',2);function A(U,_){const t=p("CodeTabs");return d(),u("div",null,[r(" more "),m,e("details",b,[w,i(t,{id:"63",data:[{id:"iOS(Swift)"},{id:"Android(Java)"}]},{title0:s(({value:a,isActive:o})=>[n("iOS(Swift)")]),title1:s(({value:a,isActive:o})=>[n("Android(Java)")]),tab0:s(({value:a,isActive:o})=>[v]),tab1:s(({value:a,isActive:o})=>[g]),_:1},8,["data"])]),W,e("details",h,[f,e("ul",null,[e("li",null,[V,i(t,{id:"380",data:[{id:"js -> swift"},{id:"swift -> js"}]},{title0:s(({value:a,isActive:o})=>[n("js -> swift")]),title1:s(({value:a,isActive:o})=>[n("swift -> js")]),tab0:s(({value:a,isActive:o})=>[S]),tab1:s(({value:a,isActive:o})=>[y]),_:1})]),C])]),K])}const q=l(k,[["render",A],["__file","0x16.web.html.vue"]]);export{q as default};
