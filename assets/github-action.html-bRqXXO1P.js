import{_ as l}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as o,o as p,c as i,a as c,b as n,e as s,d as e,f as t}from"./app-HKAFCGrh.js";const u={},r=n("h2",{id:"reference",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#reference","aria-hidden":"true"},"#"),s(" reference")],-1),d={href:"https://github.com/actions",target:"_blank",rel:"noopener noreferrer"},k=n("blockquote",null,[n("p",null,"Automate your GitHub workflows")],-1),m=n("h2",{id:"github-token",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#github-token","aria-hidden":"true"},"#"),s(" GITHUB_TOKEN")],-1),v=n("h2",{id:"actions",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#actions","aria-hidden":"true"},"#"),s(" Actions")],-1),b={href:"https://github.com/marketplace",target:"_blank",rel:"noopener noreferrer"},h=n("blockquote",null,[n("p",null,"Extend GitHub, Find tools to improve your workflow")],-1),g={href:"https://github.com/sdras/awesome-actions",target:"_blank",rel:"noopener noreferrer"},_=n("blockquote",null,[n("p",null,"A curated list of awesome actions to use on GitHub")],-1),y=n("h3",{id:"部署到-github-pages",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#部署到-github-pages","aria-hidden":"true"},"#"),s(" 部署到 "),n("code",null,"GitHub Pages")],-1),f={href:"https://github.com/crazy-max/ghaction-github-pages",target:"_blank",rel:"noopener noreferrer"},G=n("blockquote",null,null,-1),E=n("p",null,[s("登录 GitHub 进入项目 "),n("code",null,"Settings->Actions->General->Workflow permissions"),s(" 修改为 "),n("code",null,"Read and write permissions")],-1),T=n("h3",{id:"同步-github-到-gitee",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#同步-github-到-gitee","aria-hidden":"true"},"#"),s(" 同步 "),n("code",null,"GitHub"),s(" 到 "),n("code",null,"Gitee")],-1),q={href:"https://github.com/Yikun/hub-mirror-action",target:"_blank",rel:"noopener noreferrer"},x=n("blockquote",null,null,-1),A=t(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 1&gt; 创建 ssh 秘钥对 </span>
$ ssh-keygen <span class="token parameter variable">-t</span> ed25519 <span class="token parameter variable">-C</span> <span class="token string">&quot;xxx@email.com&quot;</span> <span class="token parameter variable">-f</span> ~/.ssh/github-sync-to-gitee
<span class="token comment"># 2&gt; 查看生成公钥</span>
$ <span class="token function">cat</span> ~/.ssh/github-sync-to-gitee.pub
<span class="token comment"># 3&gt; 登录 Gitee \`设置-&gt;安全设置-&gt;SSH公钥\` 添加同步公钥</span>
<span class="token comment"># 4&gt; 查看生成私钥</span>
$ <span class="token function">cat</span> ~/.ssh/github-sync-to-gitee
<span class="token comment"># 5&gt; 登录 GitHub 进入项目 \`Settings-&gt;Security-&gt;Secrets and variabls-&gt;Actions\` </span>
<span class="token comment">#    添加 repository secret 环境变量 (Name: GITEE_PRIVATE_KEY | Secret: 私钥)</span>
<span class="token comment"># 6&gt; 回到 Gitee \`设置-&gt;安全设置-&gt;私人令牌\` 创建 Gitee 令牌</span>
<span class="token comment"># 7&gt; 回到 GitHub 继续添加 repository secret 环境变量 (Name: GITEETOKEN | Secret: 创建的 Gitee 令牌)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> sync<span class="token punctuation">-</span>to<span class="token punctuation">-</span>gitee
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token comment"># 当 push 指定分支时触发 sync </span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span> 
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> main
      <span class="token punctuation">-</span> gh<span class="token punctuation">-</span>pages
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">repo-sync</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Mirror the Github organization repos to Gitee.
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> Yikun/hub<span class="token punctuation">-</span>mirror<span class="token punctuation">-</span>action@master
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">src</span><span class="token punctuation">:</span> <span class="token string">&quot;github/naijoug&quot;</span>
          <span class="token key atrule">dst</span><span class="token punctuation">:</span> <span class="token string">&quot;gitee/naijoug&quot;</span>
          <span class="token key atrule">dst_key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITEE_PRIVATE_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">dst_token</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITEE_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">static_list</span><span class="token punctuation">:</span> <span class="token string">&quot;docs&quot;</span> 
          <span class="token key atrule">force_update</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">debug</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="打包-flutter-程序并上传到-telegram" tabindex="-1"><a class="header-anchor" href="#打包-flutter-程序并上传到-telegram" aria-hidden="true">#</a> 打包 <code>Flutter</code> 程序并上传到 <code>Telegram</code></h3>`,3),w={href:"https://github.com/subosito/flutter-action",target:"_blank",rel:"noopener noreferrer"},H=n("blockquote",null,[n("p",null,"Flutter environment for use in GitHub Actions. It works on Linux, Windows, and macOS.")],-1),S={href:"https://github.com/appleboy/telegram-action",target:"_blank",rel:"noopener noreferrer"},N=n("blockquote",null,[n("p",null,"GitHub Action that sends a Telegram message.")],-1),$=t(`<div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy apk to Telegram

<span class="token comment"># beta 分支触发</span>
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> beta <span class="token punctuation">]</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest

    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>java@v2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">distribution</span><span class="token punctuation">:</span> <span class="token string">&#39;zulu&#39;</span>
          <span class="token key atrule">java-version</span><span class="token punctuation">:</span> <span class="token string">&#39;11&#39;</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> subosito/flutter<span class="token punctuation">-</span>action@v2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">flutter-version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.16.0&#39;</span> <span class="token comment"># Flutter 版本</span>
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> flutter pub get
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> flutter build apk <span class="token comment"># 打包 Android apk</span>
      
      <span class="token comment"># 获取时间戳信息</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Get the date
        <span class="token key atrule">id</span><span class="token punctuation">:</span> date
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string"> 
          echo &quot;::set-output name=build-date::$(TZ=Asia/Shanghai date +&#39;%Y-%m-%d %H:%M:%S&#39;)&quot;
          echo &quot;::set-output name=apk-date::$(TZ=Asia/Shanghai date +&#39;%Y%m%d-%H%M%S&#39;)&quot;</span>
    
      <span class="token comment"># 根据时间戳重命名 apk</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Rename APK
        <span class="token key atrule">run</span><span class="token punctuation">:</span> mv ./build/app/outputs/flutter<span class="token punctuation">-</span>apk/app<span class="token punctuation">-</span>release.apk ./build/app/outputs/flutter<span class="token punctuation">-</span>apk/app<span class="token punctuation">-</span>$<span class="token punctuation">{</span><span class="token punctuation">{</span> steps.date.outputs.apk<span class="token punctuation">-</span>date <span class="token punctuation">}</span><span class="token punctuation">}</span>.apk

      <span class="token comment"># 上传到 Telegram </span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Upload to Telegram
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> appleboy/telegram<span class="token punctuation">-</span>action@master
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">to</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.TELEGRAM_TO <span class="token punctuation">}</span><span class="token punctuation">}</span>        <span class="token comment"># TELEGRAM_TO    : 需要发送的用户或者群组的 ID</span>
          <span class="token key atrule">token</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.TELEGRAM_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>  <span class="token comment"># TELEGRAM_TOKEN : 发送 bot 的 token</span>
          <span class="token key atrule">message</span><span class="token punctuation">:</span> <span class="token string">&quot;New build (\${{ steps.date.outputs.build-date }}) available.&quot;</span>
          <span class="token key atrule">document</span><span class="token punctuation">:</span> ./build/app/outputs/flutter<span class="token punctuation">-</span>apk/app<span class="token punctuation">-</span>$<span class="token punctuation">{</span><span class="token punctuation">{</span> steps.date.outputs.apk<span class="token punctuation">-</span>date <span class="token punctuation">}</span><span class="token punctuation">}</span>.apk
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1);function I(K,M){const a=o("ExternalLinkIcon");return p(),i("div",null,[c(" more "),r,n("ul",null,[n("li",null,[n("a",d,[s("GitHub Actions"),e(a)]),k])]),m,v,n("ul",null,[n("li",null,[n("a",b,[s("GitHub Marketplace"),e(a)]),h]),n("li",null,[n("a",g,[s("awesome-actions"),e(a)]),_])]),y,n("ul",null,[n("li",null,[n("p",null,[n("a",f,[s("ghaction-github-pages"),e(a)])]),G,E])]),T,n("ul",null,[n("li",null,[n("a",q,[s("hub-mirror-action"),e(a)]),x])]),A,n("ul",null,[n("li",null,[n("a",w,[s("flutter-action"),e(a)]),H]),n("li",null,[n("a",S,[s("telegram-action"),e(a)]),N])]),$])}const L=l(u,[["render",I],["__file","github-action.html.vue"]]);export{L as default};
