import{_ as e}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as t,o,c,a as p,b as n,e as i,d as l,f as a}from"./app-8mRKGi0B.js";const u={},d=a(`<h2 id="â“å¦‚ä½•è‡ªå·±é«˜æ•ˆå®ç°-nsuserdefault" tabindex="-1"><a class="header-anchor" href="#â“å¦‚ä½•è‡ªå·±é«˜æ•ˆå®ç°-nsuserdefault" aria-hidden="true">#</a> â“å¦‚ä½•è‡ªå·±é«˜æ•ˆå®ç° <code>NSUserDefault</code></h2><details class="hint-container details"><summary>ğŸ’¡</summary><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="language-objc"><code><span class="token keyword">@interface</span> MyUserDefault <span class="token punctuation">:</span> NSObject
<span class="token operator">+</span> <span class="token punctuation">(</span>instancetype<span class="token punctuation">)</span>defaultUser<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>setValue<span class="token punctuation">:</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>value forKey<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>key<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>valueForKey<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>key<span class="token punctuation">;</span>
<span class="token keyword">@end</span>

<span class="token keyword">@interface</span> <span class="token function">MyUserDefault</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">@property</span> <span class="token punctuation">(</span>nonatomic<span class="token punctuation">,</span> strong<span class="token punctuation">)</span> NSMutableDictionary <span class="token operator">*</span>userDict<span class="token punctuation">;</span>
<span class="token keyword">@property</span> <span class="token punctuation">(</span>nonatomic<span class="token punctuation">,</span> strong<span class="token punctuation">)</span> NSString <span class="token operator">*</span>filePath<span class="token punctuation">;</span>
<span class="token keyword">@end</span>

<span class="token keyword">@implementation</span> MyUserDefault

<span class="token operator">+</span> <span class="token punctuation">(</span>instancetype<span class="token punctuation">)</span>defaultUser <span class="token punctuation">{</span>
    <span class="token keyword">static</span> MyUserDefault <span class="token operator">*</span>user <span class="token operator">=</span> nil<span class="token punctuation">;</span>
    <span class="token keyword">static</span> dispatch_once_t onceToken<span class="token punctuation">;</span>
    <span class="token function">dispatch_once</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>onceToken<span class="token punctuation">,</span> <span class="token operator">^</span><span class="token punctuation">{</span>
        user <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">self</span> alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> user<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span>instancetype<span class="token punctuation">)</span>init<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">self</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">super</span> init<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        NSArray <span class="token operator">*</span>doc <span class="token operator">=</span> <span class="token function">NSSearchPathForDirectoriesInDomains</span><span class="token punctuation">(</span>NSDocumentDirectory<span class="token punctuation">,</span> NSUserDomainMask<span class="token punctuation">,</span> YES<span class="token punctuation">)</span><span class="token punctuation">;</span>
        NSString <span class="token operator">*</span>path <span class="token operator">=</span> <span class="token punctuation">[</span>doc objectAtIndex<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        _filePath <span class="token operator">=</span> <span class="token punctuation">[</span>path stringByAppendingPathComponent<span class="token punctuation">:</span><span class="token string">@&quot;userinfo.dat&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        NSData <span class="token operator">*</span>readData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>NSData alloc<span class="token punctuation">]</span> initWithContentsOfFile<span class="token punctuation">:</span>_filePath<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// NSKeyedUnarchiver ååºåˆ—åŒ–è¯»å–æ•°æ®</span>
        _userDict <span class="token operator">=</span> <span class="token punctuation">[</span>NSKeyedUnarchiver unarchiveObjectWithData<span class="token punctuation">:</span>readData<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_userDict<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            _userDict <span class="token operator">=</span> <span class="token punctuation">[</span>NSMutableDictionary dictionary<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">self</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>setValue<span class="token punctuation">:</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>value forKey<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>key <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>_userDict setValue<span class="token punctuation">:</span>value forKey<span class="token punctuation">:</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span> save<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>valueForKey<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>key <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>_userDict valueForKey<span class="token punctuation">:</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>save <span class="token punctuation">{</span>
    <span class="token comment">// ä½¿ç”¨ NSKeyedArchiver åºåˆ—åŒ–ä¿å­˜æ•°æ®</span>
    NSData <span class="token operator">*</span>data <span class="token operator">=</span> <span class="token punctuation">[</span>NSKeyedArchiver archivedDataWithRootObject<span class="token punctuation">:</span>_userDict<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>data writeToFile<span class="token punctuation">:</span>_filePath atomically<span class="token punctuation">:</span>YES<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">@end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="â“fmdb-vs-coredata-vs-swiftdata" tabindex="-1"><a class="header-anchor" href="#â“fmdb-vs-coredata-vs-swiftdata" aria-hidden="true">#</a> â“<code>FMDB</code> vs <code>CoreData</code> vs <code>SwiftData</code></h2><details class="hint-container details"><summary>ğŸ’¡</summary><ul><li><p><code>FMDB</code>ï¼šæ˜¯ä¸€ä¸ªç”¨ <code>Objective-C</code> ç¼–å†™çš„ <code>SQLite</code> æ•°æ®åº“çš„å°è£…åº“ã€‚ã€‚å®ƒæä¾›çš„æ¥å£ç›¸æ¯” <code>SQLite</code> çš„ <code>C API</code> æ›´å®¹æ˜“ä½¿ç”¨ã€‚</p></li><li><p><code>CoreData</code>ï¼šæ˜¯ <code>Apple</code> å¼€å‘çš„ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æŒä¹…åŒ–å­˜å‚¨æ¡†æ¶ã€‚è™½ç„¶ç”¨èµ·æ¥å¤æ‚ä¸€äº›ï¼Œä½†æ˜¯å®ƒæä¾›äº†è®¸å¤šåƒå¯¹è±¡å…³ç³»æ˜ å°„(<code>ORM</code>)è¿™æ ·çš„é«˜çº§åŠŸèƒ½ã€‚å¯ä»¥ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼æ¥å¤„ç†æ•°æ®ï¼Œä¹Ÿèƒ½ä½¿ç”¨åˆ° <code>CoreData</code> çš„ä¸€äº›ç‰¹æ€§ï¼Œä¾‹å¦‚ç‰ˆæœ¬ç®¡ç†ã€æ¨¡å‹è¿ç§»ã€æ’¤é”€å’Œæ¢å¤ç­‰ã€‚</p></li><li><p><code>SwiftData</code>ï¼š<code>iOS 17 </code> ä¸­å¼•å…¥çš„è¾ƒæ–°çš„æ¡†æ¶ã€‚<code>SwiftData</code> å»ºç«‹åœ¨ <code>CoreData</code> ä¹‹ä¸Šï¼Œæä¾›äº†æ›´ç°ä»£åŒ–å’Œå¯¹ <code>Swift</code> æ›´å‹å¥½çš„ <code>API</code>ã€‚å®ƒæ¯” <code>CoreData</code> æ›´é«˜æ•ˆï¼Œå¹¶ä¸”ä¸ <code>SwiftUI</code> æ— ç¼é›†æˆã€‚</p></li></ul></details><h2 id="â“coredata-çš„åº•å±‚å®ç°" tabindex="-1"><a class="header-anchor" href="#â“coredata-çš„åº•å±‚å®ç°" aria-hidden="true">#</a> â“<code>CoreData</code> çš„åº•å±‚å®ç°</h2><details class="hint-container details"><summary>ğŸ’¡</summary><p><code>CoreData</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ <code>iOS</code> æŒä¹…åŒ–æ¡†æ¶ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ <code>macOS</code> çš„æ•°æ®æŒä¹…åŒ–æ¡†æ¶ã€‚å®ƒå¤„ç†çš„èŒƒå›´ç›¸å½“å¹¿ï¼ŒåŒ…æ‹¬å›¾å½¢æ•°æ®æ¨¡å‹åŒ–ã€å±æ€§ç±»å‹æ£€æŸ¥ã€å¯¹è±¡å›¾ç®¡ç†å’ŒæŒä¹…åŒ–ã€æ•°æ®å˜æ›´å’Œç‰ˆæœ¬æ§åˆ¶ã€çµæ´»çš„æŸ¥è¯¢è¯­å¥ä»¥åŠ <code>iCloud</code> é›†æˆç­‰ã€‚</p><p><code>CoreData</code>å¹¶ä¸æ˜¯ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ï¼Œ<code>SQLite</code> åªæ˜¯å®ƒåº•å±‚çš„æŒä¹…åŒ–æ–¹å¼ä¹‹ä¸€ã€‚ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–çš„å­˜å‚¨æ–¹å¼ï¼Œå¦‚<code>XML</code>ã€äºŒè¿›åˆ¶ç­‰ã€‚å…¶å® <code>CoreData</code> æ›´åƒæ˜¯ä¸€ä¸ª <code>ORM</code>ï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†æ¶ã€‚</p><ul><li><p><code>NSManagedObjectModel</code>: æ‰˜ç®¡å¯¹è±¡æ¨¡å‹</p><blockquote><p>è¿™æ˜¯æ ¸å¿ƒæ•°æ®çš„æ•°æ®æ¨¡å‹ï¼Œç”¨æ¥å®šä¹‰åœ¨å½“å‰åº”ç”¨çš„å¯¹è±¡å…³ç³»æ˜ å°„çš„åç§°ã€å±æ€§ã€æ•°æ®ç±»å‹ã€‚</p></blockquote></li><li><p><code>NSPersistentStoreCoordinator</code>: æŒä¹…æ€§å­˜å‚¨åè°ƒè€…</p><blockquote><p>ç”¨äºåè°ƒæ¥è‡ªå¯¹è±¡ä¸Šä¸‹æ–‡çš„è¯·æ±‚ï¼Œå¹¶å°†è¿™äº›è¯·æ±‚è·¯ç”±åˆ°é€‚å½“çš„æŒä¹…æ€§å­˜å‚¨åŒºã€‚</p></blockquote></li><li><p><code>NSManagedObjectContext</code>: æ‰˜ç®¡å¯¹è±¡ä¸Šä¸‹æ–‡</p><blockquote><p>å¤„ç†çš„æ‰€æœ‰å¯¹è±¡åŸºæœ¬ä¸Šéƒ½å±äºæŸä¸ªå¯¹è±¡ä¸Šä¸‹æ–‡ã€‚æ‰€æœ‰çš„åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤æ“ä½œéƒ½åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¹‹ä¸­æ“ä½œã€‚</p></blockquote></li></ul><p>å·¥ä½œæµç¨‹ï¼šä»æ‰˜ç®¡å¯¹è±¡ä¸Šä¸‹æ–‡ (<code>NSManagedObjectContext</code>) ä¸­è¯·æ±‚å¯¹è±¡ï¼Œé€šè¿‡å¯¹è±¡çš„å¢åˆ æ”¹æŸ¥ï¼Œç„¶åè¿”å›åˆ°æ‰˜ç®¡å¯¹è±¡ä¸Šä¸‹æ–‡ä¸­ã€‚å½“éœ€è¦ä¿å­˜æ•°æ®çš„æ—¶å€™ï¼Œå°±ä¼šæŠŠæ‰˜ç®¡å¯¹è±¡ä¸Šä¸‹æ–‡çš„å˜åŒ–æŒä¹…åŒ–åˆ°å­˜å‚¨åè°ƒå™¨ (<code>NSPersistentStoreCoordinator</code>)ï¼Œå­˜å‚¨åè°ƒå™¨å†æŠŠè¿™äº›å˜åŒ–ä¿å­˜åˆ°æŒä¹…åŒ–å­˜å‚¨å™¨ (<code>Persistent Store</code>) ä¸­ï¼Œä¾‹å¦‚ <code>SQLite</code> æ•°æ®åº“ã€‚</p></details><h2 id="â“swiftdata-çš„åº•å±‚å®ç°" tabindex="-1"><a class="header-anchor" href="#â“swiftdata-çš„åº•å±‚å®ç°" aria-hidden="true">#</a> â“<code>SwiftData</code> çš„åº•å±‚å®ç°</h2>`,7),r={class:"hint-container details"},k=n("summary",null,"ğŸ’¡",-1),v={href:"https://developer.apple.com/documentation/swiftdata",target:"_blank",rel:"noopener noreferrer"},m=a('<h2 id="â“realm-äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#â“realm-äº†è§£å—" aria-hidden="true">#</a> â“<code>realm</code> äº†è§£å—</h2><details class="hint-container details"><summary>ğŸ’¡</summary><blockquote><p><code>Realm</code> æ˜¯ä¸€ä¸ªç”¨äºç§»åŠ¨è®¾å¤‡çš„æ•°æ®åº“ï¼Œå¹¶éä»…é™äº <code>iOS</code>ï¼Œä¹Ÿå¯ä»¥ç”¨äº <code>Android</code>ã€‚å®ƒæ˜¯ç”¨ <code>C++</code> ç¼–å†™çš„ï¼Œç„¶åä¸ºä¸åŒçš„å¹³å°å’Œè¯­è¨€æä¾›æ¥å£ï¼Œæ¯”å¦‚ <code>Swift</code> å’Œ <code>Objctive-C</code> ä»¥åŠ <code>Java</code> ç­‰ã€‚<code>Realm</code> çš„ç›®æ ‡æ˜¯æä¾›æ¯” <code>Core Data</code> å’Œ <code>SQLite</code> æ›´ç®€å•ã€æ›´å¿«é€Ÿçš„æŒä¹…åŒ–å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚</p></blockquote><ul><li>é¢å‘å¯¹è±¡çš„æ•°æ®åº“</li><li>è·¨å¹³å°ã€‚è¿™æ„å‘³ç€ä½ åœ¨ä¸€ä¸ªå¹³å°ä¸Šä¿å­˜çš„æ•°æ®å¯ä»¥åœ¨å…¶ä»–å¹³å°ä½¿ç”¨ã€‚</li><li>æ˜“äºä½¿ç”¨ï¼Œå¯¹è±¡æŒä¹…åŒ–çš„è¿‡ç¨‹æå…¶ç®€å•ï¼Œåªéœ€è¦è¿›è¡Œç®€å•çš„è¯»å†™æ“ä½œã€‚</li><li>æ€§èƒ½å‡ºè‰²ï¼Œå®ƒçš„è¯»å†™é€Ÿåº¦å¸¸å¸¸è¶…è¿‡ <code>SQLite</code> å’Œ <code>CoreData</code>ã€‚</li><li>æ”¯æŒå…³è”ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨å¯¹è±¡ä¹‹é—´åˆ›å»ºå…³è”å…³ç³»ã€‚</li><li>æ•°æ®åŠ å¯†ï¼Œæä¾›äº†<code>256-bit AES</code>åŠ å¯†æ¥ä¿æŠ¤ä½ çš„æ•°æ®å®‰å…¨ã€‚</li><li>è¿˜å…·æœ‰å®æ—¶è‡ªåŠ¨æ›´æ–°ã€æ•°æ®è¿ç§»æ”¯æŒã€çº¿ç¨‹å®‰å…¨æ€§å’Œå¯è§†åŒ–ç¼–è¾‘å™¨ç­‰ç‹¬ç‰¹çš„ä¼˜ç‚¹ã€‚</li></ul></details>',2);function b(h,y){const s=t("ExternalLinkIcon");return o(),c("div",null,[p(" more "),d,n("details",r,[k,n("p",null,[n("a",v,[i("SwiftData"),l(s)])])]),m])}const D=e(u,[["render",b],["__file","0x09.store.html.vue"]]);export{D as default};
